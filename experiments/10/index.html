<!doctype html>
<html>

<head>
    <title>vega</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../../css/app.css" />
</head>

<body data-config='{"debug":true,"element":"app","specs":[{"$schema":"https:\/\/vega.github.io\/schema\/vega\/v3.0.json","description":"scatterplot","width":900,"height":600,"padding":{"left":40,"top":20,"right":20,"bottom":20},"autosize":"none","config":{"axis":{"domainColor":"white","gridColor":"white","labelColor":"white","tickColor":"white"}},"axes":[{"scale":"x","grid":false,"domain":true,"orient":"bottom","tickCount":5,"title":"reports"},{"scale":"y","grid":false,"domain":true,"orient":"left","titlePadding":5,"title":"fillperc"}],"scales":[{"name":"x","type":"linear","domain":[0,100],"range":"width"},{"name":"y","type":"linear","domain":{"data":"reports","field":"dumps"},"range":"height"},{"name":"size","type":"linear","domain":{"data":"reports","field":"reports"},"range":[1,1000]},{"name":"color","type":"ordinal","range":{"scheme":"tableau20"},"domain":{"data":"reports","field":"name"}}],"signals":[{"name":"detailDomain","value":["2014-01-01T00:00:00.000Z","2015-06-29T23:00:00.000Z"]},{"name":"start_date","update":"toDate(detailDomain[0])"},{"name":"end_date","update":"toDate(detailDomain[1])"},{"name":"zoom","value":13},{"name":"latitude","value":51.927754415374},{"name":"longitude","value":4.3868064880371}],"data":[{"name":"reports","url":"..\/..\/data\/combined.csv","format":{"type":"dsv","delimiter":";","parse":{"dumps":"number","fillperc":"number","reports":"number"}},"transform":[{"type":"formula","as":"date2","expr":"toDate(datum.date)"},{"type":"filter","expr":"datum.date2 >= start_date && datum.date2 <= end_date"},{"type":"aggregate","fields":["reports","dumps","fillperc"],"ops":["sum","sum","average"],"as":["reports","dumps","fillperc"],"groupby":["name","bu_code"]},{"type":"impute","key":"name","field":"fillperc","method":"value","value":0}]}],"marks":[{"name":"marks","type":"symbol","from":{"data":"reports"},"encode":{"update":{"x":{"scale":"x","field":"fillperc"},"y":{"scale":"y","field":"dumps"},"size":{"scale":"size","field":"reports"},"shape":{"value":"circle"},"strokeWidth":{"value":2},"stroke":{"scale":"color","field":"name"},"fill":{"scale":"color","field":"name"}},"enter":{"tooltip":{"field":"name"}},"hover":{"tooltip":{"field":"name"}}}}],"projections":[]},{"$schema":"https:\/\/vega.github.io\/schema\/vega\/v3.0.json","description":"controller","width":900,"height":140,"padding":40,"autosize":"none","config":{"axis":{"domainColor":"white","gridColor":"white","labelColor":"white","tickColor":"white"}},"scales":[{"name":"xOverview","type":"time","range":[0,{"signal":"width"}],"domain":{"data":"reports","field":"date"}},{"name":"yOverview","domain":{"data":"reports","field":"count"},"type":"linear","range":[{"signal":"height"},0]}],"signals":[{"name":"brush","value":0,"on":[{"events":"mousedown","update":"[x(), x()]"},{"events":"[mousedown, window:mouseup] > window:mousemove!","update":"[brush[0], clamp(x(), 0, width)]"},{"events":{"signal":"delta"},"update":"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)"}]},{"name":"anchor","value":null,"on":[{"events":"@brush:mousedown","update":"slice(brush)"}]},{"name":"xdown","value":0,"on":[{"events":"@brush:mousedown","update":"x()"}]},{"name":"delta","value":0,"on":[{"events":"[@brush:mousedown, window:mouseup] > window:mousemove!","update":"x() - xdown"}]},{"name":"detailDomain","value":["2014-01-01T00:00:00.000Z","2015-06-29T23:00:00.000Z"],"on":[{"events":{"signal":"brush"},"update":"span(brush) ? invert(\"xOverview\", brush) : null"}]}],"axes":[{"orient":"bottom","scale":"xOverview"},{"orient":"left","scale":"yOverview"}],"data":[{"name":"reports","url":"..\/..\/data\/combined.csv","format":{"type":"dsv","delimiter":";","parse":{"date":"date"}},"transform":[{"type":"aggregate","groupby":["date"]},{"type":"formula","as":"year_month","expr":"year(datum.date) + \"_\" + month(datum.date)"},{"type":"collect","sort":{"field":"date","order":"ascending"}}]}],"marks":[{"type":"rect","from":{"data":"reports"},"interactive":false,"encode":{"update":{"x":{"scale":"xOverview","field":"date"},"width":{"value":2},"y":{"scale":"yOverview","field":"count"},"y2":{"scale":"yOverview","value":0},"fill":{"value":"steelblue"}}}},{"type":"rect","name":"brush","encode":{"enter":{"y":{"value":0},"height":{"signal":"height"},"fill":{"value":"#333"},"fillOpacity":{"value":0.2}},"update":{"x":{"signal":"brush[0]"},"x2":{"signal":"brush[1]"}}}},{"type":"rect","interactive":false,"encode":{"enter":{"y":{"value":0},"height":{"signal":"height"},"width":{"value":1},"fill":{"value":"firebrick"}},"update":{"x":{"signal":"brush[0]"}}}},{"type":"rect","interactive":false,"encode":{"enter":{"y":{"value":0},"height":{"signal":"height"},"width":{"value":1},"fill":{"value":"yellow"}},"update":{"x":{"signal":"brush[1]"}}}}],"projections":[]}],"runtimes":[{"subscribe":{"signal":"range","as":"detailDomain"},"tooltipOptions":{"showAllFields":false,"fields":[{"formatType":"string","field":"name","title":"buurt"},{"formatType":"number","field":"reports","title":"reports"},{"formatType":"number","field":"dumps","title":"dumps"},{"formatType":"number","field":"fillperc","title":"fillperc"}]}},{"publish":{"signal":"detailDomain","as":"range"}}]}'>
    <script src="./app.bundle.js"></script>
</body>

</html>
