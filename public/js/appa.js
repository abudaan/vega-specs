(function d(c,e,t){function r(i,o){if(!e[i]){if(!c[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=e[i]={exports:{}};c[i][0].call(p.exports,function(t){var e=c[i][1][t];return r(e?e:t)},p,p.exports,d,c,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++)r(t[a]);return r})({1:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function o(e,t,n){for(var r=[],o=t,i;o<n;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],r.push(a(i));return r.join("")}n.byteLength=function(e){return 3*e.length/4-r(e)},n.toByteArray=function(e){var t=e.length,n,a,o,i,s;i=r(e),s=new c(3*t/4-i),a=0<i?t-4:t;var l=0;for(n=0;n<a;n+=4)o=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],s[l++]=255&o>>16,s[l++]=255&o>>8,s[l++]=255&o;return 2===i?(o=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,s[l++]=255&o):1===i&&(o=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,s[l++]=255&o>>8,s[l++]=255&o),s},n.fromByteArray=function(e){for(var t=e.length,n=t%3,r="",a=[],l=16383,d=0,i=t-n,c;d<i;d+=l)a.push(o(e,d,d+l>i?i:d+l));return 1==n?(c=e[t-1],r+=s[c>>2],r+=s[63&c<<4],r+="=="):2==n&&(c=(e[t-2]<<8)+e[t-1],r+=s[c>>10],r+=s[63&c>>4],r+=s[63&c<<2],r+="="),a.push(r),a.join("")};for(var s=[],d=[],c="undefined"==typeof Uint8Array?Array:Uint8Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,i=l.length;p<i;++p)s[p]=l[p],d[l.charCodeAt(p)]=p;d[45]=62,d[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */"use strict";function r(e){if(e>J)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(e)}return a(e,t,n)}function a(e,t,n){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return V(e)?p(e,t,n):"string"==typeof e?d(e,t):u(e)}function i(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function s(e,t,n){return i(e),0>=e?r(e):void 0===t?r(e):"string"==typeof n?r(e).fill(t,n):r(e).fill(t)}function l(e){return i(e),r(0>e?0:0|m(e))}function d(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var n=0|f(e,t),a=r(n),i=a.write(e,t);return i!==n&&(a=a.slice(0,i)),a}function c(e){for(var t=0>e.length?0:0|m(e.length),n=r(t),a=0;a<t;a+=1)n[a]=255&e[a];return n}function p(e,t,n){if(0>t||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=o.prototype,r}function u(e){if(o.isBuffer(e)){var t=0|m(e.length),n=r(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(H(e)||"length"in e)return"number"!=typeof e.length||Y(e.length)?r(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=J)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+J.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(H(e)||V(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0;}}function y(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return w(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0;}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function h(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,Y(n)&&(n=a?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(0>n)if(a)n=0;else return-1;if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){function o(e,t){return 1==s?e[t]:e.readUInt16BE(t*s)}var s=1,l=e.length,d=t.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;s=2,l/=2,d/=2,n/=2}var c;if(a){var i=-1;for(c=n;c<l;c++)if(o(e,c)!==o(t,-1==i?0:c-i))-1!=i&&(c-=c-i),i=-1;else if(-1==i&&(i=c),c-i+1===d)return i*s}else for(n+d>l&&(n=l-d),c=n;0<=c;c--){for(var p=!0,u=0;u<d;u++)if(o(e,c+u)!==o(t,u)){p=!1;break}if(p)return c}return-1}function _(e,t,n,r){n=+n||0;var a=e.length-n;r?(r=+r,r>a&&(r=a)):r=a;var o=t.length;if(0!=o%2)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0,i;s<r;++s){if(i=parseInt(t.substr(2*s,2),16),Y(i))return s;e[n+s]=i}return s}function x(e,t,n,r){return q(U(t,e.length-n),e,n,r)}function v(e,t,n,r){return q($(t),e,n,r)}function S(e,t,n,r){return v(e,t,n,r)}function T(e,t,n,r){return q(W(t),e,n,r)}function k(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function E(e,t,n){n=X(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=239<o?4:223<o?3:191<o?2:1;if(a+s<=n){var l,d,c,p;1==s?128>o&&(i=o):2==s?(l=e[a+1],128==(192&l)&&(p=(31&o)<<6|63&l,127<p&&(i=p))):3==s?(l=e[a+1],d=e[a+2],128==(192&l)&&128==(192&d)&&(p=(15&o)<<12|(63&l)<<6|63&d,2047<p&&(55296>p||57343<p)&&(i=p))):4==s?(l=e[a+1],d=e[a+2],c=e[a+3],128==(192&l)&&128==(192&d)&&128==(192&c)&&(p=(15&o)<<18|(63&l)<<12|(63&d)<<6|63&c,65535<p&&1114112>p&&(i=p))):void 0}null===i?(i=65533,s=1):65535<i&&(i-=65536,r.push(55296|1023&i>>>10),i=56320|1023&i),r.push(i),a+=s}return C(r)}function C(e){var t=e.length;if(t<=ee)return Z.apply(String,e);for(var n="",r=0;r<t;)n+=Z.apply(String,e.slice(r,r+=ee));return n}function w(e,t,n){var r="";n=X(e.length,n);for(var a=t;a<n;++a)r+=Z(127&e[a]);return r}function A(e,t,n){var r="";n=X(e.length,n);for(var a=t;a<n;++a)r+=Z(e[a]);return r}function N(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=z(e[o]);return a}function P(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=Z(r[o]+256*r[o+1]);return a}function R(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>a||t<i)throw new RangeError("\"value\" argument is out of bounds");if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function M(e,t,n,r,a){return t=+t,n>>>=0,a||I(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,a){return t=+t,n>>>=0,a||I(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function j(e){if(e=e.trim().replace(te,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||Infinity;for(var n=e.length,r=null,a=[],o=0,i;o<n;++o){if(i=e.charCodeAt(o),55295<i&&57344>i){if(!r){if(56319<i){-1<(t-=3)&&a.push(239,191,189);continue}else if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(t-=3)&&a.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,128>i){if(0>(t-=1))break;a.push(i)}else if(2048>i){if(0>(t-=2))break;a.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;a.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;a.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return a}function $(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function B(e,t){for(var n=[],r=0,a,o,i;r<e.length&&!(0>(t-=2));++r)a=e.charCodeAt(r),o=a>>8,i=a%256,n.push(i),n.push(o);return n}function W(e){return K.toByteArray(j(e))}function q(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function V(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function H(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function Y(e){return e!==e}var G=Math.pow,Z=String.fromCharCode,X=Math.min,K=e("base64-js"),Q=e("ieee754");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50;var J=2147483647;n.kMaxLength=J,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return s(e,t,n)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=X(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!o.isBuffer(i))throw new TypeError("\"list\" argument must be an Array of Buffers");i.copy(r,a),a+=i.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),0>t||n>e.length||0>r||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var s=a-r,l=n-t,d=X(s,l),c=this.slice(r,a),p=e.slice(t,n),u=0;u<d;++u)if(c[u]!==p[u]){s=c[u],l=p[u];break}return s<l?-1:l<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-t;if((void 0===n||n>a)&&(n=a),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=G(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=t,a=1,o=this[e+--r];0<r&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=G(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=G(2,8*n)-1;D(this,e,t,n,a,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=255&e/o;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=G(2,8*n)-1;D(this,e,t,n,a,0)}var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=255&e/i;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=G(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)0>e&&0==s&&0!==this[t+o-1]&&(s=1),this[t+o]=255&(e/i>>0)-s;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=G(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)0>e&&0==s&&0!==this[t+o+1]&&(s=1),this[t+o]=255&(e/i>>0)-s;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n,o;if(this===e&&n<t&&t<r)for(o=a-1;0<=o;--o)e[o+t]=this[o+n];else if(1e3>a)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);256>a&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=o.isBuffer(e)?e:new o(e,r),l=i.length;for(s=0;s<n-t;++s)this[s+t]=i[s%l]}return this};var te=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:22}],5:[function(e,t,n){(function(t,a,r){(function(){var s={}.hasOwnProperty,o,l,d,c,p,u,m,f,y,g,h,i,b,_,x,S,v,T,k,O,E;if(f=e("fs"),O=e("vm"),S=e("path"),o=e("./lexer").Lexer,x=e("./parser").parser,g=e("./helpers"),l=e("./sourcemap"),_=e("../../package.json"),n.VERSION=_.version,n.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"],n.helpers=g,d=function(e){switch(!1){case"function"!=typeof r:return new r(e).toString("base64");case"function"!=typeof btoa:return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}));default:throw new Error("Unable to base64 encode inline sourcemap.");}},E=function(e){return function(t,n){var r;null==n&&(n={});try{return e.call(this,t,n)}catch(e){if(r=e,"string"!=typeof t)throw r;throw g.updateSyntaxError(r,t,n.filename)}}},k={},T={},n.compile=c=E(function(e,t){var n,r,a,o,s,c,p,u,m,f,i,y,h,_,v,S,O,E,C,w,A,N,P,R;if(S=g.merge,o=g.extend,t=o({},t),u=t.sourceMap||t.inlineMap||null==t.filename,s=t.filename||"<anonymous>",k[s]=e,u&&(v=new l),P=b.tokenize(e,t),t.referencedVars=function(){var e,t,n;for(n=[],e=0,t=P.length;e<t;e++)N=P[e],"IDENTIFIER"===N[0]&&n.push(N[1]);return n}(),null==t.bare||!0!==t.bare)for(f=0,h=P.length;f<h;f++)if(N=P[f],"IMPORT"===(E=N[0])||"EXPORT"===E){t.bare=!0;break}for(p=x.parse(P).compileToFragments(t),r=0,t.header&&(r+=1),t.shiftLine&&(r+=1),n=0,y="",(i=0,_=p.length);i<_;i++)c=p[i],u&&(c.locationData&&!/^[;\s]*$/.test(c.code)&&v.add([c.locationData.first_line,c.locationData.first_column],[r,n],{noReplace:!0}),O=g.count(c.code,"\n"),r+=O,O?n=c.code.length-(c.code.lastIndexOf("\n")+1):n+=c.code.length),y+=c.code;return t.header&&(m="Generated by CoffeeScript "+this.VERSION,y="// "+m+"\n"+y),u&&(R=v.generate(t,e),T[s]=v),t.inlineMap&&(a=d(JSON.stringify(R)),w="//# sourceMappingURL=data:application/json;base64,"+a,A="//# sourceURL="+(null==(C=t.filename)?"coffeescript":C),y=y+"\n"+w+"\n"+A),t.sourceMap?{js:y,sourceMap:v,v3SourceMap:JSON.stringify(R,null,2)}:y}),n.tokens=E(function(e,t){return b.tokenize(e,t)}),n.nodes=E(function(e,t){return"string"==typeof e?x.parse(b.tokenize(e,t)):x.parse(e)}),n.run=function(n,r){var a,o,i,s;return null==r&&(r={}),i=e.main,i.filename=t.argv[1]=r.filename?f.realpathSync(r.filename):"<anonymous>",i.moduleCache&&(i.moduleCache={}),o=null==r.filename?f.realpathSync("."):S.dirname(f.realpathSync(r.filename)),i.paths=e("module")._nodeModulePaths(o),(!g.isCoffee(i.filename)||e.extensions)&&(a=c(n,r),n=null==(s=a.js)?a:s),i._compile(n,i.filename)},n.eval=function(n,l){var d,p,u,m,f,i,y,g,h,b,o,r,_,x,T,k,E;if(null==l&&(l={}),!!(n=n.trim())){if(m=null==(r=O.Script.createContext)?O.createContext:r,i=null==(_=O.isContext)?function(){return l.sandbox instanceof m().constructor}:_,m){if(null!=l.sandbox){if(i(l.sandbox))k=l.sandbox;else for(g in k=m(),x=l.sandbox,x)s.call(x,g)&&(E=x[g],k[g]=E);k.global=k.root=k.GLOBAL=k}else k=a;if(k.__filename=l.filename||"eval",k.__dirname=S.dirname(k.__filename),!(k!==a||k.module||k.require)){for(d=e("module"),k.module=p=new d(l.modulename||"eval"),k.require=u=function(e){return d._load(e,p,!0)},p.filename=k.__filename,T=Object.getOwnPropertyNames(e),(f=0,h=T.length);f<h;f++)o=T[f],"paths"!==o&&"arguments"!==o&&"caller"!==o&&(u[o]=e[o]);u.paths=p.paths=d._nodeModulePaths(t.cwd()),u.resolve=function(e){return d._resolveFilename(e,p)}}}for(g in b={},l)s.call(l,g)&&(E=l[g],b[g]=E);return b.bare=!0,y=c(n,b),k===a?O.runInThisContext(y):O.runInContext(y,k)}},n.register=function(){return e("./register")},e.extensions)for(v=this.FILE_EXTENSIONS,u=function(t){var n;return null==(n=e.extensions)[t]?n[t]=function(){throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+t+" files.")}:n[t]},(h=0,i=v.length);h<i;h++)p=v[h],u(p);n._compileFile=function(e,t,n){var r,a,o,i;null==t&&(t=!1),null==n&&(n=!1),o=f.readFileSync(e,"utf8"),i=65279===o.charCodeAt(0)?o.substring(1):o;try{r=c(i,{filename:e,sourceMap:t,inlineMap:n,sourceFiles:[e],literate:g.isLiterate(e)})}catch(t){throw a=t,g.updateSyntaxError(a,i,e)}return r},b=new o,x.lexer={lex:function(){var e,t;return t=x.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],x.errorToken=t.origin||t,this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return x.tokens=e,this.pos=0},upcomingInput:function(){return""}},x.yy=e("./nodes"),x.yy.parseError=function(e,t){var n,r,a,o,i,s;return i=t.token,o=x.errorToken,s=x.tokens,r=o[0],a=o[1],n=o[2],a=function(){switch(!1){case o!==s[s.length-1]:return"end of input";case"INDENT"!==r&&"OUTDENT"!==r:return"indentation";case"IDENTIFIER"!==r&&"NUMBER"!==r&&"INFINITY"!==r&&"STRING"!==r&&"STRING_START"!==r&&"REGEX"!==r&&"REGEX_START"!==r:return r.replace(/_START$/,"").toLowerCase();default:return g.nameWhitespaceCharacter(a);}}(),g.throwSyntaxError("unexpected "+a,n)},m=function(e,t){var n,r,a,o,i,s,l,d,c,p,u,m;return o=void 0,a="",e.isNative()?a="native":(e.isEval()?(o=e.getScriptNameOrSourceURL(),!o&&(a=e.getEvalOrigin()+", ")):o=e.getFileName(),o||(o="<anonymous>"),d=e.getLineNumber(),r=e.getColumnNumber(),p=t(o,d,r),a=p?o+":"+p[0]+":"+p[1]:o+":"+d+":"+r),i=e.getFunctionName(),s=e.isConstructor(),l=!(e.isToplevel()||s),l?(c=e.getMethodName(),m=e.getTypeName(),i?(u=n="",m&&i.indexOf(m)&&(u=m+"."),c&&i.indexOf("."+c)!==i.length-c.length-1&&(n=" [as "+c+"]"),""+u+i+n+" ("+a+")"):m+"."+(c||"<anonymous>")+" ("+a+")"):s?"new "+(i||"<anonymous>")+" ("+a+")":i?i+" ("+a+")":a},y=function(e){var t;return null==T[e]?null==T["<anonymous>"]?null==k[e]?null:(t=c(k[e],{filename:e,sourceMap:!0,literate:g.isLiterate(e)}),t.sourceMap):T["<anonymous>"]:T[e]},Error.prepareStackTrace=function(e,t){var r,a,o;return o=function(e,t,n){var r,a;return a=y(e),null!=a&&(r=a.sourceLocation([t-1,n-1])),null==r?null:[r[0]+1,r[1]+1]},a=function(){var e,a,i;for(i=[],e=0,a=t.length;e<a&&(r=t[e],r.getFunction()!==n.run);e++)i.push("    at "+m(r,o));return i}(),e.toString()+"\n"+a.join("\n")+"\n"}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"../../package.json":14,"./helpers":6,"./lexer":7,"./nodes":8,"./parser":9,"./register":10,"./sourcemap":13,_process:30,buffer:4,fs:3,module:3,path:29,vm:807}],6:[function(e,t,n){(function(e){(function(){var t,r,a,o,i,s;n.starts=function(e,t,n){return t===e.substr(n,t.length)},n.ends=function(e,t,n){var r;return r=t.length,t===e.substr(e.length-r-(n||0),r)},n.repeat=i=function(e,t){var n;for(n="";0<t;)1&t&&(n+=e),t>>>=1,e+=e;return n},n.compact=function(e){var t,n,r,a;for(a=[],t=0,r=e.length;t<r;t++)n=e[t],n&&a.push(n);return a},n.count=function(e,t){var n,r;if(n=r=0,!t.length)return 1/0;for(;r=1+e.indexOf(t,r);)n++;return n},n.merge=function(e,t){return r(r({},e),t)},r=n.extend=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},n.flatten=a=function(e){var t,n,r,o;for(n=[],r=0,o=e.length;r<o;r++)t=e[r],"[object Array]"===Object.prototype.toString.call(t)?n=n.concat(a(t)):n.push(t);return n},n.del=function(e,t){var n;return n=e[t],delete e[t],n},n.some=null==(o=Array.prototype.some)?function(t){var n,e,r,a;for(a=this,e=0,r=a.length;e<r;e++)if(n=a[e],t(n))return!0;return!1}:o,n.invertLiterate=function(e){var t,n,r;return r=!0,n=function(){var n,a,o,i;for(o=e.split("\n"),i=[],(n=0,a=o.length);n<a;n++)t=o[n],r&&/^([ ]{4}|[ ]{0,3}\t)/.test(t)?i.push(t):(r=/^\s*$/.test(t))?i.push(t):i.push("# "+t);return i}(),n.join("\n")},t=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},n.addLocationDataFn=function(e,n){return function(r){return"object"!=typeof r||!r.updateLocationDataIfMissing||r.updateLocationDataIfMissing(t(e,n)),r}},n.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?t.first_line+1+":"+(t.first_column+1)+"-"+(t.last_line+1+":"+(t.last_column+1)):"No location data"},n.baseFileName=function(e,t,n){var r,a;return(null==t&&(t=!1),null==n&&(n=!1),a=n?/\\|\//:/\//,r=e.split(a),e=r[r.length-1],!(t&&0<=e.indexOf(".")))?e:(r=e.split("."),r.pop(),"coffee"===r[r.length-1]&&1<r.length&&r.pop(),r.join("."))},n.isCoffee=function(e){return /\.((lit)?coffee|coffee\.md)$/.test(e)},n.isLiterate=function(e){return /\.(litcoffee|coffee\.md)$/.test(e)},n.throwSyntaxError=function(e,t){var n;throw n=new SyntaxError(e),n.location=t,n.toString=s,n.stack=n.toString(),n},n.updateSyntaxError=function(e,t,n){return e.toString===s&&(e.code||(e.code=t),e.filename||(e.filename=n),e.stack=e.toString()),e},s=function(){var t,n,r,a,o,s,l,d,c,p,u,m,f,y,g;return this.code&&this.location?(u=this.location,l=u.first_line,s=u.first_column,c=u.last_line,d=u.last_column,null==c&&(c=l),null==d&&(d=s),o=this.filename||"[stdin]",t=this.code.split("\n")[l],g=s,a=l===c?d+1:t.length,p=t.slice(0,g).replace(/[^\s]/g," ")+i("^",a-g),"undefined"!=typeof e&&null!==e&&(r=(null==(m=e.stdout)?void 0:m.isTTY)&&(null==(f=e.env)||!f.NODE_DISABLE_COLORS)),(null==(y=this.colorful)?r:y)&&(n=function(e){return"\x1B[1;31m"+e+"\x1B[0m"},t=t.slice(0,g)+n(t.slice(g,a))+t.slice(a),p=n(p)),o+":"+(l+1)+":"+(s+1)+": error: "+this.message+"\n"+t+"\n"+p):Error.prototype.toString.call(this)},n.nameWhitespaceCharacter=function(e){return" "===e?"space":"\n"===e?"newline":"\r"===e?"carriage return":"\t"===e?"tab":e}}).call(this)}).call(this,e("_process"))},{_process:30}],7:[function(e,t,n){(function(){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=[].slice,a,o,i,s,l,d,c,p,u,m,f,y,g,h,b,_,x,v,S,T,k,O,E,C,w,A,N,P,R,D,I,M,F,j,z,U,$,B,W,q,V,H,Y,G,Z,X,K,Q,J,ee,te,ne,re,ae,oe,ie,se,le,de,ce,pe,ue,me,fe,ye,ge,he,be;fe=e("./rewriter"),q=fe.Rewriter,k=fe.INVERSES,ye=e("./helpers"),le=ye.count,he=ye.starts,se=ye.compact,ge=ye.repeat,de=ye.invertLiterate,me=ye.locationDataToString,be=ye.throwSyntaxError,n.Lexer=N=function(){function e(){}return e.prototype.tokenize=function(e,t){var n,r,a,o;for(null==t&&(t={}),this.literate=t.literate,this.indent=0,this.baseIndent=0,this.indebt=0,this.outdebt=0,this.indents=[],this.ends=[],this.tokens=[],this.seenFor=!1,this.seenImport=!1,this.seenExport=!1,this.importSpecifierList=!1,this.exportSpecifierList=!1,this.chunkLine=t.line||0,this.chunkColumn=t.column||0,e=this.clean(e),a=0;this.chunk=e.slice(a);)if(n=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.stringToken()||this.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),o=this.getLineAndColumnFromChunk(n),this.chunkLine=o[0],this.chunkColumn=o[1],a+=n,t.untilBalanced&&0===this.ends.length)return{tokens:this.tokens,index:a};return this.closeIndentation(),(r=this.ends.pop())&&this.error("missing "+r.tag,r.origin[2]),!1===t.rewrite?this.tokens:new q().rewrite(this.tokens)},e.prototype.clean=function(e){return e.charCodeAt(0)===a&&(e=e.slice(1)),e=e.replace(/\r/g,"").replace(ee,""),ie.test(e)&&(e="\n"+e,this.chunkLine--),this.literate&&(e=de(e)),e},e.prototype.identifierToken=function(){var e,n,r,a,o,i,s,p,u,m,f,y,g,h,b,_,x,S,T;return(s=v.exec(this.chunk))?(i=s[0],a=s[1],n=s[2],o=a.length,p=void 0,"own"===a&&"FOR"===this.tag())?(this.token("OWN",a),a.length):"from"===a&&"YIELD"===this.tag()?(this.token("FROM",a),a.length):"as"===a&&this.seenImport&&("*"===this.value()?this.tokens[this.tokens.length-1][0]="IMPORT_ALL":(m=this.value(),0<=t.call(c,m))&&(this.tokens[this.tokens.length-1][0]="IDENTIFIER"),"DEFAULT"===(f=this.tag())||"IMPORT_ALL"===f||"IDENTIFIER"===f)?(this.token("AS",a),a.length):"as"===a&&this.seenExport&&("IDENTIFIER"===(y=this.tag())||"DEFAULT"===y)?(this.token("AS",a),a.length):"default"===a&&this.seenExport&&("EXPORT"===(g=this.tag())||"AS"===g)?(this.token("DEFAULT",a),a.length):(h=this.tokens,u=h[h.length-1],S=n||null!=u&&("."===(b=u[0])||"?."===b||"::"===b||"?::"===b||!u.spaced&&"@"===u[0])?"PROPERTY":"IDENTIFIER","IDENTIFIER"===S&&(0<=t.call(E,a)||0<=t.call(c,a))&&!(this.exportSpecifierList&&0<=t.call(c,a))?(S=a.toUpperCase(),"WHEN"===S&&(_=this.tag(),0<=t.call(w,_))?S="LEADING_WHEN":"FOR"===S?this.seenFor=!0:"UNLESS"===S?S="IF":"IMPORT"===S?this.seenImport=!0:"EXPORT"===S?this.seenExport=!0:0<=t.call(te,S)?S="UNARY":0<=t.call(B,S)&&("INSTANCEOF"!==S&&this.seenFor?(S="FOR"+S,this.seenFor=!1):(S="RELATION","!"===this.value()&&(p=this.tokens.pop(),a="!"+a)))):"IDENTIFIER"===S&&this.seenFor&&"from"===a&&ce(u)&&(S="FORFROM",this.seenFor=!1),"IDENTIFIER"===S&&0<=t.call(W,a)&&this.error("reserved word '"+a+"'",{length:a.length}),"PROPERTY"!==S&&(0<=t.call(l,a)&&(e=a,a=d[a]),S=function(){return"!"===a?"UNARY":"=="===a||"!="===a?"COMPARE":"true"===a||"false"===a?"BOOL":"break"===a||"continue"===a||"debugger"===a?"STATEMENT":"&&"===a||"||"===a?a:S}()),T=this.token(S,a,0,o),e&&(T.origin=[S,e,T[2]]),p&&(x=[p[2].first_line,p[2].first_column],T[2].first_line=x[0],T[2].first_column=x[1]),n&&(r=i.lastIndexOf(":"),this.token(":",":",r,n.length)),i.length):0},e.prototype.numberToken=function(){var e,t,n,r,a,o,i;if(!(n=I.exec(this.chunk)))return 0;switch(r=n[0],t=r.length,!1){case!/^0[BOX]/.test(r):this.error("radix prefix in '"+r+"' must be lowercase",{offset:1});break;case!/^(?!0x).*E/.test(r):this.error("exponential notation in '"+r+"' must be indicated with a lowercase 'e'",{offset:r.indexOf("E")});break;case!/^0\d*[89]/.test(r):this.error("decimal literal '"+r+"' must not be prefixed with '0'",{length:t});break;case!/^0\d+/.test(r):this.error("octal literal '"+r+"' must be prefixed with '0o'",{length:t});}return e=function(){switch(r.charAt(1)){case"b":return 2;case"o":return 8;case"x":return 16;default:return null;}}(),a=null==e?parseFloat(r):parseInt(r.slice(2),e),("b"===(o=r.charAt(1))||"o"===o)&&(r="0x"+a.toString(16)),i=2e308===a?"INFINITY":"NUMBER",this.token(i,r,0,t),t},e.prototype.stringToken=function(){var e,t,n,r,a,o,s,i,l,d,c,p,u,m,f,b;if(c=(Q.exec(this.chunk)||[])[0],!c)return 0;if(this.tokens.length&&"from"===this.value()&&(this.seenImport||this.seenExport)&&(this.tokens[this.tokens.length-1][0]="FROM"),m=function(){return"'"===c?K:"\""===c?G:"'''"===c?h:"\"\"\""===c?y:void 0}(),o=3===c.length,p=this.matchWithInterpolations(m,c),b=p.tokens,a=p.index,e=b.length-1,n=c.charAt(0),o){for(i=null,r=function(){var e,t,n;for(n=[],s=e=0,t=b.length;e<t;s=++e)f=b[s],"NEOSTRING"===f[0]&&n.push(f[1]);return n}().join("#{}");d=g.exec(r);)t=d[1],(null===i||0<(u=t.length)&&u<i.length)&&(i=t);i&&(l=RegExp("\\n"+i,"g")),this.mergeInterpolationTokens(b,{delimiter:n},function(t){return function(n,r){return n=t.formatString(n,{delimiter:c}),l&&(n=n.replace(l,"\n")),0===r&&(n=n.replace(C,"")),r===e&&(n=n.replace(J,"")),n}}(this))}else this.mergeInterpolationTokens(b,{delimiter:n},function(t){return function(n,r){return n=t.formatString(n,{delimiter:c}),n=n.replace(H,function(t,a){return 0===r&&0===a||r===e&&a+t.length===n.length?"":" "}),n}}(this));return a},e.prototype.commentToken=function(){var e,t,n;return(n=this.chunk.match(p))?(e=n[0],t=n[1],t&&((n=f.exec(e))&&this.error("block comments cannot contain "+n[0],{offset:n.index,length:n[0].length}),0<=t.indexOf("\n")&&(t=t.replace(RegExp("\\n"+ge(" ",this.indent),"g"),"\n")),this.token("HERECOMMENT",t,0,e.length)),e.length):0},e.prototype.jsToken=function(){var e,t;return"`"===this.chunk.charAt(0)&&(e=x.exec(this.chunk)||O.exec(this.chunk))?(t=e[1].replace(/\\+(`|$)/g,function(e){return e.slice(-Math.ceil(e.length/2))}),this.token("JS",t,0,e[0].length),e[0].length):0},e.prototype.regexToken=function(){var e,n,r,a,o,s,l,d,c,p,u,m,f;switch(!1){case!(s=U.exec(this.chunk)):this.error("regular expressions cannot begin with "+s[2],{offset:s.index+s[1].length});break;case!(s=this.matchWithInterpolations(b,"///")):f=s.tokens,o=s.index;break;case!(s=j.exec(this.chunk)):if(m=s[0],e=s[1],n=s[2],this.validateEscapes(e,{isRegex:!0,offsetInChunk:1}),e=this.formatRegex(e,{delimiter:"/"}),o=m.length,c=this.tokens,d=c[c.length-1],d)if(d.spaced&&(p=d[0],0<=t.call(i,p))){if(!n||F.test(m))return 0;}else if(u=d[0],0<=t.call(D,u))return 0;n||this.error("missing / (unclosed regex)");break;default:return 0;}switch(a=z.exec(this.chunk.slice(o))[0],r=o+a.length,l=this.makeToken("REGEX",null,0,r),!1){case!!oe.test(a):this.error("invalid regular expression flags "+a,{offset:o,length:a.length});break;case!(m||1===f.length):null==e&&(e=this.formatHeregex(f[0][1])),this.token("REGEX",""+this.makeDelimitedLiteral(e,{delimiter:"/"})+a,0,r,l);break;default:this.token("REGEX_START","(",0,0,l),this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),this.mergeInterpolationTokens(f,{delimiter:"\"",double:!0},this.formatHeregex),a&&(this.token(",",",",o-1,0),this.token("STRING","\""+a+"\"",o-1,a.length)),this.token(")",")",r-1,0),this.token("REGEX_END",")",r-1,0);}return r},e.prototype.lineToken=function(){var e,t,n,r,a;if(!(n=R.exec(this.chunk)))return 0;if(t=n[0],this.seenFor=!1,this.importSpecifierList||(this.seenImport=!1),this.exportSpecifierList||(this.seenExport=!1),a=t.length-1-t.lastIndexOf("\n"),r=this.unfinished(),a-this.indebt===this.indent)return r?this.suppressNewlines():this.newlineToken(0),t.length;if(a>this.indent){if(r)return this.indebt=a-this.indent,this.suppressNewlines(),t.length;if(!this.tokens.length)return this.baseIndent=this.indent=a,t.length;e=a-this.indent+this.outdebt,this.token("INDENT",e,t.length-a,a),this.indents.push(e),this.ends.push({tag:"OUTDENT"}),this.outdebt=this.indebt=0,this.indent=a}else a<this.baseIndent?this.error("missing indentation",{offset:t.length}):(this.indebt=0,this.outdentToken(this.indent-a,r,t.length));return t.length},e.prototype.outdentToken=function(e,n,r){var a,o,i,s;for(a=this.indent-e;0<e;)i=this.indents[this.indents.length-1],i?i===this.outdebt?(e-=this.outdebt,this.outdebt=0):i<this.outdebt?(this.outdebt-=i,e-=i):(o=this.indents.pop()+this.outdebt,r&&(s=this.chunk[r],0<=t.call(S,s))&&(a-=o-e,e=o),this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",e,0,r),e-=o):e=0;for(o&&(this.outdebt-=e);";"===this.value();)this.tokens.pop();return"TERMINATOR"===this.tag()||n||this.token("TERMINATOR","\n",r,0),this.indent=a,this},e.prototype.whitespaceToken=function(){var e,t,n,r;return(e=ie.exec(this.chunk))||(t="\n"===this.chunk.charAt(0))?(r=this.tokens,n=r[r.length-1],n&&(n[e?"spaced":"newLine"]=!0),e?e[0].length:0):0},e.prototype.newlineToken=function(e){for(;";"===this.value();)this.tokens.pop();return"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\n",e,0),this},e.prototype.suppressNewlines=function(){return"\\"===this.value()&&this.tokens.pop(),this},e.prototype.literalToken=function(){var e,n,a,o,l,d,c,p,f,y,g,h,b;if((e=M.exec(this.chunk))?(b=e[0],s.test(b)&&this.tagParameters()):b=this.chunk.charAt(0),g=b,l=this.tokens,o=l[l.length-1],o&&0<=t.call(["="].concat(r.call(m)),b)&&(y=!1,"="!==b||"||"!==(d=o[1])&&"&&"!==d||o.spaced||(o[0]="COMPOUND_ASSIGN",o[1]+="=",o=this.tokens[this.tokens.length-2],y=!0),o&&"PROPERTY"!==o[0]&&(a=null==(c=o.origin)?o:c,n=pe(o[1],a[1]),n&&this.error(n,a[2])),y))return b.length;if("{"===b&&this.seenImport?this.importSpecifierList=!0:this.importSpecifierList&&"}"===b?this.importSpecifierList=!1:"{"===b&&"EXPORT"===(null==o?void 0:o[0])?this.exportSpecifierList=!0:this.exportSpecifierList&&"}"===b&&(this.exportSpecifierList=!1),";"===b)this.seenFor=this.seenImport=this.seenExport=!1,g="TERMINATOR";else if("*"===b&&"EXPORT"===o[0])g="EXPORT_ALL";else if(0<=t.call(P,b))g="MATH";else if(0<=t.call(u,b))g="COMPARE";else if(0<=t.call(m,b))g="COMPOUND_ASSIGN";else if(0<=t.call(te,b))g="UNARY";else if(0<=t.call(ne,b))g="UNARY_MATH";else if(0<=t.call(V,b))g="SHIFT";else if("?"===b&&(null==o?void 0:o.spaced))g="BIN?";else if(o&&!o.spaced)if("("===b&&(p=o[0],0<=t.call(i,p)))"?"===o[0]&&(o[0]="FUNC_EXIST"),g="CALL_START";else if("["===b&&(f=o[0],0<=t.call(T,f)))switch(g="INDEX_START",o[0]){case"?":o[0]="INDEX_SOAK";}return h=this.makeToken(g,b),"("===b||"{"===b||"["===b?this.ends.push({tag:k[b],origin:h}):")"===b||"}"===b||"]"===b?this.pair(b):void 0,(this.tokens.push(h),b.length)},e.prototype.tagParameters=function(){var e,t,n,r;if(")"!==this.tag())return this;for(t=[],r=this.tokens,e=r.length,r[--e][0]="PARAM_END";n=r[--e];)switch(n[0]){case")":t.push(n);break;case"(":case"CALL_START":if(t.length)t.pop();else return"("===n[0]?(n[0]="PARAM_START",this):this;}return this},e.prototype.closeIndentation=function(){return this.outdentToken(this.indent)},e.prototype.matchWithInterpolations=function(t,n){var r,a,o,i,s,l,d,c,p,u,m,f,y,g,h;if(h=[],c=n.length,this.chunk.slice(0,c)!==n)return null;for(y=this.chunk.slice(c);g=t.exec(y)[0],this.validateEscapes(g,{isRegex:"/"===n.charAt(0),offsetInChunk:c}),h.push(this.makeToken("NEOSTRING",g,c)),y=y.slice(g.length),c+=g.length,"#{"===y.slice(0,2);)u=this.getLineAndColumnFromChunk(c+1),l=u[0],a=u[1],m=new e().tokenize(y.slice(1),{line:l,column:a,untilBalanced:!0}),d=m.tokens,i=m.index,i+=1,p=d[0],r=d[d.length-1],p[0]=p[1]="(",r[0]=r[1]=")",r.origin=["","end of interpolation",r[2]],"TERMINATOR"===(null==(f=d[1])?void 0:f[0])&&d.splice(1,1),h.push(["TOKENS",d]),y=y.slice(i),c+=i;return y.slice(0,n.length)!==n&&this.error("missing "+n,{length:n.length}),o=h[0],s=h[h.length-1],o[2].first_column-=n.length,"\n"===s[1].substr(-1)?(s[2].last_line+=1,s[2].last_column=n.length-1):s[2].last_column+=n.length,0===s[1].length&&(s[2].last_column-=1),{tokens:h,index:c+n.length}},e.prototype.mergeInterpolationTokens=function(e,t,n){var r,a,o,s,i,l,d,c,p,u,m,f,y,g,h,b;for(1<e.length&&(p=this.token("STRING_START","(",0,0)),o=this.tokens.length,(s=i=0,d=e.length);i<d;s=++i){switch(g=e[s],y=g[0],b=g[1],y){case"TOKENS":if(2===b.length)continue;c=b[0],h=b;break;case"NEOSTRING":if(r=n.call(this,g[1],s),0===r.length)if(0===s)a=this.tokens.length;else continue;2===s&&null!=a&&this.tokens.splice(a,2),g[0]="STRING",g[1]=this.makeDelimitedLiteral(r,t),c=g,h=[g];}this.tokens.length>o&&(u=this.token("+","+"),u[2]={first_line:c[2].first_line,first_column:c[2].first_column,last_line:c[2].first_line,last_column:c[2].first_column}),(m=this.tokens).push.apply(m,h)}if(p)return l=e[e.length-1],p.origin=["STRING",null,{first_line:p[2].first_line,first_column:p[2].first_column,last_line:l[2].last_line,last_column:l[2].last_column}],f=this.token("STRING_END",")"),f[2]={first_line:l[2].last_line,first_column:l[2].last_column,last_line:l[2].last_line,last_column:l[2].last_column}},e.prototype.pair=function(e){var t,n,r,a,o;return r=this.ends,n=r[r.length-1],e===(o=null==n?void 0:n.tag)?this.ends.pop():("OUTDENT"!==o&&this.error("unmatched "+e),a=this.indents,t=a[a.length-1],this.outdentToken(t,!0),this.pair(e))},e.prototype.getLineAndColumnFromChunk=function(e){var t,n,r,a,o;return 0===e?[this.chunkLine,this.chunkColumn]:(o=e>=this.chunk.length?this.chunk:this.chunk.slice(0,+(e-1)+1||9e9),r=le(o,"\n"),t=this.chunkColumn,0<r?(a=o.split("\n"),n=a[a.length-1],t=n.length):t+=o.length,[this.chunkLine+r,t])},e.prototype.makeToken=function(e,t,n,r){var a,o,i,s,l;return null==n&&(n=0),null==r&&(r=t.length),o={},i=this.getLineAndColumnFromChunk(n),o.first_line=i[0],o.first_column=i[1],a=0<r?r-1:0,s=this.getLineAndColumnFromChunk(n+a),o.last_line=s[0],o.last_column=s[1],l=[e,t,o],l},e.prototype.token=function(e,t,n,r,a){var o;return o=this.makeToken(e,t,n,r),a&&(o.origin=a),this.tokens.push(o),o},e.prototype.tag=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[0]},e.prototype.value=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[1]},e.prototype.unfinished=function(){var e;return A.test(this.chunk)||(e=this.tag(),0<=t.call(re,e))},e.prototype.formatString=function(e,t){return this.replaceUnicodeCodePointEscapes(e.replace(X,"$1"),t)},e.prototype.formatHeregex=function(e){return this.formatRegex(e.replace(_,"$1$2"),{delimiter:"///"})},e.prototype.formatRegex=function(e,t){return this.replaceUnicodeCodePointEscapes(e,t)},e.prototype.unicodeCodePointToUnicodeEscapes=function(e){var t,n,r;return(r=function(e){var t;return t=e.toString(16),"\\u"+ge("0",4-t.length)+t},65536>e)?r(e):(t=Math.floor((e-65536)/1024)+55296,n=(e-65536)%1024+56320,""+r(t)+r(n))},e.prototype.replaceUnicodeCodePointEscapes=function(e,t){return e.replace(ae,function(e){return function(n,r,a,o){var i;return r?r:(i=parseInt(a,16),1114111<i&&e.error("unicode code point escapes greater than \\u{10ffff} are not allowed",{offset:o+t.delimiter.length,length:a.length+4}),e.unicodeCodePointToUnicodeEscapes(i))}}(this))},e.prototype.validateEscapes=function(e,t){var n,r,a,o,i,s,l,d,c,p;if(null==t&&(t={}),o=t.isRegex?$:Z,i=o.exec(e),!!i)return i[0],n=i[1],l=i[2],r=i[3],p=i[4],c=i[5],s=l?"octal escape sequences are not allowed":"invalid escape sequence",a="\\"+(l||r||p||c),this.error(s+" "+a,{offset:(null==(d=t.offsetInChunk)?0:d)+i.index+n.length,length:a.length})},e.prototype.makeDelimitedLiteral=function(e,t){var n;return null==t&&(t={}),""===e&&"/"===t.delimiter&&(e="(?:)"),n=RegExp("(\\\\\\\\)|(\\\\0(?=[1-7]))|\\\\?("+t.delimiter+")|\\\\?(?:(\\n)|(\\r)|(\\u2028)|(\\u2029))|(\\\\.)","g"),e=e.replace(n,function(e,n,r,a,o,i,s,l,d){switch(!1){case!n:return t.double?n+n:n;case!r:return"\\x00";case!a:return"\\"+a;case!o:return"\\n";case!i:return"\\r";case!s:return"\\u2028";case!l:return"\\u2029";case!d:return t.double?"\\"+d:d;}}),""+t.delimiter+e+t.delimiter},e.prototype.error=function(e,t){var n,r,a,o,i,s;return null==t&&(t={}),a="first_line"in t?t:(i=this.getLineAndColumnFromChunk(null==(o=t.offset)?0:o),r=i[0],n=i[1],i,{first_line:r,first_column:n,last_column:n+(null==(s=t.length)?1:s)-1}),be(e,a)},e}(),pe=function(e,n){switch(null==n&&(n=e),!1){case 0>t.call(r.call(E).concat(r.call(c)),e):return"keyword '"+n+"' can't be assigned";case 0>t.call(Y,e):return"'"+n+"' can't be assigned";case 0>t.call(W,e):return"reserved word '"+n+"' can't be assigned";default:return!1;}},n.isUnassignable=pe,ce=function(e){var t;return"IDENTIFIER"===e[0]?("from"===e[1]&&(e[1][0]="IDENTIFIER",!0),!0):"FOR"!==e[0]&&("{"===(t=e[1])||"["===t||","===t||":"===t?!1:!0)},E=["true","false","null","this","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","yield","if","else","switch","for","while","do","try","catch","finally","class","extends","super","import","export","default"],c=["undefined","Infinity","NaN","then","unless","until","loop","of","by","when"],d={and:"&&",or:"||",is:"==",isnt:"!=",not:"!",yes:"true",no:"false",on:"true",off:"false"},l=function(){var e;for(ue in e=[],d)e.push(ue);return e}(),c=c.concat(l),W=["case","function","var","void","with","const","let","enum","native","implements","interface","package","private","protected","public","static"],Y=["arguments","eval"],n.JS_FORBIDDEN=E.concat(W).concat(Y),a=65279,v=/^(?!\d)((?:(?!\s)[$\w\x7f-\uffff])+)([^\n\S]*:(?!:))?/,I=/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i,M=/^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/,ie=/^[^\n\S]+/,p=/^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/,s=/^[-=]>/,R=/^(?:\n[^\n\S]*)+/,O=/^`(?!``)((?:[^`\\]|\\[\s\S])*)`/,x=/^```((?:[^`\\]|\\[\s\S]|`(?!``))*)```/,Q=/^(?:'''|"""|'|")/,K=/^(?:[^\\']|\\[\s\S])*/,G=/^(?:[^\\"#]|\\[\s\S]|\#(?!\{))*/,h=/^(?:[^\\']|\\[\s\S]|'(?!''))*/,y=/^(?:[^\\"#]|\\[\s\S]|"(?!"")|\#(?!\{))*/,X=/((?:\\\\)+)|\\[^\S\n]*\n\s*/g,H=/\s*\n\s*/g,g=/\n+([^\n\S]*)(?=\S)/g,j=/^\/(?!\/)((?:[^[\/\n\\]|\\[^\n]|\[(?:\\[^\n]|[^\]\n\\])*\])*)(\/)?/,z=/^\w*/,oe=/^(?!.*(.).*\1)[imguy]*$/,b=/^(?:[^\\\/#]|\\[\s\S]|\/(?!\/\/)|\#(?!\{))*/,_=/((?:\\\\)+)|\\(\s)|\s+(?:#.*)?/g,U=/^(\/|\/{3}\s*)(\*)/,F=/^\/=?\s/,f=/\*\//,A=/^\s*(?:,|\??\.(?![.\d])|::)/,Z=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7]|[1-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,$=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,ae=/(\\\\)|\\u\{([\da-fA-F]+)\}/g,C=/^[^\n\S]*\n/,J=/\n[^\n\S]*$/,ee=/\s+$/,m=["-=","+=","/=","*=","%=","||=","&&=","?=","<<=",">>=",">>>=","&=","^=","|=","**=","//=","%%="],te=["NEW","TYPEOF","DELETE","DO"],ne=["!","~"],V=["<<",">>",">>>"],u=["==","!=","<",">","<=",">="],P=["*","/","%","//","%%"],B=["IN","OF","INSTANCEOF"],o=["TRUE","FALSE"],i=["IDENTIFIER","PROPERTY",")","]","?","@","THIS","SUPER"],T=i.concat(["NUMBER","INFINITY","NAN","STRING","STRING_END","REGEX","REGEX_END","BOOL","NULL","UNDEFINED","}","::"]),D=T.concat(["++","--"]),w=["INDENT","OUTDENT","TERMINATOR"],S=[")","}","]"],re=["\\",".","?.","?::","UNARY","MATH","UNARY_MATH","+","-","**","SHIFT","RELATION","COMPARE","&","^","|","&&","||","BIN?","THROW","EXTENDS","DEFAULT"]}).call(this)},{"./helpers":6,"./rewriter":11}],8:[function(e,t,n){(function(){var t=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=[].slice,d,i,c,o,u,l,f,p,m,y,g,h,b,_,x,v,S,T,k,O,E,C,w,A,N,P,R,D,I,M,F,j,z,U,$,B,W,q,V,H,Y,G,Z,X,K,Q,J,ee,te,ne,re,ae,oe,ie,se,le,de,ce,pe,ue,me,fe,ye,ge,he,be,_e,xe,ve,Se,Te,ke,Oe,Ee,Ce,we,Le,Ae,Ne,Pe,Re,De,Ie,Me,Fe,je,ze,Ue,$e,Be,We,qe,Ve,He,Ye,Ge,Ze,Xe,Ke,Qe;Error.stackTraceLimit=2e308,ue=e("./scope").Scope,He=e("./lexer"),Be=He.isUnassignable,z=He.JS_FORBIDDEN,Ye=e("./helpers"),Re=Ye.compact,Fe=Ye.flatten,Me=Ye.extend,qe=Ye.merge,De=Ye.del,Ze=Ye.starts,Ie=Ye.ends,Ge=Ye.some,Pe=Ye.addLocationDataFn,We=Ye.locationDataToString,Xe=Ye.throwSyntaxError,n.extend=Me,n.addLocationDataFn=Pe,Ae=function(){return!0},K=function(){return!1},ve=function(){return this},X=function(){return this.negated=!this.negated,this},n.CodeFragment=y=function(){function e(e,t){var n;this.code=""+t,this.locationData=null==e?void 0:e.locationData,this.type=(null==e||null==(n=e.constructor)?void 0:n.name)||"unknown"}return e.prototype.toString=function(){return""+this.code+(this.locationData?": "+We(this.locationData):"")},e}(),je=function(e){var t;return function(){var n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],a.push(t.code);return a}().join("")},n.Base=o=function(){function e(){}return e.prototype.compile=function(e,t){return je(this.compileToFragments(e,t))},e.prototype.compileToFragments=function(e,t){var n;return e=Me({},e),t&&(e.level=t),n=this.unfoldSoak(e)||this,n.tab=e.indent,e.level!==V&&n.isStatement(e)?n.compileClosure(e):n.compileNode(e)},e.prototype.compileClosure=function(e){var t,n,r,a,o,i,s;return(a=this.jumps())&&a.error("cannot use a pure statement in an expression"),e.sharedScope=!0,r=new m([],u.wrap([this])),t=[],((n=this.contains(Ue))||this.contains($e))&&(t=[new Te],n?(o="apply",t.push(new C("arguments"))):o="call",r=new we(r,[new d(new ie(o))])),i=new f(r,t).compileNode(e),(r.isGenerator||(null==(s=r.base)?void 0:s.isGenerator))&&(i.unshift(this.makeCode("(yield* ")),i.push(this.makeCode(")"))),i},e.prototype.cache=function(e,t,n){var r,a,o;return r=null==n?this.isComplex():n(this),r?(a=new C(e.scope.freeVariable("ref")),o=new c(a,this),t?[o.compileToFragments(e,t),[this.makeCode(a.value)]]:[o,a]):(a=t?this.compileToFragments(e,t):this,[a,a])},e.prototype.cacheToCodeFragments=function(e){return[je(e[0]),je(e[1])]},e.prototype.makeReturn=function(e){var t;return t=this.unwrapAll(),e?new f(new H(e+".push"),[t]):new ce(t)},e.prototype.contains=function(e){var t;return t=void 0,this.traverseChildren(!1,function(r){if(e(r))return t=r,!1}),t},e.prototype.lastNonComment=function(e){var t;for(t=e.length;t--;)if(!(e[t]instanceof g))return e[t];return null},e.prototype.toString=function(e,t){var n;return null==e&&(e=""),null==t&&(t=this.constructor.name),n="\n"+e+t,this.soak&&(n+="?"),this.eachChild(function(t){return n+=t.toString(e+xe)}),n},e.prototype.eachChild=function(e){var t,n,r,a,o,i,s,l;if(!this.children)return this;for(s=this.children,r=0,o=s.length;r<o;r++)if(t=s[r],this[t])for(l=Fe([this[t]]),a=0,i=l.length;a<i;a++)if(n=l[a],!1===e(n))return this;return this},e.prototype.traverseChildren=function(e,t){return this.eachChild(function(n){var r;if(r=t(n),!1!==r)return n.traverseChildren(e,t)})},e.prototype.invert=function(){return new ne("!",this)},e.prototype.unwrapAll=function(){var e;for(e=this;e!==(e=e.unwrap());)continue;return e},e.prototype.children=[],e.prototype.isStatement=K,e.prototype.jumps=K,e.prototype.isComplex=Ae,e.prototype.isChainable=K,e.prototype.isAssignable=K,e.prototype.isNumber=K,e.prototype.unwrap=ve,e.prototype.unfoldSoak=K,e.prototype.assigns=K,e.prototype.updateLocationDataIfMissing=function(e){return this.locationData?this:(this.locationData=e,this.eachChild(function(t){return t.updateLocationDataIfMissing(e)}))},e.prototype.error=function(e){return Xe(e,this.locationData)},e.prototype.makeCode=function(e){return new y(this,e)},e.prototype.wrapInBraces=function(e){return[].concat(this.makeCode("("),e,this.makeCode(")"))},e.prototype.joinFragmentArrays=function(e,t){var n,r,a,o,i;for(n=[],a=o=0,i=e.length;o<i;a=++o)r=e[a],a&&n.push(this.makeCode(t)),n=n.concat(r);return n},e}(),n.Block=u=function(e){function n(e){this.expressions=Re(Fe(e||[]))}return t(n,e),n.prototype.children=["expressions"],n.prototype.push=function(e){return this.expressions.push(e),this},n.prototype.pop=function(){return this.expressions.pop()},n.prototype.unshift=function(e){return this.expressions.unshift(e),this},n.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this},n.prototype.isEmpty=function(){return!this.expressions.length},n.prototype.isStatement=function(e){var t,n,r,a;for(a=this.expressions,n=0,r=a.length;n<r;n++)if(t=a[n],t.isStatement(e))return!0;return!1},n.prototype.jumps=function(e){var t,n,r,a,o;for(o=this.expressions,n=0,a=o.length;n<a;n++)if(t=o[n],r=t.jumps(e))return r},n.prototype.makeReturn=function(e){var t,n;for(n=this.expressions.length;n--;)if(t=this.expressions[n],!(t instanceof g)){this.expressions[n]=t.makeReturn(e),t instanceof ce&&!t.expression&&this.expressions.splice(n,1);break}return this},n.prototype.compileToFragments=function(e,t){return null==e&&(e={}),e.scope?n.__super__.compileToFragments.call(this,e,t):this.compileRoot(e)},n.prototype.compileNode=function(e){var t,r,a,o,i,s,l,d,c;for(this.tab=e.indent,c=e.level===V,r=[],d=this.expressions,(o=i=0,s=d.length);i<s;o=++i)l=d[o],l=l.unwrapAll(),l=l.unfoldSoak(e)||l,l instanceof n?r.push(l.compileNode(e)):c?(l.front=!0,a=l.compileToFragments(e),!l.isStatement(e)&&(a.unshift(this.makeCode(""+this.tab)),a.push(this.makeCode(";"))),r.push(a)):r.push(l.compileToFragments(e,B));return c?this.spaced?[].concat(this.joinFragmentArrays(r,"\n\n"),this.makeCode("\n")):this.joinFragmentArrays(r,"\n"):(t=r.length?this.joinFragmentArrays(r,", "):[this.makeCode("void 0")],1<r.length&&e.level>=B?this.wrapInBraces(t):t)},n.prototype.compileRoot=function(e){var t,n,r,a,o,i,s,l,d,c,p;for(e.indent=e.bare?"":xe,e.level=V,this.spaced=!0,e.scope=new ue(null,this,null,null==(d=e.referencedVars)?[]:d),c=e.locals||[],(a=0,o=c.length);a<o;a++)i=c[a],e.scope.parameter(i);return s=[],e.bare||(l=function(){var e,n,a,o;for(a=this.expressions,o=[],(r=e=0,n=a.length);e<n&&(t=a[r],!!(t.unwrap()instanceof g));r=++e)o.push(t);return o}.call(this),p=this.expressions.slice(l.length),this.expressions=l,l.length&&(s=this.compileNode(qe(e,{indent:""})),s.push(this.makeCode("\n"))),this.expressions=p),n=this.compileWithDeclarations(e),e.bare?n:[].concat(s,this.makeCode("(function() {\n"),n,this.makeCode("\n}).call(this);\n"))},n.prototype.compileWithDeclarations=function(e){var t,n,r,a,o,i,s,l,d,c,p,u,m,f;for(a=[],l=[],d=this.expressions,(o=i=0,s=d.length);i<s&&(r=d[o],r=r.unwrap(),!!(r instanceof g||r instanceof H));o=++i);return e=qe(e,{level:V}),o&&(u=this.expressions.splice(o,9e9),c=[this.spaced,!1],f=c[0],this.spaced=c[1],p=[this.compileNode(e),f],a=p[0],this.spaced=p[1],this.expressions=u),l=this.compileNode(e),m=e.scope,m.expressions===this&&(n=e.scope.hasDeclarations(),t=m.hasAssignments,n||t?(o&&a.push(this.makeCode("\n")),a.push(this.makeCode(this.tab+"var ")),n&&a.push(this.makeCode(m.declaredVariables().join(", "))),t&&(n&&a.push(this.makeCode(",\n"+(this.tab+xe))),a.push(this.makeCode(m.assignedVariables().join(",\n"+(this.tab+xe))))),a.push(this.makeCode(";\n"+(this.spaced?"\n":"")))):a.length&&l.length&&a.push(this.makeCode("\n"))),a.concat(l)},n.wrap=function(e){return 1===e.length&&e[0]instanceof n?e[0]:new n(e)},n}(o),n.Literal=H=function(e){function n(e){this.value=e}return t(n,e),n.prototype.isComplex=K,n.prototype.assigns=function(e){return e===this.value},n.prototype.compileNode=function(){return[this.makeCode(this.value)]},n.prototype.toString=function(){return" "+(this.isStatement()?n.__super__.toString.apply(this,arguments):this.constructor.name)+": "+this.value},n}(o),n.NumberLiteral=ee=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(H),n.InfinityLiteral=j=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(){return[this.makeCode("2e308")]},n}(ee),n.NaNLiteral=Q=function(e){function n(){n.__super__.constructor.call(this,"NaN")}return t(n,e),n.prototype.compileNode=function(e){var t;return t=[this.makeCode("0/0")],e.level>=W?this.wrapInBraces(t):t},n}(ee),n.StringLiteral=ge=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(H),n.RegexLiteral=le=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(H),n.PassthroughLiteral=oe=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(H),n.IdentifierLiteral=C=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Ae,n}(H),n.PropertyName=ie=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Ae,n}(H),n.StatementLiteral=ye=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isStatement=Ae,n.prototype.makeReturn=ve,n.prototype.jumps=function(e){return"break"!==this.value||(null==e?void 0:e.loop)||(null==e?void 0:e.block)?"continue"!==this.value||null!=e&&e.loop?void 0:this:this},n.prototype.compileNode=function(){return[this.makeCode(""+this.tab+this.value+";")]},n}(H),n.ThisLiteral=Te=function(e){function n(){n.__super__.constructor.call(this,"this")}return t(n,e),n.prototype.compileNode=function(e){var t,n;return t=(null==(n=e.scope.method)?void 0:n.bound)?e.scope.method.context:this.value,[this.makeCode(t)]},n}(H),n.UndefinedLiteral=Ce=function(e){function n(){n.__super__.constructor.call(this,"undefined")}return t(n,e),n.prototype.compileNode=function(e){return[this.makeCode(e.level>=U?"(void 0)":"void 0")]},n}(H),n.NullLiteral=J=function(e){function n(){n.__super__.constructor.call(this,"null")}return t(n,e),n}(H),n.BooleanLiteral=l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(H),n.Return=ce=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Ae,n.prototype.makeReturn=ve,n.prototype.jumps=ve,n.prototype.compileToFragments=function(e,t){var r,a;return r=null==(a=this.expression)?void 0:a.makeReturn(),r&&!(r instanceof n)?r.compileToFragments(e,t):n.__super__.compileToFragments.call(this,e,t)},n.prototype.compileNode=function(e){var t;return t=[],t.push(this.makeCode(this.tab+("return"+(this.expression?" ":"")))),this.expression&&(t=t.concat(this.expression.compileToFragments(e,q))),t.push(this.makeCode(";")),t},n}(o),n.YieldReturn=Ne=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){return null==e.scope.parent&&this.error("yield can only occur inside functions"),n.__super__.compileNode.apply(this,arguments)},n}(ce),n.Value=we=function(e){function n(e,t,r){return!t&&e instanceof n?e:(this.base=e,this.properties=t||[],r&&(this[r]=!0),this)}return t(n,e),n.prototype.children=["base","properties"],n.prototype.add=function(e){return this.properties=this.properties.concat(e),this},n.prototype.hasProperties=function(){return!!this.properties.length},n.prototype.bareLiteral=function(e){return!this.properties.length&&this.base instanceof e},n.prototype.isArray=function(){return this.bareLiteral(i)},n.prototype.isRange=function(){return this.bareLiteral(se)},n.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()},n.prototype.isAssignable=function(){return this.hasProperties()||this.base.isAssignable()},n.prototype.isNumber=function(){return this.bareLiteral(ee)},n.prototype.isString=function(){return this.bareLiteral(ge)},n.prototype.isRegex=function(){return this.bareLiteral(le)},n.prototype.isUndefined=function(){return this.bareLiteral(Ce)},n.prototype.isNull=function(){return this.bareLiteral(J)},n.prototype.isBoolean=function(){return this.bareLiteral(l)},n.prototype.isAtomic=function(){var e,t,n,r;for(r=this.properties.concat(this.base),e=0,t=r.length;e<t;e++)if(n=r[e],n.soak||n instanceof f)return!1;return!0},n.prototype.isNotCallable=function(){return this.isNumber()||this.isString()||this.isRegex()||this.isArray()||this.isRange()||this.isSplice()||this.isObject()||this.isUndefined()||this.isNull()||this.isBoolean()},n.prototype.isStatement=function(e){return!this.properties.length&&this.base.isStatement(e)},n.prototype.assigns=function(e){return!this.properties.length&&this.base.assigns(e)},n.prototype.jumps=function(e){return!this.properties.length&&this.base.jumps(e)},n.prototype.isObject=function(e){return!this.properties.length&&this.base instanceof te&&(!e||this.base.generated)},n.prototype.isSplice=function(){var e,t;return t=this.properties,e=t[t.length-1],e instanceof me},n.prototype.looksStatic=function(e){var t;return this.base.value===e&&1===this.properties.length&&"prototype"!==(null==(t=this.properties[0].name)?void 0:t.value)},n.prototype.unwrap=function(){return this.properties.length?this:this.base},n.prototype.cacheReference=function(e){var t,r,a,o,i;return(i=this.properties,a=i[i.length-1],2>this.properties.length&&!this.base.isComplex()&&(null==a||!a.isComplex()))?[this,this]:(t=new n(this.base,this.properties.slice(0,-1)),t.isComplex()&&(r=new C(e.scope.freeVariable("base")),t=new n(new ae(new c(r,t)))),!a)?[t,r]:(a.isComplex()&&(o=new C(e.scope.freeVariable("name")),a=new F(new c(o,a.index)),o=new F(o)),[t.add(a),new n(r||t.base,[o||a])])},n.prototype.compileNode=function(e){var t,n,r,a,o;for(this.base.front=this.front,o=this.properties,t=this.base.compileToFragments(e,o.length?U:null),o.length&&pe.test(je(t))&&t.push(this.makeCode(".")),(n=0,r=o.length);n<r;n++)a=o[n],t.push.apply(t,a.compileToFragments(e));return t},n.prototype.unfoldSoak=function(e){return null==this.unfoldedSoak?this.unfoldedSoak=function(t){return function(){var r,a,o,i,s,l,d,p,u,m;if(o=t.base.unfoldSoak(e))return(p=o.body.properties).push.apply(p,t.properties),o;for(u=t.properties,a=i=0,s=u.length;i<s;a=++i)if(l=u[a],!!l.soak)return l.soak=!1,r=new n(t.base,t.properties.slice(0,a)),m=new n(t.base,t.properties.slice(a)),r.isComplex()&&(d=new C(e.scope.freeVariable("ref")),r=new ae(new c(d,r)),m.base=d),new w(new h(r),m,{soak:!0});return!1}}(this)():this.unfoldedSoak},n}(o),n.Comment=g=function(e){function n(e){this.comment=e}return t(n,e),n.prototype.isStatement=Ae,n.prototype.makeReturn=ve,n.prototype.compileNode=function(e,t){var n,r;return r=this.comment.replace(/^(\s*)#(?=\s)/gm,"$1 *"),n="/*"+Ve(r,this.tab)+(0<=a.call(r,"\n")?"\n"+this.tab:"")+" */",(t||e.level)===V&&(n=e.indent+n),[this.makeCode("\n"),this.makeCode(n)]},n}(o),n.Call=f=function(e){function n(e,t,n){this.variable=e,this.args=null==t?[]:t,this.soak=n,this.isNew=!1,this.variable instanceof we&&this.variable.isNotCallable()&&this.variable.error("literal is not a function")}return t(n,e),n.prototype.children=["variable","args"],n.prototype.updateLocationDataIfMissing=function(e){var t,r;return this.locationData&&this.needsUpdatedStartLocation&&(this.locationData.first_line=e.first_line,this.locationData.first_column=e.first_column,t=(null==(r=this.variable)?void 0:r.base)||this.variable,t.needsUpdatedStartLocation&&(this.variable.locationData.first_line=e.first_line,this.variable.locationData.first_column=e.first_column,t.updateLocationDataIfMissing(e)),delete this.needsUpdatedStartLocation),n.__super__.updateLocationDataIfMissing.apply(this,arguments)},n.prototype.newInstance=function(){var e,t;return e=(null==(t=this.variable)?void 0:t.base)||this.variable,e instanceof n&&!e.isNew?e.newInstance():this.isNew=!0,this.needsUpdatedStartLocation=!0,this},n.prototype.unfoldSoak=function(e){var t,r,a,o,i,s,l,d,c;if(this.soak){if(this instanceof be)o=new H(this.superReference(e)),c=new we(o);else{if(r=Ke(e,this,"variable"))return r;l=new we(this.variable).cacheReference(e),o=l[0],c=l[1]}return c=new n(c,this.args),c.isNew=this.isNew,o=new H("typeof "+o.compile(e)+" === \"function\""),new w(o,new we(c),{soak:!0})}for(t=this,s=[];;){if(t.variable instanceof n){s.push(t),t=t.variable;continue}if(!(t.variable instanceof we))break;if(s.push(t),!((t=t.variable.base)instanceof n))break}for(d=s.reverse(),a=0,i=d.length;a<i;a++)t=d[a],r&&(t.variable instanceof n?t.variable=r:t.variable.base=r),r=Ke(e,t,"variable");return r},n.prototype.compileNode=function(e){var t,n,r,a,o,i,s,l,d,c;if(null!=(d=this.variable)&&(d.front=this.front),a=fe.compileSplattedArray(e,this.args,!0),a.length)return this.compileSplat(e,a);for(r=[],c=this.args,(n=i=0,s=c.length);i<s;n=++i)t=c[n],n&&r.push(this.makeCode(", ")),r.push.apply(r,t.compileToFragments(e,B));return o=[],this instanceof be?(l=this.superReference(e)+(".call("+this.superThis(e)),r.length&&(l+=", "),o.push(this.makeCode(l))):(this.isNew&&o.push(this.makeCode("new ")),o.push.apply(o,this.variable.compileToFragments(e,U)),o.push(this.makeCode("("))),o.push.apply(o,r),o.push(this.makeCode(")")),o},n.prototype.compileSplat=function(e,t){var n,r,a,o,i,s;return this instanceof be?[].concat(this.makeCode(this.superReference(e)+".apply("+this.superThis(e)+", "),t,this.makeCode(")")):this.isNew?(o=this.tab+xe,[].concat(this.makeCode("(function(func, args, ctor) {\n"+o+"ctor.prototype = func.prototype;\n"+o+"var child = new ctor, result = func.apply(child, args);\n"+o+"return Object(result) === result ? result : child;\n"+this.tab+"})("),this.variable.compileToFragments(e,B),this.makeCode(", "),t,this.makeCode(", function(){})"))):(n=[],r=new we(this.variable),(i=r.properties.pop())&&r.isComplex()?(s=e.scope.freeVariable("ref"),n=n.concat(this.makeCode("("+s+" = "),r.compileToFragments(e,B),this.makeCode(")"),i.compileToFragments(e))):(a=r.compileToFragments(e,U),pe.test(je(a))&&(a=this.wrapInBraces(a)),i?(s=je(a),a.push.apply(a,i.compileToFragments(e))):s="null",n=n.concat(a)),n=n.concat(this.makeCode(".apply("+s+", "),t,this.makeCode(")")))},n}(o),n.SuperCall=be=function(e){function n(e){n.__super__.constructor.call(this,null,null==e?[new fe(new C("arguments"))]:e),this.isBare=null!=e}return t(n,e),n.prototype.superReference=function(e){var t,n,r,a,o,i,s,l;return o=e.scope.namedMethod(),(null==o?void 0:o.klass)?(a=o.klass,i=o.name,l=o.variable,a.isComplex()&&(r=new C(e.scope.parent.freeVariable("base")),n=new we(new ae(new c(r,a))),l.base=n,l.properties.splice(0,a.properties.length)),(i.isComplex()||i instanceof F&&i.index.isAssignable())&&(s=new C(e.scope.parent.freeVariable("name")),i=new F(new c(s,i.index)),l.properties.pop(),l.properties.push(i)),t=[new d(new ie("__super__"))],o["static"]&&t.push(new d(new ie("constructor"))),t.push(null==s?i:new F(s)),new we(null==r?a:r,t).compile(e)):(null==o?void 0:o.ctor)?o.name+".__super__.constructor":this.error("cannot call super outside of an instance method.")},n.prototype.superThis=function(e){var t;return t=e.scope.method,t&&!t.klass&&t.context||"this"},n}(f),n.RegexWithInterpolations=de=function(e){function n(e){null==e&&(e=[]),n.__super__.constructor.call(this,new we(new C("RegExp")),e,!1)}return t(n,e),n}(f),n.TaggedTemplateCall=Se=function(e){function n(e,t,r){t instanceof ge&&(t=new he(u.wrap([new we(t)]))),n.__super__.constructor.call(this,e,[t],r)}return t(n,e),n.prototype.compileNode=function(e){return e.inTaggedTemplateCall=!0,this.variable.compileToFragments(e,U).concat(this.args[0].compileToFragments(e,B))},n}(f),n.Extends=O=function(e){function n(e,t){this.child=e,this.parent=t}return t(n,e),n.prototype.children=["child","parent"],n.prototype.compileToFragments=function(e){return new f(new we(new H(Qe("extend",e))),[this.child,this.parent]).compileToFragments(e)},n}(o),n.Access=d=function(e){function n(e,t){this.name=e,this.soak="soak"===t}return t(n,e),n.prototype.children=["name"],n.prototype.compileToFragments=function(e){var t,n,r;return t=this.name.compileToFragments(e),n=this.name.unwrap(),n instanceof ie?(r=n.value,0<=a.call(z,r))?[this.makeCode("[\"")].concat(s.call(t),[this.makeCode("\"]")]):[this.makeCode(".")].concat(s.call(t)):[this.makeCode("[")].concat(s.call(t),[this.makeCode("]")])},n.prototype.isComplex=K,n}(o),n.Index=F=function(e){function n(e){this.index=e}return t(n,e),n.prototype.children=["index"],n.prototype.compileToFragments=function(e){return[].concat(this.makeCode("["),this.index.compileToFragments(e,q),this.makeCode("]"))},n.prototype.isComplex=function(){return this.index.isComplex()},n}(o),n.Range=se=function(e){function n(e,t,n){this.from=e,this.to=t,this.exclusive="exclusive"===n,this.equals=this.exclusive?"":"="}return t(n,e),n.prototype.children=["from","to"],n.prototype.compileVariables=function(e){var t,n,r,a,o;return e=qe(e,{top:!0}),t=De(e,"isComplex"),n=this.cacheToCodeFragments(this.from.cache(e,B,t)),this.fromC=n[0],this.fromVar=n[1],r=this.cacheToCodeFragments(this.to.cache(e,B,t)),this.toC=r[0],this.toVar=r[1],(o=De(e,"step"))&&(a=this.cacheToCodeFragments(o.cache(e,B,t)),this.step=a[0],this.stepVar=a[1]),this.fromNum=this.from.isNumber()?+this.fromVar:null,this.toNum=this.to.isNumber()?+this.toVar:null,this.stepNum=(null==o?void 0:o.isNumber())?+this.stepVar:null},n.prototype.compileNode=function(e){var t,n,r,a,o,i,s,l,d,c,p,u,m,f;return(this.fromVar||this.compileVariables(e),!e.index)?this.compileArray(e):(s=null!=this.fromNum&&null!=this.toNum,o=De(e,"index"),i=De(e,"name"),d=i&&i!==o,f=o+" = "+this.fromC,this.toC!==this.toVar&&(f+=", "+this.toC),this.step!==this.stepVar&&(f+=", "+this.step),c=[o+" <"+this.equals,o+" >"+this.equals],l=c[0],a=c[1],n=null==this.stepNum?s?(p=[this.fromNum,this.toNum],r=p[0],m=p[1],p,r<=m?l+" "+m:a+" "+m):(t=this.stepVar?this.stepVar+" > 0":this.fromVar+" <= "+this.toVar,t+" ? "+l+" "+this.toVar+" : "+a+" "+this.toVar):0<this.stepNum?l+" "+this.toVar:a+" "+this.toVar,u=this.stepVar?o+" += "+this.stepVar:s?d?r<=m?"++"+o:"--"+o:r<=m?o+"++":o+"--":d?t+" ? ++"+o+" : --"+o:t+" ? "+o+"++ : "+o+"--",d&&(f=i+" = "+f),d&&(u=i+" = "+u),[this.makeCode(f+"; "+n+"; "+u)])},n.prototype.compileArray=function(e){var t,n,r,a,o,i,s,l,d,c,p,u,m,f;return(s=null!=this.fromNum&&null!=this.toNum,s&&20>=Math.abs(this.fromNum-this.toNum))?(c=function(){m=[];for(var e=p=this.fromNum,t=this.toNum;p<=t?e<=t:e>=t;p<=t?e++:e--)m.push(e);return m}.apply(this),this.exclusive&&c.pop(),[this.makeCode("["+c.join(", ")+"]")]):(i=this.tab+xe,o=e.scope.freeVariable("i",{single:!0}),u=e.scope.freeVariable("results"),d="\n"+i+u+" = [];",s?(e.index=o,n=je(this.compileNode(e))):(f=o+" = "+this.fromC+(this.toC===this.toVar?"":", "+this.toC),r=this.fromVar+" <= "+this.toVar,n="var "+f+"; "+r+" ? "+o+" <"+this.equals+" "+this.toVar+" : "+o+" >"+this.equals+" "+this.toVar+"; "+r+" ? "+o+"++ : "+o+"--"),l="{ "+u+".push("+o+"); }\n"+i+"return "+u+";\n"+e.indent,a=function(e){return null==e?void 0:e.contains(Ue)},(a(this.from)||a(this.to))&&(t=", arguments"),[this.makeCode("(function() {"+d+"\n"+i+"for ("+n+")"+l+"}).apply(this"+(null==t?"":t)+")")])},n}(o),n.Slice=me=function(e){function n(e){this.range=e,n.__super__.constructor.call(this)}return t(n,e),n.prototype.children=["range"],n.prototype.compileNode=function(e){var t,n,r,a,o,i,s;return o=this.range,i=o.to,r=o.from,a=r&&r.compileToFragments(e,q)||[this.makeCode("0")],i&&(t=i.compileToFragments(e,q),n=je(t),(this.range.exclusive||-1!=+n)&&(s=", "+(this.range.exclusive?n:i.isNumber()?""+(+n+1):(t=i.compileToFragments(e,U),"+"+je(t)+" + 1 || 9e9")))),[this.makeCode(".slice("+je(a)+(s||"")+")")]},n}(o),n.Obj=te=function(e){function n(e,t){this.generated=null!=t&&t,this.objects=this.properties=e||[]}return t(n,e),n.prototype.children=["properties"],n.prototype.compileNode=function(e){var t,n,r,a,o,i,s,p,u,m,f,l,y,h,b,_,x,v,S,T,k;if(S=this.properties,this.generated)for(s=0,y=S.length;s<y;s++)_=S[s],_ instanceof we&&_.error("cannot have an implicit value in an implicit object");for(n=u=0,h=S.length;u<h&&(v=S[n],!((v.variable||v).base instanceof ae));n=++u);for(r=n<S.length,o=e.indent+=xe,l=this.lastNonComment(this.properties),t=[],r&&(x=e.scope.freeVariable("obj"),t.push(this.makeCode("(\n"+o+x+" = "))),t.push(this.makeCode("{"+(0===S.length||0===n?"}":"\n"))),(a=f=0,b=S.length);f<b;a=++f)v=S[a],a===n&&(0!==a&&t.push(this.makeCode("\n"+o+"}")),t.push(this.makeCode(",\n"))),p=a===S.length-1||a===n-1?"":v===l||v instanceof g?"\n":",\n",i=v instanceof g?"":o,r&&a<n&&(i+=xe),v instanceof c&&("object"!==v.context&&v.operatorToken.error("unexpected "+v.operatorToken.value),v.variable instanceof we&&v.variable.hasProperties()&&v.variable.error("invalid object key")),v instanceof we&&v["this"]&&(v=new c(v.properties[0].name,v,"object")),v instanceof g||(a<n?!(v instanceof c)&&(v=new c(v,v,"object")):(v instanceof c?(m=v.variable,k=v.value):(T=v.base.cache(e),m=T[0],k=T[1],m instanceof C&&(m=new ie(m.value))),v=new c(new we(new C(x),[new d(m)]),k))),i&&t.push(this.makeCode(i)),t.push.apply(t,v.compileToFragments(e,V)),p&&t.push(this.makeCode(p));return r?t.push(this.makeCode(",\n"+o+x+"\n"+this.tab+")")):0!==S.length&&t.push(this.makeCode("\n"+this.tab+"}")),this.front&&!r?this.wrapInBraces(t):t},n.prototype.assigns=function(e){var t,n,r,a;for(a=this.properties,t=0,n=a.length;t<n;t++)if(r=a[t],r.assigns(e))return!0;return!1},n}(o),n.Arr=i=function(e){function n(e){this.objects=e||[]}return t(n,e),n.prototype.children=["objects"],n.prototype.compileNode=function(e){var t,n,r,a,o,i,s;if(!this.objects.length)return[this.makeCode("[]")];if(e.indent+=xe,t=fe.compileSplattedArray(e,this.objects),t.length)return t;for(t=[],n=function(){var t,n,r,a;for(r=this.objects,a=[],(t=0,n=r.length);t<n;t++)s=r[t],a.push(s.compileToFragments(e,B));return a}.call(this),(a=o=0,i=n.length);o<i;a=++o)r=n[a],a&&t.push(this.makeCode(", ")),t.push.apply(t,r);return 0<=je(t).indexOf("\n")?(t.unshift(this.makeCode("[\n"+e.indent)),t.push(this.makeCode("\n"+this.tab+"]"))):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},n.prototype.assigns=function(e){var t,n,r,a;for(a=this.objects,t=0,n=a.length;t<n;t++)if(r=a[t],r.assigns(e))return!0;return!1},n}(o),n.Class=p=function(e){function n(e,t,n){this.variable=e,this.parent=t,this.body=null==n?new u:n,this.boundFuncs=[],this.body.classBody=!0}return t(n,e),n.prototype.children=["variable","parent","body"],n.prototype.defaultClassVariableName="_Class",n.prototype.determineName=function(){var e,t,n,r,o;return this.variable?(r=this.variable.properties,o=r[r.length-1],n=o?o instanceof d&&o.name:this.variable.base,!(n instanceof C||n instanceof ie))?this.defaultClassVariableName:(t=n.value,o||(e=Be(t),e&&this.variable.error(e)),0<=a.call(z,t)?"_"+t:t):this.defaultClassVariableName},n.prototype.setContext=function(e){return this.body.traverseChildren(!1,function(t){return!t.classBody&&(t instanceof Te?t.value=e:t instanceof m&&t.bound?t.context=e:void 0)})},n.prototype.addBoundFunctions=function(e){var t,n,r,a,o;for(o=this.boundFuncs,n=0,r=o.length;n<r;n++)t=o[n],a=new we(new Te(),[new d(t)]).compile(e),this.ctor.body.unshift(new H(a+" = "+Qe("bind",e)+"("+a+", this)"))},n.prototype.addProperties=function(e,t,n){var r,a,o,i,s,l;return l=e.base.properties.slice(0),i=function(){var e;for(e=[];a=l.shift();)a instanceof c&&(o=a.variable.base,delete a.context,s=a.value,"constructor"===o.value?(this.ctor&&a.error("cannot define more than one constructor in a class"),s.bound&&a.error("cannot define a constructor as a bound function"),s instanceof m?a=this.ctor=s:(this.externalCtor=n.classScope.freeVariable("ctor"),a=new c(new C(this.externalCtor),s))):a.variable["this"]?s["static"]=!0:(r=o.isComplex()?new F(o):new d(o),a.variable=new we(new C(t),[new d(new ie("prototype")),r]),s instanceof m&&s.bound&&(this.boundFuncs.push(o),s.bound=!1))),e.push(a);return e}.call(this),Re(i)},n.prototype.walkBody=function(e,t){return this.traverseChildren(!1,function(r){return function(a){var o,s,l,i,d,p,m;if(o=!0,a instanceof n)return!1;if(a instanceof u){for(m=s=a.expressions,l=i=0,d=m.length;i<d;l=++i)p=m[l],p instanceof c&&p.variable.looksStatic(e)?p.value["static"]=!0:p instanceof we&&p.isObject(!0)&&(o=!1,s[l]=r.addProperties(p,e,t));a.expressions=s=Fe(s)}return o&&!(a instanceof n)}}(this))},n.prototype.hoistDirectivePrologue=function(){var e,t,n;for(t=0,e=this.body.expressions;(n=e[t])&&n instanceof g||n instanceof we&&n.isString();)++t;return this.directives=e.splice(0,t)},n.prototype.ensureConstructor=function(e){return this.ctor||(this.ctor=new m,this.externalCtor?this.ctor.body.push(new H(this.externalCtor+".apply(this, arguments)")):this.parent&&this.ctor.body.push(new H(e+".__super__.constructor.apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor)),this.ctor.ctor=this.ctor.name=e,this.ctor.klass=null,this.ctor.noReturn=!0},n.prototype.compileNode=function(e){var t,n,r,a,o,i,s,l,d;return(a=this.body.jumps())&&a.error("Class bodies cannot contain pure statements"),(n=this.body.contains(Ue))&&n.error("Class bodies shouldn't reference arguments"),s=this.determineName(),i=new C(s),r=new m([],u.wrap([this.body])),t=[],e.classScope=r.makeScope(e.scope),this.hoistDirectivePrologue(),this.setContext(s),this.walkBody(s,e),this.ensureConstructor(s),this.addBoundFunctions(e),this.body.spaced=!0,this.body.expressions.push(i),this.parent&&(d=new C(e.classScope.freeVariable("superClass",{reserve:!1})),this.body.expressions.unshift(new O(i,d)),r.params.push(new re(d)),t.push(this.parent)),(l=this.body.expressions).unshift.apply(l,this.directives),o=new ae(new f(r,t)),this.variable&&(o=new c(this.variable,o,null,{moduleDeclaration:this.moduleDeclaration})),o.compileToFragments(e)},n}(o),n.ModuleDeclaration=Y=function(e){function n(e,t){this.clause=e,this.source=t,this.checkSource()}return t(n,e),n.prototype.children=["clause","source"],n.prototype.isStatement=Ae,n.prototype.jumps=ve,n.prototype.makeReturn=ve,n.prototype.checkSource=function(){if(null!=this.source&&this.source instanceof he)return this.source.error("the name of the module to be imported from must be an uninterpolated string")},n.prototype.checkScope=function(e,t){if(0!==e.indent.length)return this.error(t+" statements must be at top-level scope")},n}(o),n.ImportDeclaration=N=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"import"),e.importedSymbols=[],t=[],t.push(this.makeCode(this.tab+"import ")),null!=this.clause&&t.push.apply(t,this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&(null!==this.clause&&t.push(this.makeCode(" from ")),t.push(this.makeCode(this.source.value))),t.push(this.makeCode(";")),t},n}(Y),n.ImportClause=A=function(e){function n(e,t){this.defaultBinding=e,this.namedImports=t}return t(n,e),n.prototype.children=["defaultBinding","namedImports"],n.prototype.compileNode=function(e){var t;return t=[],null!=this.defaultBinding&&(t.push.apply(t,this.defaultBinding.compileNode(e)),null!=this.namedImports&&t.push(this.makeCode(", "))),null!=this.namedImports&&t.push.apply(t,this.namedImports.compileNode(e)),t},n}(o),n.ExportDeclaration=x=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"export"),t=[],t.push(this.makeCode(this.tab+"export ")),this instanceof v&&t.push(this.makeCode("default ")),!(this instanceof v)&&(this.clause instanceof c||this.clause instanceof p)&&(this.clause instanceof p&&!this.clause.variable&&this.clause.error("anonymous classes cannot be exported"),t.push(this.makeCode("var ")),this.clause.moduleDeclaration="export"),t=null!=this.clause.body&&this.clause.body instanceof u?t.concat(this.clause.compileToFragments(e,V)):t.concat(this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&t.push(this.makeCode(" from "+this.source.value)),t.push(this.makeCode(";")),t},n}(Y),n.ExportNamedDeclaration=S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportDefaultDeclaration=v=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportAllDeclaration=_=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ModuleSpecifierList=Z=function(e){function n(e){this.specifiers=e}return t(n,e),n.prototype.children=["specifiers"],n.prototype.compileNode=function(e){var t,n,r,a,o,i,s;if(t=[],e.indent+=xe,n=function(){var t,n,r,a;for(r=this.specifiers,a=[],(t=0,n=r.length);t<n;t++)s=r[t],a.push(s.compileToFragments(e,B));return a}.call(this),0!==this.specifiers.length){for(t.push(this.makeCode("{\n"+e.indent)),a=o=0,i=n.length;o<i;a=++o)r=n[a],a&&t.push(this.makeCode(",\n"+e.indent)),t.push.apply(t,r);t.push(this.makeCode("\n}"))}else t.push(this.makeCode("{}"));return t},n}(o),n.ImportSpecifierList=I=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(Z),n.ExportSpecifierList=k=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(Z),n.ModuleSpecifier=G=function(e){function n(e,t,n){this.original=e,this.alias=t,this.moduleDeclarationType=n,this.identifier=null==this.alias?this.original.value:this.alias.value}return t(n,e),n.prototype.children=["original","alias"],n.prototype.compileNode=function(e){var t;return e.scope.find(this.identifier,this.moduleDeclarationType),t=[],t.push(this.makeCode(this.original.value)),null!=this.alias&&t.push(this.makeCode(" as "+this.alias.value)),t},n}(o),n.ImportSpecifier=D=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"import")}return t(n,e),n.prototype.compileNode=function(e){var t;return(t=this.identifier,0<=a.call(e.importedSymbols,t))||e.scope.check(this.identifier)?this.error("'"+this.identifier+"' has already been declared"):e.importedSymbols.push(this.identifier),n.__super__.compileNode.call(this,e)},n}(G),n.ImportDefaultSpecifier=P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(D),n.ImportNamespaceSpecifier=R=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(D),n.ExportSpecifier=T=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"export")}return t(n,e),n}(G),n.Assign=c=function(e){function n(e,t,n,r){this.variable=e,this.value=t,this.context=n,null==r&&(r={}),this.param=r.param,this.subpattern=r.subpattern,this.operatorToken=r.operatorToken,this.moduleDeclaration=r.moduleDeclaration}return t(n,e),n.prototype.children=["variable","value"],n.prototype.isStatement=function(e){return(null==e?void 0:e.level)===V&&null!=this.context&&(this.moduleDeclaration||0<=a.call(this.context,"?"))},n.prototype.checkAssignability=function(e,t){if(Object.prototype.hasOwnProperty.call(e.scope.positions,t.value)&&"import"===e.scope.variables[e.scope.positions[t.value]].type)return t.error("'"+t.value+"' is read-only")},n.prototype.assigns=function(e){return this["object"===this.context?"value":"variable"].assigns(e)},n.prototype.unfoldSoak=function(e){return Ke(e,this,"variable")},n.prototype.compileNode=function(e){var t,n,r,o,i,l,d,c,p,u,f,y,g,h,b;if(r=this.variable instanceof we){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(e);if(this.variable.isSplice())return this.compileSplice(e);if("||="===(c=this.context)||"&&="===c||"?="===c)return this.compileConditional(e);if("**="===(p=this.context)||"//="===p||"%%="===p)return this.compileSpecialMath(e)}return(this.value instanceof m&&(this.value["static"]?(this.value.klass=this.variable.base,this.value.name=this.variable.properties[0],this.value.variable=this.variable):2<=(null==(u=this.variable.properties)?void 0:u.length)&&(f=this.variable.properties,l=3<=f.length?s.call(f,0,o=f.length-2):(o=0,[]),d=f[o++],i=f[o++],"prototype"===(null==(y=d.name)?void 0:y.value)&&(this.value.klass=new we(this.variable.base,l),this.value.name=i,this.value.variable=this.variable))),this.context||(b=this.variable.unwrapAll(),!b.isAssignable()&&this.variable.error("'"+this.variable.compile(e)+"' can't be assigned"),("function"!=typeof b.hasProperties||!b.hasProperties())&&(this.moduleDeclaration?(this.checkAssignability(e,b),e.scope.add(b.value,this.moduleDeclaration)):this.param?e.scope.add(b.value,"var"):(this.checkAssignability(e,b),e.scope.find(b.value)))),h=this.value.compileToFragments(e,B),r&&this.variable.base instanceof te&&(this.variable.front=!0),n=this.variable.compileToFragments(e,B),"object"===this.context)?((g=je(n),0<=a.call(z,g))&&(n.unshift(this.makeCode("\"")),n.push(this.makeCode("\""))),n.concat(this.makeCode(": "),h)):(t=n.concat(this.makeCode(" "+(this.context||"=")+" "),h),e.level<=B?t:this.wrapInBraces(t))},n.prototype.compilePatternMatch=function(e){var t,r,a,o,l,c,p,i,u,m,f,y,g,h,_,x,v,S,T,k,O,E,w,A,N,P,R,D;if(A=e.level===V,P=this.value,x=this.variable.base.objects,!(v=x.length))return a=P.compileToFragments(e),e.level>=W?this.wrapInBraces(a):a;if(_=x[0],1===v&&_ instanceof b&&_.error("Destructuring assignment has no target"),u=this.variable.isObject(),A&&1===v&&!(_ instanceof fe))return o=null,_ instanceof n&&"object"===_.context?(T=_,k=T.variable,i=k.base,_=T.value,_ instanceof n&&(o=_.value,_=_.variable)):(_ instanceof n&&(o=_.value,_=_.variable),i=u?_["this"]?_.properties[0].name:new ie(_.unwrap().value):new ee(0)),t=i.unwrap()instanceof ie,P=new we(P),P.properties.push(new(t?d:F)(i)),g=Be(_.unwrap().value),g&&_.error(g),o&&(P=new ne("?",P,o)),new n(_,P,null,{param:this.param}).compileToFragments(e,V);for(R=P.compileToFragments(e,B),D=je(R),r=[],l=!1,(!(P.unwrap()instanceof C)||this.variable.assigns(D))&&(r.push([this.makeCode((S=e.scope.freeVariable("ref"))+" = ")].concat(s.call(R))),R=[this.makeCode(S)],D=S),(p=f=0,y=x.length);f<y;p=++f){if(_=x[p],i=p,!l&&_ instanceof fe)h=_.name.unwrap().value,_=_.unwrap(),N=v+" <= "+D+".length ? "+Qe("slice",e)+".call("+D+", "+p,(w=v-p-1)?(m=e.scope.freeVariable("i",{single:!0}),N+=", "+m+" = "+D+".length - "+w+") : ("+m+" = "+p+", [])"):N+=") : []",N=new H(N),l=m+"++";else if(!l&&_ instanceof b){(w=v-p-1)&&(1===w?l=D+".length - 1":(m=e.scope.freeVariable("i",{single:!0}),N=new H(m+" = "+D+".length - "+w),l=m+"++",r.push(N.compileToFragments(e,B))));continue}else(_ instanceof fe||_ instanceof b)&&_.error("multiple splats/expansions are disallowed in an assignment"),o=null,_ instanceof n&&"object"===_.context?(O=_,E=O.variable,i=E.base,_=O.value,_ instanceof n&&(o=_.value,_=_.variable)):(_ instanceof n&&(o=_.value,_=_.variable),i=u?_["this"]?_.properties[0].name:new ie(_.unwrap().value):new H(l||i)),h=_.unwrap().value,t=i.unwrap()instanceof ie,N=new we(new H(D),[new(t?d:F)(i)]),o&&(N=new ne("?",N,o));null!=h&&(g=Be(h),g&&_.error(g)),r.push(new n(_,N,null,{param:this.param,subpattern:!0}).compileToFragments(e,B))}return A||this.subpattern||r.push(R),c=this.joinFragmentArrays(r,", "),e.level<B?c:this.wrapInBraces(c)},n.prototype.compileConditional=function(e){var t,r,o,i;return o=this.variable.cacheReference(e),r=o[0],i=o[1],r.properties.length||!(r.base instanceof H)||r.base instanceof Te||e.scope.check(r.base.value)||this.variable.error("the variable \""+r.base.value+"\" can't be assigned with "+this.context+" because it has not been declared before"),0<=a.call(this.context,"?")?(e.isExistentialEquals=!0,new w(new h(r),i,{type:"if"}).addElse(new n(i,this.value,"=")).compileToFragments(e)):(t=new ne(this.context.slice(0,-1),r,new n(i,this.value,"=")).compileToFragments(e),e.level<=B?t:this.wrapInBraces(t))},n.prototype.compileSpecialMath=function(e){var t,r,a;return r=this.variable.cacheReference(e),t=r[0],a=r[1],new n(t,new ne(this.context.slice(0,-1),a,this.value)).compileToFragments(e)},n.prototype.compileSplice=function(e){var t,n,r,a,o,i,s,l,d,c,p,u;return s=this.variable.properties.pop().range,r=s.from,c=s.to,n=s.exclusive,i=this.variable.compile(e),r?(l=this.cacheToCodeFragments(r.cache(e,W)),a=l[0],o=l[1]):a=o="0",c?(null==r?void 0:r.isNumber())&&c.isNumber()?(c=c.compile(e)-o,!n&&(c+=1)):(c=c.compile(e,U)+" - "+o,!n&&(c+=" + 1")):c="9e9",d=this.value.cache(e,B),p=d[0],u=d[1],t=[].concat(this.makeCode("[].splice.apply("+i+", ["+a+", "+c+"].concat("),p,this.makeCode(")), "),u),e.level>V?this.wrapInBraces(t):t},n}(o),n.Code=m=function(e){function n(e,t,n){this.params=e||[],this.body=t||new u,this.bound="boundfunc"===n,this.isGenerator=!!this.body.contains(function(e){return e instanceof ne&&e.isYield()||e instanceof Ne})}return t(n,e),n.prototype.children=["params","body"],n.prototype.isStatement=function(){return!!this.ctor},n.prototype.jumps=K,n.prototype.makeScope=function(e){return new ue(e,this.body,this)},n.prototype.compileNode=function(e){var t,o,d,y,g,h,_,x,l,v,S,T,k,O,E,A,N,p,m,P,R,r,D,I,M,F,j,z,$,B,W,q,V;if(this.bound&&(null==(D=e.scope.method)?void 0:D.bound)&&(this.context=e.scope.method.context),this.bound&&!this.context)return this.context="_this",V=new n([new re(new C(this.context))],new u([this])),o=new f(V,[new Te]),o.updateLocationDataIfMissing(this.locationData),o.compileNode(e);for(e.scope=De(e,"classScope")||this.makeScope(e.scope),e.scope.shared=De(e,"sharedScope"),e.indent+=xe,delete e.bare,delete e.isExistentialEquals,m=[],y=[],I=this.params,(h=0,l=I.length);h<l;h++)p=I[h],p instanceof b||e.scope.parameter(p.asReference(e));for(M=this.params,_=0,v=M.length;_<v;_++)if(p=M[_],!!(p.splat||p instanceof b)){for(F=this.params,x=0,S=F.length;x<S;x++)N=F[x],!(N instanceof b)&&N.name.value&&e.scope.add(N.name.value,"var",!0);$=new c(new we(new i(function(){var t,n,r,a;for(r=this.params,a=[],(n=0,t=r.length);n<t;n++)N=r[n],a.push(N.asReference(e));return a}.call(this))),new we(new C("arguments")));break}for(j=this.params,A=0,T=j.length;A<T;A++)p=j[A],p.isComplex()?(W=r=p.asReference(e),p.value&&(W=new ne("?",r,p.value)),y.push(new c(new we(p.name),W,"=",{param:!0}))):(r=p,p.value&&(E=new H(r.name.value+" == null"),W=new c(new we(p.name),p.value,"="),y.push(new w(E,W)))),$||m.push(r);for(q=this.body.isEmpty(),$&&y.unshift($),y.length&&(z=this.body.expressions).unshift.apply(z,y),(g=P=0,k=m.length);P<k;g=++P)N=m[g],m[g]=N.compileToFragments(e),e.scope.parameter(je(m[g]));for(B=[],this.eachParamName(function(e,t){return 0<=a.call(B,e)&&t.error("multiple parameters named "+e),B.push(e)}),q||this.noReturn||this.body.makeReturn(),d="function",this.isGenerator&&(d+="*"),this.ctor&&(d+=" "+this.name),d+="(",t=[this.makeCode(d)],(g=R=0,O=m.length);R<O;g=++R)N=m[g],g&&t.push(this.makeCode(", ")),t.push.apply(t,N);return t.push(this.makeCode(") {")),this.body.isEmpty()||(t=t.concat(this.makeCode("\n"),this.body.compileWithDeclarations(e),this.makeCode("\n"+this.tab))),t.push(this.makeCode("}")),this.ctor?[this.makeCode(this.tab)].concat(s.call(t)):this.front||e.level>=U?this.wrapInBraces(t):t},n.prototype.eachParamName=function(e){var t,n,r,a,o;for(a=this.params,o=[],(t=0,n=a.length);t<n;t++)r=a[t],o.push(r.eachName(e));return o},n.prototype.traverseChildren=function(e,t){if(e)return n.__super__.traverseChildren.call(this,e,t)},n}(o),n.Param=re=function(e){function n(e,t,n){var r,a;this.name=e,this.value=t,this.splat=n,r=Be(this.name.unwrapAll().value),r&&this.name.error(r),this.name instanceof te&&this.name.generated&&(a=this.name.objects[0].operatorToken,a.error("unexpected "+a.value))}return t(n,e),n.prototype.children=["name","value"],n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e,B)},n.prototype.asReference=function(e){var t,n;return this.reference?this.reference:(n=this.name,n["this"]?(t=n.properties[0].name.value,0<=a.call(z,t)&&(t="_"+t),n=new C(e.scope.freeVariable(t))):n.isComplex()&&(n=new C(e.scope.freeVariable("arg"))),n=new we(n),this.splat&&(n=new fe(n)),n.updateLocationDataIfMissing(this.locationData),this.reference=n)},n.prototype.isComplex=function(){return this.name.isComplex()},n.prototype.eachName=function(e,t){var n,r,a,o,i,s,l;if(null==t&&(t=this.name),n=function(t){return e("@"+t.properties[0].name.value,t)},t instanceof H)return e(t.value,t);if(t instanceof we)return n(t);for(l=null==(s=t.objects)?[]:s,r=0,a=l.length;r<a;r++)i=l[r],i instanceof c&&null==i.context&&(i=i.variable),i instanceof c?(i.value instanceof c&&(i=i.value),this.eachName(e,i.value.unwrap())):i instanceof fe?(o=i.name.unwrap(),e(o.value,o)):i instanceof we?i.isArray()||i.isObject()?this.eachName(e,i.base):i["this"]?n(i):e(i.base.value,i.base):!(i instanceof b)&&i.error("illegal parameter "+i.compile())},n}(o),n.Splat=fe=function(e){function n(e){this.name=e.compile?e:new H(e)}return t(n,e),n.prototype.children=["name"],n.prototype.isAssignable=Ae,n.prototype.assigns=function(e){return this.name.assigns(e)},n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e)},n.prototype.unwrap=function(){return this.name},n.compileSplattedArray=function(e,t,r){var a,o,s,l,d,c,i,p,u,m,f;for(i=-1;(f=t[++i])&&!(f instanceof n);)continue;if(i>=t.length)return[];if(1===t.length)return f=t[0],d=f.compileToFragments(e,B),r?d:[].concat(f.makeCode(Qe("slice",e)+".call("),d,f.makeCode(")"));for(a=t.slice(i),c=p=0,m=a.length;p<m;c=++p)f=a[c],s=f.compileToFragments(e,B),a[c]=f instanceof n?[].concat(f.makeCode(Qe("slice",e)+".call("),s,f.makeCode(")")):[].concat(f.makeCode("["),s,f.makeCode("]"));return 0===i?(f=t[0],l=f.joinFragmentArrays(a.slice(1),", "),a[0].concat(f.makeCode(".concat("),l,f.makeCode(")"))):(o=function(){var n,r,a,o;for(a=t.slice(0,i),o=[],(n=0,r=a.length);n<r;n++)f=a[n],o.push(f.compileToFragments(e,B));return o}(),o=t[0].joinFragmentArrays(o,", "),l=t[i].joinFragmentArrays(a,", "),u=t[t.length-1],[].concat(t[0].makeCode("["),o,t[i].makeCode("].concat("),l,u.makeCode(")")))},n}(o),n.Expansion=b=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isComplex=K,n.prototype.compileNode=function(){return this.error("Expansion must be used inside a destructuring assignment or parameter list")},n.prototype.asReference=function(){return this},n.prototype.eachName=function(){},n}(o),n.While=Le=function(e){function n(e,t){this.condition=(null==t?void 0:t.invert)?e.invert():e,this.guard=null==t?void 0:t.guard}return t(n,e),n.prototype.children=["condition","guard","body"],n.prototype.isStatement=Ae,n.prototype.makeReturn=function(e){return e?n.__super__.makeReturn.apply(this,arguments):(this.returns=!this.jumps({loop:!0}),this)},n.prototype.addBody=function(e){return this.body=e,this},n.prototype.jumps=function(){var e,t,n,r,a;if(e=this.body.expressions,!e.length)return!1;for(t=0,r=e.length;t<r;t++)if(a=e[t],n=a.jumps({loop:!0}))return n;return!1},n.prototype.compileNode=function(e){var t,n,r,a;return e.indent+=xe,a="",n=this.body,n.isEmpty()?n=this.makeCode(""):(this.returns&&(n.makeReturn(r=e.scope.freeVariable("results")),a=""+this.tab+r+" = [];\n"),this.guard&&(1<n.expressions.length?n.expressions.unshift(new w(new ae(this.guard).invert(),new ye("continue"))):this.guard&&(n=u.wrap([new w(this.guard,n)]))),n=[].concat(this.makeCode("\n"),n.compileToFragments(e,V),this.makeCode("\n"+this.tab))),t=[].concat(this.makeCode(a+this.tab+"while ("),this.condition.compileToFragments(e,q),this.makeCode(") {"),n,this.makeCode("}")),this.returns&&t.push(this.makeCode("\n"+this.tab+"return "+r+";")),t},n}(o),n.Op=ne=function(e){function n(e,t,n,a){if("in"===e)return new M(t,n);if("do"===e)return this.generateDo(t);if("new"===e){if(t instanceof f&&!t["do"]&&!t.isNew)return t.newInstance();(t instanceof m&&t.bound||t["do"])&&(t=new ae(t))}return this.operator=r[e]||e,this.first=t,this.second=n,this.flip=!!a,this}var r,o;return t(n,e),r={"==":"===","!=":"!==",of:"in",yieldfrom:"yield*"},o={"!==":"===","===":"!=="},n.prototype.children=["first","second"],n.prototype.isNumber=function(){var e;return this.isUnary()&&("+"===(e=this.operator)||"-"===e)&&this.first instanceof we&&this.first.isNumber()},n.prototype.isYield=function(){var e;return"yield"===(e=this.operator)||"yield*"===e},n.prototype.isUnary=function(){return!this.second},n.prototype.isComplex=function(){return!this.isNumber()},n.prototype.isChainable=function(){var e;return"<"===(e=this.operator)||">"===e||">="===e||"<="===e||"==="===e||"!=="===e},n.prototype.invert=function(){var e,t,r,a,i;if(this.isChainable()&&this.first.isChainable()){for(e=!0,t=this;t&&t.operator;)e&&(e=t.operator in o),t=t.first;if(!e)return new ae(this).invert();for(t=this;t&&t.operator;)t.invert=!t.invert,t.operator=o[t.operator],t=t.first;return this}return(a=o[this.operator])?(this.operator=a,this.first.unwrap()instanceof n&&this.first.invert(),this):this.second?new ae(this).invert():"!"===this.operator&&(r=this.first.unwrap())instanceof n&&("!"===(i=r.operator)||"in"===i||"instanceof"===i)?r:new n("!",this)},n.prototype.unfoldSoak=function(e){var t;return("++"===(t=this.operator)||"--"===t||"delete"===t)&&Ke(e,this,"first")},n.prototype.generateDo=function(e){var t,n,r,a,o,i,s,l;for(i=[],n=e instanceof c&&(s=e.value.unwrap())instanceof m?s:e,l=n.params||[],(r=0,a=l.length);r<a;r++)o=l[r],o.value?(i.push(o.value),delete o.value):i.push(o);return t=new f(e,i),t["do"]=!0,t},n.prototype.compileNode=function(e){var t,n,r,a,o,i;if(n=this.isChainable()&&this.first.isChainable(),n||(this.first.front=this.front),"delete"===this.operator&&e.scope.check(this.first.unwrapAll().value)&&this.error("delete operand may not be argument or var"),("--"===(o=this.operator)||"++"===o)&&(a=Be(this.first.unwrapAll().value),a&&this.first.error(a)),this.isYield())return this.compileYield(e);if(this.isUnary())return this.compileUnary(e);if(n)return this.compileChain(e);switch(this.operator){case"?":return this.compileExistence(e);case"**":return this.compilePower(e);case"//":return this.compileFloorDivision(e);case"%%":return this.compileModulo(e);default:return r=this.first.compileToFragments(e,W),i=this.second.compileToFragments(e,W),t=[].concat(r,this.makeCode(" "+this.operator+" "),i),e.level<=W?t:this.wrapInBraces(t);}},n.prototype.compileChain=function(e){var t,n,r,a;return r=this.first.second.cache(e),this.first.second=r[0],a=r[1],n=this.first.compileToFragments(e,W),t=n.concat(this.makeCode(" "+(this.invert?"&&":"||")+" "),a.compileToFragments(e),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,W)),this.wrapInBraces(t)},n.prototype.compileExistence=function(e){var t,n;return this.first.isComplex()?(n=new C(e.scope.freeVariable("ref")),t=new ae(new c(n,this.first))):(t=this.first,n=t),new w(new h(t),n,{type:"if"}).addElse(this.second).compileToFragments(e)},n.prototype.compileUnary=function(e){var t,r,a;return(r=[],t=this.operator,r.push([this.makeCode(t)]),"!"===t&&this.first instanceof h)?(this.first.negated=!this.first.negated,this.first.compileToFragments(e)):e.level>=U?new ae(this).compileToFragments(e):(a="+"===t||"-"===t,("new"===t||"typeof"===t||"delete"===t||a&&this.first instanceof n&&this.first.operator===t)&&r.push([this.makeCode(" ")]),(a&&this.first instanceof n||"new"===t&&this.first.isStatement(e))&&(this.first=new ae(this.first)),r.push(this.first.compileToFragments(e,W)),this.flip&&r.reverse(),this.joinFragmentArrays(r,""))},n.prototype.compileYield=function(e){var t,n,r;return n=[],t=this.operator,null==e.scope.parent&&this.error("yield can only occur inside functions"),0<=a.call(Object.keys(this.first),"expression")&&!(this.first instanceof ke)?null!=this.first.expression&&n.push(this.first.expression.compileToFragments(e,W)):(e.level>=q&&n.push([this.makeCode("(")]),n.push([this.makeCode(t)]),""!==(null==(r=this.first.base)?void 0:r.value)&&n.push([this.makeCode(" ")]),n.push(this.first.compileToFragments(e,W)),e.level>=q&&n.push([this.makeCode(")")])),this.joinFragmentArrays(n,"")},n.prototype.compilePower=function(e){var t;return t=new we(new C("Math"),[new d(new ie("pow"))]),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.compileFloorDivision=function(e){var t,r,a;return r=new we(new C("Math"),[new d(new ie("floor"))]),a=this.second.isComplex()?new ae(this.second):this.second,t=new n("/",this.first,a),new f(r,[t]).compileToFragments(e)},n.prototype.compileModulo=function(e){var t;return t=new we(new H(Qe("modulo",e))),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+" "+this.operator)},n}(o),n.In=M=function(e){function n(e,t){this.object=e,this.array=t}return t(n,e),n.prototype.children=["object","array"],n.prototype.invert=X,n.prototype.compileNode=function(e){var t,n,r,a,o;if(this.array instanceof we&&this.array.isArray()&&this.array.base.objects.length){for(o=this.array.base.objects,n=0,r=o.length;n<r;n++)if(a=o[n],!!(a instanceof fe)){t=!0;break}if(!t)return this.compileOrTest(e)}return this.compileLoopTest(e)},n.prototype.compileOrTest=function(e){var t,n,r,a,o,i,s,l,d,c,p,u;for(l=this.object.cache(e,W),p=l[0],s=l[1],d=this.negated?[" !== "," && "]:[" === "," || "],t=d[0],n=d[1],u=[],c=this.array.base.objects,(r=o=0,i=c.length);o<i;r=++o)a=c[r],r&&u.push(this.makeCode(n)),u=u.concat(r?s:p,this.makeCode(t),a.compileToFragments(e,U));return e.level<W?u:this.wrapInBraces(u)},n.prototype.compileLoopTest=function(e){var t,n,r,a;return(r=this.object.cache(e,B),a=r[0],n=r[1],t=[].concat(this.makeCode(Qe("indexOf",e)+".call("),this.array.compileToFragments(e,B),this.makeCode(", "),n,this.makeCode(") "+(this.negated?"< 0":">= 0"))),je(a)===je(n))?t:(t=a.concat(this.makeCode(", "),t),e.level<B?t:this.wrapInBraces(t))},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+(this.negated?"!":""))},n}(o),n.Try=Oe=function(e){function n(e,t,n,r){this.attempt=e,this.errorVariable=t,this.recovery=n,this.ensure=r}return t(n,e),n.prototype.children=["attempt","recovery","ensure"],n.prototype.isStatement=Ae,n.prototype.jumps=function(e){var t;return this.attempt.jumps(e)||(null==(t=this.recovery)?void 0:t.jumps(e))},n.prototype.makeReturn=function(e){return this.attempt&&(this.attempt=this.attempt.makeReturn(e)),this.recovery&&(this.recovery=this.recovery.makeReturn(e)),this},n.prototype.compileNode=function(e){var t,n,r,a,o,i;return e.indent+=xe,i=this.attempt.compileToFragments(e,V),t=this.recovery?(r=e.scope.freeVariable("error",{reserve:!1}),o=new C(r),this.errorVariable?(a=Be(this.errorVariable.unwrapAll().value),a?this.errorVariable.error(a):void 0,this.recovery.unshift(new c(this.errorVariable,o))):void 0,[].concat(this.makeCode(" catch ("),o.compileToFragments(e),this.makeCode(") {\n"),this.recovery.compileToFragments(e,V),this.makeCode("\n"+this.tab+"}"))):this.ensure||this.recovery?[]:(r=e.scope.freeVariable("error",{reserve:!1}),[this.makeCode(" catch ("+r+") {}")]),n=this.ensure?[].concat(this.makeCode(" finally {\n"),this.ensure.compileToFragments(e,V),this.makeCode("\n"+this.tab+"}")):[],[].concat(this.makeCode(this.tab+"try {\n"),i,this.makeCode("\n"+this.tab+"}"),t,n)},n}(o),n.Throw=ke=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Ae,n.prototype.jumps=K,n.prototype.makeReturn=ve,n.prototype.compileNode=function(e){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(e),this.makeCode(";"))},n}(o),n.Existence=h=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.invert=X,n.prototype.compileNode=function(e){var t,n,r,a;return this.expression.front=this.front,r=this.expression.compile(e,W),this.expression.unwrap()instanceof C&&!e.scope.check(r)?(a=this.negated?["===","||"]:["!==","&&"],t=a[0],n=a[1],r="typeof "+r+" "+t+" \"undefined\" "+n+" "+r+" "+t+" null"):r=r+" "+(this.negated?"==":"!=")+" null",[this.makeCode(e.level<=$?r:"("+r+")")]},n}(o),n.Parens=ae=function(e){function n(e){this.body=e}return t(n,e),n.prototype.children=["body"],n.prototype.unwrap=function(){return this.body},n.prototype.isComplex=function(){return this.body.isComplex()},n.prototype.compileNode=function(e){var t,n,r;return(n=this.body.unwrap(),n instanceof we&&n.isAtomic())?(n.front=this.front,n.compileToFragments(e)):(r=n.compileToFragments(e,q),t=e.level<W&&(n instanceof ne||n instanceof f||n instanceof E&&n.returns)&&(e.level<$||3>=r.length),t?r:this.wrapInBraces(r))},n}(o),n.StringWithInterpolations=he=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,r,a,o,i,s,l;if(!e.inTaggedTemplateCall)return n.__super__.compileNode.apply(this,arguments);for(a=this.body.unwrap(),r=[],a.traverseChildren(!1,function(e){return e instanceof ge?(r.push(e),!0):!(e instanceof ae)||(r.push(e),!1)}),o=[],o.push(this.makeCode("`")),(i=0,s=r.length);i<s;i++)t=r[i],t instanceof ge?(l=t.value.slice(1,-1),l=l.replace(/(\\*)(`|\$\{)/g,function(e,t,n){return 0==t.length%2?t+"\\"+n:e}),o.push(this.makeCode(l))):(o.push(this.makeCode("${")),o.push.apply(o,t.compileToFragments(e,q)),o.push(this.makeCode("}")));return o.push(this.makeCode("`")),o},n}(ae),n.For=E=function(e){function n(e,t){var n;this.source=t.source,this.guard=t.guard,this.step=t.step,this.name=t.name,this.index=t.index,this.body=u.wrap([e]),this.own=!!t.own,this.object=!!t.object,this.from=!!t.from,this.from&&this.index&&this.index.error("cannot use index with for-from"),this.own&&!this.object&&t.ownTag.error("cannot use own with for-"+(this.from?"from":"in")),this.object&&(n=[this.index,this.name],this.name=n[0],this.index=n[1]),this.index instanceof we&&!this.index.isAssignable()&&this.index.error("index cannot be a pattern matching expression"),this.range=this.source instanceof we&&this.source.base instanceof se&&!this.source.properties.length&&!this.from,this.pattern=this.name instanceof we,this.range&&this.index&&this.index.error("indexes do not apply to range loops"),this.range&&this.pattern&&this.name.error("cannot pattern match over range loops"),this.returns=!1}return t(n,e),n.prototype.children=["body","source","guard","step"],n.prototype.compileNode=function(e){var t,n,r,a,o,i,s,l,d,p,m,f,y,g,h,b,_,x,v,S,T,k,O,E,A,N,P,R,D,I,M,F,j,z;return t=u.wrap([this.body]),O=t.expressions,x=O[O.length-1],(null==x?void 0:x.jumps())instanceof ce&&(this.returns=!1),D=this.range?this.source.base:this.source,R=e.scope,this.pattern||(S=this.name&&this.name.compile(e,B)),g=this.index&&this.index.compile(e,B),S&&!this.pattern&&R.find(S),g&&!(this.index instanceof we)&&R.find(g),this.returns&&(P=R.freeVariable("results")),this.from?this.pattern&&(h=R.freeVariable("x",{single:!0})):h=this.object&&g||R.freeVariable("i",{single:!0}),b=(this.range||this.from)&&S||g||h,_=b===h?"":b+" = ",this.step&&!this.range&&(E=this.cacheToCodeFragments(this.step.cache(e,B,ze)),I=E[0],F=E[1],this.step.isNumber()&&(M=+F)),this.pattern&&(S=h),z="",m="",s="",f=this.tab+xe,this.range?p=D.compileToFragments(qe(e,{index:h,name:S,step:this.step,isComplex:ze})):(j=this.source.compile(e,B),(S||this.own)&&!(this.source.unwrap()instanceof C)&&(s+=""+this.tab+(k=R.freeVariable("ref"))+" = "+j+";\n",j=k),S&&!this.pattern&&!this.from&&(T=S+" = "+j+"["+b+"]"),!this.object&&!this.from&&(I!==F&&(s+=""+this.tab+I+";\n"),d=0>M,!(this.step&&null!=M&&d)&&(v=R.freeVariable("len")),o=""+_+h+" = 0, "+v+" = "+j+".length",i=""+_+h+" = "+j+".length - 1",r=h+" < "+v,a=h+" >= 0",this.step?(null==M?(r=F+" > 0 ? "+r+" : "+a,o="("+F+" > 0 ? ("+o+") : "+i+")"):d&&(r=a,o=i),y=h+" += "+F):y=""+(b===h?h+"++":"++"+h),p=[this.makeCode(o+"; "+r+"; "+_+y)])),this.returns&&(A=""+this.tab+P+" = [];\n",N="\n"+this.tab+"return "+P+";",t.makeReturn(P)),this.guard&&(1<t.expressions.length?t.expressions.unshift(new w(new ae(this.guard).invert(),new ye("continue"))):this.guard&&(t=u.wrap([new w(this.guard,t)]))),this.pattern&&t.expressions.unshift(new c(this.name,this.from?new C(b):new H(j+"["+b+"]"))),l=[].concat(this.makeCode(s),this.pluckDirectCall(e,t)),T&&(z="\n"+f+T+";"),this.object?(p=[this.makeCode(b+" in "+j)],this.own&&(m="\n"+f+"if (!"+Qe("hasProp",e)+".call("+j+", "+b+")) continue;")):this.from&&(p=[this.makeCode(b+" of "+j)]),n=t.compileToFragments(qe(e,{indent:f}),V),n&&0<n.length&&(n=[].concat(this.makeCode("\n"),n,this.makeCode("\n"))),[].concat(l,this.makeCode(""+(A||"")+this.tab+"for ("),p,this.makeCode(") {"+m+z),n,this.makeCode(this.tab+"}"+(N||"")))},n.prototype.pluckDirectCall=function(e,t){var n,r,a,o,i,s,l,d,p,u,y,g,h,b,_,x;for(r=[],p=t.expressions,(i=s=0,l=p.length);s<l;i=++s)(a=p[i],a=a.unwrapAll(),!!(a instanceof f))&&(x=null==(u=a.variable)?void 0:u.unwrapAll(),!!(x instanceof m||x instanceof we&&(null==(y=x.base)?void 0:y.unwrapAll())instanceof m&&1===x.properties.length&&("call"===(g=null==(h=x.properties[0].name)?void 0:h.value)||"apply"===g)))&&(o=(null==(b=x.base)?void 0:b.unwrapAll())||x,d=new C(e.scope.freeVariable("fn")),n=new we(d),x.base&&(_=[n,x],x.base=_[0],n=_[1]),t.expressions[i]=new f(n,a.args),r=r.concat(this.makeCode(this.tab),new c(d,o).compileToFragments(e,V),this.makeCode(";\n")));return r},n}(Le),n.Switch=_e=function(e){function n(e,t,n){this.subject=e,this.cases=t,this.otherwise=n}return t(n,e),n.prototype.children=["subject","cases","otherwise"],n.prototype.isStatement=Ae,n.prototype.jumps=function(e){var t,n,r,a,o,i,s,l;for(null==e&&(e={block:!0}),i=this.cases,(r=0,o=i.length);r<o;r++)if(s=i[r],n=s[0],t=s[1],a=t.jumps(e))return a;return null==(l=this.otherwise)?void 0:l.jumps(e)},n.prototype.makeReturn=function(e){var t,n,r,a,o;for(a=this.cases,t=0,n=a.length;t<n;t++)r=a[t],r[1].makeReturn(e);return e&&(this.otherwise||(this.otherwise=new u([new H("void 0")]))),null!=(o=this.otherwise)&&o.makeReturn(e),this},n.prototype.compileNode=function(e){var t,n,r,a,o,l,d,i,c,p,u,m,f,y,g,h;for(i=e.indent+xe,c=e.indent=i+xe,l=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(e,q):this.makeCode("false"),this.makeCode(") {\n")),y=this.cases,(d=p=0,m=y.length);p<m;d=++p){for(g=y[d],a=g[0],t=g[1],h=Fe([a]),(u=0,f=h.length);u<f;u++)r=h[u],this.subject||(r=r.invert()),l=l.concat(this.makeCode(i+"case "),r.compileToFragments(e,q),this.makeCode(":\n"));if(0<(n=t.compileToFragments(e,V)).length&&(l=l.concat(n,this.makeCode("\n"))),d===this.cases.length-1&&!this.otherwise)break;(o=this.lastNonComment(t.expressions),!(o instanceof ce||o instanceof H&&o.jumps()&&"debugger"!==o.value))&&l.push(r.makeCode(c+"break;\n"))}return this.otherwise&&this.otherwise.expressions.length&&l.push.apply(l,[this.makeCode(i+"default:\n")].concat(s.call(this.otherwise.compileToFragments(e,V)),[this.makeCode("\n")])),l.push(this.makeCode(this.tab+"}")),l},n}(o),n.If=w=function(e){function n(e,t,n){this.body=t,null==n&&(n={}),this.condition="unless"===n.type?e.invert():e,this.elseBody=null,this.isChain=!1,this.soak=n.soak}return t(n,e),n.prototype.children=["condition","body","elseBody"],n.prototype.bodyNode=function(){var e;return null==(e=this.body)?void 0:e.unwrap()},n.prototype.elseBodyNode=function(){var e;return null==(e=this.elseBody)?void 0:e.unwrap()},n.prototype.addElse=function(e){return this.isChain?this.elseBodyNode().addElse(e):(this.isChain=e instanceof n,this.elseBody=this.ensureBlock(e),this.elseBody.updateLocationDataIfMissing(e.locationData)),this},n.prototype.isStatement=function(e){var t;return(null==e?void 0:e.level)===V||this.bodyNode().isStatement(e)||(null==(t=this.elseBodyNode())?void 0:t.isStatement(e))},n.prototype.jumps=function(e){var t;return this.body.jumps(e)||(null==(t=this.elseBody)?void 0:t.jumps(e))},n.prototype.compileNode=function(e){return this.isStatement(e)?this.compileStatement(e):this.compileExpression(e)},n.prototype.makeReturn=function(e){return e&&(this.elseBody||(this.elseBody=new u([new H("void 0")]))),this.body&&(this.body=new u([this.body.makeReturn(e)])),this.elseBody&&(this.elseBody=new u([this.elseBody.makeReturn(e)])),this},n.prototype.ensureBlock=function(e){return e instanceof u?e:new u([e])},n.prototype.compileStatement=function(e){var t,r,a,o,i,s,l;return(a=De(e,"chainChild"),i=De(e,"isExistentialEquals"),i)?new n(this.condition.invert(),this.elseBodyNode(),{type:"if"}).compileToFragments(e):(l=e.indent+xe,o=this.condition.compileToFragments(e,q),r=this.ensureBlock(this.body).compileToFragments(qe(e,{indent:l})),s=[].concat(this.makeCode("if ("),o,this.makeCode(") {\n"),r,this.makeCode("\n"+this.tab+"}")),a||s.unshift(this.makeCode(this.tab)),!this.elseBody)?s:(t=s.concat(this.makeCode(" else ")),this.isChain?(e.chainChild=!0,t=t.concat(this.elseBody.unwrap().compileToFragments(e,V))):t=t.concat(this.makeCode("{\n"),this.elseBody.compileToFragments(qe(e,{indent:l}),V),this.makeCode("\n"+this.tab+"}")),t)},n.prototype.compileExpression=function(e){var t,n,r,a;return r=this.condition.compileToFragments(e,$),n=this.bodyNode().compileToFragments(e,B),t=this.elseBodyNode()?this.elseBodyNode().compileToFragments(e,B):[this.makeCode("void 0")],a=r.concat(this.makeCode(" ? "),n,this.makeCode(" : "),t),e.level>=$?this.wrapInBraces(a):a},n.prototype.unfoldSoak=function(){return this.soak&&this},n}(o),Ee={extend:function(e){return"function(child, parent) { for (var key in parent) { if ("+Qe("hasProp",e)+".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }"},bind:function(){return"function(fn, me){ return function(){ return fn.apply(me, arguments); }; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }"},modulo:function(){return"function(a, b) { return (+a % (b = +b) + b) % b; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}},V=1,q=2,B=3,$=4,W=5,U=6,xe="  ",pe=/^[+-]?\d+$/,Qe=function(e,t){var n,r;return r=t.scope.root,e in r.utilities?r.utilities[e]:(n=r.freeVariable(e),r.assign(n,Ee[e](t)),r.utilities[e]=n)},Ve=function(e,t){return e=e.replace(/\n/g,"$&"+t),e.replace(/\s+$/,"")},Ue=function(e){return e instanceof C&&"arguments"===e.value},$e=function(e){return e instanceof Te||e instanceof m&&e.bound||e instanceof be},ze=function(e){return e.isComplex()||("function"==typeof e.isAssignable?e.isAssignable():void 0)},Ke=function(e,t,n){var r;if(r=t[n].unfoldSoak(e))return t[n]=r.body,r.body=new we(t),r}}).call(this)},{"./helpers":6,"./lexer":7,"./scope":12}],9:[function(e,t,n){(function(r){var a=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,22],r=[1,25],a=[1,83],o=[1,79],i=[1,84],s=[1,85],l=[1,81],d=[1,82],c=[1,56],p=[1,58],u=[1,59],m=[1,60],f=[1,61],y=[1,62],g=[1,49],h=[1,50],b=[1,32],_=[1,68],x=[1,69],v=[1,78],S=[1,47],T=[1,51],k=[1,52],O=[1,67],E=[1,65],C=[1,66],w=[1,64],A=[1,42],N=[1,48],P=[1,63],R=[1,73],D=[1,74],I=[1,75],M=[1,76],F=[1,46],j=[1,72],z=[1,34],U=[1,35],$=[1,36],B=[1,37],W=[1,38],q=[1,39],V=[1,86],H=[1,6,32,42,131],Y=[1,101],G=[1,89],Z=[1,88],X=[1,87],K=[1,90],Q=[1,91],J=[1,92],ee=[1,93],te=[1,94],ne=[1,95],re=[1,96],ae=[1,97],oe=[1,98],ie=[1,99],se=[1,100],le=[1,104],de=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],ce=[2,167],pe=[1,110],ue=[1,111],me=[1,112],fe=[1,113],ye=[1,115],ge=[1,116],he=[1,109],be=[1,6,32,42,131,133,135,139,156],_e=[2,27],xe=[1,123],ve=[1,121],Se=[1,6,31,32,40,41,42,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Te=[2,95],ke=[1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Oe=[2,74],Ee=[1,128],Ce=[1,133],we=[1,134],Le=[1,136],Ae=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ne=[2,92],Pe=[1,6,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Re=[2,64],De=[1,161],Ie=[1,167],Me=[1,179],Fe=[1,181],je=[1,176],ze=[1,183],Ue=[1,185],$e=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],Be=[2,111],We=[1,6,31,32,40,41,42,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],qe=[1,6,31,32,40,41,42,46,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ve=[40,41,114],He=[1,242],Ye=[1,241],Ge=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156],Ze=[2,72],Xe=[1,251],Ke=[6,31,32,66,71],Qe=[6,31,32,55,66,71,74],Je=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,166,167,168,169,170,171,172,173,174],et=[40,41,82,83,84,85,87,90,113,114],tt=[1,270],nt=[2,62],rt=[1,281],at=[1,283],ot=[1,288],it=[1,290],st=[2,188],lt=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],dt=[1,299],ct=[6,31,32,71,115,120],pt=[1,6,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],ut=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,140,156],mt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,134,140,156],ft=[146,147,148],yt=[71,146,147,148],gt=[6,31,94],ht=[1,313],bt=[6,31,32,71,94],_t=[6,31,32,58,71,94],xt=[6,31,32,55,58,71,94],vt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,166,167,168,169,170,171,172,173,174],St=[12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,89,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt=[2,177],kt=[6,31,32],Ot=[2,73],Et=[1,325],Ct=[1,326],wt=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,128,131,133,134,135,139,140,151,153,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Lt=[32,151,153],At=[1,6,32,42,66,71,74,89,94,115,120,122,131,134,140,156],Nt=[1,353],Pt=[1,359],Rt=[1,6,32,42,131,156],Dt=[2,87],It=[1,370],Mt=[1,371],Ft=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,151,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],jt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,140,156],zt=[1,384],Ut=[1,385],$t=[6,31,32,94],Bt=[6,31,32,71],Wt=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],qt=[31,71],Vt=[1,411],Ht=[1,412],Yt=[1,418],Gt=[1,419],Zt={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Line:5,TERMINATOR:6,Expression:7,Statement:8,YieldReturn:9,Return:10,Comment:11,STATEMENT:12,Import:13,Export:14,Value:15,Invocation:16,Code:17,Operation:18,Assign:19,If:20,Try:21,While:22,For:23,Switch:24,Class:25,Throw:26,Yield:27,YIELD:28,FROM:29,Block:30,INDENT:31,OUTDENT:32,Identifier:33,IDENTIFIER:34,Property:35,PROPERTY:36,AlphaNumeric:37,NUMBER:38,String:39,STRING:40,STRING_START:41,STRING_END:42,Regex:43,REGEX:44,REGEX_START:45,REGEX_END:46,Literal:47,JS:48,UNDEFINED:49,NULL:50,BOOL:51,INFINITY:52,NAN:53,Assignable:54,"=":55,AssignObj:56,ObjAssignable:57,":":58,SimpleObjAssignable:59,ThisProperty:60,RETURN:61,Object:62,HERECOMMENT:63,PARAM_START:64,ParamList:65,PARAM_END:66,FuncGlyph:67,"->":68,"=>":69,OptComma:70,",":71,Param:72,ParamVar:73,"...":74,Array:75,Splat:76,SimpleAssignable:77,Accessor:78,Parenthetical:79,Range:80,This:81,".":82,"?.":83,"::":84,"?::":85,Index:86,INDEX_START:87,IndexValue:88,INDEX_END:89,INDEX_SOAK:90,Slice:91,"{":92,AssignList:93,"}":94,CLASS:95,EXTENDS:96,IMPORT:97,ImportDefaultSpecifier:98,ImportNamespaceSpecifier:99,ImportSpecifierList:100,ImportSpecifier:101,AS:102,DEFAULT:103,IMPORT_ALL:104,EXPORT:105,ExportSpecifierList:106,EXPORT_ALL:107,ExportSpecifier:108,OptFuncExist:109,Arguments:110,Super:111,SUPER:112,FUNC_EXIST:113,CALL_START:114,CALL_END:115,ArgList:116,THIS:117,"@":118,"[":119,"]":120,RangeDots:121,"..":122,Arg:123,SimpleArgs:124,TRY:125,Catch:126,FINALLY:127,CATCH:128,THROW:129,"(":130,")":131,WhileSource:132,WHILE:133,WHEN:134,UNTIL:135,Loop:136,LOOP:137,ForBody:138,FOR:139,BY:140,ForStart:141,ForSource:142,ForVariables:143,OWN:144,ForValue:145,FORIN:146,FOROF:147,FORFROM:148,SWITCH:149,Whens:150,ELSE:151,When:152,LEADING_WHEN:153,IfBlock:154,IF:155,POST_IF:156,UNARY:157,UNARY_MATH:158,"-":159,"+":160,"--":161,"++":162,"?":163,MATH:164,"**":165,SHIFT:166,COMPARE:167,"&":168,"^":169,"|":170,"&&":171,"||":172,"BIN?":173,RELATION:174,COMPOUND_ASSIGN:175,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",12:"STATEMENT",28:"YIELD",29:"FROM",31:"INDENT",32:"OUTDENT",34:"IDENTIFIER",36:"PROPERTY",38:"NUMBER",40:"STRING",41:"STRING_START",42:"STRING_END",44:"REGEX",45:"REGEX_START",46:"REGEX_END",48:"JS",49:"UNDEFINED",50:"NULL",51:"BOOL",52:"INFINITY",53:"NAN",55:"=",58:":",61:"RETURN",63:"HERECOMMENT",64:"PARAM_START",66:"PARAM_END",68:"->",69:"=>",71:",",74:"...",82:".",83:"?.",84:"::",85:"?::",87:"INDEX_START",89:"INDEX_END",90:"INDEX_SOAK",92:"{",94:"}",95:"CLASS",96:"EXTENDS",97:"IMPORT",102:"AS",103:"DEFAULT",104:"IMPORT_ALL",105:"EXPORT",107:"EXPORT_ALL",112:"SUPER",113:"FUNC_EXIST",114:"CALL_START",115:"CALL_END",117:"THIS",118:"@",119:"[",120:"]",122:"..",125:"TRY",127:"FINALLY",128:"CATCH",129:"THROW",130:"(",131:")",133:"WHILE",134:"WHEN",135:"UNTIL",137:"LOOP",139:"FOR",140:"BY",144:"OWN",146:"FORIN",147:"FOROF",148:"FORFROM",149:"SWITCH",151:"ELSE",153:"LEADING_WHEN",155:"IF",156:"POST_IF",157:"UNARY",158:"UNARY_MATH",159:"-",160:"+",161:"--",162:"++",163:"?",164:"MATH",165:"**",166:"SHIFT",167:"COMPARE",168:"&",169:"^",170:"|",171:"&&",172:"||",173:"BIN?",174:"RELATION",175:"COMPOUND_ASSIGN"},productions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[8,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[27,1],[27,2],[27,3],[30,2],[30,3],[33,1],[35,1],[37,1],[37,1],[39,1],[39,3],[43,1],[43,3],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[19,3],[19,4],[19,5],[56,1],[56,3],[56,5],[56,3],[56,5],[56,1],[59,1],[59,1],[59,1],[57,1],[57,1],[10,2],[10,4],[10,1],[9,3],[9,2],[11,1],[17,5],[17,2],[67,1],[67,1],[70,0],[70,1],[65,0],[65,1],[65,3],[65,4],[65,6],[72,1],[72,2],[72,3],[72,1],[73,1],[73,1],[73,1],[73,1],[76,2],[77,1],[77,2],[77,2],[77,1],[54,1],[54,1],[54,1],[15,1],[15,1],[15,1],[15,1],[15,1],[78,2],[78,2],[78,2],[78,2],[78,1],[78,1],[86,3],[86,2],[88,1],[88,1],[62,4],[93,0],[93,1],[93,3],[93,4],[93,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[13,2],[13,4],[13,4],[13,5],[13,7],[13,6],[13,9],[100,1],[100,3],[100,4],[100,4],[100,6],[101,1],[101,3],[101,1],[101,3],[98,1],[99,3],[14,3],[14,5],[14,2],[14,4],[14,5],[14,6],[14,3],[14,4],[14,7],[106,1],[106,3],[106,4],[106,4],[106,6],[108,1],[108,3],[108,3],[108,1],[108,3],[16,3],[16,3],[16,3],[16,1],[111,1],[111,2],[109,0],[109,1],[110,2],[110,4],[81,1],[81,1],[60,2],[75,2],[75,4],[121,1],[121,1],[80,5],[91,3],[91,2],[91,2],[91,1],[116,1],[116,3],[116,4],[116,4],[116,6],[123,1],[123,1],[123,1],[124,1],[124,3],[21,2],[21,3],[21,4],[21,5],[126,3],[126,3],[126,2],[26,2],[79,3],[79,5],[132,2],[132,4],[132,2],[132,4],[22,2],[22,2],[22,2],[22,1],[136,2],[136,2],[23,2],[23,2],[23,2],[138,2],[138,4],[138,2],[141,2],[141,3],[145,1],[145,1],[145,1],[145,1],[143,1],[143,3],[142,2],[142,2],[142,4],[142,4],[142,4],[142,6],[142,6],[142,2],[142,4],[24,5],[24,7],[24,4],[24,6],[150,1],[150,2],[152,3],[152,4],[154,3],[154,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],performAction:function(e,t,n,r,a,o,i){var s=o.length-1;switch(a){case 1:return this.$=r.addLocationDataFn(i[s],i[s])(new r.Block);break;case 2:return this.$=o[s];break;case 3:this.$=r.addLocationDataFn(i[s],i[s])(r.Block.wrap([o[s]]));break;case 4:this.$=r.addLocationDataFn(i[s-2],i[s])(o[s-2].push(o[s]));break;case 5:this.$=o[s-1];break;case 6:case 7:case 8:case 9:case 10:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 35:case 40:case 42:case 56:case 57:case 58:case 59:case 60:case 61:case 72:case 73:case 83:case 84:case 85:case 86:case 91:case 92:case 95:case 99:case 105:case 164:case 188:case 189:case 191:case 221:case 222:case 240:case 246:this.$=o[s];break;case 11:this.$=r.addLocationDataFn(i[s],i[s])(new r.StatementLiteral(o[s]));break;case 27:this.$=r.addLocationDataFn(i[s],i[s])(new r.Op(o[s],new r.Value(new r.Literal(""))));break;case 28:case 250:case 251:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op(o[s-1],o[s]));break;case 29:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Op(o[s-2].concat(o[s-1]),o[s]));break;case 30:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Block);break;case 31:case 106:this.$=r.addLocationDataFn(i[s-2],i[s])(o[s-1]);break;case 32:this.$=r.addLocationDataFn(i[s],i[s])(new r.IdentifierLiteral(o[s]));break;case 33:this.$=r.addLocationDataFn(i[s],i[s])(new r.PropertyName(o[s]));break;case 34:this.$=r.addLocationDataFn(i[s],i[s])(new r.NumberLiteral(o[s]));break;case 36:this.$=r.addLocationDataFn(i[s],i[s])(new r.StringLiteral(o[s]));break;case 37:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.StringWithInterpolations(o[s-1]));break;case 38:this.$=r.addLocationDataFn(i[s],i[s])(new r.RegexLiteral(o[s]));break;case 39:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.RegexWithInterpolations(o[s-1].args));break;case 41:this.$=r.addLocationDataFn(i[s],i[s])(new r.PassthroughLiteral(o[s]));break;case 43:this.$=r.addLocationDataFn(i[s],i[s])(new r.UndefinedLiteral);break;case 44:this.$=r.addLocationDataFn(i[s],i[s])(new r.NullLiteral);break;case 45:this.$=r.addLocationDataFn(i[s],i[s])(new r.BooleanLiteral(o[s]));break;case 46:this.$=r.addLocationDataFn(i[s],i[s])(new r.InfinityLiteral(o[s]));break;case 47:this.$=r.addLocationDataFn(i[s],i[s])(new r.NaNLiteral);break;case 48:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Assign(o[s-2],o[s]));break;case 49:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Assign(o[s-3],o[s]));break;case 50:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Assign(o[s-4],o[s-1]));break;case 51:case 88:case 93:case 94:case 96:case 97:case 98:case 223:case 224:this.$=r.addLocationDataFn(i[s],i[s])(new r.Value(o[s]));break;case 52:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Assign(r.addLocationDataFn(i[s-2])(new r.Value(o[s-2])),o[s],"object",{operatorToken:r.addLocationDataFn(i[s-1])(new r.Literal(o[s-1]))}));break;case 53:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Assign(r.addLocationDataFn(i[s-4])(new r.Value(o[s-4])),o[s-1],"object",{operatorToken:r.addLocationDataFn(i[s-3])(new r.Literal(o[s-3]))}));break;case 54:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Assign(r.addLocationDataFn(i[s-2])(new r.Value(o[s-2])),o[s],null,{operatorToken:r.addLocationDataFn(i[s-1])(new r.Literal(o[s-1]))}));break;case 55:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Assign(r.addLocationDataFn(i[s-4])(new r.Value(o[s-4])),o[s-1],null,{operatorToken:r.addLocationDataFn(i[s-3])(new r.Literal(o[s-3]))}));break;case 62:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Return(o[s]));break;case 63:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Return(new r.Value(o[s-1])));break;case 64:this.$=r.addLocationDataFn(i[s],i[s])(new r.Return);break;case 65:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.YieldReturn(o[s]));break;case 66:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.YieldReturn);break;case 67:this.$=r.addLocationDataFn(i[s],i[s])(new r.Comment(o[s]));break;case 68:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Code(o[s-3],o[s],o[s-1]));break;case 69:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Code([],o[s],o[s-1]));break;case 70:this.$=r.addLocationDataFn(i[s],i[s])("func");break;case 71:this.$=r.addLocationDataFn(i[s],i[s])("boundfunc");break;case 74:case 111:this.$=r.addLocationDataFn(i[s],i[s])([]);break;case 75:case 112:case 131:case 151:case 183:case 225:this.$=r.addLocationDataFn(i[s],i[s])([o[s]]);break;case 76:case 113:case 132:case 152:case 184:this.$=r.addLocationDataFn(i[s-2],i[s])(o[s-2].concat(o[s]));break;case 77:case 114:case 133:case 153:case 185:this.$=r.addLocationDataFn(i[s-3],i[s])(o[s-3].concat(o[s]));break;case 78:case 115:case 135:case 155:case 187:this.$=r.addLocationDataFn(i[s-5],i[s])(o[s-5].concat(o[s-2]));break;case 79:this.$=r.addLocationDataFn(i[s],i[s])(new r.Param(o[s]));break;case 80:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Param(o[s-1],null,!0));break;case 81:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Param(o[s-2],o[s]));break;case 82:case 190:this.$=r.addLocationDataFn(i[s],i[s])(new r.Expansion);break;case 87:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Splat(o[s-1]));break;case 89:this.$=r.addLocationDataFn(i[s-1],i[s])(o[s-1].add(o[s]));break;case 90:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Value(o[s-1],[].concat(o[s])));break;case 100:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Access(o[s]));break;case 101:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Access(o[s],"soak"));break;case 102:this.$=r.addLocationDataFn(i[s-1],i[s])([r.addLocationDataFn(i[s-1])(new r.Access(new r.PropertyName("prototype"))),r.addLocationDataFn(i[s])(new r.Access(o[s]))]);break;case 103:this.$=r.addLocationDataFn(i[s-1],i[s])([r.addLocationDataFn(i[s-1])(new r.Access(new r.PropertyName("prototype"),"soak")),r.addLocationDataFn(i[s])(new r.Access(o[s]))]);break;case 104:this.$=r.addLocationDataFn(i[s],i[s])(new r.Access(new r.PropertyName("prototype")));break;case 107:this.$=r.addLocationDataFn(i[s-1],i[s])(r.extend(o[s],{soak:!0}));break;case 108:this.$=r.addLocationDataFn(i[s],i[s])(new r.Index(o[s]));break;case 109:this.$=r.addLocationDataFn(i[s],i[s])(new r.Slice(o[s]));break;case 110:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Obj(o[s-2],o[s-3].generated));break;case 116:this.$=r.addLocationDataFn(i[s],i[s])(new r.Class);break;case 117:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Class(null,null,o[s]));break;case 118:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Class(null,o[s]));break;case 119:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Class(null,o[s-1],o[s]));break;case 120:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Class(o[s]));break;case 121:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Class(o[s-1],null,o[s]));break;case 122:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Class(o[s-2],o[s]));break;case 123:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Class(o[s-3],o[s-1],o[s]));break;case 124:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.ImportDeclaration(null,o[s]));break;case 125:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.ImportDeclaration(new r.ImportClause(o[s-2],null),o[s]));break;case 126:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.ImportDeclaration(new r.ImportClause(null,o[s-2]),o[s]));break;case 127:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.ImportDeclaration(new r.ImportClause(null,new r.ImportSpecifierList([])),o[s]));break;case 128:this.$=r.addLocationDataFn(i[s-6],i[s])(new r.ImportDeclaration(new r.ImportClause(null,new r.ImportSpecifierList(o[s-4])),o[s]));break;case 129:this.$=r.addLocationDataFn(i[s-5],i[s])(new r.ImportDeclaration(new r.ImportClause(o[s-4],o[s-2]),o[s]));break;case 130:this.$=r.addLocationDataFn(i[s-8],i[s])(new r.ImportDeclaration(new r.ImportClause(o[s-7],new r.ImportSpecifierList(o[s-4])),o[s]));break;case 134:case 154:case 170:case 186:this.$=r.addLocationDataFn(i[s-3],i[s])(o[s-2]);break;case 136:this.$=r.addLocationDataFn(i[s],i[s])(new r.ImportSpecifier(o[s]));break;case 137:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ImportSpecifier(o[s-2],o[s]));break;case 138:this.$=r.addLocationDataFn(i[s],i[s])(new r.ImportSpecifier(new r.Literal(o[s])));break;case 139:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ImportSpecifier(new r.Literal(o[s-2]),o[s]));break;case 140:this.$=r.addLocationDataFn(i[s],i[s])(new r.ImportDefaultSpecifier(o[s]));break;case 141:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ImportNamespaceSpecifier(new r.Literal(o[s-2]),o[s]));break;case 142:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ExportNamedDeclaration(new r.ExportSpecifierList([])));break;case 143:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.ExportNamedDeclaration(new r.ExportSpecifierList(o[s-2])));break;case 144:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.ExportNamedDeclaration(o[s]));break;case 145:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.ExportNamedDeclaration(new r.Assign(o[s-2],o[s],null,{moduleDeclaration:"export"})));break;case 146:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.ExportNamedDeclaration(new r.Assign(o[s-3],o[s],null,{moduleDeclaration:"export"})));break;case 147:this.$=r.addLocationDataFn(i[s-5],i[s])(new r.ExportNamedDeclaration(new r.Assign(o[s-4],o[s-1],null,{moduleDeclaration:"export"})));break;case 148:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ExportDefaultDeclaration(o[s]));break;case 149:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.ExportAllDeclaration(new r.Literal(o[s-2]),o[s]));break;case 150:this.$=r.addLocationDataFn(i[s-6],i[s])(new r.ExportNamedDeclaration(new r.ExportSpecifierList(o[s-4]),o[s]));break;case 156:this.$=r.addLocationDataFn(i[s],i[s])(new r.ExportSpecifier(o[s]));break;case 157:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ExportSpecifier(o[s-2],o[s]));break;case 158:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ExportSpecifier(o[s-2],new r.Literal(o[s])));break;case 159:this.$=r.addLocationDataFn(i[s],i[s])(new r.ExportSpecifier(new r.Literal(o[s])));break;case 160:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.ExportSpecifier(new r.Literal(o[s-2]),o[s]));break;case 161:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.TaggedTemplateCall(o[s-2],o[s],o[s-1]));break;case 162:case 163:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Call(o[s-2],o[s],o[s-1]));break;case 165:this.$=r.addLocationDataFn(i[s],i[s])(new r.SuperCall);break;case 166:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.SuperCall(o[s]));break;case 167:this.$=r.addLocationDataFn(i[s],i[s])(!1);break;case 168:this.$=r.addLocationDataFn(i[s],i[s])(!0);break;case 169:this.$=r.addLocationDataFn(i[s-1],i[s])([]);break;case 171:case 172:this.$=r.addLocationDataFn(i[s],i[s])(new r.Value(new r.ThisLiteral()));break;case 173:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Value(r.addLocationDataFn(i[s-1])(new r.ThisLiteral),[r.addLocationDataFn(i[s])(new r.Access(o[s]))],"this"));break;case 174:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Arr([]));break;case 175:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Arr(o[s-2]));break;case 176:this.$=r.addLocationDataFn(i[s],i[s])("inclusive");break;case 177:this.$=r.addLocationDataFn(i[s],i[s])("exclusive");break;case 178:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Range(o[s-3],o[s-1],o[s-2]));break;case 179:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Range(o[s-2],o[s],o[s-1]));break;case 180:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Range(o[s-1],null,o[s]));break;case 181:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Range(null,o[s],o[s-1]));break;case 182:this.$=r.addLocationDataFn(i[s],i[s])(new r.Range(null,null,o[s]));break;case 192:this.$=r.addLocationDataFn(i[s-2],i[s])([].concat(o[s-2],o[s]));break;case 193:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Try(o[s]));break;case 194:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Try(o[s-1],o[s][0],o[s][1]));break;case 195:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Try(o[s-2],null,null,o[s]));break;case 196:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Try(o[s-3],o[s-2][0],o[s-2][1],o[s]));break;case 197:this.$=r.addLocationDataFn(i[s-2],i[s])([o[s-1],o[s]]);break;case 198:this.$=r.addLocationDataFn(i[s-2],i[s])([r.addLocationDataFn(i[s-1])(new r.Value(o[s-1])),o[s]]);break;case 199:this.$=r.addLocationDataFn(i[s-1],i[s])([null,o[s]]);break;case 200:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Throw(o[s]));break;case 201:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Parens(o[s-1]));break;case 202:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Parens(o[s-2]));break;case 203:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.While(o[s]));break;case 204:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.While(o[s-2],{guard:o[s]}));break;case 205:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.While(o[s],{invert:!0}));break;case 206:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.While(o[s-2],{invert:!0,guard:o[s]}));break;case 207:this.$=r.addLocationDataFn(i[s-1],i[s])(o[s-1].addBody(o[s]));break;case 208:case 209:this.$=r.addLocationDataFn(i[s-1],i[s])(o[s].addBody(r.addLocationDataFn(i[s-1])(r.Block.wrap([o[s-1]]))));break;case 210:this.$=r.addLocationDataFn(i[s],i[s])(o[s]);break;case 211:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.While(r.addLocationDataFn(i[s-1])(new r.BooleanLiteral("true"))).addBody(o[s]));break;case 212:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.While(r.addLocationDataFn(i[s-1])(new r.BooleanLiteral("true"))).addBody(r.addLocationDataFn(i[s])(r.Block.wrap([o[s]]))));break;case 213:case 214:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.For(o[s-1],o[s]));break;case 215:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.For(o[s],o[s-1]));break;case 216:this.$=r.addLocationDataFn(i[s-1],i[s])({source:r.addLocationDataFn(i[s])(new r.Value(o[s]))});break;case 217:this.$=r.addLocationDataFn(i[s-3],i[s])({source:r.addLocationDataFn(i[s-2])(new r.Value(o[s-2])),step:o[s]});break;case 218:this.$=r.addLocationDataFn(i[s-1],i[s])(function(){return o[s].own=o[s-1].own,o[s].ownTag=o[s-1].ownTag,o[s].name=o[s-1][0],o[s].index=o[s-1][1],o[s]}());break;case 219:this.$=r.addLocationDataFn(i[s-1],i[s])(o[s]);break;case 220:this.$=r.addLocationDataFn(i[s-2],i[s])(function(){return o[s].own=!0,o[s].ownTag=r.addLocationDataFn(i[s-1])(new r.Literal(o[s-1])),o[s]}());break;case 226:this.$=r.addLocationDataFn(i[s-2],i[s])([o[s-2],o[s]]);break;case 227:this.$=r.addLocationDataFn(i[s-1],i[s])({source:o[s]});break;case 228:this.$=r.addLocationDataFn(i[s-1],i[s])({source:o[s],object:!0});break;case 229:this.$=r.addLocationDataFn(i[s-3],i[s])({source:o[s-2],guard:o[s]});break;case 230:this.$=r.addLocationDataFn(i[s-3],i[s])({source:o[s-2],guard:o[s],object:!0});break;case 231:this.$=r.addLocationDataFn(i[s-3],i[s])({source:o[s-2],step:o[s]});break;case 232:this.$=r.addLocationDataFn(i[s-5],i[s])({source:o[s-4],guard:o[s-2],step:o[s]});break;case 233:this.$=r.addLocationDataFn(i[s-5],i[s])({source:o[s-4],step:o[s-2],guard:o[s]});break;case 234:this.$=r.addLocationDataFn(i[s-1],i[s])({source:o[s],from:!0});break;case 235:this.$=r.addLocationDataFn(i[s-3],i[s])({source:o[s-2],guard:o[s],from:!0});break;case 236:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Switch(o[s-3],o[s-1]));break;case 237:this.$=r.addLocationDataFn(i[s-6],i[s])(new r.Switch(o[s-5],o[s-3],o[s-1]));break;case 238:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Switch(null,o[s-1]));break;case 239:this.$=r.addLocationDataFn(i[s-5],i[s])(new r.Switch(null,o[s-3],o[s-1]));break;case 241:this.$=r.addLocationDataFn(i[s-1],i[s])(o[s-1].concat(o[s]));break;case 242:this.$=r.addLocationDataFn(i[s-2],i[s])([[o[s-1],o[s]]]);break;case 243:this.$=r.addLocationDataFn(i[s-3],i[s])([[o[s-2],o[s-1]]]);break;case 244:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.If(o[s-1],o[s],{type:o[s-2]}));break;case 245:this.$=r.addLocationDataFn(i[s-4],i[s])(o[s-4].addElse(r.addLocationDataFn(i[s-2],i[s])(new r.If(o[s-1],o[s],{type:o[s-2]}))));break;case 247:this.$=r.addLocationDataFn(i[s-2],i[s])(o[s-2].addElse(o[s]));break;case 248:case 249:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.If(o[s],r.addLocationDataFn(i[s-2])(r.Block.wrap([o[s-2]])),{type:o[s-1],statement:!0}));break;case 252:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("-",o[s]));break;case 253:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("+",o[s]));break;case 254:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("--",o[s]));break;case 255:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("++",o[s]));break;case 256:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("--",o[s-1],null,!0));break;case 257:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Op("++",o[s-1],null,!0));break;case 258:this.$=r.addLocationDataFn(i[s-1],i[s])(new r.Existence(o[s-1]));break;case 259:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Op("+",o[s-2],o[s]));break;case 260:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Op("-",o[s-2],o[s]));break;case 261:case 262:case 263:case 264:case 265:case 266:case 267:case 268:case 269:case 270:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Op(o[s-1],o[s-2],o[s]));break;case 271:this.$=r.addLocationDataFn(i[s-2],i[s])(function(){return"!"===o[s-1].charAt(0)?new r.Op(o[s-1].slice(1),o[s-2],o[s]).invert():new r.Op(o[s-1],o[s-2],o[s])}());break;case 272:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Assign(o[s-2],o[s],o[s-1]));break;case 273:this.$=r.addLocationDataFn(i[s-4],i[s])(new r.Assign(o[s-4],o[s-1],o[s-3]));break;case 274:this.$=r.addLocationDataFn(i[s-3],i[s])(new r.Assign(o[s-3],o[s],o[s-2]));break;case 275:this.$=r.addLocationDataFn(i[s-2],i[s])(new r.Extends(o[s-2],o[s]));}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:r,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{1:[3]},{1:[2,2],6:V},t(H,[2,3]),t(H,[2,6],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(H,[2,7],{141:77,132:105,138:106,133:R,135:D,139:M,156:le}),t(H,[2,8]),t(de,[2,14],{109:107,78:108,86:114,40:ce,41:ce,114:ce,82:pe,83:ue,84:me,85:fe,87:ye,90:ge,113:he}),t(de,[2,15],{86:114,109:117,78:118,82:pe,83:ue,84:me,85:fe,87:ye,90:ge,113:he,114:ce}),t(de,[2,16]),t(de,[2,17]),t(de,[2,18]),t(de,[2,19]),t(de,[2,20]),t(de,[2,21]),t(de,[2,22]),t(de,[2,23]),t(de,[2,24]),t(de,[2,25]),t(de,[2,26]),t(be,[2,9]),t(be,[2,10]),t(be,[2,11]),t(be,[2,12]),t(be,[2,13]),t([1,6,32,42,131,133,135,139,156,163,164,165,166,167,168,169,170,171,172,173,174],_e,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:[1,119],63:h,64:b,68:_,69:x,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,137:I,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),t(Se,Te,{55:[1,124]}),t(Se,[2,96]),t(Se,[2,97]),t(Se,[2,98]),t(Se,[2,99]),t(ke,[2,164]),t([6,31,66,71],Oe,{65:125,72:126,73:127,33:129,60:130,75:131,62:132,34:a,74:Ee,92:v,118:Ce,119:we}),{30:135,31:Le},{7:137,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:138,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:139,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:140,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{15:142,16:143,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:144,60:71,62:54,75:53,77:141,79:28,80:29,81:30,92:v,111:31,112:O,117:E,118:C,119:w,130:P},{15:142,16:143,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:144,60:71,62:54,75:53,77:145,79:28,80:29,81:30,92:v,111:31,112:O,117:E,118:C,119:w,130:P},t(Ae,Ne,{96:[1,149],161:[1,146],162:[1,147],175:[1,148]}),t(de,[2,246],{151:[1,150]}),{30:151,31:Le},{30:152,31:Le},t(de,[2,210]),{30:153,31:Le},{7:154,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,155],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Pe,[2,116],{47:27,79:28,80:29,81:30,111:31,75:53,62:54,37:55,43:57,33:70,60:71,39:80,15:142,16:143,54:144,30:156,77:158,31:Le,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,92:v,96:[1,157],112:O,117:E,118:C,119:w,130:P}),{7:159,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(be,Re,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:160,12:n,28:xe,31:De,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:g,63:h,64:b,68:_,69:x,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,137:I,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),t([1,6,31,32,42,71,94,131,133,135,139,156],[2,67]),{33:166,34:a,39:162,40:i,41:s,92:[1,165],98:163,99:164,104:Ie},{25:169,33:170,34:a,92:[1,168],95:S,103:[1,171],107:[1,172]},t(Ae,[2,93]),t(Ae,[2,94]),t(Se,[2,40]),t(Se,[2,41]),t(Se,[2,42]),t(Se,[2,43]),t(Se,[2,44]),t(Se,[2,45]),t(Se,[2,46]),t(Se,[2,47]),{4:173,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:r,31:[1,174],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:175,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,116:177,117:E,118:C,119:w,120:je,123:178,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Se,[2,171]),t(Se,[2,172],{35:182,36:ze}),t([1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,165],{110:184,114:Ue}),{31:[2,70]},{31:[2,71]},t($e,[2,88]),t($e,[2,91]),{7:186,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:187,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:188,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:190,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,30:189,31:Le,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{33:195,34:a,60:196,62:198,75:197,80:191,92:v,118:Ce,119:w,143:192,144:[1,193],145:194},{142:199,146:[1,200],147:[1,201],148:[1,202]},t([6,31,71,94],Be,{39:80,93:203,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,34:a,36:ze,38:o,40:i,41:s,63:h,118:Ce}),t(We,[2,34]),t(We,[2,35]),t(Se,[2,38]),{15:142,16:212,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:144,60:71,62:54,75:53,77:213,79:28,80:29,81:30,92:v,111:31,112:O,117:E,118:C,119:w,130:P},t([1,6,29,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,102,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],[2,32]),t(qe,[2,36]),{4:214,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:r,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(H,[2,5],{7:4,8:5,9:6,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,5:215,12:n,28:r,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:g,63:h,64:b,68:_,69:x,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,133:R,135:D,137:I,139:M,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),t(de,[2,258]),{7:216,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:217,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:218,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:219,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:220,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:221,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:222,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:223,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:224,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:225,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:226,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:227,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:228,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:229,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(de,[2,209]),t(de,[2,214]),{7:230,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(de,[2,208]),t(de,[2,213]),{39:231,40:i,41:s,110:232,114:Ue},t($e,[2,89]),t(Ve,[2,168]),{35:233,36:ze},{35:234,36:ze},t($e,[2,104],{35:235,36:ze}),{35:236,36:ze},t($e,[2,105]),{7:238,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:He,75:53,77:40,79:28,80:29,81:30,88:237,91:239,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,121:240,122:Ye,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{86:243,87:ye,90:ge},{110:244,114:Ue},t($e,[2,90]),t(H,[2,66],{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:245,12:n,28:xe,31:De,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:g,63:h,64:b,68:_,69:x,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,133:Re,135:Re,139:Re,156:Re,137:I,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),t(Ge,[2,28],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:246,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{132:105,133:R,135:D,138:106,139:M,141:77,156:le},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,163,164,165,166,167,168,169,170,171,172,173,174],_e,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:g,63:h,64:b,68:_,69:x,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,137:I,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),{6:[1,248],7:247,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,249],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t([6,31],Ze,{70:252,66:[1,250],71:Xe}),t(Ke,[2,75]),t(Ke,[2,79],{55:[1,254],74:[1,253]}),t(Ke,[2,82]),t(Qe,[2,83]),t(Qe,[2,84]),t(Qe,[2,85]),t(Qe,[2,86]),{35:182,36:ze},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,116:177,117:E,118:C,119:w,120:je,123:178,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(de,[2,69]),{4:257,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:r,32:[1,256],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,165,166,167,168,169,170,171,172,173,174],[2,250],{141:77,132:102,138:103,163:X}),t(Je,[2,251],{141:77,132:102,138:103,163:X,165:Q}),t(Je,[2,252],{141:77,132:102,138:103,163:X,165:Q}),t(Je,[2,253],{141:77,132:102,138:103,163:X,165:Q}),t(de,[2,254],{40:Ne,41:Ne,82:Ne,83:Ne,84:Ne,85:Ne,87:Ne,90:Ne,113:Ne,114:Ne}),t(Ve,ce,{109:107,78:108,86:114,82:pe,83:ue,84:me,85:fe,87:ye,90:ge,113:he}),{78:118,82:pe,83:ue,84:me,85:fe,86:114,87:ye,90:ge,109:117,113:he,114:ce},t(et,Te),t(de,[2,255],{40:Ne,41:Ne,82:Ne,83:Ne,84:Ne,85:Ne,87:Ne,90:Ne,113:Ne,114:Ne}),t(de,[2,256]),t(de,[2,257]),{6:[1,260],7:258,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,259],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:261,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{30:262,31:Le,155:[1,263]},t(de,[2,193],{126:264,127:[1,265],128:[1,266]}),t(de,[2,207]),t(de,[2,215]),{31:[1,267],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{150:268,152:269,153:tt},t(de,[2,117]),{7:271,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Pe,[2,120],{30:272,31:Le,40:Ne,41:Ne,82:Ne,83:Ne,84:Ne,85:Ne,87:Ne,90:Ne,113:Ne,114:Ne,96:[1,273]}),t(Ge,[2,200],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(be,nt,{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{62:274,92:v},t(be,[2,124]),{29:[1,275],71:[1,276]},{29:[1,277]},{31:rt,33:282,34:a,94:[1,278],100:279,101:280,103:at},t([29,71],[2,140]),{102:[1,284]},{31:ot,33:289,34:a,94:[1,285],103:it,106:286,108:287},t(be,[2,144]),{55:[1,291]},{7:292,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{29:[1,293]},{6:V,131:[1,294]},{4:295,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:r,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t([6,31,71,120],st,{141:77,132:102,138:103,121:296,74:[1,297],122:Ye,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(lt,[2,174]),t([6,31,120],Ze,{70:298,71:dt}),t(ct,[2,183]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,116:300,117:E,118:C,119:w,123:178,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(ct,[2,189]),t(ct,[2,190]),t(pt,[2,173]),t(pt,[2,33]),t(ke,[2,166]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,115:[1,301],116:302,117:E,118:C,119:w,123:178,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{30:303,31:Le,132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(ut,[2,203],{141:77,132:102,138:103,133:R,134:[1,304],135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(ut,[2,205],{141:77,132:102,138:103,133:R,134:[1,305],135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(de,[2,211]),t(mt,[2,212],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,216],{140:[1,306]}),t(ft,[2,219]),{33:195,34:a,60:196,62:198,75:197,92:v,118:Ce,119:we,143:307,145:194},t(ft,[2,225],{71:[1,308]}),t(yt,[2,221]),t(yt,[2,222]),t(yt,[2,223]),t(yt,[2,224]),t(de,[2,218]),{7:309,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:310,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:311,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(gt,Ze,{70:312,71:ht}),t(bt,[2,112]),t(bt,[2,51],{58:[1,314]}),t(_t,[2,60],{55:[1,315]}),t(bt,[2,56]),t(_t,[2,61]),t(xt,[2,57]),t(xt,[2,58]),t(xt,[2,59]),{46:[1,316],78:118,82:pe,83:ue,84:me,85:fe,86:114,87:ye,90:ge,109:117,113:he,114:ce},t(et,Ne),{6:V,42:[1,317]},t(H,[2,4]),t(vt,[2,259],{141:77,132:102,138:103,163:X,164:K,165:Q}),t(vt,[2,260],{141:77,132:102,138:103,163:X,164:K,165:Q}),t(Je,[2,261],{141:77,132:102,138:103,163:X,165:Q}),t(Je,[2,262],{141:77,132:102,138:103,163:X,165:Q}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,166,167,168,169,170,171,172,173,174],[2,263],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173],[2,264],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,168,169,170,171,172,173],[2,265],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,169,170,171,172,173],[2,266],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,170,171,172,173],[2,267],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,171,172,173],[2,268],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,172,173],[2,269],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,173],[2,270],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173,174],[2,271],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J}),t(mt,[2,249],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(mt,[2,248],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(ke,[2,161]),t(ke,[2,162]),t($e,[2,100]),t($e,[2,101]),t($e,[2,102]),t($e,[2,103]),{89:[1,318]},{74:He,89:[2,108],121:319,122:Ye,132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{89:[2,109]},{7:320,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,182],92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(St,[2,176]),t(St,Tt),t($e,[2,107]),t(ke,[2,163]),t(H,[2,65],{141:77,132:102,138:103,133:nt,135:nt,139:nt,156:nt,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(Ge,[2,29],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(Ge,[2,48],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:321,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:322,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{67:323,68:_,69:x},t(kt,Ot,{73:127,33:129,60:130,75:131,62:132,72:324,34:a,74:Ee,92:v,118:Ce,119:we}),{6:Et,31:Ct},t(Ke,[2,80]),{7:327,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(ct,st,{141:77,132:102,138:103,74:[1,328],133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(wt,[2,30]),{6:V,32:[1,329]},t(Ge,[2,272],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:330,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:331,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Ge,[2,275],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(de,[2,247]),{7:332,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(de,[2,194],{127:[1,333]}),{30:334,31:Le},{30:337,31:Le,33:335,34:a,62:336,92:v},{150:338,152:269,153:tt},{32:[1,339],151:[1,340],152:341,153:tt},t(Lt,[2,240]),{7:343,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,124:342,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(At,[2,118],{141:77,132:102,138:103,30:344,31:Le,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(de,[2,121]),{7:345,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{32:[1,346]},{39:347,40:i,41:s},{92:[1,349],99:348,104:Ie},{39:350,40:i,41:s},{29:[1,351]},t(gt,Ze,{70:352,71:Nt}),t(bt,[2,131]),{31:rt,33:282,34:a,100:354,101:280,103:at},t(bt,[2,136],{102:[1,355]}),t(bt,[2,138],{102:[1,356]}),{33:357,34:a},t(be,[2,142]),t(gt,Ze,{70:358,71:Pt}),t(bt,[2,151]),{31:ot,33:289,34:a,103:it,106:360,108:287},t(bt,[2,156],{102:[1,361]}),t(bt,[2,159],{102:[1,362]}),{6:[1,364],7:363,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,365],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Rt,[2,148],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{39:366,40:i,41:s},t(Se,[2,201]),{6:V,32:[1,367]},{7:368,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t([12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt,{6:Dt,31:Dt,71:Dt,120:Dt}),{6:It,31:Mt,120:[1,369]},t([6,31,32,115,120],Ot,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,76:180,7:255,123:372,12:n,28:xe,34:a,38:o,40:i,41:s,44:l,45:d,48:c,49:p,50:u,51:m,52:f,53:y,61:g,63:h,64:b,68:_,69:x,74:Fe,92:v,95:S,97:T,105:k,112:O,117:E,118:C,119:w,125:A,129:N,130:P,133:R,135:D,137:I,139:M,149:F,155:j,157:z,158:U,159:$,160:B,161:W,162:q}),t(kt,Ze,{70:373,71:dt}),t(ke,[2,169]),t([6,31,115],Ze,{70:374,71:dt}),t(Ft,[2,244]),{7:375,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:376,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:377,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(ft,[2,220]),{33:195,34:a,60:196,62:198,75:197,92:v,118:Ce,119:we,145:378},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,156],[2,227],{141:77,132:102,138:103,134:[1,379],140:[1,380],159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(jt,[2,228],{141:77,132:102,138:103,134:[1,381],159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(jt,[2,234],{141:77,132:102,138:103,134:[1,382],159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{6:zt,31:Ut,94:[1,383]},t($t,Ot,{39:80,57:205,59:206,11:207,37:208,33:209,35:210,60:211,56:386,34:a,36:ze,38:o,40:i,41:s,63:h,118:Ce}),{7:387,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,388],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:389,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,390],33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(Se,[2,39]),t(qe,[2,37]),t($e,[2,106]),{7:391,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,180],92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{89:[2,181],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(Ge,[2,49],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{32:[1,392],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{30:393,31:Le},t(Ke,[2,76]),{33:129,34:a,60:130,62:132,72:394,73:127,74:Ee,75:131,92:v,118:Ce,119:we},t(Bt,Oe,{72:126,73:127,33:129,60:130,75:131,62:132,65:395,34:a,74:Ee,92:v,118:Ce,119:we}),t(Ke,[2,81],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(ct,Dt),t(wt,[2,31]),{32:[1,396],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(Ge,[2,274],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{30:397,31:Le,132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{30:398,31:Le},t(de,[2,195]),{30:399,31:Le},{30:400,31:Le},t(Wt,[2,199]),{32:[1,401],151:[1,402],152:341,153:tt},t(de,[2,238]),{30:403,31:Le},t(Lt,[2,241]),{30:404,31:Le,71:[1,405]},t(qt,[2,191],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(de,[2,119]),t(At,[2,122],{141:77,132:102,138:103,30:406,31:Le,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(be,[2,63]),t(be,[2,125]),{29:[1,407]},{31:rt,33:282,34:a,100:408,101:280,103:at},t(be,[2,126]),{39:409,40:i,41:s},{6:Vt,31:Ht,94:[1,410]},t($t,Ot,{33:282,101:413,34:a,103:at}),t(kt,Ze,{70:414,71:Nt}),{33:415,34:a},{33:416,34:a},{29:[2,141]},{6:Yt,31:Gt,94:[1,417]},t($t,Ot,{33:289,108:420,34:a,103:it}),t(kt,Ze,{70:421,71:Pt}),{33:422,34:a,103:[1,423]},{33:424,34:a},t(Rt,[2,145],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:425,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:426,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(be,[2,149]),{131:[1,427]},{120:[1,428],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(lt,[2,175]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,123:429,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,116:430,117:E,118:C,119:w,123:178,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(ct,[2,184]),{6:It,31:Mt,32:[1,431]},{6:It,31:Mt,115:[1,432]},t(mt,[2,204],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(mt,[2,206],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(mt,[2,217],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(ft,[2,226]),{7:433,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:434,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:435,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:436,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(lt,[2,110]),{11:207,33:209,34:a,35:210,36:ze,37:208,38:o,39:80,40:i,41:s,56:437,57:205,59:206,60:211,63:h,118:Ce},t(Bt,Be,{39:80,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,93:438,34:a,36:ze,38:o,40:i,41:s,63:h,118:Ce}),t(bt,[2,113]),t(bt,[2,52],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:439,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(bt,[2,54],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{7:440,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{89:[2,179],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(de,[2,50]),t(de,[2,68]),t(Ke,[2,77]),t(kt,Ze,{70:441,71:Xe}),t(de,[2,273]),t(Ft,[2,245]),t(de,[2,196]),t(Wt,[2,197]),t(Wt,[2,198]),t(de,[2,236]),{30:442,31:Le},{32:[1,443]},t(Lt,[2,242],{6:[1,444]}),{7:445,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},t(de,[2,123]),{39:446,40:i,41:s},t(gt,Ze,{70:447,71:Nt}),t(be,[2,127]),{29:[1,448]},{33:282,34:a,101:449,103:at},{31:rt,33:282,34:a,100:450,101:280,103:at},t(bt,[2,132]),{6:Vt,31:Ht,32:[1,451]},t(bt,[2,137]),t(bt,[2,139]),t(be,[2,143],{29:[1,452]}),{33:289,34:a,103:it,108:453},{31:ot,33:289,34:a,103:it,106:454,108:287},t(bt,[2,152]),{6:Yt,31:Gt,32:[1,455]},t(bt,[2,157]),t(bt,[2,158]),t(bt,[2,160]),t(Rt,[2,146],{141:77,132:102,138:103,133:R,135:D,139:M,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),{32:[1,456],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},t(Se,[2,202]),t(Se,[2,178]),t(ct,[2,185]),t(kt,Ze,{70:457,71:dt}),t(ct,[2,186]),t(ke,[2,170]),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156],[2,229],{141:77,132:102,138:103,140:[1,458],159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(jt,[2,231],{141:77,132:102,138:103,134:[1,459],159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(Ge,[2,230],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(Ge,[2,235],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(bt,[2,114]),t(kt,Ze,{70:460,71:ht}),{32:[1,461],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{32:[1,462],132:102,133:R,135:D,138:103,139:M,141:77,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se},{6:Et,31:Ct,32:[1,463]},{32:[1,464]},t(de,[2,239]),t(Lt,[2,243]),t(qt,[2,192],{141:77,132:102,138:103,133:R,135:D,139:M,156:Y,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(be,[2,129]),{6:Vt,31:Ht,94:[1,465]},{39:466,40:i,41:s},t(bt,[2,133]),t(kt,Ze,{70:467,71:Nt}),t(bt,[2,134]),{39:468,40:i,41:s},t(bt,[2,153]),t(kt,Ze,{70:469,71:Pt}),t(bt,[2,154]),t(be,[2,147]),{6:It,31:Mt,32:[1,470]},{7:471,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{7:472,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:a,37:55,38:o,39:80,40:i,41:s,43:57,44:l,45:d,47:27,48:c,49:p,50:u,51:m,52:f,53:y,54:26,60:71,61:g,62:54,63:h,64:b,67:33,68:_,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:O,117:E,118:C,119:w,125:A,129:N,130:P,132:43,133:R,135:D,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:j,157:z,158:U,159:$,160:B,161:W,162:q},{6:zt,31:Ut,32:[1,473]},t(bt,[2,53]),t(bt,[2,55]),t(Ke,[2,78]),t(de,[2,237]),{29:[1,474]},t(be,[2,128]),{6:Vt,31:Ht,32:[1,475]},t(be,[2,150]),{6:Yt,31:Gt,32:[1,476]},t(ct,[2,187]),t(Ge,[2,232],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(Ge,[2,233],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:Q,166:J,167:ee,168:te,169:ne,170:re,171:ae,172:oe,173:ie,174:se}),t(bt,[2,115]),{39:477,40:i,41:s},t(bt,[2,135]),t(bt,[2,155]),t(be,[2,130])],defaultActions:{68:[2,70],69:[2,71],239:[2,109],357:[2,141]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{function n(e,t){this.message=e,this.hash=t}throw n.prototype=Error,new n(e,t)}},parse:function(e){var t=this,n=[0],a=[null],o=[],i=this.table,s="",l=0,d=0,c=0,u=1,m=o.slice.call(arguments,1),f=Object.create(this.lexer),y={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(y.yy[g]=this.yy[g]);f.setInput(e,y.yy),y.yy.lexer=f,y.yy.parser=this,"undefined"==typeof f.yylloc&&(f.yylloc={});var h=f.yylloc;o.push(h);var b=f.options&&f.options.ranges;this.parseError="function"==typeof y.yy.parseError?y.yy.parseError:Object.getPrototypeOf(this).parseError;_token_stack:var _=function(){var e;return e=f.lex()||u,"number"!=typeof e&&(e=t.symbols_[e]||e),e};for(var x={},v,S,T,k,O,E,p,C,w;;){if(T=n[n.length-1],this.defaultActions[T]?k=this.defaultActions[T]:((null===v||"undefined"==typeof v)&&(v=_()),k=i[T]&&i[T][v]),"undefined"==typeof k||!k.length||!k[0]){var A="";for(E in w=[],i[T])this.terminals_[E]&&E>2&&w.push("'"+this.terminals_[E]+"'");A=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(l+1)+": Unexpected "+(v==u?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(A,{text:f.match,token:this.terminals_[v]||v,line:f.yylineno,loc:h,expected:w})}if(k[0]instanceof Array&&1<k.length)throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+v);switch(k[0]){case 1:n.push(v),a.push(f.yytext),o.push(f.yylloc),n.push(k[1]),v=null,S?(v=S,S=null):(d=f.yyleng,s=f.yytext,l=f.yylineno,h=f.yylloc,0<c&&c--);break;case 2:if(p=this.productions_[k[1]][1],x.$=a[a.length-p],x._$={first_line:o[o.length-(p||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(p||1)].first_column,last_column:o[o.length-1].last_column},b&&(x._$.range=[o[o.length-(p||1)].range[0],o[o.length-1].range[1]]),O=this.performAction.apply(x,[s,d,l,y.yy,k[1],a,o].concat(m)),"undefined"!=typeof O)return O;p&&(n=n.slice(0,2*(-1*p)),a=a.slice(0,-1*p),o=o.slice(0,-1*p)),n.push(this.productions_[k[1]][0]),a.push(x.$),o.push(x._$),C=i[n[n.length-2]][n[n.length-1]],n.push(C);break;case 3:return!0;}}return!0}};return e.prototype=Zt,Zt.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=a,n.Parser=a.Parser,n.parse=function(){return a.parse.apply(a,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),r.exit(1));var a="",o=e("fs");return"undefined"!=typeof o&&null!==o&&(a=o.readFileSync(e("path").normalize(t[1]),"utf8")),n.parser.parse(a)},"undefined"!=typeof t&&e.main===t&&n.main(r.argv.slice(1)))}).call(this,e("_process"))},{_process:30,fs:3,path:29}],10:[function(e){(function(){var t,n,r,a,o,s,l,d,c,i,p,u,m;if(t=e("./coffee-script"),a=e("child_process"),d=e("./helpers"),u=e("path"),p=function(e,n){var r;return r=t._compileFile(n,!1,!0),e._compile(r,n)},e.extensions){for(m=t.FILE_EXTENSIONS,c=0,i=m.length;c<i;c++)o=m[c],e.extensions[o]=p;n=e("module"),s=function(e){var t,r;for(r=u.basename(e).split("."),""===r[0]&&r.shift();r.shift();)if(t="."+r.join("."),n._extensions[t])return t;return".js"},n.prototype.load=function(e){var t;return this.filename=e,this.paths=n._nodeModulePaths(u.dirname(e)),t=s(e),n._extensions[t](this,e),this.loaded=!0}}a&&(l=a.fork,r=e.resolve("../../bin/coffee"),a.fork=function(e,t,n){return d.isCoffee(e)&&(!Array.isArray(t)&&(n=t||{},t=[]),t=[e].concat(t),e=r),l(e,t,n)})}).call(this)},{"./coffee-script":5,"./helpers":6,child_process:3,module:3,path:29}],11:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice,r,a,o,l,d,c,p,u,m,i,f,s,y,g,h,b,_,x,v,S;for(h=function(e,t,n){var r;return r=[e,t],r.generated=!0,n&&(r.origin=n),r},n.Rewriter=s=function(){function n(){}return n.prototype.rewrite=function(e){return this.tokens=e,this.removeLeadingNewlines(),this.closeOpenCalls(),this.closeOpenIndexes(),this.normalizeLines(),this.tagPostfixConditionals(),this.addImplicitBracesAndParens(),this.addLocationDataToGeneratedTokens(),this.fixOutdentLocationData(),this.tokens},n.prototype.scanTokens=function(e){var t,n,r;for(r=this.tokens,t=0;n=r[t];)t+=e.call(this,n,t,r);return!0},n.prototype.detectEnd=function(t,n,r){var a,o,i,s,c;for(c=this.tokens,a=0;s=c[t];){if(0===a&&n.call(this,s,t))return r.call(this,s,t);if(!s||0>a)return r.call(this,s,t-1);(o=s[0],0<=e.call(d,o))?a+=1:(i=s[0],0<=e.call(l,i))&&(a-=1),t+=1}return t-1},n.prototype.removeLeadingNewlines=function(){var e,t,n,r,a;for(r=this.tokens,e=t=0,n=r.length;t<n&&(a=r[e][0],"TERMINATOR"===a);e=++t);if(e)return this.tokens.splice(0,e)},n.prototype.closeOpenCalls=function(){var e,t;return t=function(e,t){var n;return")"===(n=e[0])||"CALL_END"===n||"OUTDENT"===e[0]&&")"===this.tag(t-1)},e=function(e,t){return this.tokens["OUTDENT"===e[0]?t-1:t][0]="CALL_END"},this.scanTokens(function(n,r){return"CALL_START"===n[0]&&this.detectEnd(r+1,t,e),1})},n.prototype.closeOpenIndexes=function(){var e,t;return t=function(e){var t;return"]"===(t=e[0])||"INDEX_END"===t},e=function(e){return e[0]="INDEX_END"},this.scanTokens(function(n,r){return"INDEX_START"===n[0]&&this.detectEnd(r+1,t,e),1})},n.prototype.indexOfTag=function(){var n,r,a,o,i,s,l;for(r=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],n=0,(a=o=0,s=i.length);0<=s?o<s:o>s;a=0<=s?++o:--o){for(;"HERECOMMENT"===this.tag(r+a+n);)n+=2;if(null!=i[a]&&("string"==typeof i[a]&&(i[a]=[i[a]]),l=this.tag(r+a+n),0>e.call(i[a],l)))return-1}return r+a+n-1},n.prototype.looksObjectish=function(t){var n,r;return-1<this.indexOfTag(t,"@",null,":")||-1<this.indexOfTag(t,null,":")||(r=this.indexOfTag(t,d),-1<r&&(n=null,this.detectEnd(r+1,function(t){var n;return n=t[0],0<=e.call(l,n)},function(e,t){return n=t}),":"===this.tag(n+1)))},n.prototype.findTagsBackwards=function(t,n){var r,a,o,i,s,c,p;for(r=[];0<=t&&(r.length||(i=this.tag(t),0>e.call(n,i))&&((s=this.tag(t),0>e.call(d,s))||this.tokens[t].generated)&&(c=this.tag(t),0>e.call(f,c)));)(a=this.tag(t),0<=e.call(l,a))&&r.push(this.tag(t)),(o=this.tag(t),0<=e.call(d,o))&&r.length&&r.pop(),t-=1;return p=this.tag(t),0<=e.call(n,p)},n.prototype.addImplicitBracesAndParens=function(){var t,n;return t=[],n=null,this.scanTokens(function(r,o,i){var y,g,b,_,x,v,S,T,O,E,C,k,w,A,N,P,R,D,I,M,F,j,z,s,U,$,B,W,q,V,H,Y,G;if(G=r[0],N=(P=0<o?i[o-1]:[])[0],w=(o<i.length-1?i[o+1]:[])[0],W=function(){return t[t.length-1]},q=o,b=function(e){return o-q+e},T=function(e){var t;return null==e||null==(t=e[2])?void 0:t.ours},E=function(e){return T(e)&&"{"===(null==e?void 0:e[0])},O=function(e){return T(e)&&"("===(null==e?void 0:e[0])},_=function(){return T(W())},x=function(){return O(W())},S=function(){return E(W())},v=function(){var e;return _&&"CONTROL"===(null==(e=W())?void 0:e[0])},V=function(e){var n;if(n=null==e?o:e,t.push(["(",n,{ours:!0}]),i.splice(n,0,h("CALL_START","(",["","implicit function call",r[2]])),null==e)return o+=1},y=function(){return t.pop(),i.splice(o,0,h("CALL_END",")",["","end of input",r[2]])),o+=1},H=function(e,n){var a,s;if(null==n&&(n=!0),a=null==e?o:e,t.push(["{",a,{sameLine:!0,startsLine:n,ours:!0}]),s=new String("{"),s.generated=!0,i.splice(a,0,h("{",s,r)),null==e)return o+=1},g=function(e){return e=null==e?o:e,t.pop(),i.splice(e,0,h("}","}",r)),o+=1},x()&&("IF"===G||"TRY"===G||"FINALLY"===G||"CATCH"===G||"CLASS"===G||"SWITCH"===G))return t.push(["CONTROL",o,{ours:!0}]),b(1);if("INDENT"===G&&_()){if("=>"!==N&&"->"!==N&&"["!==N&&"("!==N&&","!==N&&"{"!==N&&"TRY"!==N&&"ELSE"!==N&&"="!==N)for(;x();)y();return v()&&t.pop(),t.push([G,o]),b(1)}if(0<=e.call(d,G))return t.push([G,o]),b(1);if(0<=e.call(l,G)){for(;_();)x()?y():S()?g():t.pop();n=t.pop()}if((0<=e.call(u,G)&&r.spaced||"?"===G&&0<o&&!i[o-1].spaced)&&(0<=e.call(c,w)||0<=e.call(m,w)&&(null==(R=i[o+1])||!R.spaced)&&(null==(D=i[o+1])||!D.newLine)))return"?"===G&&(G=r[0]="FUNC_EXIST"),V(o+1),b(2);if(0<=e.call(u,G)&&-1<this.indexOfTag(o+1,"INDENT")&&this.looksObjectish(o+2)&&!this.findTagsBackwards(o,["CLASS","EXTENDS","IF","CATCH","SWITCH","LEADING_WHEN","FOR","WHILE","UNTIL"]))return V(o+1),t.push(["INDENT",o+2]),b(3);if(":"===G){for(z=function(){var t;switch(!1){case(t=this.tag(o-1),0>e.call(l,t)):return n[1];case"@"!==this.tag(o-2):return o-2;default:return o-1;}}.call(this);"HERECOMMENT"===this.tag(z-2);)z-=2;return(this.insideForDeclaration="FOR"===w,Y=0===z||(I=this.tag(z-1),0<=e.call(f,I))||i[z-1].newLine,W()&&(M=W(),B=M[0],U=M[1],("{"===B||"INDENT"===B&&"{"===this.tag(U-1))&&(Y||","===this.tag(z-1)||"{"===this.tag(z-1))))?b(1):(H(z,!!Y),b(2))}if(0<=e.call(f,G))for(C=t.length-1;0<=C&&($=t[C],!!T($));C+=-1)E($)&&($[2].sameLine=!1);if(k="OUTDENT"===N||P.newLine,0<=e.call(p,G)||0<=e.call(a,G)&&k)for(;_();)if(F=W(),B=F[0],U=F[1],j=F[2],s=j.sameLine,Y=j.startsLine,x()&&","!==N)y();else if(S()&&!this.insideForDeclaration&&s&&"TERMINATOR"!==G&&":"!==N)g();else if(S()&&"TERMINATOR"===G&&","!==N&&!(Y&&this.looksObjectish(o+1))){if("HERECOMMENT"===w)return b(1);g()}else break;if(","===G&&!this.looksObjectish(o+1)&&S()&&!this.insideForDeclaration&&("TERMINATOR"!==w||!this.looksObjectish(o+2)))for(A="OUTDENT"===w?1:0;S();)g(o+A);return b(1)})},n.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(e,t,n){var r,a,o,i,s,l;return e[2]?1:e.generated||e.explicit?("{"===e[0]&&(o=null==(s=n[t+1])?void 0:s[2])?(a=o.first_line,r=o.first_column):(i=null==(l=n[t-1])?void 0:l[2])?(a=i.last_line,r=i.last_column):a=r=0,e[2]={first_line:a,first_column:r,last_line:a,last_column:r},1):1})},n.prototype.fixOutdentLocationData=function(){return this.scanTokens(function(e,t,n){var r;return"OUTDENT"===e[0]||e.generated&&"CALL_END"===e[0]||e.generated&&"}"===e[0]?(r=n[t-1][2],e[2]={first_line:r.last_line,first_column:r.last_column,last_line:r.last_line,last_column:r.last_column},1):1})},n.prototype.normalizeLines=function(){var n,r,s,l,d;return d=s=l=null,r=function(t,n){var r,i,s,l;return";"!==t[1]&&(r=t[0],0<=e.call(y,r))&&!("TERMINATOR"===t[0]&&(i=this.tag(n+1),0<=e.call(o,i)))&&("ELSE"!==t[0]||"THEN"===d)&&("CATCH"!==(s=t[0])&&"FINALLY"!==s||"->"!==d&&"=>"!==d)||(l=t[0],0<=e.call(a,l))&&(this.tokens[n-1].newLine||"OUTDENT"===this.tokens[n-1][0])},n=function(e,t){return this.tokens.splice(","===this.tag(t-1)?t-1:t,0,l)},this.scanTokens(function(a,c,i){var p,u,m,f,y,h;if(h=a[0],"TERMINATOR"===h){if("ELSE"===this.tag(c+1)&&"OUTDENT"!==this.tag(c-1))return i.splice.apply(i,[c,1].concat(t.call(this.indentation()))),1;if(m=this.tag(c+1),0<=e.call(o,m))return i.splice(c,1),0}if("CATCH"===h)for(p=u=1;2>=u;p=++u)if("OUTDENT"===(f=this.tag(c+p))||"TERMINATOR"===f||"FINALLY"===f)return i.splice.apply(i,[c+p,0].concat(t.call(this.indentation()))),2+p;return 0<=e.call(g,h)&&"INDENT"!==this.tag(c+1)&&("ELSE"!==h||"IF"!==this.tag(c+1))?(d=h,y=this.indentation(i[c]),s=y[0],l=y[1],"THEN"===d&&(s.fromThen=!0),i.splice(c+1,0,s),this.detectEnd(c+2,r,n),"THEN"===h&&i.splice(c,1),1):1})},n.prototype.tagPostfixConditionals=function(){var t,n,r;return r=null,n=function(t,n){var r,a;return a=t[0],r=this.tokens[n-1][0],"TERMINATOR"===a||"INDENT"===a&&0>e.call(g,r)},t=function(e){if("INDENT"!==e[0]||e.generated&&!e.fromThen)return r[0]="POST_"+r[0]},this.scanTokens(function(e,a){return"IF"===e[0]?(r=e,this.detectEnd(a+1,n,t),1):1})},n.prototype.indentation=function(e){var t,n;return t=["INDENT",2],n=["OUTDENT",2],e?(t.generated=n.generated=!0,t.origin=n.origin=e):t.explicit=n.explicit=!0,[t,n]},n.prototype.generate=h,n.prototype.tag=function(e){var t;return null==(t=this.tokens[e])?void 0:t[0]},n}(),r=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"],["STRING_START","STRING_END"],["REGEX_START","REGEX_END"]],n.INVERSES=i={},d=[],l=[],(b=0,x=r.length);b<x;b++)v=r[b],_=v[0],S=v[1],d.push(i[S]=_),l.push(i[_]=S);o=["CATCH","THEN","ELSE","FINALLY"].concat(l),u=["IDENTIFIER","PROPERTY","SUPER",")","CALL_END","]","INDEX_END","@","THIS"],c=["IDENTIFIER","PROPERTY","NUMBER","INFINITY","NAN","STRING","STRING_START","REGEX","REGEX_START","JS","NEW","PARAM_START","CLASS","IF","TRY","SWITCH","THIS","UNDEFINED","NULL","BOOL","UNARY","YIELD","UNARY_MATH","SUPER","THROW","@","->","=>","[","(","{","--","++"],m=["+","-"],p=["POST_IF","FOR","WHILE","UNTIL","WHEN","BY","LOOP","TERMINATOR"],g=["ELSE","->","=>","TRY","FINALLY","THEN"],y=["TERMINATOR","CATCH","FINALLY","ELSE","OUTDENT","LEADING_WHEN"],f=["TERMINATOR","INDENT","OUTDENT"],a=[".","?.","::","?::"]}).call(this)},{}],12:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t;n.Scope=t=function(){function t(e,t,n,r){var a,o;this.parent=e,this.expressions=t,this.method=n,this.referencedVars=r,this.variables=[{name:"arguments",type:"arguments"}],this.positions={},this.parent||(this.utilities={}),this.root=null==(a=null==(o=this.parent)?void 0:o.root)?this:a}return t.prototype.add=function(e,t,n){return this.shared&&!n?this.parent.add(e,t,n):Object.prototype.hasOwnProperty.call(this.positions,e)?this.variables[this.positions[e]].type=t:this.positions[e]=this.variables.push({name:e,type:t})-1},t.prototype.namedMethod=function(){var e;return(null==(e=this.method)?void 0:e.name)||!this.parent?this.method:this.parent.namedMethod()},t.prototype.find=function(e,t){return(null==t&&(t="var"),!!this.check(e))||(this.add(e,t),!1)},t.prototype.parameter=function(e){return this.shared&&this.parent.check(e,!0)?void 0:this.add(e,"param")},t.prototype.check=function(e){var t;return!!(this.type(e)||(null==(t=this.parent)?void 0:t.check(e)))},t.prototype.temporary=function(e,t,n){var r,a,o,i,s,l;return null==n&&(n=!1),n?(l=e.charCodeAt(0),a=122,r=a-l,i=l+t%(r+1),o=String.fromCharCode(i),s=Math.floor(t/(r+1)),""+o+(s||"")):""+e+(t||"")},t.prototype.type=function(e){var t,n,r,a;for(r=this.variables,t=0,n=r.length;t<n;t++)if(a=r[t],a.name===e)return a.type;return null},t.prototype.freeVariable=function(t,n){var r,a,o;for(null==n&&(n={}),r=0;o=this.temporary(t,r,n.single),!!(this.check(o)||0<=e.call(this.root.referencedVars,o));)r++;return(null==(a=n.reserve)||a)&&this.add(o,"var",!0),o},t.prototype.assign=function(e,t){return this.add(e,{value:t,assigned:!0},!0),this.hasAssignments=!0},t.prototype.hasDeclarations=function(){return!!this.declaredVariables().length},t.prototype.declaredVariables=function(){var e;return function(){var t,n,r,a;for(r=this.variables,a=[],(t=0,n=r.length);t<n;t++)e=r[t],"var"===e.type&&a.push(e.name);return a}.call(this).sort()},t.prototype.assignedVariables=function(){var e,t,n,r,a;for(n=this.variables,r=[],(e=0,t=n.length);e<t;e++)a=n[e],a.type.assigned&&r.push(a.name+" = "+a.type.value);return r},t}()}).call(this)},{}],13:[function(e,t){(function(){var e,n;e=function(){function e(e){this.line=e,this.columns=[]}return e.prototype.add=function(e,t,n){var r,a;return a=t[0],r=t[1],null==n&&(n={}),this.columns[e]&&n.noReplace?void 0:this.columns[e]={line:this.line,column:e,sourceLine:a,sourceColumn:r}},e.prototype.sourceLocation=function(e){for(var t;!((t=this.columns[e])||0>=e);)e--;return t&&[t.sourceLine,t.sourceColumn]},e}(),n=function(){function t(){this.lines=[]}var n,r,a,o;return t.prototype.add=function(t,n,r){var a,o,i,s;return null==r&&(r={}),i=n[0],o=n[1],s=(a=this.lines)[i]||(a[i]=new e(i)),s.add(o,t,r)},t.prototype.sourceLocation=function(e){var t,n,r;for(n=e[0],t=e[1];!((r=this.lines[n])||0>=n);)n--;return r&&r.sourceLocation(t)},t.prototype.generate=function(e,t){var n,r,a,o,i,s,l,d,c,p,u,m,f,y,g,h;for(null==e&&(e={}),null==t&&(t=null),h=0,o=0,s=0,i=0,m=!1,n="",f=this.lines,(p=r=0,l=f.length);r<l;p=++r)if(c=f[p],c)for(y=c.columns,a=0,d=y.length;a<d;a++)if(u=y[a],!!u){for(;h<u.line;)o=0,m=!1,n+=";",h++;m&&(n+=",",m=!1),n+=this.encodeVlq(u.column-o),o=u.column,n+=this.encodeVlq(0),n+=this.encodeVlq(u.sourceLine-s),s=u.sourceLine,n+=this.encodeVlq(u.sourceColumn-i),i=u.sourceColumn,m=!0}return g={version:3,file:e.generatedFile||"",sourceRoot:e.sourceRoot||"",sources:e.sourceFiles||[""],names:[],mappings:n},e.inlineMap&&(g.sourcesContent=[t]),g},a=5,r=1<<a,o=r-1,t.prototype.encodeVlq=function(e){var t,n,i,s;for(t="",i=0>e?1:0,s=(Math.abs(e)<<1)+i;s||!t;)n=s&o,s>>=a,s&&(n|=r),t+=this.encodeBase64(n);return t},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.prototype.encodeBase64=function(e){return n[e]||function(){throw new Error("Cannot Base64 encode value: "+e)}()},t}(),t.exports=n}).call(this)},{}],14:[function(e,t){t.exports={name:"coffee-script",description:"Unfancy JavaScript",keywords:["javascript","language","coffeescript","compiler"],author:"Jeremy Ashkenas",version:"1.12.7",license:"MIT",engines:{node:">=0.8.0"},directories:{lib:"./lib/coffee-script"},main:"./lib/coffee-script/coffee-script",bin:{coffee:"./bin/coffee",cake:"./bin/cake"},files:["bin","lib","register.js","repl.js"],scripts:{test:"node ./bin/cake test","test-harmony":"node --harmony ./bin/cake test"},homepage:"http://coffeescript.org",bugs:"https://github.com/jashkenas/coffeescript/issues",repository:{type:"git",url:"git://github.com/jashkenas/coffeescript.git"},devDependencies:{docco:"~0.7.0","google-closure-compiler-js":"^20170626.0.0","highlight.js":"~9.12.0",jison:">=0.4.17","markdown-it":"^8.3.1",underscore:"~1.8.3"}}},{}],15:[function(e,t){"use strict";var n=e("./stringify"),r=e("./parse");t.exports={stringify:n,parse:r}},{"./parse":16,"./stringify":17}],16:[function(e,t){"use strict";function n(e,t){return t}function r(e){return e.toString().match(/^function\s*([^( ]+)/)[1]}function a(e){var t=e.constructor.name;return null==t?r(e.constructor):t}function o(e,t){var n=e.locationData,r=n.first_line,a=n.first_column,o="",i="";return null!=r&&(o=r+1),null!=a&&(i=a+1),"Syntax error on line "+o+", column "+i+": "+t}function i(e){return d(e)}function s(e){return d(e)}function l(e){var t=a(e);if("Value"!==t)throw new SyntaxError(o(e,t+" used as key"));var n=e.base.value;switch(n.charAt(0)){case"'":case"\"":return i(n);default:return n;}}var d=e("vm").runInThisContext,c=e("coffee-script").nodes,p={Block:function(e,t){var n;if(n=e.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"One top level value expected"));return t(n[0])},Value:function(e,t){return t(e.base)},Bool:function(e){return"true"===e.val},BooleanLiteral:function(e){return"true"===e.value},Null:function(){return null},NullLiteral:function(){return null},Literal:function(e){var t=e.value;try{switch(t.charAt(0)){case"'":case"\"":return i(t);case"/":return s(t);default:return JSON.parse(t);}}catch(t){throw new SyntaxError(o(e,t.message))}},NumberLiteral:function(e){return+e.value},StringLiteral:function(e){return i(e.value)},RegexLiteral:function(e){return s(e.value)},Arr:function(e,t){return e.objects.map(t)},Obj:function(e,t,n){return e.properties.reduce(function(e,r){var a=r.variable,o=r.value;if(!a)return e;var i=l(a);return o=t(o),e[i]=n.call(e,i,o),e},{})},Op:function(e,t){if(null!=e.second){var n=t(e.first),r=t(e.second);switch(e.operator){case"-":return n-r;case"+":return n+r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"&":return n&r;case"|":return n|r;case"^":return n^r;case"<<":return n<<r;case">>>":return n>>>r;case">>":return n>>r;default:throw new SyntaxError(o(e,"Unknown binary operator "+e.operator));}}else switch(e.operator){case"-":return-t(e.first);case"~":return~t(e.first);default:throw new SyntaxError(o(e,"Unknown unary operator "+e.operator));}},Parens:function(e,t){var n;if(n=e.body.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"Parenthesis may only contain one expression"));return t(n[0])}};t.exports=function(e,t){function r(e){var n=a(e),i=p[n];if(!i)throw new SyntaxError(o(e,"Unexpected "+n));return i(e,r,t)}if(null==t&&(t=n),"function"!=typeof t)throw new TypeError("reviver has to be a function");var i=c(e.toString("utf8")),s=r(i);if(t===n)return s;return t.call({"":s},"",s)}},{"coffee-script":5,vm:807}],17:[function(e,t){"use strict";function n(e,t){return 0<=e.indexOf(t)}function r(e){return e&&"\n"+e+"\n"}function a(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){switch(typeof e){case"string":return e.slice(0,10);case"number":var t=Math.max(0,Math.min(10,Math.floor(e)));return h.slice(0,t);default:return 0;}}function i(e,t){return e+t}function s(e,t){return""===t?t:t.split("\n").map(i.bind(null,e)).join("\n")}function l(e){return"'"+JSON.stringify(e).slice(1,-1).replace(/\\"/g,"\"").replace(/'/g,"\\'")+"'"}function d(e){return n(e,"'")&&!n(e,"\"")?"double":"single"}function c(e){return("single"===d(e)?l:JSON.stringify)(e)}function p(e,t,n){return Object.keys(n).map(function(r){var o=n[r];r.match(y)||(r=c(r));var i=e(o,{bracesRequired:!t});return t&&(i=a(o)&&0<Object.keys(o).length?"\n"+s(t,i):" "+i),r+":"+i})}function u(e,t,n){var a=n.map(function(t){return e(t,{bracesRequired:!0})}),o=t?r(s(t,a.join("\n"))):a.join(",");return"["+o+"]"}function m(e,t,n,a){var o=a.bracesRequired,i=p(e,t,n);if(0===i.length)return"{}";if(t){var l=i.join("\n");return o?"{"+r(s(t,l))+"}":l}var d=i.join(",");return o?"{"+d+"}":d}function f(e,t,n){var a;return-1!==n.indexOf("\n")&&t?(a=n.replace(/\\/g,"\\\\").replace(g,"\\'''"),"'''"+r(s(t,a))+"'''"):c(n)}var y=/^[a-z_$][a-z0-9_$]*$/i,g=/'''/g,h="          ";t.exports=function(e,t,n){function r(e,t){switch(null==t&&(t={}),typeof e){case"boolean":return""+e;case"number":return isFinite(e)?""+e:"null";case"string":return f(r,n,e,t);case"object":return null===e?"null":Array.isArray(e)?u(r,n,e,t):m(r,n,e,t);default:}}if("function"!=typeof e&&"undefined"!=typeof e){n=o(n);var a=JSON.parse(JSON.stringify(e,t));return r(a)}}},{}],18:[function(e,t,n){var r=Math.round,a=Math.max,o=Math.abs,s=Math.floor,l=Math.min;(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return new n(e)}function n(e){if(!(c=y.exec(e)))throw new Error("invalid format: "+e);var t=c[1]||" ",n=c[2]||">",r=c[3]||"-",a=c[4]||"",o=!!c[5],i=c[6]&&+c[6],s=!!c[7],l=c[8]&&+c[8].slice(1),d=c[9]||"",c;"n"===d?(s=!0,d="g"):!f[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=r,this.symbol=a,this.zero=o,this.width=i,this.comma=s,this.precision=l,this.type=d}function i(t){return x=_(t),e.format=x.format,e.formatPrefix=x.formatPrefix,x}var c=function(e,t){if(0>(r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,r),r;return[1<n.length?n[0]+n.slice(2):n,+e.slice(r+1)]},d=function(e){return e=c(o(e)),e?e[1]:NaN},p=function(e,n){return function(r,o){for(var s=r.length,i=[],t=0,l=e[0],d=0;0<s&&0<l&&(d+l+1>o&&(l=a(1,o-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>o));)l=e[t=(t+1)%e.length];return i.reverse().join(n)}},u=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},m=function(e,t){var n=c(e,t);if(!n)return e+"";var r=n[0],a=n[1];return 0>a?"0."+Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+Array(a-r.length+2).join("0")},f={"":function(e,t){e=e.toPrecision(t);out:for(var r=e.length,n=1,a=-1,o;n<r;++n)switch(e[n]){case".":a=o=n;break;case"0":0===a&&(a=n),o=n;break;case"e":break out;default:0<a&&(a=0);}return 0<a?e.slice(0,a)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return r(e).toString(2)},c:function(e){return e+""},d:function(e){return r(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return r(e).toString(8)},p:function(e,t){return m(100*e,t)},r:m,s:function(e,t){var r=c(e,t);if(!r)return e+"";var o=r[0],p=r[1],u=p-(g=3*a(-8,l(8,s(p/3))))+1,i=o.length;return u===i?o:u>i?o+Array(u-i+1).join("0"):0<u?o.slice(0,u)+"."+o.slice(u):"0."+Array(1-u).join("0")+c(e,a(0,t+u-1))[0]},X:function(e){return r(e).toString(16).toUpperCase()},x:function(e){return r(e).toString(16)}},y=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,g;t.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":a(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+a(0,0|this.precision))+this.type};var h=function(e){return e},b=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],_=function(e){function n(e){function n(e){var t=T,a=k,l,i,n;if("c"===S)a=O(e)+a,e="";else{e=+e;var c=0>e;if(e=O(o(e),v),c&&0==+e&&(c=!1),t=(c?"("===p?p:"-":"-"===p||"("===p?"":p)+t,a=a+("s"===S?b[8+g/3]:"")+(c&&"("===p?")":""),E)for(l=-1,i=e.length;++l<i;)if(n=e.charCodeAt(l),48>n||57<n){a=(46===n?m+e.slice(l+1):e.slice(l))+a,e=e.slice(0,l);break}}x&&!h&&(e=r(e,Infinity));var u=t.length+e.length+a.length,f=u<_?Array(_-u+1).join(s):"";switch(x&&h&&(e=r(f+e,f.length?_-a.length:Infinity),f=""),d){case"<":e=t+e+a+f;break;case"=":e=t+f+e+a;break;case"^":e=f.slice(0,u=f.length>>1)+t+e+a+f.slice(u);break;default:e=f+t+e+a;}return y(e)}e=t(e);var s=e.fill,d=e.align,p=e.sign,u=e.symbol,h=e.zero,_=e.width,x=e.comma,v=e.precision,S=e.type,T="$"===u?i[0]:"#"===u&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k="$"===u?i[1]:/[%p]/.test(S)?c:"",O=f[S],E=!S||/[defgprs%]/.test(S);return v=null==v?S?6:12:/[gprs]/.test(S)?a(1,l(21,v)):a(0,l(20,v)),n.toString=function(){return e+""},n}var r=e.grouping&&e.thousands?p(e.grouping,e.thousands):h,i=e.currency,m=e.decimal,y=e.numerals?u(e.numerals):h,c=e.percent||"%";return{format:n,formatPrefix:function(r,o){var i=n((r=t(r),r.type="f",r)),c=3*a(-8,l(8,s(d(o)/3))),p=Math.pow(10,-c),u=b[8+c/3];return function(e){return i(p*e)+u}}}},x;i({decimal:".",thousands:",",grouping:[3],currency:["$",""]});e.formatDefaultLocale=i,e.formatLocale=_,e.formatSpecifier=t,e.precisionFixed=function(e){return a(0,-d(o(e)))},e.precisionPrefix=function(e,t){return a(0,3*a(-8,l(8,s(d(t)/3)))-d(o(e)))},e.precisionRound=function(e,t){return e=o(e),t=o(t)-e,a(0,d(t)-d(e))+1},Object.defineProperty(e,"__esModule",{value:!0})})},{}],19:[function(e,t,n){(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function r(){return new a}function a(){this._="@"+(++re).toString(36)}function o(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(t,n,r){return function(a){var o=e.event;e.event=a;try{t.call(this,this.__data__,n,r)}finally{e.event=o}}}function s(e){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return 0<=r&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function l(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,i;n<a;++n)(i=t[n],(!e.type||i.type===e.type)&&i.name===e.name)?this.removeEventListener(i.type,i.listener,i.capture):t[++r]=i;++r?t.length=r:delete this.__on}}}function d(e,t,n){var r=le.hasOwnProperty(e.type)?o:i;return function(a,s,i){var l=this.__on,d=r(t,s,i),c;if(l)for(var o=0,p=l.length;o<p;++o)if((c=l[o]).type===e.type&&c.name===e.name)return this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=d,c.capture=n),void(c.value=t);this.addEventListener(e.type,d,n),c={type:e.type,name:e.name,value:t,listener:d,capture:n},l?l.push(c):this.__on=[c]}}function c(){}function p(){return[]}function u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e,t,n,r,a,o){for(var s=0,i=t.length,l=o.length,d;s<l;++s)(d=t[s])?(d.__data__=o[s],r[s]=d):n[s]=new u(e,o[s]);for(;s<i;++s)(d=t[s])&&(a[s]=d)}function y(e,t,n,r,a,o,s){var l={},d=t.length,c=o.length,p=Array(d),m,i,f;for(m=0;m<d;++m)(i=t[m])&&(p[m]=f=ge+s.call(i,i.__data__,m,t),f in l?a[m]=i:l[f]=i);for(m=0;m<c;++m)f=ge+s.call(e,o[m],m,o),(i=l[f])?(r[m]=i,i.__data__=o[m],l[f]=null):n[m]=new u(e,o[m]);for(m=0;m<d;++m)(i=t[m])&&l[p[m]]===i&&(a[m]=i)}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function h(e){return function(){this.removeAttributeNS(e.space,e.local)}}function b(e,t){return function(){this.setAttribute(e,t)}}function _(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function v(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function S(e){return function(){this.style.removeProperty(e)}}function T(e,t,n){return function(){this.style.setProperty(e,t,n)}}function k(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O(e,t){return e.style.getPropertyValue(t)||he(e).getComputedStyle(e,null).getPropertyValue(t)}function E(e){return function(){delete this[e]}}function C(e,t){return function(){this[e]=t}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function A(e){return e.trim().split(/^|\s+/)}function N(e){return e.classList||new P(e)}function P(e){this._node=e,this._names=A(e.getAttribute("class")||"")}function R(e,t){for(var r=N(e),a=-1,o=t.length;++a<o;)r.add(t[a])}function D(e,t){for(var r=N(e),a=-1,o=t.length;++a<o;)r.remove(t[a])}function I(e){return function(){R(this,e)}}function M(e){return function(){D(this,e)}}function F(e,t){return function(){(t.apply(this,arguments)?R:D)(this,e)}}function j(){this.textContent=""}function z(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function $(){this.innerHTML=""}function B(e){return function(){this.innerHTML=e}}function W(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function q(){this.nextSibling&&this.parentNode.appendChild(this)}function V(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H(){return null}function Y(){var e=this.parentNode;e&&e.removeChild(this)}function G(e,t,n){var r=he(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Z(e,t){return function(){return G(this,e,t)}}function X(e,t){return function(){return G(this,e,t.apply(this,arguments))}}function K(e,t){this._groups=e,this._parents=t}function Q(){return new K([[document.documentElement]],be)}var J="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},te=function(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ee.hasOwnProperty(t)?{space:ee[t],local:e}:e},ne=function(e){var r=te(e);return(r.local?n:t)(r)},re=0;a.prototype=r.prototype={constructor:a,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var ae=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var oe=document.documentElement;if(!oe.matches){var ie=oe.webkitMatchesSelector||oe.msMatchesSelector||oe.mozMatchesSelector||oe.oMatchesSelector;ae=function(e){return function(){return ie.call(this,e)}}}}var se=ae,le={};if(e.event=null,"undefined"!=typeof document){var de=document.documentElement;"onmouseenter"in de||(le={mouseenter:"mouseover",mouseleave:"mouseout"})}var ce=function(){for(var t=e.event,n;n=t.sourceEvent;)t=n;return t},pe=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]},ue=function(e){return null==e?c:function(){return this.querySelector(e)}},me=function(e){return null==e?p:function(){return this.querySelectorAll(e)}},fe=function(e){return Array(e.length)};u.prototype={constructor:u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var ye=function(e){return function(){return e}},ge="$",he=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};P.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var be=[null];K.prototype=Q.prototype={constructor:K,select:function(e){"function"!=typeof e&&(e=ue(e));for(var t=this._groups,r=t.length,a=Array(r),o=0;o<r;++o)for(var s=t[o],l=s.length,n=a[o]=Array(l),d=0,i,c;d<l;++d)(i=s[d])&&(c=e.call(i,i.__data__,d,s))&&("__data__"in i&&(c.__data__=i.__data__),n[d]=c);return new K(a,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=me(e));for(var t=this._groups,r=t.length,a=[],o=[],s=0;s<r;++s)for(var l=t[s],d=l.length,n=0,i;n<d;++n)(i=l[n])&&(a.push(e.call(i,i.__data__,n,l)),o.push(i));return new K(a,o)},filter:function(e){"function"!=typeof e&&(e=se(e));for(var t=this._groups,r=t.length,a=Array(r),o=0;o<r;++o)for(var s=t[o],l=s.length,n=a[o]=[],d=0,i;d<l;++d)(i=s[d])&&e.call(i,i.__data__,d,s)&&n.push(i);return new K(a,this._parents)},data:function(e,t){if(!e)return m=Array(this.size()),c=-1,this.each(function(e){m[++c]=e}),m;var n=t?y:f,r=this._parents,a=this._groups;"function"!=typeof e&&(e=ye(e));for(var o=a.length,i=Array(o),s=Array(o),l=Array(o),c=0;c<o;++c){var d=r[c],p=a[c],u=p.length,m=e.call(d,d&&d.__data__,c,r),g=m.length,h=s[c]=Array(g),b=i[c]=Array(g),_=l[c]=Array(u);n(d,p,h,b,_,m,t);for(var x=0,v=0,S,T;x<g;++x)if(S=h[x]){for(x>=v&&(v=x+1);!(T=b[v])&&++v<g;);S._next=T||null}}return i=new K(i,r),i._enter=s,i._exit=l,i},enter:function(){return new K(this._enter||this._groups.map(fe),this._parents)},exit:function(){return new K(this._exit||this._groups.map(fe),this._parents)},merge:function(e){for(var t=this._groups,r=e._groups,a=t.length,o=r.length,s=Math.min(a,o),l=Array(a),d=0;d<s;++d)for(var c=t[d],p=r[d],u=c.length,n=l[d]=Array(u),m=0,i;m<u;++m)(i=c[m]||p[m])&&(n[m]=i);for(;d<a;++d)l[d]=t[d];return new K(l,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;0<=--a;)(i=r[a])&&(o&&o!==i.nextSibling&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=g);for(var r=this._groups,a=r.length,o=Array(a),s=0;s<a;++s){for(var l=r[s],d=l.length,n=o[s]=Array(d),c=0,i;c<d;++c)(i=l[c])&&(n[c]=i);n.sort(t)}return new K(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],o=0,i=a.length,n;o<i;++o)if(n=a[o],n)return n;return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var o=t[r],s=0,i=o.length,n;s<i;++s)(n=o[s])&&e.call(n,n.__data__,s,o);return this},attr:function(e,t){var n=te(e);if(2>arguments.length){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?h:m:"function"==typeof t?n.local?v:x:n.local?_:b)(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?S:"function"==typeof t?k:T)(e,t,null==n?"":n)):O(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?E:"function"==typeof t?w:C)(e,t)):this.node()[e]},classed:function(e,t){var r=A(e+"");if(2>arguments.length){for(var a=N(this.node()),o=-1,i=r.length;++o<i;)if(!a.contains(r[o]))return!1;return!0}return this.each(("function"==typeof t?F:t?I:M)(r,t))},text:function(e){return arguments.length?this.each(null==e?j:("function"==typeof e?U:z)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?$:("function"==typeof e?W:B)(e)):this.node().innerHTML},raise:function(){return this.each(q)},lower:function(){return this.each(V)},append:function(e){var t="function"==typeof e?e:ne(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ne(e),r=null==t?H:"function"==typeof t?t:ue(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Y)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,r,a){var c=s(e+""),p=c.length,n,i;if(2>arguments.length){var t=this.node().__on;if(t)for(var u=0,f=t.length,m;u<f;++u)for(n=0,m=t[u];n<p;++n)if((i=c[n]).type===m.type&&i.name===m.name)return m.value;return}for(t=r?d:l,null==a&&(a=!1),n=0;n<p;++n)this.each(t(c[n],r,a));return this},dispatch:function(e,t){return this.each(("function"==typeof t?X:Z)(e,t))}};e.creator=ne,e.local=r,e.matcher=se,e.mouse=function(e){var t=ce();return t.changedTouches&&(t=t.changedTouches[0]),pe(e,t)},e.namespace=te,e.namespaces=ee,e.select=function(e){return"string"==typeof e?new K([[document.querySelector(e)]],[document.documentElement]):new K([[e]],be)},e.selectAll=function(e){return"string"==typeof e?new K([document.querySelectorAll(e)],[document.documentElement]):new K([null==e?[]:e],be)},e.selection=Q,e.selector=ue,e.selectorAll=me,e.style=O,e.touch=function(e,t,r){3>arguments.length&&(r=t,t=ce().changedTouches);for(var a=0,o=t?t.length:0,n;a<o;++a)if((n=t[a]).identifier===r)return pe(e,n);return null},e.touches=function(e,t){null==t&&(t=ce().touches);for(var r=0,a=t?t.length:0,n=Array(a);r<a;++r)n[r]=pe(e,t[r]);return n},e.window=he,e.customEvent=function(t,n,r,a){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,a)}finally{e.event=o}},Object.defineProperty(e,"__esModule",{value:!0})})},{}],20:[function(e,t,n){(function(r,a){"object"==typeof n&&"undefined"!=typeof t?a(n,e("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],a):a(r.d3=r.d3||{},r.d3)})(this,function(e,t){"use strict";function n(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function a(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function o(e){function t(e,t){return function(r){var a=[],o=-1,i=0,s=e.length,n,l,d;for(r instanceof Date||(r=new Date(+r));++o<s;)37===e.charCodeAt(o)&&(a.push(e.slice(i,o)),null==(l=te[n=e.charAt(++o)])?l="e"===n?" ":"0":n=e.charAt(++o),(d=t[n])&&(n=d(r,l)),a.push(n),i=o+1);return a.push(e.slice(i,o)),a.join("")}}function o(e,t){return function(n){var o=a(1900),l=s(o,e,n+="",0);if(l!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var i="Z"in o?r(a(o.y)).getUTCDay():t(a(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7}return"Z"in o?(o.H+=0|o.Z/100,o.M+=o.Z%100,r(o)):t(o)}}function s(e,t,r,a){for(var o=0,i=t.length,n=r.length,s,l;o<i;){if(a>=n)return-1;if(s=t.charCodeAt(o++),37===s){if(s=t.charAt(o++),l=xe[s in te?t.charAt(o++):s],!l||0>(a=l(e,r,a)))return-1;}else if(s!=r.charCodeAt(a++))return-1}return a}var ee=e.dateTime,ne=e.date,re=e.time,i=e.periods,ae=e.days,oe=e.shortDays,ie=e.months,se=e.shortMonths,le=l(i),de=d(i),ce=l(ae),pe=d(ae),ue=l(oe),me=d(oe),fe=l(ie),ye=d(ie),ge=l(se),he=d(se),be={a:function(e){return oe[e.getDay()]},A:function(e){return ae[e.getDay()]},b:function(e){return se[e.getMonth()]},B:function(e){return ie[e.getMonth()]},c:null,d:k,e:k,H:O,I:E,j:C,L:w,m:A,M:N,p:function(e){return i[+(12<=e.getHours())]},S:P,U:R,w:D,W:I,x:null,X:null,y:M,Y:F,Z:j,"%":J},_e={a:function(e){return oe[e.getUTCDay()]},A:function(e){return ae[e.getUTCDay()]},b:function(e){return se[e.getUTCMonth()]},B:function(e){return ie[e.getUTCMonth()]},c:null,d:z,e:z,H:U,I:$,j:B,L:W,m:q,M:V,p:function(e){return i[+(12<=e.getUTCHours())]},S:H,U:Y,w:G,W:Z,x:null,X:null,y:X,Y:K,Z:Q,"%":J},xe={a:function(e,t,r){var a=ue.exec(t.slice(r));return a?(e.w=me[a[0].toLowerCase()],r+a[0].length):-1},A:function(e,t,r){var a=ce.exec(t.slice(r));return a?(e.w=pe[a[0].toLowerCase()],r+a[0].length):-1},b:function(e,t,r){var a=ge.exec(t.slice(r));return a?(e.m=he[a[0].toLowerCase()],r+a[0].length):-1},B:function(e,t,r){var a=fe.exec(t.slice(r));return a?(e.m=ye[a[0].toLowerCase()],r+a[0].length):-1},c:function(e,t,n){return s(e,ee,t,n)},d:h,e:h,H:_,I:_,j:b,L:S,m:g,M:x,p:function(e,t,r){var a=le.exec(t.slice(r));return a?(e.p=de[a[0].toLowerCase()],r+a[0].length):-1},S:v,U:p,w:c,W:u,x:function(e,t,n){return s(e,ne,t,n)},X:function(e,t,n){return s(e,re,t,n)},y:f,Y:m,Z:y,"%":T};return be.x=t(ne,be),be.X=t(re,be),be.c=t(ee,be),_e.x=t(ne,_e),_e.X=t(re,_e),_e.c=t(ee,_e),{format:function(e){var n=t(e+="",be);return n.toString=function(){return e},n},parse:function(e){var t=o(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",_e);return n.toString=function(){return e},n},utcParse:function(e){var t=o(e,r);return t.toString=function(){return e},t}}}function i(e,t,n){var r=0>e?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?Array(n-o+1).join(t)+a:a)}function s(e){return e.replace(ae,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function d(e){for(var t={},r=-1,a=e.length;++r<a;)t[e[r].toLowerCase()]=r;return t}function c(e,t,r){var a=ne.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function p(e,t,r){var a=ne.exec(t.slice(r));return a?(e.U=+a[0],r+a[0].length):-1}function u(e,t,r){var a=ne.exec(t.slice(r));return a?(e.W=+a[0],r+a[0].length):-1}function m(e,t,r){var a=ne.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function f(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(68<+a[0]?1900:2e3),r+a[0].length):-1}function y(e,t,r){var a=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function g(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function h(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function b(e,t,r){var a=ne.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function _(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function x(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function v(e,t,r){var a=ne.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function S(e,t,r){var a=ne.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function T(e,t,r){var a=re.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function k(e,t){return i(e.getDate(),t,2)}function O(e,t){return i(e.getHours(),t,2)}function E(e,t){return i(e.getHours()%12||12,t,2)}function C(e,n){return i(1+t.timeDay.count(t.timeYear(e),e),n,3)}function w(e,t){return i(e.getMilliseconds(),t,3)}function A(e,t){return i(e.getMonth()+1,t,2)}function N(e,t){return i(e.getMinutes(),t,2)}function P(e,t){return i(e.getSeconds(),t,2)}function R(e,n){return i(t.timeSunday.count(t.timeYear(e),e),n,2)}function D(e){return e.getDay()}function I(e,n){return i(t.timeMonday.count(t.timeYear(e),e),n,2)}function M(e,t){return i(e.getFullYear()%100,t,2)}function F(e,t){return i(e.getFullYear()%1e4,t,4)}function j(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+i(0|t/60,"0",2)+i(t%60,"0",2)}function z(e,t){return i(e.getUTCDate(),t,2)}function U(e,t){return i(e.getUTCHours(),t,2)}function $(e,t){return i(e.getUTCHours()%12||12,t,2)}function B(e,n){return i(1+t.utcDay.count(t.utcYear(e),e),n,3)}function W(e,t){return i(e.getUTCMilliseconds(),t,3)}function q(e,t){return i(e.getUTCMonth()+1,t,2)}function V(e,t){return i(e.getUTCMinutes(),t,2)}function H(e,t){return i(e.getUTCSeconds(),t,2)}function Y(e,n){return i(t.utcSunday.count(t.utcYear(e),e),n,2)}function G(e){return e.getUTCDay()}function Z(e,n){return i(t.utcMonday.count(t.utcYear(e),e),n,2)}function X(e,t){return i(e.getUTCFullYear()%100,t,2)}function K(e,t){return i(e.getUTCFullYear()%1e4,t,4)}function Q(){return"+0000"}function J(){return"%"}function ee(t){return oe=o(t),e.timeFormat=oe.format,e.timeParse=oe.parse,e.utcFormat=oe.utcFormat,e.utcParse=oe.utcParse,oe}var te={0:"0","-":"",_:" "},ne=/^\s*\d+/,re=/^%/,ae=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,oe;ee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ie="%Y-%m-%dT%H:%M:%S.%LZ",se=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat(ie),le=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse(ie);e.timeFormatDefaultLocale=ee,e.timeFormatLocale=o,e.isoFormat=se,e.isoParse=le,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-time":21}],21:[function(e,t,n){var r=Math.floor;(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e,n,a,s){function l(t){return e(t=new Date(+t)),t}return l.floor=l,l.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},l.round=function(e){var t=l(e),n=l.ceil(e);return e-t<n-e?t:n},l.offset=function(e,t){return n(e=new Date(+e),null==t?1:r(t)),e},l.range=function(t,a,o){var i=[];if(t=l.ceil(t),o=null==o?1:r(o),!(t<a)||!(0<o))return i;do i.push(new Date(+t));while((n(t,o),e(t),t<a));return i},l.filter=function(r){return t(function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){if(e>=e)if(0>t)for(;0>=++t;)for(;n(e,-1),!r(e););else for(;0<=--t;)for(;n(e,1),!r(e););})},a&&(l.count=function(t,n){return o.setTime(+t),i.setTime(+n),e(o),e(i),r(a(o,i))},l.every=function(e){return e=r(e),isFinite(e)&&0<e?1<e?l.filter(s?function(t){return 0==s(t)%e}:function(t){return 0==l.count(0,t)%e}):l:null}),l}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*c)/m})}function a(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/m})}var o=new Date,i=new Date,s=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});s.every=function(e){return e=r(e),isFinite(e)&&0<e?1<e?t(function(t){t.setTime(r(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):s:null};var l=s.range,d=1e3,c=6e4,p=36e5,u=864e5,m=6048e5,f=t(function(e){e.setTime(r(e/d)*d)},function(e,t){e.setTime(+e+t*d)},function(e,t){return(t-e)/d},function(e){return e.getUTCSeconds()}),y=f.range,g=t(function(e){e.setTime(r(e/c)*c)},function(e,t){e.setTime(+e+t*c)},function(e,t){return(t-e)/c},function(e){return e.getMinutes()}),h=g.range,b=t(function(e){var t=e.getTimezoneOffset()*c%p;0>t&&(t+=p),e.setTime(r((+e-t)/p)*p+t)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getHours()}),_=b.range,x=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*c)/u},function(e){return e.getDate()-1}),v=x.range,S=n(0),T=n(1),k=n(2),O=n(3),E=n(4),C=n(5),w=n(6),A=S.range,N=T.range,P=k.range,R=O.range,D=E.range,I=C.range,M=w.range,F=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),j=F.range,z=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(e){return isFinite(e=r(e))&&0<e?t(function(t){t.setFullYear(r(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var U=z.range,$=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*c)},function(e,t){return(t-e)/c},function(e){return e.getUTCMinutes()}),B=$.range,W=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getUTCHours()}),q=W.range,V=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/u},function(e){return e.getUTCDate()-1}),H=V.range,Y=a(0),G=a(1),Z=a(2),X=a(3),K=a(4),Q=a(5),J=a(6),ee=Y.range,te=G.range,ne=Z.range,re=X.range,ae=K.range,oe=Q.range,ie=J.range,se=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),le=se.range,de=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});de.every=function(e){return isFinite(e=r(e))&&0<e?t(function(t){t.setUTCFullYear(r(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var ce=de.range;e.timeInterval=t,e.timeMillisecond=s,e.timeMilliseconds=l,e.utcMillisecond=s,e.utcMilliseconds=l,e.timeSecond=f,e.timeSeconds=y,e.utcSecond=f,e.utcSeconds=y,e.timeMinute=g,e.timeMinutes=h,e.timeHour=b,e.timeHours=_,e.timeDay=x,e.timeDays=v,e.timeWeek=S,e.timeWeeks=A,e.timeSunday=S,e.timeSundays=A,e.timeMonday=T,e.timeMondays=N,e.timeTuesday=k,e.timeTuesdays=P,e.timeWednesday=O,e.timeWednesdays=R,e.timeThursday=E,e.timeThursdays=D,e.timeFriday=C,e.timeFridays=I,e.timeSaturday=w,e.timeSaturdays=M,e.timeMonth=F,e.timeMonths=j,e.timeYear=z,e.timeYears=U,e.utcMinute=$,e.utcMinutes=B,e.utcHour=W,e.utcHours=q,e.utcDay=V,e.utcDays=H,e.utcWeek=Y,e.utcWeeks=ee,e.utcSunday=Y,e.utcSundays=ee,e.utcMonday=G,e.utcMondays=te,e.utcTuesday=Z,e.utcTuesdays=ne,e.utcWednesday=X,e.utcWednesdays=re,e.utcThursday=K,e.utcThursdays=ae,e.utcFriday=Q,e.utcFridays=oe,e.utcSaturday=J,e.utcSaturdays=ie,e.utcMonth=se,e.utcMonths=le,e.utcYear=de,e.utcYears=ce,Object.defineProperty(e,"__esModule",{value:!0})})},{}],22:[function(e,t,n){var r=Math.pow;n.read=function(t,n,a,o,l){var c=8*l-o-1,p=(1<<c)-1,u=p>>1,f=-7,y=a?l-1:0,i=a?-1:1,d=t[n+y],s,e;for(y+=i,s=d&(1<<-f)-1,d>>=-f,f+=c;0<f;s=256*s+t[n+y],y+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=o;0<f;e=256*e+t[n+y],y+=i,f-=8);if(0===s)s=1-u;else{if(s===p)return e?NaN:(d?-1:1)*Infinity;e+=r(2,o),s-=u}return(d?-1:1)*e*r(2,s-o)},n.write=function(t,n,a,o,l,p){var u=8*p-l-1,f=(1<<u)-1,y=f>>1,g=23===l?5.960464477539063e-8-6.617444900424222e-24:0,h=o?0:p-1,i=o?1:-1,d=0>n||0===n&&0>1/n?1:0,s,b,m;for(n=Math.abs(n),isNaN(n)||n===Infinity?(b=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),1>n*(m=r(2,-s))&&(s--,m*=2),n+=1<=s+y?g/m:g*r(2,1-y),2<=n*m&&(s++,m/=2),s+y>=f?(b=0,s=f):1<=s+y?(b=(n*m-1)*r(2,l),s+=y):(b=n*r(2,y-1)*r(2,l),s=0));8<=l;t[a+h]=255&b,h+=i,b/=256,l-=8);for(s=s<<l|b,u+=l;0<u;t[a+h]=255&s,h+=i,s/=256,u-=8);t[a+h-i]|=128*d}},{}],23:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},{}],24:[function(e,t){var n="undefined"==typeof JSON?e("jsonify"):JSON;t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var o=t.space||"";"number"==typeof o&&(o=Array(o+1).join(" "));var i=!("boolean"!=typeof t.cycles)&&t.cycles,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(n,r){var o={key:n,value:t[n]},i={key:r,value:t[r]};return e(o,i)}}}(t.cmp),d=[];return function e(t,c,p,u){var m=o?"\n"+Array(u+1).join(o):"",f=o?": ":":";if(p&&p.toJSON&&"function"==typeof p.toJSON&&(p=p.toJSON()),p=s.call(t,c,p),void 0!==p){if("object"!=typeof p||null===p)return n.stringify(p);if(r(p)){for(var y=[],g=0,h;g<p.length;g++)h=e(p,g,p[g],u+1)||n.stringify(null),y.push(m+o+h);return"["+y.join(",")+m+"]"}if(-1!==d.indexOf(p)){if(i)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else d.push(p);for(var b=a(p).sort(l&&l(p)),y=[],g=0;g<b.length;g++){var c=b[g],_=e(p,c,p[c],u+1);if(_){var x=n.stringify(c)+f+_;y.push(m+o+x)}}return d.splice(d.indexOf(p),1),"{"+y.join(",")+m+"}"}}({"":e},"",e,0)};var r=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:25}],25:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":26,"./lib/stringify":27}],26:[function(e,t){var n={'"':"\"","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},r=function(e){throw{name:"SyntaxError",message:e,at:p,text:f}},a=function(e){return e&&e!==u&&r("Expected '"+e+"' instead of '"+u+"'"),u=f.charAt(p),p+=1,u},o=function(){var e="",t;for("-"===u&&(e="-",a("-"));"0"<=u&&"9">=u;)e+=u,a();if("."===u)for(e+=".";a()&&"0"<=u&&"9">=u;)e+=u;if("e"===u||"E"===u)for(e+=u,a(),("-"===u||"+"===u)&&(e+=u,a());"0"<=u&&"9">=u;)e+=u,a();return t=+e,isFinite(t)?t:void r("Bad number")},i=function(){var e="",t,o,i;if("\""===u)for(;a();){if("\""===u)return a(),e;if("\\"!==u)e+=u;else if(a(),"u"===u){for(i=0,o=0;4>o&&(t=parseInt(a(),16),!!isFinite(t));o+=1)i=16*i+t;e+=String.fromCharCode(i)}else if("string"==typeof n[u])e+=n[u];else break}r("Bad string")},s=function(){for(;u&&" ">=u;)a()},l=function(){switch(u){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null;}r("Unexpected '"+u+"'")},d=function(){var e=[];if("["===u){if(a("["),s(),"]"===u)return a("]"),e;for(;u;){if(e.push(m()),s(),"]"===u)return a("]"),e;a(","),s()}}r("Bad array")},c=function(){var e={},t;if("{"===u){if(a("{"),s(),"}"===u)return a("}"),e;for(;u;){if(t=i(),s(),a(":"),Object.hasOwnProperty.call(e,t)&&r("Duplicate key \""+t+"\""),e[t]=m(),s(),"}"===u)return a("}"),e;a(","),s()}}r("Bad object")},p,u,f,m;m=function(){return s(),"{"===u?c():"["===u?d():"\""===u?i():"-"===u?o():"0"<=u&&"9">=u?o():l()},t.exports=function(e,t){var n;return f=e,p=0,u=" ",n=m(),s(),u&&r("Syntax error"),"function"==typeof t?function e(n,r){var a=n[r],o,i;if(a&&"object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=e(a,o),void 0===i?delete a[o]:a[o]=i);return t.call(n,r,a)}({"":n},""):n}},{}],27:[function(e,t){function n(e){return o.lastIndex=0,o.test(e)?"\""+e.replace(o,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+e+"\""}function r(e,t){var a=s,o=t[e],c,i,p,u,m;switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(e)),"function"==typeof d&&(o=d.call(t,e,o)),typeof o){case"string":return n(o);case"number":return isFinite(o)?o+"":"null";case"boolean":case"null":return o+"";case"object":if(!o)return"null";if(s+=l,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(u=o.length,c=0;c<u;c+=1)m[c]=r(c,o)||"null";return p=0===m.length?"[]":s?"[\n"+s+m.join(",\n"+s)+"\n"+a+"]":"["+m.join(",")+"]",s=a,p}if(d&&"object"==typeof d)for(u=d.length,c=0;c<u;c+=1)i=d[c],"string"==typeof i&&(p=r(i,o),p&&m.push(n(i)+(s?": ":":")+p));else for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(p=r(i,o),p&&m.push(n(i)+(s?": ":":")+p));return p=0===m.length?"{}":s?"{\n"+s+m.join(",\n"+s)+"\n"+a+"}":"{"+m.join(",")+"}",s=a,p;}}var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"":"\\b","	":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':"\\\"","\\":"\\\\"},s,l,d;t.exports=function(e,t,n){var a;if(s="",l="","number"==typeof n)for(a=0;a<n;a+=1)l+=" ";else"string"==typeof n&&(l=n);if(d=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return r("",{"":e})}},{}],28:[function(e,t,n){var a=Math.atan,o=Math.exp,r=Math.acos,s=Math.sin,i=Math.cos,l=Math.PI,c=Math.sqrt,d=Math.LN2,p=Math.log,u=Math.round,m=Math.max,f=Math.abs,g=Math.floor,y=Math.ceil,h=Math.pow,b=Math.min;(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.L={})})(this,function(e){"use strict";function t(e){var t,n,r,a;for(n=1,r=arguments.length;n<r;n++)for(t in a=arguments[n],a)e[t]=a[t];return e}function n(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}function _(e){return e._leaflet_id=e._leaflet_id||++ht,e._leaflet_id}function x(e,t,n){var r,a,o,i;return i=function(){r=!1,a&&(o.apply(n,a),a=!1)},o=function(){r?a=arguments:(e.apply(n,arguments),setTimeout(i,t),r=!0)},o}function v(e,t,n){var r=t[1],a=t[0],o=r-a;return e===r&&n?e:((e-a)%o+o)%o+a}function S(){return!1}function T(e,t){var n=h(10,t||5);return u(e*n)/n}function k(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function O(e){return k(e).split(/\s+/)}function E(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?gt(e.options):{}),t)e.options[n]=t[n];return e.options}function C(e,t,n){var r=[];for(var a in e)r.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}function w(e,t){return e.replace(bt,function(e,n){var r=t[n];if(r===void 0)throw new Error("No value provided for variable "+e);else"function"==typeof r&&(r=r(t));return r})}function A(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function N(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function P(e){var t=+new Date,n=m(0,16-(t-vt));return vt=t+n,window.setTimeout(e,n)}function R(e,t,r){return r&&St===P?void e.call(t):St.call(window,n(e,t))}function D(e){e&&Tt.call(window,e)}function I(){}function M(e){if(L&&L.Mixin){e=_t(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}function F(e,t,n){this.x=n?u(e):e,this.y=n?u(t):t}function j(e,t,n){return e instanceof F?e:_t(e)?new F(e[0],e[1]):void 0===e||null===e?e:"object"==typeof e&&"x"in e&&"y"in e?new F(e.x,e.y):new F(e,t,n)}function z(e,t){if(e)for(var n=t?[e,t]:e,r=0,a=n.length;r<a;r++)this.extend(n[r])}function U(e,t){return!e||e instanceof z?e:new z(e,t)}function $(e,t){if(e)for(var n=t?[e,t]:e,r=0,a=n.length;r<a;r++)this.extend(n[r])}function B(e,t){return e instanceof $?e:new $(e,t)}function W(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}function q(e,t,n){return e instanceof W?e:_t(e)&&"object"!=typeof e[0]?3===e.length?new W(e[0],e[1],e[2]):2===e.length?new W(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new W(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new W(e,t,n)}function V(e,t,n,r){return _t(e)?(this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3])):void(this._a=e,this._b=t,this._c=n,this._d=r)}function H(e,t,n,r){return new V(e,t,n,r)}function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function G(e,t){var n="",r,a,o,i,s,l;for(r=0,o=e.length;r<o;r++){for(s=e[r],a=0,i=s.length;a<i;a++)l=s[a],n+=(a?"L":"M")+l.x+" "+l.y;n+=t?rn?"z":"x":""}return n||"M0 0"}function Z(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}function X(e,t,n,r){return"touchstart"===t?Q(e,n,r):"touchmove"===t?re(e,n,r):"touchend"===t&&ae(e,n,r),this}function K(e,t,n){var r=e["_leaflet_"+t+n];return"touchstart"===t?e.removeEventListener(ln,r,!1):"touchmove"===t?e.removeEventListener(dn,r,!1):"touchend"===t&&(e.removeEventListener(cn,r,!1),e.removeEventListener(pn,r,!1)),this}function Q(e,t,r){var a=n(function(n){if("mouse"!==n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE)if(0>un.indexOf(n.target.tagName))ye(n);else return;ne(n,t)});e["_leaflet_touchstart"+r]=a,e.addEventListener(ln,a,!1),fn||(document.documentElement.addEventListener(ln,J,!0),document.documentElement.addEventListener(dn,ee,!0),document.documentElement.addEventListener(cn,te,!0),document.documentElement.addEventListener(pn,te,!0),fn=!0)}function J(t){mn[t.pointerId]=t,yn++}function ee(t){mn[t.pointerId]&&(mn[t.pointerId]=t)}function te(t){delete mn[t.pointerId],yn--}function ne(t,e){for(var n in t.touches=[],mn)t.touches.push(mn[n]);t.changedTouches=[t],e(t)}function re(e,t,n){var r=function(n){(n.pointerType===n.MSPOINTER_TYPE_MOUSE||"mouse"===n.pointerType)&&0===n.buttons||ne(n,t)};e["_leaflet_touchmove"+n]=r,e.addEventListener(dn,r,!1)}function ae(e,t,n){var r=function(n){ne(n,t)};e["_leaflet_touchend"+n]=r,e.addEventListener(cn,r,!1),e.addEventListener(pn,r,!1)}function oe(e,t,n){function r(t){var e;if(Qt){if(!It||"mouse"===t.pointerType)return;e=yn}else e=t.touches.length;if(!(1<e)){var n=Date.now(),r=n-(s||n);l=t.touches?t.touches[0]:t,o=0<r&&r<=i,s=n}}function a(n){if(o&&!l.cancelBubble){if(Qt){if(!It||"mouse"===n.pointerType)return;var e={},r,a;for(a in l)r=l[a],e[a]=r&&r.bind?r.bind(l):r;l=e}l.type="dblclick",t(l),s=null}}var o=!1,i=250,s,l;return e[bn+gn+n]=r,e[bn+hn+n]=a,e[bn+"dblclick"+n]=t,e.addEventListener(gn,r,!1),e.addEventListener(hn,a,!1),e.addEventListener("dblclick",t,!1),this}function se(e,t){var n=e[bn+gn+t],r=e[bn+hn+t],a=e[bn+"dblclick"+t];return e.removeEventListener(gn,n,!1),e.removeEventListener(hn,r,!1),It||e.removeEventListener("dblclick",a,!1),this}function le(e,t,n,r){if("object"==typeof t)for(var a in t)ce(e,a,t[a],n);else{t=O(t);for(var o=0,i=t.length;o<i;o++)ce(e,t[o],n,r)}return this}function de(e,t,n,r){if("object"==typeof t)for(var a in t)pe(e,a,t[a],n);else if(t){t=O(t);for(var o=0,i=t.length;o<i;o++)pe(e,t[o],n,r)}else{for(var s in e[_n])pe(e,s,e[_n][s]);delete e[_n]}return this}function ce(t,e,n,r){var a=e+_(n)+(r?"_"+_(r):"");if(t[_n]&&t[_n][a])return this;var o=function(a){return n.call(r||t,a||window.event)},i=o;Qt&&0===e.indexOf("touch")?X(t,e,o,a):Jt&&"dblclick"===e&&oe&&!(Qt&&Ut)?oe(t,o,a):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(n){n=n||window.event,ve(t,n)&&i(n)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&Ft&&(o=function(t){Se(t,i)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o),t[_n]=t[_n]||{},t[_n][a]=o}function pe(e,t,n,r){var a=t+_(n)+(r?"_"+_(r):""),o=e[_n]&&e[_n][a];return o?void(Qt&&0===t.indexOf("touch")?K(e,t,a):Jt&&"dblclick"===t&&se?se(e,a):"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[_n][a]=null):this}function ue(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,xe(t),this}function me(e){return ce(e,"mousewheel",ue),this}function fe(e){return le(e,"mousedown touchstart dblclick",ue),ce(e,"click",_e),this}function ye(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ge(t){return ye(t),ue(t),this}function he(t,e){if(!e)return new F(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new F(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function be(t){return It?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/xn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>f(t.detail)?20*-t.detail:t.detail?60*(t.detail/-32765):0}function _e(t){vn[t.type]=!0}function xe(t){var e=vn[t.type];return vn[t.type]=!1,e}function ve(t,n){var e=n.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(e){return!1}return e!==t}function Se(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=En&&n-En;return r&&100<r&&500>r||t.target._simulatedClick&&!t._simulated?void ge(t):void(En=n,e(t))}function Te(e){return"string"==typeof e?document.getElementById(e):e}function ke(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function Oe(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function Ee(e){var t=e.parentNode;t&&t.removeChild(e)}function Ce(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function we(e){var t=e.parentNode;t.lastChild!==e&&t.appendChild(e)}function Le(e){var t=e.parentNode;t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Ae(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=De(e);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Ne(e,t){if(e.classList!==void 0)for(var n=O(t),r=0,a=n.length;r<a;r++)e.classList.add(n[r]);else if(!Ae(e,t)){var o=De(e);Re(e,(o?o+" ":"")+t)}}function Pe(e,t){e.classList===void 0?Re(e,k((" "+De(e)+" ").replace(" "+t+" "," "))):e.classList.remove(t)}function Re(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function De(e){return e.className.baseVal===void 0?e.className:e.className.baseVal}function Ie(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Me(e,t)}function Me(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(n){if(1===t)return}t=u(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function Fe(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function je(e,t,n){var r=t||new F(0,0);e.style[Tn]=(Ht?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function ze(e,t){e._leaflet_pos=t,Zt?je(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Ue(e){return e._leaflet_pos||new F(0,0)}function $e(){le(window,"dragstart",ye)}function Be(){de(window,"dragstart",ye)}function We(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(qe(),Mn=e,Fn=e.style.outline,e.style.outline="none",le(window,"keydown",qe))}function qe(){Mn&&(Mn.style.outline=Fn,Mn=void 0,Fn=void 0,de(window,"keydown",qe))}function Ve(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Ze(e,n),e=Ye(e,n),e}function He(e,t,n){return c(et(e,t,n,!0))}function Ye(e,t){var n=e.length,r=typeof Uint8Array==void 0+""?Array:Uint8Array,a=new r(n);a[0]=a[n-1]=1,Ge(e,a,t,0,n-1);var o=[],s;for(s=0;s<n;s++)a[s]&&o.push(e[s]);return o}function Ge(e,t,n,r,a){var o=0,s,l,i;for(l=r+1;l<=a-1;l++)i=et(e[l],e[r],e[a],!0),i>o&&(s=l,o=i);o>n&&(t[s]=1,Ge(e,t,n,r,s),Ge(e,t,n,s,a))}function Ze(e,t){for(var n=[e[0]],r=1,a=0,o=e.length;r<o;r++)Je(e[r],e[a])>t&&(n.push(e[r]),a=r);return a<o-1&&n.push(e[o-1]),n}function Xe(e,t,n,r,a){var o=r?tr:Qe(e,n),i=Qe(t,n),s,l,d;for(tr=i;;){if(!(o|i))return[e,t];if(o&i)return!1;s=o||i,l=Ke(e,t,s,n,a),d=Qe(l,n),s===o?(e=l,o=d):(t=l,i=d)}}function Ke(e,t,n,r,a){var o=t.x-e.x,i=t.y-e.y,s=r.min,l=r.max,d,c;return 8&n?(d=e.x+o*(l.y-e.y)/i,c=l.y):4&n?(d=e.x+o*(s.y-e.y)/i,c=s.y):2&n?(d=l.x,c=e.y+i*(l.x-e.x)/o):1&n&&(d=s.x,c=e.y+i*(s.x-e.x)/o),new F(d,c,a)}function Qe(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Je(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function et(e,n,r,a){var o=n.x,i=n.y,s=r.x-o,l=r.y-i,d=s*s+l*l,c;return 0<d&&(c=((e.x-o)*s+(e.y-i)*l)/d,1<c?(o=r.x,i=r.y):0<c&&(o+=s*c,i+=l*c)),s=e.x-o,l=e.y-i,a?s*s+l*l:new F(o,i)}function tt(e){return!_t(e[0])||"object"!=typeof e[0][0]&&"undefined"!=typeof e[0][0]}function nt(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tt(e)}function rt(e,t,n){var r=[1,4,2,8],o,s,i,l,d,a,c,u,m;for(s=0,c=e.length;s<c;s++)e[s]._code=Qe(e[s],t);for(l=0;4>l;l++){for(u=r[l],o=[],(s=0,c=e.length,i=c-1);s<c;i=s++)d=e[s],a=e[i],d._code&u?!(a._code&u)&&(m=Ke(a,d,u,t,n),m._code=Qe(m,t),o.push(m)):(a._code&u&&(m=Ke(a,d,u,t,n),m._code=Qe(m,t),o.push(m)),o.push(d));e=o}return e}function at(e,t){var n="Feature"===e.type?e.geometry:e,r=n?n.coordinates:null,a=[],o=t&&t.pointToLayer,s=t&&t.coordsToLatLng||ot,l,d,c,i;if(!r&&!n)return null;switch(n.type){case"Point":return l=s(r),o?o(e,l):new lr(l);case"MultiPoint":for(c=0,i=r.length;c<i;c++)l=s(r[c]),a.push(o?o(e,l):new lr(l));return new ar(a);case"LineString":case"MultiLineString":return d=it(r,"LineString"===n.type?0:1,s),new ur(d,t);case"Polygon":case"MultiPolygon":return d=it(r,"Polygon"===n.type?1:2,s),new mr(d,t);case"GeometryCollection":for(c=0,i=n.geometries.length;c<i;c++){var p=at({geometry:n.geometries[c],type:"Feature",properties:e.properties},t);p&&a.push(p)}return new ar(a);default:throw new Error("Invalid GeoJSON object.");}}function ot(e){return new W(e[1],e[0],e[2])}function it(e,t,n){for(var r=[],a=0,o=e.length,i;a<o;a++)i=t?it(e[a],t-1,n):(n||ot)(e[a]),r.push(i);return r}function st(e,t){return t="number"==typeof t?t:6,void 0===e.alt?[T(e.lng,t),T(e.lat,t)]:[T(e.lng,t),T(e.lat,t),T(e.alt,t)]}function lt(e,t,n,r){for(var a=[],o=0,i=e.length;o<i;o++)a.push(t?lt(e[o],t-1,n,r):st(e[o],r));return!t&&n&&a.push(a[0]),a}function dt(e,n){return e.feature?t({},e.feature,{geometry:n}):ct(n)}function ct(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function pt(e,t){return new fr(e,t)}function ut(e,t){return new Tr(e,t)}function mt(e){return nn?new Er(e):null}function ft(e){return rn||an?new Lr(e):null}var yt=Object.freeze;Object.freeze=function(e){return e};var gt=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),ht=0,bt=/\{ *([\w_\-]+) *\}/g,_t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",vt=0,St=window.requestAnimationFrame||N("RequestAnimationFrame")||P,Tt=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},kt=(Object.freeze||Object)({freeze:yt,extend:t,create:gt,bind:n,lastId:ht,stamp:_,throttle:x,wrapNum:v,falseFn:S,formatNum:T,trim:k,splitWords:O,setOptions:E,getParamString:C,template:w,isArray:_t,indexOf:A,emptyImageUrl:xt,requestFn:St,cancelFn:Tt,requestAnimFrame:R,cancelAnimFrame:D});I.extend=function(e){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,a=gt(r);for(var o in a.constructor=n,n.prototype=a,this)this.hasOwnProperty(o)&&"prototype"!=o&&"__super__"!=o&&(n[o]=this[o]);return e.statics&&(t(n,e.statics),delete e.statics),e.includes&&(M(e.includes),t.apply(null,[a].concat(e.includes)),delete e.includes),a.options&&(e.options=t(gt(a.options),e.options)),t(a,e),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},n},I.include=function(e){return t(this.prototype,e),this},I.mergeOptions=function(e){return t(this.prototype.options,e),this},I.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var Ot={on:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else{e=O(e);for(var a=0,o=e.length;a<o;a++)this._on(e[a],t,n)}return this},off:function(e,t,n){if(!e)delete this._events;else if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else{e=O(e);for(var a=0,o=e.length;a<o;a++)this._off(e[a],t,n)}return this},_on:function(e,t,n){this._events=this._events||{};var r=this._events[e];r||(r=[],this._events[e]=r),n===this&&(n=void 0);for(var a={fn:t,ctx:n},o=r,s=0,i=o.length;s<i;s++)if(o[s].fn===t&&o[s].ctx===n)return;o.push(a)},_off:function(e,t,n){var r,a,o;if(this._events&&(r=this._events[e],!!r)){if(!t){for(a=0,o=r.length;a<o;a++)r[a].fn=S;return void delete this._events[e]}if(n===this&&(n=void 0),r)for(a=0,o=r.length;a<o;a++){var i=r[a];if(i.ctx===n&&i.fn===t)return i.fn=S,this._firingCount&&(this._events[e]=r=r.slice()),void r.splice(a,1)}}},fire:function(e,n,r){if(!this.listens(e,r))return this;var a=t({},n,{type:e,target:this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,i=o.length,d;s<i;s++)d=o[s],d.fn.call(d.ctx||this,a);this._firingCount--}}return r&&this._propagateEvent(a),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t))return!0;return!1},once:function(e,t,r){if("object"==typeof e){for(var a in e)this.once(a,e[a],t);return this}var o=n(function(){this.off(e,t,r).off(e,o,r)},this);return this.on(e,t,r).on(e,o,r)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[_(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[_(e)],this},_propagateEvent:function(n){for(var e in this._eventParents)this._eventParents[e].fire(n.type,t({layer:n.target},n),!0)}};Ot.addEventListener=Ot.on,Ot.removeEventListener=Ot.clearAllEventListeners=Ot.off,Ot.addOneTimeEventListener=Ot.once,Ot.fireEvent=Ot.fire,Ot.hasEventListeners=Ot.listens;var Et=I.extend(Ot);F.prototype={clone:function(){return new F(this.x,this.y)},add:function(e){return this.clone()._add(j(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(j(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new F(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new F(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=u(this.x),this.y=u(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=g(this.x),this.y=g(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=y(this.x),this.y=y(this.y),this},distanceTo:function(e){e=j(e);var t=e.x-this.x,n=e.y-this.y;return c(t*t+n*n)},equals:function(e){return e=j(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=j(e),f(e.x)<=f(this.x)&&f(e.y)<=f(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}},z.prototype={extend:function(e){return e=j(e),this.min||this.max?(this.min.x=b(e.x,this.min.x),this.max.x=m(e.x,this.max.x),this.min.y=b(e.y,this.min.y),this.max.y=m(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new F(this.min.x,this.max.y)},getTopRight:function(){return new F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof F?j(e):U(e),e instanceof z?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=U(e);var t=this.min,n=this.max,r=e.min,a=e.max,o=a.x>=t.x&&r.x<=n.x,i=a.y>=t.y&&r.y<=n.y;return o&&i},overlaps:function(e){e=U(e);var t=this.min,n=this.max,r=e.min,a=e.max,o=a.x>t.x&&r.x<n.x,i=a.y>t.y&&r.y<n.y;return o&&i},isValid:function(){return!!(this.min&&this.max)}},$.prototype={extend:function(e){var t=this._southWest,n=this._northEast,r,a;if(e instanceof W)r=e,a=e;else{if(!(e instanceof $))return e?this.extend(q(e)||B(e)):this;if(r=e._southWest,a=e._northEast,!r||!a)return this}return t||n?(t.lat=b(r.lat,t.lat),t.lng=b(r.lng,t.lng),n.lat=m(a.lat,n.lat),n.lng=m(a.lng,n.lng)):(this._southWest=new W(r.lat,r.lng),this._northEast=new W(a.lat,a.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=f(t.lat-n.lat)*e,a=f(t.lng-n.lng)*e;return new $(new W(t.lat-r,t.lng-a),new W(n.lat+r,n.lng+a))},getCenter:function(){return new W((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new W(this.getNorth(),this.getWest())},getSouthEast:function(){return new W(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof W||"lat"in e?q(e):B(e);var t=this._southWest,n=this._northEast,r,a;return e instanceof $?(r=e.getSouthWest(),a=e.getNorthEast()):r=a=e,r.lat>=t.lat&&a.lat<=n.lat&&r.lng>=t.lng&&a.lng<=n.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),o=a.lat>=t.lat&&r.lat<=n.lat,i=a.lng>=t.lng&&r.lng<=n.lng;return o&&i},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),o=a.lat>t.lat&&r.lat<n.lat,i=a.lng>t.lng&&r.lng<n.lng;return o&&i},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!!(this._southWest&&this._northEast)}},W.prototype={equals:function(e,t){if(!e)return!1;e=q(e);var n=m(f(this.lat-e.lat),f(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+T(this.lat,e)+", "+T(this.lng,e)+")"},distanceTo:function(e){return wt.distance(this,q(e))},wrap:function(){return wt.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/i(l/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new W(this.lat,this.lng,this.alt)}};var Ct={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*h(2,e)},zoom:function(e){return p(e/256)/d},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),r=this.transformation.transform(t.min,n),a=this.transformation.transform(t.max,n);return new z(r,a)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?v(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?v(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new W(n,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,a=t.lng-n.lng;if(0==r&&0==a)return e;var o=e.getSouthWest(),i=e.getNorthEast(),s=new W(o.lat-r,o.lng-a),l=new W(i.lat-r,i.lng-a);return new $(s,l)}},wt=t({},Ct,{wrapLng:[-180,180],R:6371000,distance:function(e,t){var n=l/180,o=e.lat*n,d=t.lat*n,c=s(o)*s(d)+i(o)*i(d)*i((t.lng-e.lng)*n);return this.R*r(b(c,1))}}),Lt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=l/180,n=this.MAX_LATITUDE,r=m(b(n,e.lat),-n),a=s(r*t);return new F(this.R*e.lng*t,this.R*p((1+a)/(1-a))/2)},unproject:function(e){var t=180/l;return new W((2*a(o(e.y/this.R))-l/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*l;return new z([-e,-e],[e,e])}()};V.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new F((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var At=t({},wt,{code:"EPSG:3857",projection:Lt,transformation:function(){var e=0.5/(l*Lt.R);return H(e,0.5,-e,0.5)}()}),Nt=t({},At,{code:"EPSG:900913"}),Pt=document.documentElement.style,Rt="ActiveXObject"in window,Dt=Rt&&!document.addEventListener,It="msLaunchUri"in navigator&&!("documentMode"in document),Mt=Z("webkit"),Ft=Z("android"),jt=Z("android 2")||Z("android 3"),zt=!!window.opera,Ut=Z("chrome"),$t=Z("gecko")&&!Mt&&!zt&&!Rt,Bt=!Ut&&Z("safari"),Wt=Z("phantom"),qt="OTransition"in Pt,Vt=0===navigator.platform.indexOf("Win"),Ht=Rt&&"transition"in Pt,Yt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jt,Gt="MozPerspective"in Pt,Zt=!window.L_DISABLE_3D&&(Ht||Yt||Gt)&&!qt&&!Wt,Xt="undefined"!=typeof orientation||Z("mobile"),Kt=!window.PointerEvent&&window.MSPointerEvent,Qt=!!(window.PointerEvent||Kt),Jt=!window.L_NO_TOUCH&&(Qt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),en=Xt&&zt,tn=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),nn=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&Y("svg").createSVGRect),an=!rn&&function(){try{var e=document.createElement("div");e.innerHTML="<v:shape adj=\"1\"/>";var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}(),sn=(Object.freeze||Object)({ie:Rt,ielt9:Dt,edge:It,webkit:Mt,android:Ft,android23:jt,opera:zt,chrome:Ut,gecko:$t,safari:Bt,phantom:Wt,opera12:qt,win:Vt,ie3d:Ht,webkit3d:Yt,gecko3d:Gt,any3d:Zt,mobile:Xt,mobileWebkit:Xt&&Mt,mobileWebkit3d:Xt&&Yt,msPointer:Kt,pointer:Qt,touch:Jt,mobileOpera:en,mobileGecko:Xt&&$t,retina:tn,canvas:nn,svg:rn,vml:an}),ln=Kt?"MSPointerDown":"pointerdown",dn=Kt?"MSPointerMove":"pointermove",cn=Kt?"MSPointerUp":"pointerup",pn=Kt?"MSPointerCancel":"pointercancel",un=["INPUT","SELECT","OPTION"],mn={},fn=!1,yn=0,gn=Kt?"MSPointerDown":Qt?"pointerdown":"touchstart",hn=Kt?"MSPointerUp":Qt?"pointerup":"touchend",bn="_leaflet_",_n="_leaflet_events",xn=Vt&&Ut?2*window.devicePixelRatio:$t?window.devicePixelRatio:1,vn={},Sn=(Object.freeze||Object)({on:le,off:de,stopPropagation:ue,disableScrollPropagation:me,disableClickPropagation:fe,preventDefault:ye,stop:ge,getMousePosition:he,getWheelDelta:be,fakeStop:_e,skipped:xe,isExternalTarget:ve,addListener:le,removeListener:de}),Tn=Fe(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),kn=Fe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),On="webkitTransition"===kn||"OTransition"===kn?kn+"End":"transitionend",En,Cn,wn,Ln;if("onselectstart"in document)Cn=function(){le(window,"selectstart",ye)},wn=function(){de(window,"selectstart",ye)};else{var An=Fe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Cn=function(){if(An){var e=document.documentElement.style;Ln=e[An],e[An]="none"}},wn=function(){An&&(document.documentElement.style[An]=Ln,Ln=void 0)}}var Nn=(Object.freeze||Object)({TRANSFORM:Tn,TRANSITION:kn,TRANSITION_END:On,get:Te,getStyle:ke,create:Oe,remove:Ee,empty:Ce,toFront:we,toBack:Le,hasClass:Ae,addClass:Ne,removeClass:Pe,setClass:Re,getClass:De,setOpacity:Ie,testProp:Fe,setTransform:je,setPosition:ze,getPosition:Ue,disableTextSelection:Cn,enableTextSelection:wn,disableImageDrag:$e,enableImageDrag:Be,preventOutline:We,restoreOutline:qe}),Pn=Et.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||0.25,this._easeOutPower=1/m(r||0.5,0.2),this._startPos=Ue(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),ze(this._el,n),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-h(1-e,this._easeOutPower)}}),Rn=Et.extend({options:{crs:At,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=E(this,t),this._initContainer(e),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(q(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=kn&&Zt&&!en&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,On,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,n,r){if(n=void 0===n?this._zoom:this._limitZoom(n),e=this._limitCenter(q(e),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r){void 0!==r.animate&&(r.zoom=t({animate:r.animate},r.zoom),r.pan=t({animate:r.animate,duration:r.duration},r.pan));var a=this._zoom===n?this._tryAnimatedPan(e,r.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,n,r.zoom);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,n),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Zt?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Zt?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),a=this.getSize().divideBy(2),o=e instanceof F?e:this.latLngToContainerPoint(e),i=o.subtract(a).multiplyBy(1-1/r),s=this.containerPointToLatLng(a.add(i));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=j(t.paddingTopLeft||t.padding||[0,0]),r=j(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,n.add(r));if(a="number"==typeof t.maxZoom?b(t.maxZoom,a):a,a===Infinity)return{center:e.getCenter(),zoom:a};var o=r.subtract(n).divideBy(2),i=this.project(e.getSouthWest(),a),s=this.project(e.getNorthEast(),a),l=this.unproject(i.add(s).divideBy(2).add(o),a);return{center:l,zoom:a}},fitBounds:function(e,t){if(e=B(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=j(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){Ne(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||0.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,n,t){function a(e){var t=e?-1:1,n=e?v:x,r=(v*v-x*x+t*O*O*T*T)/(2*n*O*T),a=c(r*r+1)-r,o=1e-9>a?-18:p(a);return o}function r(e){return(o(e)-o(-e))/2}function i(e){return(o(e)+o(-e))/2}function l(e){return r(e)/i(e)}function d(e){return x*(i(E)/i(E+k*e))}function f(e){return x*(i(E)*l(E+k*e)-r(E))/O}function u(e){return 1-h(1-e,1.5)}function y(){var r=(Date.now()-C)/S,t=u(r)*w;1>=r?(this._flyToFrame=R(y,this),this._move(this.unproject(g.add(b.subtract(g).multiplyBy(f(t)/T)),_),this.getScaleZoom(x/d(t),_),{flyTo:!0})):this._move(e,n)._moveEnd(!0)}if(t=t||{},!1===t.animate||!Zt)return this.setView(e,n,t);this._stop();var g=this.project(this.getCenter()),b=this.project(e),s=this.getSize(),_=this._zoom;e=q(e),n=void 0===n?_:n;var x=m(s.x,s.y),v=x*this.getZoomScale(_,n),T=b.distanceTo(g)||1,k=1.42,O=k*k,E=a(0),C=Date.now(),w=(a(1)-E)/k,S=t.duration?1e3*t.duration:0.8*(1e3*w);return this._moveStart(!0),y.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=B(e),!e.isValid())?(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds)):(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){return this.options.minZoom=e,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(e):this},setMaxZoom:function(e){return this.options.maxZoom=e,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=t({animate:!1,pan:!0},!0===e?{animate:!0}:e);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),o=r.divideBy(2).round(),i=a.divideBy(2).round(),s=o.subtract(i);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:a})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=t({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=n(this._handleGeolocationResponse,this),a=n(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,a,e):navigator.geolocation.getCurrentPosition(r,a,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,r=new W(t,n),a=r.toBounds(e.coords.accuracy),o=this._locateOptions;if(o.setView){var s=this.getBoundsZoom(a);this.setView(r,o.maxZoom?b(s,o.maxZoom):s)}var l={latlng:r,bounds:a,timestamp:e.timestamp};for(var d in e.coords)"number"==typeof e.coords[d]&&(l[d]=e.coords[d]);this.fire("locationfound",l)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}Ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();for(e in this._panes)Ee(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=Oe("div",n,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new $(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=j(n||[0,0]);var r=this.getZoom()||0,a=this.getMinZoom(),o=this.getMaxZoom(),i=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),d=U(this.project(s,r),this.project(i,r)).getSize(),c=Zt?this.options.zoomSnap:1,p=l.x/d.x,f=l.y/d.y,h=t?m(p,f):b(p,f);return r=this.getScaleZoom(h,r),c&&(r=u(r/(c/100))*(c/100),r=t?y(r/c)*c:g(r/c)*c),m(a,b(o,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new z(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?Infinity:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(q(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(j(e),t)},layerPointToLatLng:function(e){var t=j(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(q(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(q(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(q(e),q(t))},containerPointToLayerPoint:function(e){return j(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return j(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(j(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(e)))},mouseEventToContainerPoint:function(t){return he(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(e){var t=this._container=Te(e);if(!t)throw new Error("Map container not found.");else if(t._leaflet_id)throw new Error("Map container is already initialized.");le(t,"scroll",this._onScroll,this),this._containerId=_(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Zt,Ne(e,"leaflet-container"+(Jt?" leaflet-touch":"")+(tn?" leaflet-retina":"")+(Dt?" leaflet-oldie":"")+(Bt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ke(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ne(e.markerPane,"leaflet-zoom-hide"),Ne(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){ze(this._mapPane,new F(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r)._move(e,t)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e){return e&&this.fire("zoomstart"),this.fire("movestart")},_move:function(e,t,n){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){ze(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[_(this._container)]=this;var t=e?de:le;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Zt&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();m(f(e.x),f(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],r="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,o=!1,i;a;){if(i=this._targets[_(a)],i&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){o=!0;break}if(i&&i.listens(e,!0)){if(r&&!ve(a,t))break;if(n.push(i),r)break}if(a===this._container)break;a=a.parentNode}return n.length||o||r||!ve(a,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!xe(t)){var e=t.type;("mousedown"===e||"keypress"===e)&&We(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,a){if("click"===n.type){var o=t({},n);o.type="preclick",this._fireDOMEvent(o,o.type,a)}if(!n._stopped&&(a=(a||[]).concat(this._findEventTargets(n,r)),!!a.length)){var s=a[0];"contextmenu"===r&&s.listens(r,!0)&&ye(n);var l={originalEvent:n};if("keypress"!==n.type){var d=s.options&&"icon"in s.options;l.containerPoint=d?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(n),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=d?s.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(var c=0;c<a.length;c++)if(a[c].fire(r,l,!0),l.originalEvent._stopped||!1===a[c].options.bubblingMouseEvents&&-1!==A(this._mouseEvents,r))return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Ue(this._mapPane)||new F(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return U([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),a=this.getSize().divideBy(2),o=new z(r.subtract(a),r.add(a)),i=this._getBoundsOffset(o,n,t);return i.round().equals([0,0])?e:this.unproject(r.add(i),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new z(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=U(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),a=r.min.subtract(e.min),o=r.max.subtract(e.max),i=this._rebound(a.x,-o.x),s=this._rebound(a.y,-o.y);return new F(i,s)},_rebound:function(e,t){return 0<e+t?u(e-t)/2:m(0,y(e))-m(0,g(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Zt?this.options.zoomSnap:1;return r&&(e=u(e/r)*r),m(t,b(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(!0===(t&&t.animate)||this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=Oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var e=Tn,n=this._proxy.style[e];je(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();je(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ee(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||f(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/r);return(!0===n.animate||this.getSize().contains(a))&&(R(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,r,a){r&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,Ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:a}),setTimeout(n(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(Pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),R(function(){this._moveEnd(!0)},this))}}),Dn=I.extend({options:{position:"topright"},initialize:function(e){E(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return Ne(t,"leaflet-control"),-1===n.indexOf("bottom")?r.appendChild(t):r.insertBefore(t,r.firstChild),this},remove:function(){return this._map?(Ee(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),In=function(e){return new Dn(e)},Mn,Fn;Rn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,a){t[e+a]=Oe("div",n+e+" "+n+a,r)}var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=Oe("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Ee(this._controlCorners[e]);Ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jn=Dn.extend({options:{collapsed:!0,position:"topright",// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in E(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Dn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(_(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){Ne(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(Ne(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):Pe(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=Oe("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),fe(t),me(t);var r=this._form=Oe("form",e+"-list");n&&(this._map.on("click",this.collapse,this),!Ft&&le(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var a=this._layersLink=Oe("a",e+"-toggle",t);a.href="#",a.title="Layers",Jt?(le(a,"click",ge),le(a,"click",this.expand,this)):le(a,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Oe("div",e+"-base",r),this._separator=Oe("div",e+"-separator",r),this._overlaysList=Oe("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&_(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,r){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:r}),this.options.sortLayers&&this._layers.sort(n(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ce(this._baseLayersList),Ce(this._overlaysList),this._layerControlInputs=[];var e=0,t,n,r,a;for(r=0;r<this._layers.length;r++)a=this._layers[r],this._addItem(a),n=n||a.overlay,t=t||!a.overlay,e+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<e,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(e,t){var n="<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\""+e+"\""+(t?" checked=\"checked\"":"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),r;e.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=n):r=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(r),r.layerId=_(e.layer),le(r,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var o=document.createElement("div");t.appendChild(o),o.appendChild(r),o.appendChild(a);var i=e.overlay?this._overlaysList:this._baseLayersList;return i.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){var e=this._layerControlInputs,t=[],n=[],r,a;this._handlingClick=!0;for(var o=e.length-1;0<=o;o--)r=e[o],a=this._getLayer(r.layerId).layer,r.checked?t.push(a):!r.checked&&n.push(a);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])&&this._map.removeLayer(n[o]);for(o=0;o<t.length;o++)this._map.hasLayer(t[o])||this._map.addLayer(t[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t=this._map.getZoom(),n=e.length-1,r,a;0<=n;n--)r=e[n],a=this._getLayer(r.layerId).layer,r.disabled=void 0!==a.options.minZoom&&t<a.options.minZoom||void 0!==a.options.maxZoom&&t>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),zn=Dn.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=Oe("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(e,t,n,r,a){var o=Oe("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),fe(o),le(o,"click",ge),le(o,"click",a,this),le(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Pe(this._zoomInButton,t),Pe(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&Ne(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&Ne(this._zoomInButton,t)}});Rn.mergeOptions({zoomControl:!0}),Rn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zn,this.addControl(this.zoomControl))});var Un=Dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=Oe("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=Oe("div",t,n)),e.imperial&&(this._iScale=Oe("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=3.2808399*e,n,r,a;5280<t?(n=t/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+" mi",r/n)):(a=this._getRoundNum(t),this._updateScale(this._iScale,a+" ft",a/t))},_updateScale:function(e,t,n){e.style.width=u(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=h(10,(g(e)+"").length-1),n=e/t;return n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1,t*n}}),$n=Dn.extend({options:{position:"bottomright",prefix:"<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>"},initialize:function(e){E(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=Oe("div","leaflet-control-attribution"),fe(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Rn.mergeOptions({attributionControl:!0}),Rn.addInitHook(function(){this.options.attributionControl&&new $n().addTo(this)});Dn.Layers=jn,Dn.Zoom=zn,Dn.Scale=Un,Dn.Attribution=$n,In.layers=function(e,t,n){return new jn(e,t,n)},In.zoom=function(e){return new zn(e)},In.scale=function(e){return new Un(e)},In.attribution=function(e){return new $n(e)};var Bn=I.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),Wn=Jt?"touchstart mousedown":"mousedown",qn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Vn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Hn=Et.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){E(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(le(this._dragStartTarget,Wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hn._dragging===this&&this.finishDrag(),de(this._dragStartTarget,Wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Ae(this._element,"leaflet-zoom-anim"))&&!(Hn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(Hn._dragging=this,this._preventOutline&&We(this._element),$e(),Cn(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new F(e.clientX,e.clientY),le(document,Vn[t.type],this._onMove,this),le(document,qn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&1<t.touches.length)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new F(e.clientX,e.clientY),r=n.subtract(this._startPoint);(r.x||r.y)&&!(f(r.x)+f(r.y)<this.options.clickTolerance)&&(ye(t),!this._moved&&(this.fire("dragstart"),this._moved=!0,this._startPos=Ue(this._element).subtract(r),Ne(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,D(this._animRequest),this._lastEvent=t,this._animRequest=R(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ze(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var e in Pe(document.body,"leaflet-dragging"),this._lastTarget&&(Pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vn)de(document,Vn[e],this._onMove,this),de(document,qn[e],this._onUp,this);Be(),wn(),this._moved&&this._moving&&(D(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Hn._dragging=!1}}),Yn=(Object.freeze||Object)({simplify:Ve,pointToSegmentDistance:He,closestPointOnSegment:function(e,t,n){return et(e,t,n)},clipSegment:Xe,_getEdgeIntersection:Ke,_getBitCode:Qe,_sqClosestPointOnSegment:et,isFlat:tt,_flat:nt}),Gn=(Object.freeze||Object)({clipPolygon:rt}),Zn={project:function(e){return new F(e.lng,e.lat)},unproject:function(e){return new W(e.y,e.x)},bounds:new z([-180,-90],[180,90])},Xn={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var n=l/180,a=this.R,o=t.lat*n,i=this.R_MINOR/a,d=c(1-i*i),e=d*s(o),u=Math.tan(l/4-o/2)/h((1-e)/(1+e),d/2);return o=-a*p(m(u,1e-10)),new F(t.lng*n*a,o)},unproject:function(t){for(var n=180/l,d=this.R,r=this.R_MINOR/d,p=c(1-r*r),e=o(-t.y/d),u=l/2-2*a(e),m=0,i=0.1,y;15>m&&1e-7<f(i);m++)y=p*s(u),y=h((1-y)/(1+y),p/2),i=l/2-2*a(e*y)-u,u+=i;return new W(u*n,t.x*n/d)}},Kn=(Object.freeze||Object)({LonLat:Zn,Mercator:Xn,SphericalMercator:Lt}),Qn=t({},wt,{code:"EPSG:3395",projection:Xn,transformation:function(){var e=0.5/(l*Xn.R);return H(e,0.5,-e,0.5)}()}),Jn=t({},wt,{code:"EPSG:4326",projection:Zn,transformation:H(1/180,1,-1/180,0.5)}),er=t({},Ct,{projection:Zn,transformation:H(1,0,-1,0),scale:function(e){return h(2,e)},zoom:function(e){return p(e)/d},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return c(n*n+r*r)},infinite:!0}),tr;Ct.Earth=wt,Ct.EPSG3395=Qn,Ct.EPSG3857=At,Ct.EPSG900913=Nt,Ct.EPSG4326=Jn,Ct.Simple=er;var nr=Et.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[_(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[_(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Rn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=_(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=_(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&_(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?_t(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[_(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=_(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=Infinity,t=-Infinity,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var a=this._zoomBoundLayers[r].options;e=a.minZoom===void 0?e:b(e,a.minZoom),t=a.maxZoom===void 0?t:m(t,a.maxZoom)}this._layersMaxZoom=t===-Infinity?void 0:t,this._layersMinZoom=e===Infinity?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rr=nr.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return _(e)}}),ar=rr.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),rr.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),rr.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new $;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),or=I.extend({initialize:function(e){E(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"==typeof r&&(r=[r,r]);var a=j(r),o=j("shadow"===t&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return tn&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),ir=or.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return ir.imagePath||(ir.imagePath=this._detectIconPath()),(this.options.imagePath||ir.imagePath)+or.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=Oe("div","leaflet-default-icon-path",document.body),t=ke(e,"background-image")||ke(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""),t}}),sr=Bn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Hn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ne(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,r=Ue(e._icon),a=e._map.layerPointToLatLng(r);n&&ze(n,r),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),lr=nr.extend({options:{icon:new ir,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(e,t){E(this,t),this._latlng=q(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=q(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),Ne(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var a=e.icon.createShadow(this._shadow),o=!1;a!==this._shadow&&(this._removeShadow(),o=!0),a&&(Ne(a,t),a.alt=""),this._shadow=a,1>e.opacity&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ee(this._shadow),this._shadow=null},_setPos:function(e){ze(this._icon,e),this._shadow&&ze(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(Ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sr)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sr(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;Ie(this._icon,e),this._shadow&&Ie(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),dr=nr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return E(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(Jt?10:0)}}),cr=dr.extend({options:{fill:!0,radius:10},initialize:function(e,t){E(this,t),this._latlng=q(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=q(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return dr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new z(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),pr=cr.extend({initialize:function(e,n,r){if("number"==typeof n&&(n=t({},r,{radius:n})),E(this,n),this._latlng=q(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new $(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:dr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,a=n.options.crs;if(a.distance===wt.distance){var o=l/180,d=this._mRadius/wt.R/o,c=n.project([t+d,e]),f=n.project([t-d,e]),y=c.add(f).divideBy(2),p=n.unproject(y).lat,g=r((i(d*o)-s(t*o)*s(p*o))/(i(t*o)*i(p*o)))/o;(isNaN(g)||0==g)&&(g=d/i(l/180*t)),this._point=y.subtract(n.getPixelOrigin()),this._radius=isNaN(g)?0:m(u(y.x-n.project([p,e-g]).x),1),this._radiusY=m(u(y.y-c.y),1)}else{var h=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),ur=dr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){E(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=Infinity,n=null,r=et,a=0,o=this._parts.length,s,l,d;a<o;a++){d=this._parts[a];for(var p=1,i=d.length;p<i;p++){s=d[p-1],l=d[p];var u=r(e,s,l,!0);u<t&&(t=u,n=r(e,s,l))}}return n&&(n.distance=c(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,r,a,o,i,s,l;if(!t)return null;for(n=0,r=0;n<t-1;n++)r+=e[n].distanceTo(e[n+1])/2;if(0===r)return this._map.layerPointToLatLng(e[0]);for(n=0,o=0;n<t-1;n++)if(i=e[n],s=e[n+1],a=i.distanceTo(s),o+=a,o>r)return l=(o-r)/a,this._map.layerPointToLatLng([s.x-l*(s.x-i.x),s.y-l*(s.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=q(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new $,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return tt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=tt(e),r=0,a=e.length;r<a;r++)n?(t[r]=q(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),n=new F(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(n),e.max._add(n),this._pxBounds=e)},_projectLatlngs:function(e,t,n){var r=e[0]instanceof W,a=e.length,o,i;if(r){for(i=[],o=0;o<a;o++)i[o]=this._map.latLngToLayerPoint(e[o]),n.extend(i[o]);t.push(i)}else for(o=0;o<a;o++)this._projectLatlngs(e[o],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);var t=this._parts,n,r,a,o,i,s,l;for(n=0,a=0,o=this._rings.length;n<o;n++)for(l=this._rings[n],r=0,i=l.length;r<i-1;r++)(s=Xe(l[r],l[r+1],e,r,!0),!!s)&&(t[a]=t[a]||[],t[a].push(s[0]),(s[1]!==l[r+1]||r===i-2)&&(t[a].push(s[1]),a++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Ve(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n=this._clickTolerance(),r,a,o,i,s,l;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,i=this._parts.length;r<i;r++)for(l=this._parts[r],a=0,s=l.length,o=s-1;a<s;o=a++)if((t||0!==a)&&He(e,l[o],l[a])<=n)return!0;return!1}});ur._flat=nt;var mr=ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,r,a,o,i,s,l,d,c;if(!t)return null;for(s=l=d=0,n=0,r=t-1;n<t;r=n++)a=e[n],o=e[r],i=a.y*o.x-o.y*a.x,l+=(a.x+o.x)*i,d+=(a.y+o.y)*i,s+=3*i;return c=0===s?e[0]:[l/s,d/s],this._map.layerPointToLatLng(c)},_convertLatLngs:function(e){var t=ur.prototype._convertLatLngs.call(this,e),n=t.length;return 2<=n&&t[0]instanceof W&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){ur.prototype._setLatLngs.call(this,e),tt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new F(t,t);if(e=new z(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);for(var r=0,a=this._rings.length,o;r<a;r++)o=rt(this._rings[r],e,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,r,a,o,i,s,l,d;if(!this._pxBounds.contains(e))return!1;for(o=0,l=this._parts.length;o<l;o++)for(n=this._parts[o],i=0,d=n.length,s=d-1;i<d;s=i++)r=n[i],a=n[s],r.y>e.y!=a.y>e.y&&e.x<(a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x&&(t=!t);return t||ur.prototype._containsPoint.call(this,e,!0)}}),fr=ar.extend({initialize:function(e,t){E(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=_t(e)?e:e.features,n,r,a;if(t){for(n=0,r=t.length;n<r;n++)a=t[n],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var i=at(e,o);return i?(i.feature=ct(e),i.defaultOptions=i.options,this.resetStyle(i),o.onEachFeature&&o.onEachFeature(e,i),this.addLayer(i)):this},resetStyle:function(e){return e.options=t({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),yr={toGeoJSON:function(e){return dt(this,{type:"Point",coordinates:st(this.getLatLng(),e)})}};lr.include(yr),pr.include(yr),cr.include(yr),ur.include({toGeoJSON:function(e){var t=!tt(this._latlngs),n=lt(this._latlngs,t?1:0,!1,e);return dt(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),mr.include({toGeoJSON:function(e){var t=!tt(this._latlngs),n=t&&!tt(this._latlngs[0]),r=lt(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),dt(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),rr.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),dt(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var a=t.toGeoJSON(e);if(n)r.push(a.geometry);else{var o=ct(a);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?dt(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var gr=nr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),E(this,n)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(Ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&we(this._image),this},bringToBack:function(){return this._map&&Le(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._image=Oe("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));e.onselectstart=S,e.onmousemove=S,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;je(this._image,n,e)},_reset:function(){var e=this._image,t=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();ze(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Ie(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),hr=gr.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:Oe("video");if(t.class=t.class||"",t.class+="leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""),t.onselectstart=S,t.onmousemove=S,t.onloadeddata=n(this.fire,this,"load"),!e){_t(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var r=0,a;r<this._url.length;r++)a=Oe("source"),a.src=this._url[r],t.appendChild(a)}}}),br=nr.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){E(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Ie(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Ie(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(Ie(this._container,0),this._removeTimeout=setTimeout(n(Ee,void 0,this._container),200)):Ee(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=q(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&we(this._container),this},bringToBack:function(){return this._map&&Le(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=j(this.options.offset),n=this._getAnchor();this._zoomAnimated?ze(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,a=this._containerLeft=-u(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}}),_r=br.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){br.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof dr)&&this._source.on("preclick",ue))},onRemove:function(e){br.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),!(this._source instanceof dr)&&this._source.off("preclick",ue))},getEvents:function(){var e=br.prototype.getEvents.call(this);return(void 0===this.options.closeOnClick?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=Oe("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Oe("div",e+"-content-wrapper",t);if(this._contentNode=Oe("div",e+"-content",n),fe(n),me(this._contentNode),le(n,"contextmenu",ue),this._tipContainer=Oe("div",e+"-tip-container",t),this._tip=Oe("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=Oe("a",e+"-close-button",t);r.href="#close",r.innerHTML="&#215;",le(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=b(n,this.options.maxWidth),n=m(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,a=this.options.maxHeight,o="leaflet-popup-scrolled";a&&r>a?(t.height=a+"px",Ne(e,o)):Pe(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ze(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=parseInt(ke(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,a=new F(this._containerLeft,-n-this._containerBottom);a._add(Ue(this._container));var o=e.layerPointToContainerPoint(a),i=j(this.options.autoPanPadding),s=j(this.options.autoPanPaddingTopLeft||i),l=j(this.options.autoPanPaddingBottomRight||i),d=e.getSize(),c=0,p=0;o.x+r+l.x>d.x&&(c=o.x+r-d.x+l.x),0>o.x-c-s.x&&(c=o.x-s.x),o.y+n+l.y>d.y&&(p=o.y+n-d.y+l.y),0>o.y-p-s.y&&(p=o.y-s.y),(c||p)&&e.fire("autopanstart").panBy([c,p])}},_onCloseButtonClick:function(t){this._close(),ge(t)},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Rn.mergeOptions({closePopupOnClick:!0}),Rn.include({openPopup:function(e,t,n){return(e instanceof _r||(e=new _r(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),nr.include({bindPopup:function(e,t){return e instanceof _r?(E(e,t),this._popup=e,e._source=this):((!this._popup||t)&&(this._popup=new _r(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof nr||(t=e,e=this),e instanceof ar)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup)return this._map?(ge(t),e instanceof dr?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))):void 0},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var xr=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(e){br.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){br.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=br.prototype.getEvents.call(this);return Jt&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Oe("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,r=t.latLngToContainerPoint(t.getCenter()),a=t.layerPointToContainerPoint(e),o=this.options.direction,i=n.offsetWidth,s=n.offsetHeight,l=j(this.options.offset),d=this._getAnchor();"top"===o?e=e.add(j(-i/2+l.x,-s+l.y+d.y,!0)):"bottom"===o?e=e.subtract(j(i/2-l.x,-l.y,!0)):"center"===o?e=e.subtract(j(i/2+l.x,s/2-d.y+l.y,!0)):"right"===o||"auto"===o&&a.x<r.x?(o="right",e=e.add(j(l.x+d.x,d.y-s/2+l.y,!0))):(o="left",e=e.subtract(j(i+d.x-l.x,s/2-d.y-l.y,!0))),Pe(n,"leaflet-tooltip-right"),Pe(n,"leaflet-tooltip-left"),Pe(n,"leaflet-tooltip-top"),Pe(n,"leaflet-tooltip-bottom"),Ne(n,"leaflet-tooltip-"+o),ze(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Ie(this._container,e)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Rn.include({openTooltip:function(e,t,n){return e instanceof xr||(e=new xr(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),nr.include({bindTooltip:function(e,t){return e instanceof xr?(E(e,t),this._tooltip=e,e._source=this):((!this._tooltip||t)&&(this._tooltip=new xr(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Jt&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof nr||(t=e,e=this),e instanceof ar)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(Ne(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,n,r;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(e)}});var vr=or.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(t.innerHTML=!1===n.html?"":n.html,n.bgPos){var r=j(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});or.Default=ir;var Sr=nr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){E(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Ee(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(!this._onMove&&(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof F?e:new F(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-Infinity,Infinity),r=0,a=t.length,o;r<a;r++)o=t[r].style.zIndex,t[r]!==this._container&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Dt){Ie(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var a=this._tiles[r];if(a.current&&a.loaded){var o=b(1,(e-a.loaded)/200);Ie(a.el,o),1>o?t=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=Oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-f(e-n),this._onUpdateLevel(n)):(Ee(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],a=this._map;return r||(r=this._levels[e]={},r.el=Oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,a.getCenter(),a.getZoom()),S(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var e=this._map.getZoom(),t,n;if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var r=n.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Ee(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(e,t,n,r){var a=g(e/2),o=g(t/2),i=n-1,s=new F(+a,+o);s.z=+i;var l=this._tileCoordsToKey(s),d=this._tiles[l];return d&&d.active?(d.retain=!0,!0):(d&&d.loaded&&(d.retain=!0),!!(i>r)&&this._retainParent(a,o,i,r))},_retainChildren:function(e,t,n,r){for(var a=2*e;a<2*e+2;a++)for(var o=2*t,i;o<2*t+2;o++){i=new F(a,o),i.z=n+1;var s=this._tileCoordsToKey(i),l=this._tiles[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);n+1<r&&this._retainChildren(a,o,n+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var a=this._clampZoom(u(t));(this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom)&&(a=void 0);var o=this.options.updateWhenZooming&&a!==this._tileZoom;(!r||o)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(e),!n&&this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),a=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Zt?je(e.el,a,r):ze(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[g(e.project([0,t.wrapLng[0]],r).x/n.x),y(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[g(e.project([t.wrapLat[0],0],r).y/n.x),y(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?m(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),a=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new z(a.subtract(o),a.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(r),o=a.getCenter(),s=[],l=this.options.keepBuffer,d=new z(a.getBottomLeft().subtract([l,-l]),a.getTopRight().add([l,-l]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var p in this._tiles){var u=this._tiles[p].coords;u.z===this._tileZoom&&d.contains(new F(u.x,u.y))||(this._tiles[p].current=!1)}if(1<f(n-this._tileZoom))return void this._setView(e,n);for(var c=a.min.y;c<=a.max.y;c++)for(var m=a.min.x,i;m<=a.max.x;m++)(i=new F(m,c),i.z=this._tileZoom,!!this._isValidTile(i))&&(this._tiles[this._tileCoordsToKey(i)]||s.push(i));if(s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var y=document.createDocumentFragment();for(m=0;m<s.length;m++)this._addTile(s[m],y);this._level.el.appendChild(y)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),a=r.add(n),o=t.unproject(r,e.z),i=t.unproject(a,e.z),s=new $(o,i);return this.options.noWrap||t.wrapLatLngBounds(s),s},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new F(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(Ee(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Ne(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=S,e.onmousemove=S,Dt&&1>this.options.opacity&&Ie(e,this.options.opacity),Ft&&!jt&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var r=this._getTilePos(e),a=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),n(this._tileReady,this,e));this._initTile(o),2>this.createTile.length&&R(n(this._tileReady,this,e,null,o)),ze(o,r),this._tiles[a]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,r){if(this._map){t&&this.fire("tileerror",{error:t,tile:r,coords:e});var a=this._tileCoordsToKey(e);r=this._tiles[a],r&&(r.loaded=+new Date,this._map._fadeAnimated?(Ie(r.el,0),D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),!t&&(Ne(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Dt||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new F(this._wrapX?v(e.x,this._wrapX):e.x,this._wrapY?v(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new z(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),Tr=Sr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=E(this,t),t.detectRetina&&tn&&0<t.maxZoom&&(t.tileSize=g(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=m(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),Ft||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var r=document.createElement("img");return le(r,"load",n(this._tileOnLoad,this,t,r)),le(r,"error",n(this._tileOnError,this,t,r)),this.options.crossOrigin&&(r.crossOrigin=""),r.alt="",r.setAttribute("role","presentation"),r.src=this.getTileUrl(e),r},getTileUrl:function(e){var n={r:tn?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(n.y=r),n["-y"]=r}return w(this._url,t(n,this.options))},_tileOnLoad:function(e,t){Dt?setTimeout(n(e,this,null,t),0):e(null,t)},_tileOnError:function(t,n,r){var e=this.options.errorTileUrl;e&&n.src!==e&&(n.src=e),t(r,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(e=t-e),e+r},_getSubdomain:function(e){var t=f(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=S,t.onerror=S,t.complete||(t.src=xt,Ee(t)))}}),kr=Tr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,n){this._url=e;var r=t({},this.defaultWmsParams);for(var a in n)a in this.options||(r[a]=n[a]);n=E(this,n),r.width=r.height=n.tileSize*(n.detectRetina&&tn?2:1),this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,Tr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),n=this._crs.project(t.getNorthWest()),r=this._crs.project(t.getSouthEast()),a=(1.3<=this._wmsVersion&&this._crs===Jn?[r.y,n.x,n.y,r.x]:[n.x,r.y,r.x,n.y]).join(","),o=Tr.prototype.getTileUrl.call(this,e);return o+C(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,n){return t(this.wmsParams,e),n||this.redraw(),this}});Tr.WMS=kr,ut.wms=function(e,t){return new kr(e,t)};var Or=nr.extend({options:{padding:0.1},initialize:function(e){E(this,e),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=Ue(this._container),a=this._map.getSize().multiplyBy(0.5+this.options.padding),o=this._map.project(this._center,t),i=this._map.project(e,t),s=i.subtract(o),l=a.multiplyBy(-n).add(r).add(a).subtract(s);Zt?je(this._container,l,n):ze(this._container,l)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new z(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Er=Or.extend({getEvents:function(){var e=Or.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Or.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");le(e,"mousemove",x(this._onMouseMove,32,this),this),le(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){delete this._ctx,Ee(this._container),de(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){this._drawnLayers={},Or.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=tn?2:1;ze(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",tn&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Or.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[_(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[L.stamp(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(e.options.dashArray){var t=e.options.dashArray.split(","),n=[],r;for(r=0;r<t.length;r++)n.push(+t[r]);e.options._dashArray=n}},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e=this._redrawBounds,t;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n=e._parts,r=n.length,a=this._ctx,o,i,s,l;if(r){for(this._drawnLayers[e._leaflet_id]=e,a.beginPath(),o=0;o<r;o++){for(i=0,s=n[o].length;i<s;i++)l=n[o][i],a[i?"lineTo":"moveTo"](l.x,l.y);t&&a.closePath()}this._fillStroke(a,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,a=e._radius,r=(e._radiusY||a)/a;this._drawnLayers[e._leaflet_id]=e,1!=r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,a,0,2*l,!1),1!=r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n=this._drawFirst,r,a;n;n=n.next)r=n.layer,r.options.interactive&&r._containsPoint(e)&&!this._map._draggableMoved(r)&&(a=r);a&&(_e(t),this._fireEvent([a],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n=this._drawFirst,r,a;n;n=n.next)r=n.layer,r.options.interactive&&r._containsPoint(e)&&(a=r);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,n,e){this._map._fireDOMEvent(n,e||n.type,t)},_bringToFront:function(e){var t=e._order,n=t.next,r=t.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)},_bringToBack:function(e){var t=e._order,n=t.next,r=t.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}),Cr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+" class=\"lvml\">")}}catch(t){return function(e){return document.createElement("<"+e+" xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">")}}}(),wr=an?Cr:Y,Lr=Or.extend({getEvents:function(){var e=Or.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=wr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ee(this._container),de(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Or.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),ze(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=wr("path");e.options.className&&Ne(t,e.options.className),e.options.interactive&&Ne(t,"leaflet-interactive"),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Ee(e._path),e.removeInteractiveTarget(e._path),delete this._layers[_(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,G(e._parts,t))},_updateCircle:function(e){var t=e._point,n=e._radius,a=e._radiusY||n,o="a"+n+","+a+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){we(e._path)},_bringToBack:function(e){Le(e._path)}});an&&Lr.include({_initContainer:function(){this._container=Oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Or.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Cr("shape");Ne(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Cr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;Ee(t),e.removeInteractiveTarget(t),delete this._layers[_(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,a=e._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(!t&&(t=e._stroke=Cr("stroke")),a.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,t.dashStyle=r.dashArray?_t(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):"",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(a.removeChild(t),e._stroke=null),r.fill?(!n&&(n=e._fill=Cr("fill")),a.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(a.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=u(e._radius),r=u(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,"+23592600)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){we(e._container)},_bringToBack:function(e){Le(e._container)}}),Rn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&mt()||ft()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=Lr&&ft({pane:e})||Er&&mt({pane:e}),this._paneRenderers[e]=t),t}});var Ar=mr.extend({initialize:function(e,t){mr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=B(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});Lr.create=wr,Lr.pointsToPath=G,fr.geometryToLayer=at,fr.coordsToLatLng=ot,fr.coordsToLatLngs=it,fr.latLngToCoords=st,fr.latLngsToCoords=lt,fr.getFeature=dt,fr.asFeature=ct,Rn.mergeOptions({boxZoom:!0});var Nr=Bn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return t.shiftKey&&(1===t.which||1===t.button)&&void(this._clearDeferredResetState(),this._resetState(),Cn(),$e(),this._startPoint=this._map.mouseEventToContainerPoint(t),le(document,{contextmenu:ge,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Oe("div","leaflet-zoom-box",this._container),Ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),n=e.getSize();ze(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Ee(this._box),Pe(this._container,"leaflet-crosshair")),wn(),Be(),de(document,{contextmenu:ge,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new $(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Rn.addInitHook("addHandler","boxZoom",Nr),Rn.mergeOptions({doubleClickZoom:!0});var Pr=Bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,a=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});Rn.addInitHook("addHandler","doubleClickZoom",Pr),Rn.mergeOptions({dragging:!0,inertia:!jt,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0});var Rr=Bn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Hn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pe(this._map._container,"leaflet-grab"),Pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=b(1,m(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=u(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,i=f(a+n)<f(o+n)?a:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=i},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||2>this._times.length;if(e.fire("dragend",t),r)e.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,i=n.easeLinearity,s=a.multiplyBy(i/o),l=s.distanceTo([0,0]),d=b(n.inertiaMaxSpeed,l),c=s.multiplyBy(d/l),p=d/(n.inertiaDeceleration*i),u=c.multiplyBy(-p/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),R(function(){e.panBy(u,{duration:p,easeLinearity:i,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Rn.addInitHook("addHandler","dragging",Rr),Rn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Dr=Bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;0>=e.tabIndex&&(e.tabIndex="0"),le(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),de(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,r,a;for(r=0,a=n.left.length;r<a;r++)t[n.left[r]]=[-1*e,0];for(r=0,a=n.right.length;r<a;r++)t[n.right[r]]=[e,0];for(r=0,a=n.down.length;r<a;r++)t[n.down[r]]=[0,e];for(r=0,a=n.up.length;r<a;r++)t[n.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,r,a;for(r=0,a=n.zoomIn.length;r<a;r++)t[n.zoomIn[r]]=e;for(r=0,a=n.zoomOut.length;r<a;r++)t[n.zoomOut[r]]=-e},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){de(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,r;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;r=this._panKeys[e],t.shiftKey&&(r=j(r).multiplyBy(3)),n.panBy(r),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(27===e&&n._popup)n.closePopup();else return;ge(t)}}});Rn.addInitHook("addHandler","keyboard",Dr),Rn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ir=Bn.extend({addHooks:function(){le(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){de(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=be(t),r=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=m(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),a),ge(t)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*p(2/(1+o(-f(r))))/d,i=n?y(a/n)*n:a,s=e._limitZoom(t+(0<this._delta?i:-i))-t;this._delta=0,this._startTime=null;s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});Rn.addInitHook("addHandler","scrollWheelZoom",Ir),Rn.mergeOptions({tap:!0,tapTolerance:15});var Mr=Bn.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ye(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],r=e.target;this._startPos=this._newPos=new F(e.clientX,e.clientY),r.tagName&&"a"===r.tagName.toLowerCase()&&Ne(r,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),le(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),de(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new F(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,n){var e=document.createEvent("MouseEvents");e._simulated=!0,n.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}});Jt&&!Qt&&Rn.addInitHook("addHandler","tap",Mr),Rn.mergeOptions({touchZoom:Jt&&!jt,bounceAtZoomLimits:!0});var Fr=Bn.extend({addHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||2!==t.touches.length||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend",this._onTouchEnd,this),ye(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,r=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),o=r.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>o||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"!==e.options.touchZoom){var i=r._add(a)._divideBy(2)._subtract(this._centerPoint);if(1==o&&0===i.x&&0===i.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}else if(this._center=this._startLatLng,1==o)return;this._moved||(e._moveStart(!0),this._moved=!0),D(this._animRequest);var s=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=R(s,this,!0),ye(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?void(this._zooming=!1,D(this._animRequest),de(document,"touchmove",this._onTouchMove),de(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):void(this._zooming=!1)}});Rn.addInitHook("addHandler","touchZoom",Fr),Rn.BoxZoom=Nr,Rn.DoubleClickZoom=Pr,Rn.Drag=Rr,Rn.Keyboard=Dr,Rn.ScrollWheelZoom=Ir,Rn.Tap=Mr,Rn.TouchZoom=Fr;var jr=window.L;window.L=e,Object.freeze=yt,e.version="1.2.0",e.noConflict=function(){return window.L=jr,this},e.Control=Dn,e.control=In,e.Browser=sn,e.Evented=Et,e.Mixin={Events:Ot},e.Util=kt,e.Class=I,e.Handler=Bn,e.extend=t,e.bind=n,e.stamp=_,e.setOptions=E,e.DomEvent=Sn,e.DomUtil=Nn,e.PosAnimation=Pn,e.Draggable=Hn,e.LineUtil=Yn,e.PolyUtil=Gn,e.Point=F,e.point=j,e.Bounds=z,e.bounds=U,e.Transformation=V,e.transformation=H,e.Projection=Kn,e.LatLng=W,e.latLng=q,e.LatLngBounds=$,e.latLngBounds=B,e.CRS=Ct,e.GeoJSON=fr,e.geoJSON=pt,e.geoJson=pt,e.Layer=nr,e.LayerGroup=rr,e.layerGroup=function(e){return new rr(e)},e.FeatureGroup=ar,e.featureGroup=function(e){return new ar(e)},e.ImageOverlay=gr,e.imageOverlay=function(e,t,n){return new gr(e,t,n)},e.VideoOverlay=hr,e.videoOverlay=function(e,t,n){return new hr(e,t,n)},e.DivOverlay=br,e.Popup=_r,e.popup=function(e,t){return new _r(e,t)},e.Tooltip=xr,e.tooltip=function(e,t){return new xr(e,t)},e.Icon=or,e.icon=function(e){return new or(e)},e.DivIcon=vr,e.divIcon=function(e){return new vr(e)},e.Marker=lr,e.marker=function(e,t){return new lr(e,t)},e.TileLayer=Tr,e.tileLayer=ut,e.GridLayer=Sr,e.gridLayer=function(e){return new Sr(e)},e.SVG=Lr,e.svg=ft,e.Renderer=Or,e.Canvas=Er,e.canvas=mt,e.Path=dr,e.CircleMarker=cr,e.circleMarker=function(e,t){return new cr(e,t)},e.Circle=pr,e.circle=function(e,t,n){return new pr(e,t,n)},e.Polyline=ur,e.polyline=function(e,t){return new ur(e,t)},e.Polygon=mr,e.polygon=function(e,t){return new mr(e,t)},e.Rectangle=Ar,e.rectangle=function(e,t){return new Ar(e,t)},e.Map=Rn,e.map=function(e,t){return new Rn(e,t)}})},{}],29:[function(e,t,n){(function(e){// distribute, sublicense, and/or sell copies of the Software, and to permit
function t(e,t){for(var n=0,r=e.length-1,a;0<=r;r--)a=e[r],"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--);if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return a.exec(e).slice(1)};n.resolve=function(){for(var n="",a=!1,o=arguments.length-1,i;-1<=o&&!a;o--){if(i=0<=o?arguments[o]:e.cwd(),"string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");else if(!i)continue;n=i+"/"+n,a="/"===i.charAt(0)}return n=t(r(n.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+n||"."},n.normalize=function(e){var a=n.isAbsolute(e),o="/"===i(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),o=r(t.split("/")),s=Math.min(a.length,o.length),l=s,d=0;d<s;d++)if(a[d]!==o[d]){l=d;break}for(var i=[],d=l;d<a.length;d++)i.push("..");return i=i.concat(o.slice(l)),i.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var i=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:30}],30:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function i(){f&&g&&(f=!1,g.length?m=g.concat(m):y=-1,m.length&&s())}function s(){if(!f){var e=a(i);f=!0;for(var t=m.length;t;){for(g=m,m=[];++y<t;)g&&g[y].run();y=-1,t=m.length}g=null,f=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c=t.exports={},p,u;(function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(t){p=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(t){u=r}})();var m=[],f=!1,y=-1,g;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||f||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=d,c.addListener=d,c.once=d,c.off=d,c.removeListener=d,c.removeAllListeners=d,c.emit=d,c.prependListener=d,c.prependOnceListener=d,c.listeners=function(){return[]},c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],31:[function(e,t){t.exports={F:e("./src/F"),T:e("./src/T"),__:e("./src/__"),add:e("./src/add"),addIndex:e("./src/addIndex"),adjust:e("./src/adjust"),all:e("./src/all"),allPass:e("./src/allPass"),always:e("./src/always"),and:e("./src/and"),any:e("./src/any"),anyPass:e("./src/anyPass"),ap:e("./src/ap"),aperture:e("./src/aperture"),append:e("./src/append"),apply:e("./src/apply"),applySpec:e("./src/applySpec"),ascend:e("./src/ascend"),assoc:e("./src/assoc"),assocPath:e("./src/assocPath"),binary:e("./src/binary"),bind:e("./src/bind"),both:e("./src/both"),call:e("./src/call"),chain:e("./src/chain"),clamp:e("./src/clamp"),clone:e("./src/clone"),comparator:e("./src/comparator"),complement:e("./src/complement"),compose:e("./src/compose"),composeK:e("./src/composeK"),composeP:e("./src/composeP"),concat:e("./src/concat"),cond:e("./src/cond"),construct:e("./src/construct"),constructN:e("./src/constructN"),contains:e("./src/contains"),converge:e("./src/converge"),countBy:e("./src/countBy"),curry:e("./src/curry"),curryN:e("./src/curryN"),dec:e("./src/dec"),descend:e("./src/descend"),defaultTo:e("./src/defaultTo"),difference:e("./src/difference"),differenceWith:e("./src/differenceWith"),dissoc:e("./src/dissoc"),dissocPath:e("./src/dissocPath"),divide:e("./src/divide"),drop:e("./src/drop"),dropLast:e("./src/dropLast"),dropLastWhile:e("./src/dropLastWhile"),dropRepeats:e("./src/dropRepeats"),dropRepeatsWith:e("./src/dropRepeatsWith"),dropWhile:e("./src/dropWhile"),either:e("./src/either"),empty:e("./src/empty"),eqBy:e("./src/eqBy"),eqProps:e("./src/eqProps"),equals:e("./src/equals"),evolve:e("./src/evolve"),filter:e("./src/filter"),find:e("./src/find"),findIndex:e("./src/findIndex"),findLast:e("./src/findLast"),findLastIndex:e("./src/findLastIndex"),flatten:e("./src/flatten"),flip:e("./src/flip"),forEach:e("./src/forEach"),forEachObjIndexed:e("./src/forEachObjIndexed"),fromPairs:e("./src/fromPairs"),groupBy:e("./src/groupBy"),groupWith:e("./src/groupWith"),gt:e("./src/gt"),gte:e("./src/gte"),has:e("./src/has"),hasIn:e("./src/hasIn"),head:e("./src/head"),identical:e("./src/identical"),identity:e("./src/identity"),ifElse:e("./src/ifElse"),inc:e("./src/inc"),indexBy:e("./src/indexBy"),indexOf:e("./src/indexOf"),init:e("./src/init"),insert:e("./src/insert"),insertAll:e("./src/insertAll"),intersection:e("./src/intersection"),intersectionWith:e("./src/intersectionWith"),intersperse:e("./src/intersperse"),into:e("./src/into"),invert:e("./src/invert"),invertObj:e("./src/invertObj"),invoker:e("./src/invoker"),is:e("./src/is"),isArrayLike:e("./src/isArrayLike"),isEmpty:e("./src/isEmpty"),isNil:e("./src/isNil"),join:e("./src/join"),juxt:e("./src/juxt"),keys:e("./src/keys"),keysIn:e("./src/keysIn"),last:e("./src/last"),lastIndexOf:e("./src/lastIndexOf"),length:e("./src/length"),lens:e("./src/lens"),lensIndex:e("./src/lensIndex"),lensPath:e("./src/lensPath"),lensProp:e("./src/lensProp"),lift:e("./src/lift"),liftN:e("./src/liftN"),lt:e("./src/lt"),lte:e("./src/lte"),map:e("./src/map"),mapAccum:e("./src/mapAccum"),mapAccumRight:e("./src/mapAccumRight"),mapObjIndexed:e("./src/mapObjIndexed"),match:e("./src/match"),mathMod:e("./src/mathMod"),max:e("./src/max"),maxBy:e("./src/maxBy"),mean:e("./src/mean"),median:e("./src/median"),memoize:e("./src/memoize"),merge:e("./src/merge"),mergeAll:e("./src/mergeAll"),mergeWith:e("./src/mergeWith"),mergeWithKey:e("./src/mergeWithKey"),min:e("./src/min"),minBy:e("./src/minBy"),modulo:e("./src/modulo"),multiply:e("./src/multiply"),nAry:e("./src/nAry"),negate:e("./src/negate"),none:e("./src/none"),not:e("./src/not"),nth:e("./src/nth"),nthArg:e("./src/nthArg"),objOf:e("./src/objOf"),of:e("./src/of"),omit:e("./src/omit"),once:e("./src/once"),or:e("./src/or"),over:e("./src/over"),pair:e("./src/pair"),partial:e("./src/partial"),partialRight:e("./src/partialRight"),partition:e("./src/partition"),path:e("./src/path"),pathEq:e("./src/pathEq"),pathOr:e("./src/pathOr"),pathSatisfies:e("./src/pathSatisfies"),pick:e("./src/pick"),pickAll:e("./src/pickAll"),pickBy:e("./src/pickBy"),pipe:e("./src/pipe"),pipeK:e("./src/pipeK"),pipeP:e("./src/pipeP"),pluck:e("./src/pluck"),prepend:e("./src/prepend"),product:e("./src/product"),project:e("./src/project"),prop:e("./src/prop"),propEq:e("./src/propEq"),propIs:e("./src/propIs"),propOr:e("./src/propOr"),propSatisfies:e("./src/propSatisfies"),props:e("./src/props"),range:e("./src/range"),reduce:e("./src/reduce"),reduceBy:e("./src/reduceBy"),reduceRight:e("./src/reduceRight"),reduceWhile:e("./src/reduceWhile"),reduced:e("./src/reduced"),reject:e("./src/reject"),remove:e("./src/remove"),repeat:e("./src/repeat"),replace:e("./src/replace"),reverse:e("./src/reverse"),scan:e("./src/scan"),sequence:e("./src/sequence"),set:e("./src/set"),slice:e("./src/slice"),sort:e("./src/sort"),sortBy:e("./src/sortBy"),sortWith:e("./src/sortWith"),split:e("./src/split"),splitAt:e("./src/splitAt"),splitEvery:e("./src/splitEvery"),splitWhen:e("./src/splitWhen"),subtract:e("./src/subtract"),sum:e("./src/sum"),symmetricDifference:e("./src/symmetricDifference"),symmetricDifferenceWith:e("./src/symmetricDifferenceWith"),tail:e("./src/tail"),take:e("./src/take"),takeLast:e("./src/takeLast"),takeLastWhile:e("./src/takeLastWhile"),takeWhile:e("./src/takeWhile"),tap:e("./src/tap"),test:e("./src/test"),times:e("./src/times"),toLower:e("./src/toLower"),toPairs:e("./src/toPairs"),toPairsIn:e("./src/toPairsIn"),toString:e("./src/toString"),toUpper:e("./src/toUpper"),transduce:e("./src/transduce"),transpose:e("./src/transpose"),traverse:e("./src/traverse"),trim:e("./src/trim"),tryCatch:e("./src/tryCatch"),type:e("./src/type"),unapply:e("./src/unapply"),unary:e("./src/unary"),uncurryN:e("./src/uncurryN"),unfold:e("./src/unfold"),union:e("./src/union"),unionWith:e("./src/unionWith"),uniq:e("./src/uniq"),uniqBy:e("./src/uniqBy"),uniqWith:e("./src/uniqWith"),unless:e("./src/unless"),unnest:e("./src/unnest"),until:e("./src/until"),update:e("./src/update"),useWith:e("./src/useWith"),values:e("./src/values"),valuesIn:e("./src/valuesIn"),view:e("./src/view"),when:e("./src/when"),where:e("./src/where"),whereEq:e("./src/whereEq"),without:e("./src/without"),xprod:e("./src/xprod"),zip:e("./src/zip"),zipObj:e("./src/zipObj"),zipWith:e("./src/zipWith")}},{"./src/F":32,"./src/T":33,"./src/__":34,"./src/add":35,"./src/addIndex":36,"./src/adjust":37,"./src/all":38,"./src/allPass":39,"./src/always":40,"./src/and":41,"./src/any":42,"./src/anyPass":43,"./src/ap":44,"./src/aperture":45,"./src/append":46,"./src/apply":47,"./src/applySpec":48,"./src/ascend":49,"./src/assoc":50,"./src/assocPath":51,"./src/binary":52,"./src/bind":53,"./src/both":54,"./src/call":55,"./src/chain":56,"./src/clamp":57,"./src/clone":58,"./src/comparator":59,"./src/complement":60,"./src/compose":61,"./src/composeK":62,"./src/composeP":63,"./src/concat":64,"./src/cond":65,"./src/construct":66,"./src/constructN":67,"./src/contains":68,"./src/converge":69,"./src/countBy":70,"./src/curry":71,"./src/curryN":72,"./src/dec":73,"./src/defaultTo":74,"./src/descend":75,"./src/difference":76,"./src/differenceWith":77,"./src/dissoc":78,"./src/dissocPath":79,"./src/divide":80,"./src/drop":81,"./src/dropLast":82,"./src/dropLastWhile":83,"./src/dropRepeats":84,"./src/dropRepeatsWith":85,"./src/dropWhile":86,"./src/either":87,"./src/empty":88,"./src/eqBy":89,"./src/eqProps":90,"./src/equals":91,"./src/evolve":92,"./src/filter":93,"./src/find":94,"./src/findIndex":95,"./src/findLast":96,"./src/findLastIndex":97,"./src/flatten":98,"./src/flip":99,"./src/forEach":100,"./src/forEachObjIndexed":101,"./src/fromPairs":102,"./src/groupBy":103,"./src/groupWith":104,"./src/gt":105,"./src/gte":106,"./src/has":107,"./src/hasIn":108,"./src/head":109,"./src/identical":110,"./src/identity":111,"./src/ifElse":112,"./src/inc":113,"./src/indexBy":114,"./src/indexOf":115,"./src/init":116,"./src/insert":117,"./src/insertAll":118,"./src/intersection":189,"./src/intersectionWith":190,"./src/intersperse":191,"./src/into":192,"./src/invert":193,"./src/invertObj":194,"./src/invoker":195,"./src/is":196,"./src/isArrayLike":197,"./src/isEmpty":198,"./src/isNil":199,"./src/join":200,"./src/juxt":201,"./src/keys":202,"./src/keysIn":203,"./src/last":204,"./src/lastIndexOf":205,"./src/length":206,"./src/lens":207,"./src/lensIndex":208,"./src/lensPath":209,"./src/lensProp":210,"./src/lift":211,"./src/liftN":212,"./src/lt":213,"./src/lte":214,"./src/map":215,"./src/mapAccum":216,"./src/mapAccumRight":217,"./src/mapObjIndexed":218,"./src/match":219,"./src/mathMod":220,"./src/max":221,"./src/maxBy":222,"./src/mean":223,"./src/median":224,"./src/memoize":225,"./src/merge":226,"./src/mergeAll":227,"./src/mergeWith":228,"./src/mergeWithKey":229,"./src/min":230,"./src/minBy":231,"./src/modulo":232,"./src/multiply":233,"./src/nAry":234,"./src/negate":235,"./src/none":236,"./src/not":237,"./src/nth":238,"./src/nthArg":239,"./src/objOf":240,"./src/of":241,"./src/omit":242,"./src/once":243,"./src/or":244,"./src/over":245,"./src/pair":246,"./src/partial":247,"./src/partialRight":248,"./src/partition":249,"./src/path":250,"./src/pathEq":251,"./src/pathOr":252,"./src/pathSatisfies":253,"./src/pick":254,"./src/pickAll":255,"./src/pickBy":256,"./src/pipe":257,"./src/pipeK":258,"./src/pipeP":259,"./src/pluck":260,"./src/prepend":261,"./src/product":262,"./src/project":263,"./src/prop":264,"./src/propEq":265,"./src/propIs":266,"./src/propOr":267,"./src/propSatisfies":268,"./src/props":269,"./src/range":270,"./src/reduce":271,"./src/reduceBy":272,"./src/reduceRight":273,"./src/reduceWhile":274,"./src/reduced":275,"./src/reject":276,"./src/remove":277,"./src/repeat":278,"./src/replace":279,"./src/reverse":280,"./src/scan":281,"./src/sequence":282,"./src/set":283,"./src/slice":284,"./src/sort":285,"./src/sortBy":286,"./src/sortWith":287,"./src/split":288,"./src/splitAt":289,"./src/splitEvery":290,"./src/splitWhen":291,"./src/subtract":292,"./src/sum":293,"./src/symmetricDifference":294,"./src/symmetricDifferenceWith":295,"./src/tail":296,"./src/take":297,"./src/takeLast":298,"./src/takeLastWhile":299,"./src/takeWhile":300,"./src/tap":301,"./src/test":302,"./src/times":303,"./src/toLower":304,"./src/toPairs":305,"./src/toPairsIn":306,"./src/toString":307,"./src/toUpper":308,"./src/transduce":309,"./src/transpose":310,"./src/traverse":311,"./src/trim":312,"./src/tryCatch":313,"./src/type":314,"./src/unapply":315,"./src/unary":316,"./src/uncurryN":317,"./src/unfold":318,"./src/union":319,"./src/unionWith":320,"./src/uniq":321,"./src/uniqBy":322,"./src/uniqWith":323,"./src/unless":324,"./src/unnest":325,"./src/until":326,"./src/update":327,"./src/useWith":328,"./src/values":329,"./src/valuesIn":330,"./src/view":331,"./src/when":332,"./src/where":333,"./src/whereEq":334,"./src/without":335,"./src/xprod":336,"./src/zip":337,"./src/zipObj":338,"./src/zipWith":339}],32:[function(e,t){var n=e("./always");t.exports=n(!1)},{"./always":40}],33:[function(e,t){var n=e("./always");t.exports=n(!0)},{"./always":40}],34:[function(e,t){t.exports={"@@functional/placeholder":!0}},{}],35:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e+ +t})},{"./internal/_curry2":133}],36:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry1"),a=e("./curryN");t.exports=r(function(e){return a(e.length,function(){var t=0,r=arguments[0],a=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=r.apply(this,n(arguments,[t,a]));return t+=1,e},e.apply(this,o)})})},{"./curryN":72,"./internal/_concat":128,"./internal/_curry1":132}],37:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry3");t.exports=r(function(e,t,r){if(t>=r.length||t<-r.length)return r;var a=0>t?r.length:0,o=a+t,i=n(r);return i[o]=e(r[o]),i})},{"./internal/_concat":128,"./internal/_curry3":134}],38:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xall");t.exports=n(r(["all"],a,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xall":169}],39:[function(e,t){var n=e("./internal/_curry1"),r=e("./curryN"),a=e("./max"),o=e("./pluck"),i=e("./reduce");t.exports=n(function(e){return r(i(a,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})})},{"./curryN":72,"./internal/_curry1":132,"./max":221,"./pluck":260,"./reduce":271}],40:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e}})},{"./internal/_curry1":132}],41:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e&&t})},{"./internal/_curry2":133}],42:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xany");t.exports=n(r(["any"],a,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xany":170}],43:[function(e,t){var n=e("./internal/_curry1"),r=e("./curryN"),a=e("./max"),o=e("./pluck"),i=e("./reduce");t.exports=n(function(e){return r(i(a,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})})},{"./curryN":72,"./internal/_curry1":132,"./max":221,"./pluck":260,"./reduce":271}],44:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry2"),a=e("./internal/_reduce"),o=e("./map");t.exports=r(function(e,t){return"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:a(function(e,r){return n(e,o(r,t))},[],e)})},{"./internal/_concat":128,"./internal/_curry2":133,"./internal/_reduce":164,"./map":215}],45:[function(e,t){var n=e("./internal/_aperture"),r=e("./internal/_curry2"),a=e("./internal/_dispatchable"),o=e("./internal/_xaperture");t.exports=r(a([],o,n))},{"./internal/_aperture":120,"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xaperture":171}],46:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry2");t.exports=r(function(e,t){return n(t,[e])})},{"./internal/_concat":128,"./internal/_curry2":133}],47:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e.apply(this,t)})},{"./internal/_curry2":133}],48:[function(e,t){var n=e("./internal/_curry1"),r=e("./apply"),a=e("./curryN"),o=e("./map"),i=e("./max"),s=e("./pluck"),l=e("./reduce"),d=e("./values");t.exports=n(function e(t){return t=o(function(t){return"function"==typeof t?t:e(t)},t),a(l(i,0,s("length",d(t))),function(){var e=arguments;return o(function(t){return r(t,e)},t)})})},{"./apply":47,"./curryN":72,"./internal/_curry1":132,"./map":215,"./max":221,"./pluck":260,"./reduce":271,"./values":329}],49:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var r=e(t),a=e(n);return r<a?-1:r>a?1:0})},{"./internal/_curry3":134}],50:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var r={};for(var a in n)r[a]=n[a];return r[e]=t,r})},{"./internal/_curry3":134}],51:[function(e,t){var n=e("./internal/_curry3"),r=e("./internal/_has"),a=e("./internal/_isArray"),o=e("./internal/_isInteger"),i=e("./assoc");t.exports=n(function e(t,n,s){if(0===t.length)return n;var l=t[0];if(1<t.length){var d=r(l,s)?s[l]:o(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,d)}if(o(l)&&a(s)){var c=[].concat(s);return c[l]=n,c}return i(l,n,s)})},{"./assoc":50,"./internal/_curry3":134,"./internal/_has":144,"./internal/_isArray":148,"./internal/_isInteger":150}],52:[function(e,t){var n=e("./internal/_curry1"),r=e("./nAry");t.exports=n(function(e){return r(2,e)})},{"./internal/_curry1":132,"./nAry":234}],53:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_curry2");t.exports=r(function(e,t){return n(e.length,function(){return e.apply(t,arguments)})})},{"./internal/_arity":121,"./internal/_curry2":133}],54:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isFunction"),a=e("./and"),o=e("./lift");t.exports=n(function(e,t){return r(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:o(a)(e,t)})},{"./and":41,"./internal/_curry2":133,"./internal/_isFunction":149,"./lift":211}],55:[function(e,t){var n=e("./curry");t.exports=n(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))})},{"./curry":71}],56:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_makeFlat"),o=e("./internal/_xchain"),i=e("./map");t.exports=n(r(["chain"],o,function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:a(!1)(i(e,t))}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_makeFlat":157,"./internal/_xchain":172,"./map":215}],57:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n})},{"./internal/_curry3":134}],58:[function(e,t){var n=e("./internal/_clone"),r=e("./internal/_curry1");t.exports=r(function(e){return null!=e&&"function"==typeof e.clone?e.clone():n(e,[],[],!0)})},{"./internal/_clone":125,"./internal/_curry1":132}],59:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}})},{"./internal/_curry1":132}],60:[function(e,t){var n=e("./lift"),r=e("./not");t.exports=n(r)},{"./lift":211,"./not":237}],61:[function(e,t){var n=e("./pipe"),r=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return n.apply(this,r(arguments))}},{"./pipe":257,"./reverse":280}],62:[function(e,t){var n=e("./chain"),r=e("./compose"),a=e("./map");t.exports=function(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return r(r.apply(this,a(n,e)),t)}},{"./chain":56,"./compose":61,"./map":215}],63:[function(e,t){var n=e("./pipeP"),r=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return n.apply(this,r(arguments))}},{"./pipeP":259,"./reverse":280}],64:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isArray"),o=e("./internal/_isFunction"),i=e("./toString");t.exports=n(function(e,t){if(null==e||!o(e.concat))throw new TypeError(i(e)+" does not have a method named \"concat\"");if(r(e)&&!r(t))throw new TypeError(i(t)+" is not an array");return e.concat(t)})},{"./internal/_curry2":133,"./internal/_isArray":148,"./internal/_isFunction":149,"./toString":307}],65:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_curry1"),a=e("./map"),o=e("./max"),i=e("./reduce");t.exports=r(function(e){var t=i(o,0,a(function(e){return e[0].length},e));return n(t,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})})},{"./internal/_arity":121,"./internal/_curry1":132,"./map":215,"./max":221,"./reduce":271}],66:[function(e,t){var n=e("./internal/_curry1"),r=e("./constructN");t.exports=n(function(e){return r(e.length,e)})},{"./constructN":67,"./internal/_curry1":132}],67:[function(e,t){var n=e("./internal/_curry2"),r=e("./curry"),a=e("./nAry");t.exports=n(function(e,t){if(10<e)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:r(a(e,function(e,n,r,a,o,i,s,l,d,c){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,r);case 4:return new t(e,n,r,a);case 5:return new t(e,n,r,a,o);case 6:return new t(e,n,r,a,o,i);case 7:return new t(e,n,r,a,o,i,s);case 8:return new t(e,n,r,a,o,i,s,l);case 9:return new t(e,n,r,a,o,i,s,l,d);case 10:return new t(e,n,r,a,o,i,s,l,d,c);}}))})},{"./curry":71,"./internal/_curry2":133,"./nAry":234}],68:[function(e,t){var n=e("./internal/_contains"),r=e("./internal/_curry2");t.exports=r(n)},{"./internal/_contains":129,"./internal/_curry2":133}],69:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_map"),a=e("./curryN"),o=e("./max"),i=e("./pluck"),s=e("./reduce");t.exports=n(function(e,t){return a(s(o,0,i("length",t)),function(){var n=arguments,a=this;return e.apply(a,r(function(e){return e.apply(a,n)},t))})})},{"./curryN":72,"./internal/_curry2":133,"./internal/_map":158,"./max":221,"./pluck":260,"./reduce":271}],70:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e){return e+1},0)},{"./reduceBy":272}],71:[function(e,t){var n=e("./internal/_curry1"),r=e("./curryN");t.exports=n(function(e){return r(e.length,e)})},{"./curryN":72,"./internal/_curry1":132}],72:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_curry1"),a=e("./internal/_curry2"),o=e("./internal/_curryN");t.exports=a(function(e,t){return 1===e?r(t):n(e,o(e,[],t))})},{"./internal/_arity":121,"./internal/_curry1":132,"./internal/_curry2":133,"./internal/_curryN":135}],73:[function(e,t){var n=e("./add");t.exports=n(-1)},{"./add":35}],74:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null==t||t!==t?e:t})},{"./internal/_curry2":133}],75:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var r=e(t),a=e(n);return r>a?-1:r<a?1:0})},{"./internal/_curry3":134}],76:[function(e,t){var n=e("./internal/_contains"),r=e("./internal/_curry2");t.exports=r(function(e,t){for(var r=[],a=0,o=e.length;a<o;)n(e[a],t)||n(e[a],r)||(r[r.length]=e[a]),a+=1;return r})},{"./internal/_contains":129,"./internal/_curry2":133}],77:[function(e,t){var n=e("./internal/_containsWith"),r=e("./internal/_curry3");t.exports=r(function(e,t,r){for(var a=[],o=0,i=t.length;o<i;)n(e,t[o],r)||n(e,t[o],a)||a.push(t[o]),o+=1;return a})},{"./internal/_containsWith":130,"./internal/_curry3":134}],78:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var r in t)n[r]=t[r];return delete n[e],n})},{"./internal/_curry2":133}],79:[function(e,t){var n=e("./internal/_curry2"),r=e("./assoc"),a=e("./dissoc");t.exports=n(function e(t,n){switch(t.length){case 0:return n;case 1:return a(t[0],n);default:var o=t[0],i=Array.prototype.slice.call(t,1);return null==n[o]?n:r(o,e(i,n[o]),n);}})},{"./assoc":50,"./dissoc":78,"./internal/_curry2":133}],80:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e/t})},{"./internal/_curry2":133}],81:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xdrop"),o=e("./slice");t.exports=n(r(["drop"],a,function(e,t){return o(Math.max(0,e),Infinity,t)}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xdrop":173,"./slice":284}],82:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_dropLast"),o=e("./internal/_xdropLast");t.exports=n(r([],o,a))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_dropLast":137,"./internal/_xdropLast":174}],83:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_dropLastWhile"),o=e("./internal/_xdropLastWhile");t.exports=n(r([],o,a))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_dropLastWhile":138,"./internal/_xdropLastWhile":175}],84:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_dispatchable"),a=e("./internal/_xdropRepeatsWith"),o=e("./dropRepeatsWith"),i=e("./equals");t.exports=n(r([],a(i),o(i)))},{"./dropRepeatsWith":85,"./equals":91,"./internal/_curry1":132,"./internal/_dispatchable":136,"./internal/_xdropRepeatsWith":176}],85:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xdropRepeatsWith"),o=e("./last");/**
 * Returns a new list without any consecutively repeating elements. Equality is
 * determined by applying the supplied predicate to each pair of consecutive elements. The
 * first element in a series of equal elements will be preserved.
 *
 * Acts as a transducer if a transformer is given in list position.
 *
 * @func
 * @memberOf R
 * @since v0.14.0
 * @category List
 * @sig (a, a -> Boolean) -> [a] -> [a]
 * @param {Function} pred A predicate used to test whether two items are equal.
 * @param {Array} list The array to consider.
 * @return {Array} `list` without repeating elements.
 * @see R.transduce
 * @example
 *
 *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
 *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
 */t.exports=n(r([],a,function(e,t){var n=[],r=1,a=t.length;if(0!==a)for(n[0]=t[0];r<a;)e(o(n),t[r])||(n[n.length]=t[r]),r+=1;return n}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xdropRepeatsWith":176,"./last":204}],86:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xdropWhile");t.exports=n(r(["dropWhile"],a,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,n)}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xdropWhile":177}],87:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isFunction"),a=e("./lift"),o=e("./or");t.exports=n(function(e,t){return r(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:a(o)(e,t)})},{"./internal/_curry2":133,"./internal/_isFunction":149,"./lift":211,"./or":244}],88:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_isArguments"),a=e("./internal/_isArray"),o=e("./internal/_isObject"),i=e("./internal/_isString");t.exports=n(function(e){return null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():a(e)?[]:i(e)?"":o(e)?{}:r(e)?function(){return arguments}():void 0})},{"./internal/_curry1":132,"./internal/_isArguments":147,"./internal/_isArray":148,"./internal/_isObject":152,"./internal/_isString":155}],89:[function(e,t){var n=e("./internal/_curry3"),r=e("./equals");t.exports=n(function(e,t,n){return r(e(t),e(n))})},{"./equals":91,"./internal/_curry3":134}],90:[function(e,t){var n=e("./internal/_curry3"),r=e("./equals");t.exports=n(function(e,t,n){return r(t[e],n[e])})},{"./equals":91,"./internal/_curry3":134}],91:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_equals");t.exports=n(function(e,t){return r(e,t,[],[])})},{"./internal/_curry2":133,"./internal/_equals":139}],92:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function e(t,n){var r={},a,o,i;for(o in n)a=t[o],i=typeof a,r[o]="function"===i?a(n[o]):a&&"object"===i?e(a,n[o]):n[o];return r})},{"./internal/_curry2":133}],93:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_filter"),o=e("./internal/_isObject"),i=e("./internal/_reduce"),s=e("./internal/_xfilter"),l=e("./keys");t.exports=n(r(["filter"],s,function(e,t){return o(t)?i(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},l(t)):a(e,t)}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_filter":140,"./internal/_isObject":152,"./internal/_reduce":164,"./internal/_xfilter":179,"./keys":202}],94:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xfind");t.exports=n(r(["find"],a,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xfind":180}],95:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xfindIndex");t.exports=n(r([],a,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return n;n+=1}return-1}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xfindIndex":181}],96:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xfindLast");t.exports=n(r([],a,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return t[n];n-=1}}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xfindLast":182}],97:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xfindLastIndex");t.exports=n(r([],a,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return n;n-=1}return-1}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xfindLastIndex":183}],98:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_makeFlat");t.exports=n(r(!0))},{"./internal/_curry1":132,"./internal/_makeFlat":157}],99:[function(e,t){var n=e("./internal/_curry1"),r=e("./curry");t.exports=n(function(e){return r(function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)})})},{"./curry":71,"./internal/_curry1":132}],100:[function(e,t){var n=e("./internal/_checkForMethod"),r=e("./internal/_curry2");t.exports=r(n("forEach",function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t}))},{"./internal/_checkForMethod":124,"./internal/_curry2":133}],101:[function(e,t){var n=e("./internal/_curry2"),r=e("./keys");t.exports=n(function(e,t){for(var n=r(t),a=0;a<n.length;){var o=n[a];e(t[o],o,t),a+=1}return t})},{"./internal/_curry2":133,"./keys":202}],102:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t})},{"./internal/_curry1":132}],103:[function(e,t){var n=e("./internal/_checkForMethod"),r=e("./internal/_curry2"),a=e("./reduceBy");t.exports=r(n("groupBy",a(function(e,t){return null==e&&(e=[]),e.push(t),e},null)))},{"./internal/_checkForMethod":124,"./internal/_curry2":133,"./reduceBy":272}],104:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],r=0,a=t.length;r<a;){for(var o=r+1;o<a&&e(t[r],t[o]);)o+=1;n.push(t.slice(r,o)),r=o}return n})},{"./internal/_curry2":133}],105:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>t})},{"./internal/_curry2":133}],106:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>=t})},{"./internal/_curry2":133}],107:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_has");t.exports=n(r)},{"./internal/_curry2":133,"./internal/_has":144}],108:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e in t})},{"./internal/_curry2":133}],109:[function(e,t){var n=e("./nth");t.exports=n(0)},{"./nth":238}],110:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t})},{"./internal/_curry2":133}],111:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_identity");t.exports=n(r)},{"./internal/_curry1":132,"./internal/_identity":145}],112:[function(e,t){var n=e("./internal/_curry3"),r=e("./curryN");t.exports=n(function(e,t,n){return r(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})})},{"./curryN":72,"./internal/_curry3":134}],113:[function(e,t){var n=e("./add");t.exports=n(1)},{"./add":35}],114:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e,t){return t},null)},{"./reduceBy":272}],115:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_indexOf"),a=e("./internal/_isArray");t.exports=n(function(e,t){return"function"!=typeof t.indexOf||a(t)?r(t,e,0):t.indexOf(e)})},{"./internal/_curry2":133,"./internal/_indexOf":146,"./internal/_isArray":148}],116:[function(e,t){var n=e("./slice");t.exports=n(0,-1)},{"./slice":284}],117:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){e=e<n.length&&0<=e?e:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(e,0,t),r})},{"./internal/_curry3":134}],118:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e=e<n.length&&0<=e?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))})},{"./internal/_curry3":134}],119:[function(e,t){var n=e("./_contains");t.exports=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function t(e,t,r){var a=typeof e,o,i;switch(a){case"string":case"number":return 0===e&&1/e==-Infinity?!!r._items["-0"]||(t&&(r._items["-0"]=!0),!1):null===r._nativeSet?a in r._items?!!(e in r._items[a])||(t&&(r._items[a][e]=!0),!1):(t&&(r._items[a]={},r._items[a][e]=!0),!1):t?(o=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===o):r._nativeSet.has(e);case"boolean":if(a in r._items){var s=e?1:0;return!!r._items[a][s]||(t&&(r._items[a][s]=!0),!1)}return t&&(r._items[a]=e?[!1,!0]:[!0,!1]),!1;case"function":return null===r._nativeSet?a in r._items?!!n(e,r._items[a])||(t&&r._items[a].push(e),!1):(t&&(r._items[a]=[e]),!1):t?(o=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===o):r._nativeSet.has(e);case"undefined":return!!r._items[a]||(t&&(r._items[a]=!0),!1);case"object":if(null===e)return!!r._items["null"]||(t&&(r._items["null"]=!0),!1);default:return a=Object.prototype.toString.call(e),a in r._items?!!n(e,r._items[a])||(t&&r._items[a].push(e),!1):(t&&(r._items[a]=[e]),!1);}}return e.prototype.add=function(e){return!t(e,!0,this)},e.prototype.has=function(e){return t(e,!1,this)},e}()},{"./_contains":129}],120:[function(e,t){t.exports=function(e,t){for(var n=0,r=t.length-(e-1),a=Array(0<=r?r:0);n<r;)a[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return a}},{}],121:[function(e,t){t.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(){return t.apply(this,arguments)};case 2:return function(){return t.apply(this,arguments)};case 3:return function(){return t.apply(this,arguments)};case 4:return function(){return t.apply(this,arguments)};case 5:return function(){return t.apply(this,arguments)};case 6:return function(){return t.apply(this,arguments)};case 7:return function(){return t.apply(this,arguments)};case 8:return function(){return t.apply(this,arguments)};case 9:return function(){return t.apply(this,arguments)};case 10:return function(){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten");}}},{}],122:[function(e,t){t.exports=function(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}},{}],123:[function(e,t){var n=e("./_objectAssign");t.exports="function"==typeof Object.assign?Object.assign:n},{"./_objectAssign":159}],124:[function(e,t){var n=e("./_isArray");t.exports=function(e,t){return function(){var r=arguments.length;if(0===r)return t();var a=arguments[r-1];return n(a)||"function"!=typeof a[e]?t.apply(this,arguments):a[e].apply(a,Array.prototype.slice.call(arguments,0,r-1))}}},{"./_isArray":148}],125:[function(e,t){var n=e("./_cloneRegExp"),r=e("../type");t.exports=function e(t,a,o,i){var s=function(n){for(var r=a.length,s=0;s<r;){if(t===a[s])return o[s];s+=1}for(var l in a[s+1]=t,o[s+1]=n,t)n[l]=i?e(t[l],a,o,!0):t[l];return n};switch(r(t)){case"Object":return s({});case"Array":return s([]);case"Date":return new Date(t.valueOf());case"RegExp":return n(t);default:return t;}}},{"../type":314,"./_cloneRegExp":126}],126:[function(e,t){t.exports=function(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}},{}],127:[function(e,t){t.exports=function(e){return function(){return!e.apply(this,arguments)}}},{}],128:[function(e,t){t.exports=function(e,t){e=e||[],t=t||[];var n=e.length,r=t.length,a=[],o;for(o=0;o<n;)a[a.length]=e[o],o+=1;for(o=0;o<r;)a[a.length]=t[o],o+=1;return a}},{}],129:[function(e,t){var n=e("./_indexOf");t.exports=function(e,t){return 0<=n(t,e,0)}},{"./_indexOf":146}],130:[function(e,t){t.exports=function(e,t,n){for(var r=0,a=n.length;r<a;){if(e(t,n[r]))return!0;r+=1}return!1}},{}],131:[function(e,t){var n=e("./_arity"),r=e("./_curry2");t.exports=function(e){return r(function(t,r){return n(Math.max(0,t.length-r.length),function(){return t.apply(this,e(r,arguments))})})}},{"./_arity":121,"./_curry2":133}],132:[function(e,t){var n=e("./_isPlaceholder");t.exports=function(e){return function t(r){return 0===arguments.length||n(r)?t:e.apply(this,arguments)}}},{"./_isPlaceholder":153}],133:[function(e,t){var n=e("./_curry1"),r=e("./_isPlaceholder");t.exports=function(e){return function t(o,a){switch(arguments.length){case 0:return t;case 1:return r(o)?t:n(function(t){return e(o,t)});default:return r(o)&&r(a)?t:r(o)?n(function(t){return e(t,a)}):r(a)?n(function(t){return e(o,t)}):e(o,a);}}}},{"./_curry1":132,"./_isPlaceholder":153}],134:[function(e,t){var n=e("./_curry1"),r=e("./_curry2"),o=e("./_isPlaceholder");t.exports=function(e){return function t(i,a,s){switch(arguments.length){case 0:return t;case 1:return o(i)?t:r(function(t,n){return e(i,t,n)});case 2:return o(i)&&o(a)?t:o(i)?r(function(t,n){return e(t,a,n)}):o(a)?r(function(t,n){return e(i,t,n)}):n(function(t){return e(i,a,t)});default:return o(i)&&o(a)&&o(s)?t:o(i)&&o(a)?r(function(t,n){return e(t,n,s)}):o(i)&&o(s)?r(function(t,n){return e(t,a,n)}):o(a)&&o(s)?r(function(t,n){return e(i,t,n)}):o(i)?n(function(t){return e(t,a,s)}):o(a)?n(function(t){return e(i,t,s)}):o(s)?n(function(t){return e(i,a,t)}):e(i,a,s);}}}},{"./_curry1":132,"./_curry2":133,"./_isPlaceholder":153}],135:[function(e,t){var n=e("./_arity"),r=e("./_isPlaceholder");t.exports=function e(t,a,o){return function(){for(var i=[],s=0,l=t,d=0;d<a.length||s<arguments.length;){var c;d<a.length&&(!r(a[d])||s>=arguments.length)?c=a[d]:(c=arguments[s],s+=1),i[d]=c,r(c)||(l-=1),d+=1}return 0>=l?o.apply(this,i):n(l,e(t,i,o))}}},{"./_arity":121,"./_isPlaceholder":153}],136:[function(e,t){var n=e("./_isArray"),r=e("./_isTransformer");t.exports=function(e,t,a){return function(){if(0===arguments.length)return a();var o=Array.prototype.slice.call(arguments,0),i=o.pop();if(!n(i)){for(var s=0;s<e.length;){if("function"==typeof i[e[s]])return i[e[s]].apply(i,o);s+=1}if(r(i)){var l=t.apply(null,o);return l(i)}}return a.apply(this,arguments)}}},{"./_isArray":148,"./_isTransformer":156}],137:[function(e,t){var r=e("../take");t.exports=function(e,t){return r(e<t.length?t.length-e:0,t)}},{"../take":297}],138:[function(e,t){t.exports=function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,0,n+1)}},{}],139:[function(e,t){var n=e("./_arrayFromIterator"),r=e("./_functionName"),o=e("./_has"),i=e("../identical"),s=e("../keys"),l=e("../type");t.exports=function e(t,d,c,p){if(i(t,d))return!0;if(l(t)!==l(d))return!1;if(null==t||null==d)return!1;if("function"==typeof t.equals||"function"==typeof d.equals)return"function"==typeof t.equals&&t.equals(d)&&"function"==typeof d.equals&&d.equals(t);switch(l(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===r(t.constructor))return t===d;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof d&&i(t.valueOf(),d.valueOf())))return!1;break;case"Date":if(!i(t.valueOf(),d.valueOf()))return!1;break;case"Error":return t.name===d.name&&t.message===d.message;case"RegExp":if(t.source!==d.source||t.global!==d.global||t.ignoreCase!==d.ignoreCase||t.multiline!==d.multiline||t.sticky!==d.sticky||t.unicode!==d.unicode)return!1;break;case"Map":case"Set":if(!e(n(t.entries()),n(d.entries()),c,p))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1;}var u=s(t);if(u.length!==s(d).length)return!1;for(var m=c.length-1;0<=m;){if(c[m]===t)return p[m]===d;m-=1}for(c.push(t),p.push(d),m=u.length-1;0<=m;){var f=u[m];if(!(o(f,d)&&e(d[f],t[f],c,p)))return!1;m-=1}return c.pop(),p.pop(),!0}},{"../identical":110,"../keys":202,"../type":314,"./_arrayFromIterator":122,"./_functionName":143,"./_has":144}],140:[function(e,t){t.exports=function(e,t){for(var n=0,r=t.length,a=[];n<r;)e(t[n])&&(a[a.length]=t[n]),n+=1;return a}},{}],141:[function(e,t){var n=e("./_forceReduced"),r=e("./_reduce"),a=e("./_xfBase"),o=e("../isArrayLike");t.exports=function(){var e=function(e){return{"@@transducer/init":a.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,r){var a=e["@@transducer/step"](t,r);return a["@@transducer/reduced"]?n(a):a}}};return function(t){var n=e(t);return{"@@transducer/init":a.init,"@@transducer/result":function(e){return n["@@transducer/result"](e)},"@@transducer/step":function(e,t){return o(t)?r(n,e,t):r(n,e,[t])}}}}()},{"../isArrayLike":197,"./_forceReduced":142,"./_reduce":164,"./_xfBase":178}],142:[function(e,t){t.exports=function(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],143:[function(e,t){t.exports=function(e){var t=(e+"").match(/^function (\w*)/);return null==t?"":t[1]}},{}],144:[function(e,t){t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},{}],145:[function(e,t){t.exports=function(e){return e}},{}],146:[function(e,t){var n=e("../equals");t.exports=function(e,t,r){var o,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(o=1/t;r<e.length;){if(i=e[r],0===i&&1/i===o)return r;r+=1}return-1}if(t!==t){for(;r<e.length;){if(i=e[r],"number"==typeof i&&i!==i)return r;r+=1}return-1}return e.indexOf(t,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,r);case"object":if(null===t)return e.indexOf(t,r);}for(;r<e.length;){if(n(e[r],t))return r;r+=1}return-1}},{"../equals":91}],147:[function(e,t){var n=e("./_has");t.exports=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return n("callee",e)}}()},{"./_has":144}],148:[function(e,t){t.exports=Array.isArray||function(e){return null!=e&&0<=e.length&&"[object Array]"===Object.prototype.toString.call(e)}},{}],149:[function(e,t){t.exports=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],150:[function(e,t){t.exports=Number.isInteger||function(e){return e<<0===e}},{}],151:[function(e,t){t.exports=function(e){return"[object Number]"===Object.prototype.toString.call(e)}},{}],152:[function(e,t){t.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{}],153:[function(e,t){t.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},{}],154:[function(e,t){t.exports=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{}],155:[function(e,t){t.exports=function(e){return"[object String]"===Object.prototype.toString.call(e)}},{}],156:[function(e,t){t.exports=function(e){return"function"==typeof e["@@transducer/step"]}},{}],157:[function(e,t){var n=e("../isArrayLike");t.exports=function(e){return function t(r){for(var a=[],o=0,i=r.length,s,l,d;o<i;){if(n(r[o]))for(s=e?t(r[o]):r[o],d=0,l=s.length;d<l;)a[a.length]=s[d],d+=1;else a[a.length]=r[o];o+=1}return a}}},{"../isArrayLike":197}],158:[function(e,t){t.exports=function(e,t){for(var n=0,r=t.length,a=Array(r);n<r;)a[n]=e(t[n]),n+=1;return a}},{}],159:[function(e,t){var n=e("./_has");t.exports=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,a=arguments.length;r<a;){var o=arguments[r];if(null!=o)for(var i in o)n(i,o)&&(t[i]=o[i]);r+=1}return t}},{"./_has":144}],160:[function(e,t){t.exports=function(e){return[e]}},{}],161:[function(e,t){t.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},{}],162:[function(e,t){t.exports=function(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}}},{}],163:[function(e,t){t.exports=function(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return"\""+t.replace(/"/g,"\\\"")+"\""}},{}],164:[function(e,t){var n=e("./_xwrap"),r=e("../bind"),a=e("../isArrayLike");t.exports=function(){function e(e,t,n){for(var r=0,a=n.length;r<a;){if(t=e["@@transducer/step"](t,n[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}function t(e,t,n){for(var r=n.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function o(e,t,n){return e["@@transducer/result"](n.reduce(r(e["@@transducer/step"],e),t))}var i="undefined"==typeof Symbol?"@@iterator":Symbol.iterator;return function(r,s,l){if("function"==typeof r&&(r=n(r)),a(l))return e(r,s,l);if("function"==typeof l.reduce)return o(r,s,l);if(null!=l[i])return t(r,s,l[i]());if("function"==typeof l.next)return t(r,s,l);throw new TypeError("reduce: list must be array or iterable")}}()},{"../bind":53,"../isArrayLike":197,"./_xwrap":188}],165:[function(e,t){t.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],166:[function(e,t){var n=e("./_assign"),r=e("./_identity"),a=e("./_isTransformer"),o=e("../isArrayLike"),i=e("../objOf");t.exports=function(){var e={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":r},t={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":r},s={"@@transducer/init":Object,"@@transducer/step":function(e,t){return n(e,o(t)?i(t[0],t[1]):t)},"@@transducer/result":r};return function(n){if(a(n))return n;if(o(n))return e;if("string"==typeof n)return t;if("object"==typeof n)return s;throw new Error("Cannot create transformer for "+n)}}()},{"../isArrayLike":197,"../objOf":240,"./_assign":123,"./_identity":145,"./_isTransformer":156}],167:[function(e,t){t.exports=function(){var e=function(e){return(10>e?"0":"")+e};return"function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}()},{}],168:[function(e,t){var n=e("./_contains"),r=e("./_map"),a=e("./_quote"),o=e("./_toISOString"),i=e("../keys"),s=e("../reject");t.exports=function e(t,l){var d=function(r){var a=l.concat([t]);return n(r,a)?"<Circular>":e(r,a)},c=function(e,t){return r(function(t){return a(t)+": "+d(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+r(d,t).join(", ")+"))";case"[object Array]":return"["+r(d,t).concat(c(t,s(function(e){return /^\d+$/.test(e)},i(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+d(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?d(NaN):a(o(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+d(t.valueOf())+")":1/t==-Infinity?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+d(t.valueOf())+")":a(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var p=t.toString();if("[object Object]"!==p)return p}return"{"+c(t,i(t)).join(", ")+"}";}}},{"../keys":202,"../reject":276,"./_contains":129,"./_map":158,"./_quote":163,"./_toISOString":167}],169:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=r(this.xf["@@transducer/step"](e,!1))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],170:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=r(this.xf["@@transducer/step"](e,!0))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],171:[function(e,t){var n=e("./_concat"),r=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return n(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},r(function(t,n){return new e(t,n)})}()},{"./_concat":128,"./_curry2":133,"./_xfBase":178}],172:[function(e,t){var n=e("./_curry2"),r=e("./_flatCat"),a=e("../map");t.exports=n(function(e,t){return a(e,r(t))})},{"../map":215,"./_curry2":133,"./_flatCat":141}],173:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=r.result,e.prototype["@@transducer/step"]=function(e,t){return 0<this.n?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],174:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],175:[function(e,t){var n=e("./_curry2"),r=e("./_reduce"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=r(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduce":164,"./_xfBase":178}],176:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=r.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],177:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=r.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],178:[function(e,t){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},{}],179:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=r.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],180:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=r(this.xf["@@transducer/step"](e,t))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],181:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=r(this.xf["@@transducer/step"](e,this.idx))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],182:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],183:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],184:[function(e,t){var n=e("./_curry2"),r=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=r.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_xfBase":178}],185:[function(e,t){var n=e("./_curryN"),r=e("./_has"),a=e("./_xfBase");t.exports=function(){function e(e,t,n,r){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=r,this.inputs={}}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){for(var t in this.inputs)if(r(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},n(4,[],function(t,n,r,a){return new e(t,n,r,a)})}()},{"./_curryN":135,"./_has":144,"./_xfBase":178}],186:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.i>=this.n?r(n):n},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],187:[function(e,t){var n=e("./_curry2"),r=e("./_reduced"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):r(e)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":133,"./_reduced":165,"./_xfBase":178}],188:[function(e,t){t.exports=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}()},{}],189:[function(e,t){var n=e("./internal/_contains"),r=e("./internal/_curry2"),a=e("./internal/_filter"),o=e("./flip"),i=e("./uniq");t.exports=r(function(e,t){var r,s;return e.length>t.length?(r=e,s=t):(r=t,s=e),i(a(o(n)(r),s))})},{"./flip":99,"./internal/_contains":129,"./internal/_curry2":133,"./internal/_filter":140,"./uniq":321}],190:[function(e,t){var n=e("./internal/_containsWith"),r=e("./internal/_curry3"),a=e("./uniqWith");t.exports=r(function(e,t,r){var o,i;t.length>r.length?(o=t,i=r):(o=r,i=t);for(var s=[],l=0;l<i.length;)n(e,i[l],o)&&(s[s.length]=i[l]),l+=1;return a(e,s)})},{"./internal/_containsWith":130,"./internal/_curry3":134,"./uniqWith":323}],191:[function(e,t){var n=e("./internal/_checkForMethod"),r=e("./internal/_curry2");t.exports=r(n("intersperse",function(e,t){for(var n=[],r=0,a=t.length;r<a;)r==a-1?n.push(t[r]):n.push(t[r],e),r+=1;return n}))},{"./internal/_checkForMethod":124,"./internal/_curry2":133}],192:[function(e,t){var n=e("./internal/_clone"),r=e("./internal/_curry3"),a=e("./internal/_isTransformer"),o=e("./internal/_reduce"),i=e("./internal/_stepCat");t.exports=r(function(e,t,r){return a(e)?o(t(e),e["@@transducer/init"](),r):o(t(i(e)),n(e,[],[],!1),r)})},{"./internal/_clone":125,"./internal/_curry3":134,"./internal/_isTransformer":156,"./internal/_reduce":164,"./internal/_stepCat":166}],193:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_has"),a=e("./keys");t.exports=n(function(e){for(var t=a(e),n=t.length,o=0,i={};o<n;){var s=t[o],l=e[s],d=r(l,i)?i[l]:i[l]=[];d[d.length]=s,o+=1}return i})},{"./internal/_curry1":132,"./internal/_has":144,"./keys":202}],194:[function(e,t){var n=e("./internal/_curry1"),r=e("./keys");t.exports=n(function(e){for(var t=r(e),n=t.length,a=0,o={};a<n;){var i=t[a];o[e[i]]=i,a+=1}return o})},{"./internal/_curry1":132,"./keys":202}],195:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isFunction"),a=e("./curryN"),o=e("./toString");t.exports=n(function(e,t){return a(e+1,function(){var n=arguments[e];if(null!=n&&r(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(o(n)+" does not have a method named \""+t+"\"")})})},{"./curryN":72,"./internal/_curry2":133,"./internal/_isFunction":149,"./toString":307}],196:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null!=t&&t.constructor===e||t instanceof e})},{"./internal/_curry2":133}],197:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_isArray"),a=e("./internal/_isString");t.exports=n(function(e){return!!r(e)||!!e&&!("object"!=typeof e)&&!a(e)&&(1===e.nodeType?!!e.length:!(0!==e.length)||!!(0<e.length)&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))})},{"./internal/_curry1":132,"./internal/_isArray":148,"./internal/_isString":155}],198:[function(e,t){var n=e("./internal/_curry1"),r=e("./empty"),a=e("./equals");t.exports=n(function(e){return null!=e&&a(e,r(e))})},{"./empty":88,"./equals":91,"./internal/_curry1":132}],199:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null==e})},{"./internal/_curry1":132}],200:[function(e,t){var n=e("./invoker");t.exports=n(1,"join")},{"./invoker":195}],201:[function(e,t){var n=e("./internal/_curry1"),r=e("./converge");t.exports=n(function(e){return r(function(){return Array.prototype.slice.call(arguments,0)},e)})},{"./converge":69,"./internal/_curry1":132}],202:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_has"),a=e("./internal/_isArguments");t.exports=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],o=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),i=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||o?n(function(n){if(Object(n)!==n)return[];var s=[],l=o&&a(n),d,c;for(d in n)r(d,n)&&(!l||"length"!==d)&&(s[s.length]=d);if(e)for(c=t.length-1;0<=c;)d=t[c],r(d,n)&&!i(s,d)&&(s[s.length]=d),c-=1;return s}):n(function(e){return Object(e)===e?Object.keys(e):[]})}()},{"./internal/_curry1":132,"./internal/_has":144,"./internal/_isArguments":147}],203:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=n;return t})},{"./internal/_curry1":132}],204:[function(e,t){var n=e("./nth");t.exports=n(-1)},{"./nth":238}],205:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isArray"),a=e("./equals");t.exports=n(function(e,t){if("function"==typeof t.lastIndexOf&&!r(t))return t.lastIndexOf(e);for(var n=t.length-1;0<=n;){if(a(t[n],e))return n;n-=1}return-1})},{"./equals":91,"./internal/_curry2":133,"./internal/_isArray":148}],206:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_isNumber");t.exports=n(function(e){return null!=e&&r(e.length)?e.length:NaN})},{"./internal/_curry1":132,"./internal/_isNumber":151}],207:[function(e,t){var n=e("./internal/_curry2"),r=e("./map");t.exports=n(function(e,t){return function(n){return function(a){return r(function(e){return t(e,a)},n(e(a)))}}})},{"./internal/_curry2":133,"./map":215}],208:[function(e,t){var n=e("./internal/_curry1"),r=e("./lens"),a=e("./nth"),o=e("./update");t.exports=n(function(e){return r(a(e),o(e))})},{"./internal/_curry1":132,"./lens":207,"./nth":238,"./update":327}],209:[function(e,t){var n=e("./internal/_curry1"),r=e("./assocPath"),a=e("./lens"),o=e("./path");t.exports=n(function(e){return a(o(e),r(e))})},{"./assocPath":51,"./internal/_curry1":132,"./lens":207,"./path":250}],210:[function(e,t){var n=e("./internal/_curry1"),r=e("./assoc"),a=e("./lens"),o=e("./prop");t.exports=n(function(e){return a(o(e),r(e))})},{"./assoc":50,"./internal/_curry1":132,"./lens":207,"./prop":264}],211:[function(e,t){var n=e("./internal/_curry1"),r=e("./liftN");t.exports=n(function(e){return r(e.length,e)})},{"./internal/_curry1":132,"./liftN":212}],212:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_reduce"),a=e("./ap"),o=e("./curryN"),i=e("./map");t.exports=n(function(e,t){var n=o(e,t);return o(e,function(){return r(a,i(n,arguments[0]),Array.prototype.slice.call(arguments,1))})})},{"./ap":44,"./curryN":72,"./internal/_curry2":133,"./internal/_reduce":164,"./map":215}],213:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<t})},{"./internal/_curry2":133}],214:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<=t})},{"./internal/_curry2":133}],215:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_map"),o=e("./internal/_reduce"),i=e("./internal/_xmap"),s=e("./curryN"),l=e("./keys");t.exports=n(r(["map"],i,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return s(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return o(function(n,r){return n[r]=e(t[r]),n},{},l(t));default:return a(e,t);}}))},{"./curryN":72,"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_map":158,"./internal/_reduce":164,"./internal/_xmap":184,"./keys":202}],216:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=0,a=n.length,o=[],i=[t];r<a;)i=e(i[0],n[r]),o[r]=i[1],r+=1;return[i[0],o]})},{"./internal/_curry3":134}],217:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=n.length-1,a=[],o=[t];0<=r;)o=e(n[r],o[0]),a[r]=o[1],r-=1;return[a,o[0]]})},{"./internal/_curry3":134}],218:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_reduce"),a=e("./keys");t.exports=n(function(e,t){return r(function(n,r){return n[r]=e(t[r],r,t),n},{},a(t))})},{"./internal/_curry2":133,"./internal/_reduce":164,"./keys":202}],219:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t.match(e)||[]})},{"./internal/_curry2":133}],220:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isInteger");t.exports=n(function(e,t){return r(e)?!r(t)||1>t?NaN:(e%t+t)%t:NaN})},{"./internal/_curry2":133,"./internal/_isInteger":150}],221:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t>e?t:e})},{"./internal/_curry2":133}],222:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)>e(t)?n:t})},{"./internal/_curry3":134}],223:[function(e,t){var n=e("./internal/_curry1"),r=e("./sum");t.exports=n(function(e){return r(e)/e.length})},{"./internal/_curry1":132,"./sum":293}],224:[function(e,t){var n=e("./internal/_curry1"),r=e("./mean");t.exports=n(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,a=(t-n)/2;return r(Array.prototype.slice.call(e,0).sort(function(e,t){return e<t?-1:e>t?1:0}).slice(a,a+n))})},{"./internal/_curry1":132,"./mean":223}],225:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_curry1"),a=e("./internal/_has"),o=e("./toString");t.exports=r(function(e){var t={};return n(e.length,function(){var n=o(arguments);return a(n,t)||(t[n]=e.apply(this,arguments)),t[n]})})},{"./internal/_arity":121,"./internal/_curry1":132,"./internal/_has":144,"./toString":307}],226:[function(e,t){var n=e("./internal/_assign"),r=e("./internal/_curry2");t.exports=r(function(e,t){return n({},e,t)})},{"./internal/_assign":123,"./internal/_curry2":133}],227:[function(e,t){var n=e("./internal/_assign"),r=e("./internal/_curry1");t.exports=r(function(e){return n.apply(null,[{}].concat(e))})},{"./internal/_assign":123,"./internal/_curry1":132}],228:[function(e,t){var n=e("./internal/_curry3"),a=e("./mergeWithKey");t.exports=n(function(e,t,n){return a(function(t,n,r){return e(n,r)},t,n)})},{"./internal/_curry3":134,"./mergeWithKey":229}],229:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has");t.exports=n(function(e,t,n){var r={},o;for(o in t)a(o,t)&&(r[o]=a(o,n)?e(o,t[o],n[o]):t[o]);for(o in n)a(o,n)&&!a(o,r)&&(r[o]=n[o]);return r})},{"./internal/_curry3":134,"./internal/_has":144}],230:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t<e?t:e})},{"./internal/_curry2":133}],231:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)<e(t)?n:t})},{"./internal/_curry3":134}],232:[function(e,t){var n=e("./internal/_curry2");/**
 * Divides the first parameter by the second and returns the remainder. Note
 * that this function preserves the JavaScript-style behavior for modulo. For
 * mathematical modulo see `mathMod`.
 *
 * @func
 * @memberOf R
 * @since v0.1.1
 * @category Math
 * @sig Number -> Number -> Number
 * @param {Number} a The value to the divide.
 * @param {Number} b The pseudo-modulus
 * @return {Number} The result of `b % a`.
 * @see R.mathMod
 * @example
 *
 *      R.modulo(17, 3); //=> 2
 *      // JS behavior:
 *      R.modulo(-17, 3); //=> -2
 *      R.modulo(17, -3); //=> 2
 *
 *      var isOdd = R.modulo(R.__, 2);
 *      isOdd(42); //=> 0
 *      isOdd(21); //=> 1
 */t.exports=n(function(e,t){return e%t})},{"./internal/_curry2":133}],233:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e*t})},{"./internal/_curry2":133}],234:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,a){return t.call(this,e,n,r,a)};case 5:return function(e,n,r,a,o){return t.call(this,e,n,r,a,o)};case 6:return function(e,n,r,a,o,i){return t.call(this,e,n,r,a,o,i)};case 7:return function(e,n,r,a,o,i,s){return t.call(this,e,n,r,a,o,i,s)};case 8:return function(e,n,r,a,o,i,s,l){return t.call(this,e,n,r,a,o,i,s,l)};case 9:return function(e,n,r,a,o,i,s,l,d){return t.call(this,e,n,r,a,o,i,s,l,d)};case 10:return function(e,n,r,a,o,i,s,l,d,c){return t.call(this,e,n,r,a,o,i,s,l,d,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten");}})},{"./internal/_curry2":133}],235:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return-e})},{"./internal/_curry1":132}],236:[function(e,t){var n=e("./internal/_complement"),r=e("./internal/_curry2"),a=e("./internal/_dispatchable"),o=e("./internal/_xany"),i=e("./any");t.exports=r(n(a(["any"],o,i)))},{"./any":42,"./internal/_complement":127,"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xany":170}],237:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return!e})},{"./internal/_curry1":132}],238:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isString");t.exports=n(function(e,t){var n=0>e?t.length+e:e;return r(t)?t.charAt(n):t[n]})},{"./internal/_curry2":133,"./internal/_isString":155}],239:[function(e,t){var n=e("./internal/_curry1"),r=e("./curryN"),a=e("./nth");t.exports=n(function(e){var t=0>e?1:e+1;return r(t,function(){return a(e,arguments)})})},{"./curryN":72,"./internal/_curry1":132,"./nth":238}],240:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};return n[e]=t,n})},{"./internal/_curry2":133}],241:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_of");t.exports=n(r)},{"./internal/_curry1":132,"./internal/_of":160}],242:[function(e,t){var n=e("./internal/_contains"),r=e("./internal/_curry2");t.exports=r(function(e,t){var r={};for(var a in t)n(a,e)||(r[a]=t[a]);return r})},{"./internal/_contains":129,"./internal/_curry2":133}],243:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_curry1");t.exports=r(function(e){var t=!1,r;return n(e.length,function(){return t?r:(t=!0,r=e.apply(this,arguments),r)})})},{"./internal/_arity":121,"./internal/_curry1":132}],244:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e||t})},{"./internal/_curry2":133}],245:[function(e,t){var n=e("./internal/_curry3");t.exports=function(){var e=function(t){return{value:t,map:function(n){return e(n(t))}}};return n(function(t,n,r){return t(function(t){return e(n(t))})(r).value})}()},{"./internal/_curry3":134}],246:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return[e,t]})},{"./internal/_curry2":133}],247:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_createPartialApplicator");t.exports=r(n)},{"./internal/_concat":128,"./internal/_createPartialApplicator":131}],248:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_createPartialApplicator"),a=e("./flip");t.exports=r(a(n))},{"./flip":99,"./internal/_concat":128,"./internal/_createPartialApplicator":131}],249:[function(e,t){var n=e("./filter"),r=e("./juxt"),a=e("./reject");t.exports=r([n,a])},{"./filter":93,"./juxt":201,"./reject":276}],250:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t,r=0;r<e.length;){if(null==n)return;n=n[e[r]],r+=1}return n})},{"./internal/_curry2":133}],251:[function(e,t){var n=e("./internal/_curry3"),r=e("./equals"),a=e("./path");t.exports=n(function(e,t,n){return r(a(e,n),t)})},{"./equals":91,"./internal/_curry3":134,"./path":250}],252:[function(e,t){var n=e("./internal/_curry3"),r=e("./defaultTo"),a=e("./path");t.exports=n(function(e,t,n){return r(e,a(t,n))})},{"./defaultTo":74,"./internal/_curry3":134,"./path":250}],253:[function(e,t){var n=e("./internal/_curry3"),r=e("./path");t.exports=n(function(e,t,n){return 0<t.length&&e(r(t,n))})},{"./internal/_curry3":134,"./path":250}],254:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n})},{"./internal/_curry2":133}],255:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},r=0,a=e.length;r<a;){var o=e[r];n[o]=t[o],r+=1}return n})},{"./internal/_curry2":133}],256:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n})},{"./internal/_curry2":133}],257:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_pipe"),a=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return n(arguments[0].length,a(r,arguments[0],o(arguments)))}},{"./internal/_arity":121,"./internal/_pipe":161,"./reduce":271,"./tail":296}],258:[function(e,t){var n=e("./composeK"),r=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return n.apply(this,r(arguments))}},{"./composeK":62,"./reverse":280}],259:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_pipeP"),a=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return n(arguments[0].length,a(r,arguments[0],o(arguments)))}},{"./internal/_arity":121,"./internal/_pipeP":162,"./reduce":271,"./tail":296}],260:[function(e,t){var n=e("./internal/_curry2"),r=e("./map"),a=e("./prop");t.exports=n(function(e,t){return r(a(e),t)})},{"./internal/_curry2":133,"./map":215,"./prop":264}],261:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry2");t.exports=r(function(e,t){return n([e],t)})},{"./internal/_concat":128,"./internal/_curry2":133}],262:[function(e,t){var n=e("./multiply"),r=e("./reduce");t.exports=r(n,1)},{"./multiply":233,"./reduce":271}],263:[function(e,t){var n=e("./internal/_map"),r=e("./identity"),a=e("./pickAll"),o=e("./useWith");t.exports=o(n,[a,r])},{"./identity":111,"./internal/_map":158,"./pickAll":255,"./useWith":328}],264:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t[e]})},{"./internal/_curry2":133}],265:[function(e,t){var n=e("./internal/_curry3"),r=e("./equals");t.exports=n(function(e,t,n){return r(t,n[e])})},{"./equals":91,"./internal/_curry3":134}],266:[function(e,t){var n=e("./internal/_curry3"),r=e("./is");t.exports=n(function(e,t,n){return r(e,n[t])})},{"./internal/_curry3":134,"./is":196}],267:[function(e,t){var n=e("./internal/_curry3"),r=e("./internal/_has");t.exports=n(function(e,t,n){return null!=n&&r(t,n)?n[t]:e})},{"./internal/_curry3":134,"./internal/_has":144}],268:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n[t])})},{"./internal/_curry3":134}],269:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e.length,r=[],a=0;a<n;)r[a]=t[e[a]],a+=1;return r})},{"./internal/_curry2":133}],270:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_isNumber");t.exports=n(function(e,t){if(!(r(e)&&r(t)))throw new TypeError("Both arguments to range must be numbers");for(var a=[],o=e;o<t;)a.push(o),o+=1;return a})},{"./internal/_curry2":133,"./internal/_isNumber":151}],271:[function(e,t){var n=e("./internal/_curry3"),r=e("./internal/_reduce");t.exports=n(r)},{"./internal/_curry3":134,"./internal/_reduce":164}],272:[function(e,t){var n=e("./internal/_curryN"),r=e("./internal/_dispatchable"),a=e("./internal/_has"),o=e("./internal/_reduce"),i=e("./internal/_xreduceBy");t.exports=n(4,[],r([],i,function(e,t,n,r){return o(function(r,o){var i=n(o);return r[i]=e(a(i,r)?r[i]:t,o),r},{},r)}))},{"./internal/_curryN":135,"./internal/_dispatchable":136,"./internal/_has":144,"./internal/_reduce":164,"./internal/_xreduceBy":185}],273:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=n.length-1;0<=r;)t=e(n[r],t),r-=1;return t})},{"./internal/_curry3":134}],274:[function(e,t){var n=e("./internal/_curryN"),r=e("./internal/_reduce"),a=e("./internal/_reduced");t.exports=n(4,[],function(e,t,n,o){return r(function(n,r){return e(n,r)?t(n,r):a(n)},n,o)})},{"./internal/_curryN":135,"./internal/_reduce":164,"./internal/_reduced":165}],275:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_reduced");t.exports=n(r)},{"./internal/_curry1":132,"./internal/_reduced":165}],276:[function(e,t){var n=e("./internal/_complement"),r=e("./internal/_curry2"),a=e("./filter");t.exports=r(function(e,t){return a(n(e),t)})},{"./filter":93,"./internal/_complement":127,"./internal/_curry2":133}],277:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var r=Array.prototype.slice.call(n,0);return r.splice(e,t),r})},{"./internal/_curry3":134}],278:[function(e,t){var n=e("./internal/_curry2"),r=e("./always"),a=e("./times");t.exports=n(function(e,t){return a(r(e),t)})},{"./always":40,"./internal/_curry2":133,"./times":303}],279:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return n.replace(e,t)})},{"./internal/_curry3":134}],280:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_isString");t.exports=n(function(e){return r(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()})},{"./internal/_curry1":132,"./internal/_isString":155}],281:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=0,a=n.length,o=[t];r<a;)t=e(t,n[r]),o[r+1]=t,r+=1;return o})},{"./internal/_curry3":134}],282:[function(e,t){var n=e("./internal/_curry2"),r=e("./ap"),a=e("./map"),o=e("./prepend"),i=e("./reduceRight");t.exports=n(function(e,t){return"function"==typeof t.sequence?t.sequence(e):i(function(e,t){return r(a(o,e),t)},e([]),t)})},{"./ap":44,"./internal/_curry2":133,"./map":215,"./prepend":261,"./reduceRight":273}],283:[function(e,t){var n=e("./internal/_curry3"),r=e("./always"),a=e("./over");t.exports=n(function(e,t,n){return a(e,r(t),n)})},{"./always":40,"./internal/_curry3":134,"./over":245}],284:[function(e,t){var n=e("./internal/_checkForMethod"),r=e("./internal/_curry3");t.exports=r(n("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)}))},{"./internal/_checkForMethod":124,"./internal/_curry3":134}],285:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(e)})},{"./internal/_curry2":133}],286:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){var r=e(t),a=e(n);return r<a?-1:r>a?1:0})})},{"./internal/_curry2":133}],287:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){for(var r=0,a=0;0==r&&a<e.length;)r=e[a](t,n),a+=1;return r})})},{"./internal/_curry2":133}],288:[function(e,t){var n=e("./invoker");t.exports=n(1,"split")},{"./invoker":195}],289:[function(e,t){var n=e("./internal/_curry2"),r=e("./length"),a=e("./slice");t.exports=n(function(e,t){return[a(0,e,t),a(e,r(t),t)]})},{"./internal/_curry2":133,"./length":206,"./slice":284}],290:[function(e,t){var n=e("./internal/_curry2"),r=e("./slice");t.exports=n(function(e,t){if(0>=e)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],a=0;a<t.length;)n.push(r(a,a+=e,t));return n})},{"./internal/_curry2":133,"./slice":284}],291:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,r=t.length,a=[];n<r&&!e(t[n]);)a.push(t[n]),n+=1;return[a,Array.prototype.slice.call(t,n)]})},{"./internal/_curry2":133}],292:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e-+t})},{"./internal/_curry2":133}],293:[function(e,t){var n=e("./add"),r=e("./reduce");t.exports=r(n,0)},{"./add":35,"./reduce":271}],294:[function(e,t){var n=e("./internal/_curry2"),r=e("./concat"),a=e("./difference");t.exports=n(function(e,t){return r(a(e,t),a(t,e))})},{"./concat":64,"./difference":76,"./internal/_curry2":133}],295:[function(e,t){var n=e("./internal/_curry3"),r=e("./concat"),a=e("./differenceWith");t.exports=n(function(e,t,n){return r(a(e,t,n),a(e,n,t))})},{"./concat":64,"./differenceWith":77,"./internal/_curry3":134}],296:[function(e,t){var n=e("./internal/_checkForMethod"),r=e("./internal/_curry1"),a=e("./slice");t.exports=r(n("tail",a(1,Infinity)))},{"./internal/_checkForMethod":124,"./internal/_curry1":132,"./slice":284}],297:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xtake"),o=e("./slice");t.exports=n(r(["take"],a,function(e,t){return o(0,0>e?Infinity:e,t)}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xtake":186,"./slice":284}],298:[function(e,t){var n=e("./internal/_curry2"),r=e("./drop");t.exports=n(function(e,t){return r(0<=e?t.length-e:0,t)})},{"./drop":81,"./internal/_curry2":133}],299:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,n+1)})},{"./internal/_curry2":133}],300:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_dispatchable"),a=e("./internal/_xtakeWhile");t.exports=n(r(["takeWhile"],a,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,0,n)}))},{"./internal/_curry2":133,"./internal/_dispatchable":136,"./internal/_xtakeWhile":187}],301:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e(t),t})},{"./internal/_curry2":133}],302:[function(e,t){var n=e("./internal/_cloneRegExp"),r=e("./internal/_curry2"),a=e("./internal/_isRegExp"),o=e("./toString");t.exports=r(function(e,t){if(!a(e))throw new TypeError("\u2018test\u2019 requires a value of type RegExp as its first argument; received "+o(e));return n(e).test(t)})},{"./internal/_cloneRegExp":126,"./internal/_curry2":133,"./internal/_isRegExp":154,"./toString":307}],303:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var r=+t,a=0,o;if(0>r||isNaN(r))throw new RangeError("n must be a non-negative number");for(o=Array(r);a<r;)o[a]=e(a),a+=1;return o})},{"./internal/_curry2":133}],304:[function(e,t){var n=e("./invoker");t.exports=n(0,"toLowerCase")},{"./invoker":195}],305:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_has");t.exports=n(function(e){var t=[];for(var n in e)r(n,e)&&(t[t.length]=[n,e[n]]);return t})},{"./internal/_curry1":132,"./internal/_has":144}],306:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t})},{"./internal/_curry1":132}],307:[function(e,t){var n=e("./internal/_curry1"),r=e("./internal/_toString");t.exports=n(function(e){return r(e,[])})},{"./internal/_curry1":132,"./internal/_toString":168}],308:[function(e,t){var n=e("./invoker");t.exports=n(0,"toUpperCase")},{"./invoker":195}],309:[function(e,t){var n=e("./internal/_reduce"),r=e("./internal/_xwrap"),a=e("./curryN");t.exports=a(4,function(e,t,a,o){return n(e("function"==typeof t?r(t):t),a,o)})},{"./curryN":72,"./internal/_reduce":164,"./internal/_xwrap":188}],310:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t=0,n=[];t<e.length;){for(var r=e[t],a=0;a<r.length;)"undefined"==typeof n[a]&&(n[a]=[]),n[a].push(r[a]),a+=1;t+=1}return n})},{"./internal/_curry1":132}],311:[function(e,t){var n=e("./internal/_curry3"),r=e("./map"),a=e("./sequence");t.exports=n(function(e,t,n){return a(e,r(t,n))})},{"./internal/_curry3":134,"./map":215,"./sequence":282}],312:[function(e,t){var n=e("./internal/_curry1");t.exports=function(){var e="function"==typeof String.prototype.trim;return e&&!"\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF".trim()&&"\u200B".trim()?n(function(e){return e.trim()}):n(function(e){var t=/^[	\n\v\f\r   ᠎             　\u2028\u2029﻿][	\n\v\f\r   ᠎             　\u2028\u2029﻿]*/,n=/[	\n\v\f\r   ᠎             　\u2028\u2029﻿][	\n\v\f\r   ᠎             　\u2028\u2029﻿]*$/;return e.replace(t,"").replace(n,"")})}()},{"./internal/_curry1":132}],313:[function(e,t){var n=e("./internal/_arity"),r=e("./internal/_concat"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n(e.length,function(){try{return e.apply(this,arguments)}catch(n){return t.apply(this,r([n],arguments))}})})},{"./internal/_arity":121,"./internal/_concat":128,"./internal/_curry2":133}],314:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null===e?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)})},{"./internal/_curry1":132}],315:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})},{"./internal/_curry1":132}],316:[function(e,t){var n=e("./internal/_curry1"),r=e("./nAry");t.exports=n(function(e){return r(1,e)})},{"./internal/_curry1":132,"./nAry":234}],317:[function(e,t){var n=e("./internal/_curry2"),r=e("./curryN");t.exports=n(function(e,t){return r(e,function(){for(var n=1,r=t,a=0,o;n<=e&&"function"==typeof r;)o=n===e?arguments.length:a+r.length,r=r.apply(this,Array.prototype.slice.call(arguments,a,o)),n+=1,a=o;return r})})},{"./curryN":72,"./internal/_curry2":133}],318:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r})},{"./internal/_curry2":133}],319:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry2"),a=e("./compose"),o=e("./uniq");t.exports=r(a(o,n))},{"./compose":61,"./internal/_concat":128,"./internal/_curry2":133,"./uniq":321}],320:[function(e,t){var n=e("./internal/_concat"),r=e("./internal/_curry3"),a=e("./uniqWith");t.exports=r(function(e,t,r){return a(e,n(t,r))})},{"./internal/_concat":128,"./internal/_curry3":134,"./uniqWith":323}],321:[function(e,t){var n=e("./identity"),r=e("./uniqBy");t.exports=r(n)},{"./identity":111,"./uniqBy":322}],322:[function(e,t){var n=e("./internal/_Set"),r=e("./internal/_curry2");t.exports=r(function(e,t){for(var r=new n,a=[],o=0,i,s;o<t.length;)s=t[o],i=e(s),r.add(i)&&a.push(s),o+=1;return a})},{"./internal/_Set":119,"./internal/_curry2":133}],323:[function(e,t){var n=e("./internal/_containsWith"),r=e("./internal/_curry2");t.exports=r(function(e,t){for(var r=0,a=t.length,o=[],i;r<a;)i=t[r],n(e,i,o)||(o[o.length]=i),r+=1;return o})},{"./internal/_containsWith":130,"./internal/_curry2":133}],324:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?n:t(n)})},{"./internal/_curry3":134}],325:[function(e,t){var n=e("./internal/_identity"),r=e("./chain");t.exports=r(n)},{"./chain":56,"./internal/_identity":145}],326:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=n;!e(r);)r=t(r);return r})},{"./internal/_curry3":134}],327:[function(e,t){var n=e("./internal/_curry3"),r=e("./adjust"),a=e("./always");t.exports=n(function(e,t,n){return r(a(t),e,n)})},{"./adjust":37,"./always":40,"./internal/_curry3":134}],328:[function(e,t){var n=e("./internal/_curry2"),r=e("./curryN");t.exports=n(function(e,t){return r(t.length,function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})})},{"./curryN":72,"./internal/_curry2":133}],329:[function(e,t){var n=e("./internal/_curry1"),r=e("./keys");t.exports=n(function(e){for(var t=r(e),n=t.length,a=[],o=0;o<n;)a[o]=e[t[o]],o+=1;return a})},{"./internal/_curry1":132,"./keys":202}],330:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=e[n];return t})},{"./internal/_curry1":132}],331:[function(e,t){var n=e("./internal/_curry2");t.exports=function(){var e=function(e){return{value:e,map:function(){return this}}};return n(function(t,n){return t(e)(n).value})}()},{"./internal/_curry2":133}],332:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?t(n):n})},{"./internal/_curry3":134}],333:[function(e,t){var n=e("./internal/_curry2"),r=e("./internal/_has");t.exports=n(function(e,t){for(var n in e)if(r(n,e)&&!e[n](t[n]))return!1;return!0})},{"./internal/_curry2":133,"./internal/_has":144}],334:[function(e,t){var n=e("./internal/_curry2"),r=e("./equals"),a=e("./map"),o=e("./where");t.exports=n(function(e,t){return o(a(r,e),t)})},{"./equals":91,"./internal/_curry2":133,"./map":215,"./where":333}],335:[function(e,t){var n=e("./internal/_contains"),r=e("./internal/_curry2"),a=e("./flip"),o=e("./reject");t.exports=r(function(e,t){return o(a(n)(e),t)})},{"./flip":99,"./internal/_contains":129,"./internal/_curry2":133,"./reject":276}],336:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,r=e.length,a=t.length,o=[],i;n<r;){for(i=0;i<a;)o[o.length]=[e[n],t[i]],i+=1;n+=1}return o})},{"./internal/_curry2":133}],337:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],r=0,a=Math.min(e.length,t.length);r<a;)n[r]=[e[r],t[r]],r+=1;return n})},{"./internal/_curry2":133}],338:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,r=Math.min(e.length,t.length),a={};n<r;)a[e[n]]=t[n],n+=1;return a})},{"./internal/_curry2":133}],339:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var r=[],a=0,o=Math.min(t.length,n.length);a<o;)r[a]=e(t[a],n[a]),a+=1;return r})},{"./internal/_curry3":134}],340:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Subject"),o=e("./Subscription"),i=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return r(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(a.Subject);n.AsyncSubject=i},{"./Subject":350,"./Subscription":353}],341:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Subject"),o=e("./util/ObjectUnsubscribedError"),i=function(e){function t(t){e.call(this),this._value=t}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;else if(this.closed)throw new o.ObjectUnsubscribedError;else return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(a.Subject);n.BehaviorSubject=i},{"./Subject":350,"./util/ObjectUnsubscribedError":667}],342:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Subscriber"),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(a.Subscriber);n.InnerSubscriber=o},{"./Subscriber":352}],343:[function(e,t,n){"use strict";var r=e("./Observable"),a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete();}},e.prototype.do=function(e,t,n){var r=this.kind;return"N"===r?e&&e(this.value):"E"===r?t&&t(this.error):"C"===r?n&&n():void 0},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty();}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"==typeof t?e.undefinedValueNotification:new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();n.Notification=a},{"./Observable":344}],344:[function(e,t,n){"use strict";var r=e("./util/root"),a=e("./util/toSubscriber"),o=e("./symbol/observable"),i=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=a.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var a=n.subscribe(function(t){if(a)try{e(t)}catch(e){r(e),a.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();n.Observable=i},{"./symbol/observable":653,"./util/root":684,"./util/toSubscriber":686}],345:[function(e,t,n){"use strict";n.empty={closed:!0,next:function(){},error:function(e){throw e},complete:function(){}}},{}],346:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Subscriber"),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(a.Subscriber);n.OuterSubscriber=o},{"./Subscriber":352}],347:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("./Subject"),i=e("./scheduler/queue"),s=e("./Subscription"),l=e("./operator/observeOn"),d=e("./util/ObjectUnsubscribedError"),c=e("./SubjectSubscription"),p=function(e){function t(t,n,a){void 0===t&&(t=r),void 0===n&&(n=r),e.call(this),this.scheduler=a,this._events=[],this._bufferSize=1>t?1:t,this._windowTime=1>n?1:n}return a(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new u(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._trimBufferThenGetEvents(),n=this.scheduler,r;if(this.closed)throw new d.ObjectUnsubscribedError;else this.hasError?r=s.Subscription.EMPTY:this.isStopped?r=s.Subscription.EMPTY:(this.observers.push(e),r=new c.SubjectSubscription(this,e));n&&e.add(e=new l.ObserveOnSubscriber(e,n));for(var a=t.length,o=0;o<a&&!e.closed;o++)e.next(t[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r},t.prototype._getNow=function(){return(this.scheduler||i.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,a=r.length,o=0;o<a&&!(e-r[o].time<n);)o++;return a>t&&(o=Math.max(o,a-t)),0<o&&r.splice(0,o),r},t}(o.Subject);n.ReplaySubject=p;var u=function(){return function(e,t){this.time=e,this.value=t}}()},{"./Subject":350,"./SubjectSubscription":351,"./Subscription":353,"./operator/observeOn":587,"./scheduler/queue":651,"./util/ObjectUnsubscribedError":667}],348:[function(e,t,n){"use strict";var r=e("./Subject");n.Subject=r.Subject,n.AnonymousSubject=r.AnonymousSubject;var a=e("./Observable");n.Observable=a.Observable,e("./add/observable/bindCallback"),e("./add/observable/bindNodeCallback"),e("./add/observable/combineLatest"),e("./add/observable/concat"),e("./add/observable/defer"),e("./add/observable/empty"),e("./add/observable/forkJoin"),e("./add/observable/from"),e("./add/observable/fromEvent"),e("./add/observable/fromEventPattern"),e("./add/observable/fromPromise"),e("./add/observable/generate"),e("./add/observable/if"),e("./add/observable/interval"),e("./add/observable/merge"),e("./add/observable/race"),e("./add/observable/never"),e("./add/observable/of"),e("./add/observable/onErrorResumeNext"),e("./add/observable/pairs"),e("./add/observable/range"),e("./add/observable/using"),e("./add/observable/throw"),e("./add/observable/timer"),e("./add/observable/zip"),e("./add/observable/dom/ajax"),e("./add/observable/dom/webSocket"),e("./add/operator/buffer"),e("./add/operator/bufferCount"),e("./add/operator/bufferTime"),e("./add/operator/bufferToggle"),e("./add/operator/bufferWhen"),e("./add/operator/catch"),e("./add/operator/combineAll"),e("./add/operator/combineLatest"),e("./add/operator/concat"),e("./add/operator/concatAll"),e("./add/operator/concatMap"),e("./add/operator/concatMapTo"),e("./add/operator/count"),e("./add/operator/dematerialize"),e("./add/operator/debounce"),e("./add/operator/debounceTime"),e("./add/operator/defaultIfEmpty"),e("./add/operator/delay"),e("./add/operator/delayWhen"),e("./add/operator/distinct"),e("./add/operator/distinctUntilChanged"),e("./add/operator/distinctUntilKeyChanged"),e("./add/operator/do"),e("./add/operator/exhaust"),e("./add/operator/exhaustMap"),e("./add/operator/expand"),e("./add/operator/elementAt"),e("./add/operator/filter"),e("./add/operator/finally"),e("./add/operator/find"),e("./add/operator/findIndex"),e("./add/operator/first"),e("./add/operator/groupBy"),e("./add/operator/ignoreElements"),e("./add/operator/isEmpty"),e("./add/operator/audit"),e("./add/operator/auditTime"),e("./add/operator/last"),e("./add/operator/let"),e("./add/operator/every"),e("./add/operator/map"),e("./add/operator/mapTo"),e("./add/operator/materialize"),e("./add/operator/max"),e("./add/operator/merge"),e("./add/operator/mergeAll"),e("./add/operator/mergeMap"),e("./add/operator/mergeMapTo"),e("./add/operator/mergeScan"),e("./add/operator/min"),e("./add/operator/multicast"),e("./add/operator/observeOn"),e("./add/operator/onErrorResumeNext"),e("./add/operator/pairwise"),e("./add/operator/partition"),e("./add/operator/pluck"),e("./add/operator/publish"),e("./add/operator/publishBehavior"),e("./add/operator/publishReplay"),e("./add/operator/publishLast"),e("./add/operator/race"),e("./add/operator/reduce"),e("./add/operator/repeat"),e("./add/operator/repeatWhen"),e("./add/operator/retry"),e("./add/operator/retryWhen"),e("./add/operator/sample"),e("./add/operator/sampleTime"),e("./add/operator/scan"),e("./add/operator/sequenceEqual"),e("./add/operator/share"),e("./add/operator/shareReplay"),e("./add/operator/single"),e("./add/operator/skip"),e("./add/operator/skipLast"),e("./add/operator/skipUntil"),e("./add/operator/skipWhile"),e("./add/operator/startWith"),e("./add/operator/subscribeOn"),e("./add/operator/switch"),e("./add/operator/switchMap"),e("./add/operator/switchMapTo"),e("./add/operator/take"),e("./add/operator/takeLast"),e("./add/operator/takeUntil"),e("./add/operator/takeWhile"),e("./add/operator/throttle"),e("./add/operator/throttleTime"),e("./add/operator/timeInterval"),e("./add/operator/timeout"),e("./add/operator/timeoutWith"),e("./add/operator/timestamp"),e("./add/operator/toArray"),e("./add/operator/toPromise"),e("./add/operator/window"),e("./add/operator/windowCount"),e("./add/operator/windowTime"),e("./add/operator/windowToggle"),e("./add/operator/windowWhen"),e("./add/operator/withLatestFrom"),e("./add/operator/zip"),e("./add/operator/zipAll");var o=e("./Subscription");n.Subscription=o.Subscription;var i=e("./Subscriber");n.Subscriber=i.Subscriber;var s=e("./AsyncSubject");n.AsyncSubject=s.AsyncSubject;var l=e("./ReplaySubject");n.ReplaySubject=l.ReplaySubject;var d=e("./BehaviorSubject");n.BehaviorSubject=d.BehaviorSubject;var c=e("./observable/ConnectableObservable");n.ConnectableObservable=c.ConnectableObservable;var p=e("./Notification");n.Notification=p.Notification;var u=e("./util/EmptyError");n.EmptyError=u.EmptyError;var m=e("./util/ArgumentOutOfRangeError");n.ArgumentOutOfRangeError=m.ArgumentOutOfRangeError;var f=e("./util/ObjectUnsubscribedError");n.ObjectUnsubscribedError=f.ObjectUnsubscribedError;var y=e("./util/TimeoutError");n.TimeoutError=y.TimeoutError;var g=e("./util/UnsubscriptionError");n.UnsubscriptionError=g.UnsubscriptionError;var h=e("./operator/timeInterval");n.TimeInterval=h.TimeInterval;var b=e("./operator/timestamp");n.Timestamp=b.Timestamp;var _=e("./testing/TestScheduler");n.TestScheduler=_.TestScheduler;var x=e("./scheduler/VirtualTimeScheduler");n.VirtualTimeScheduler=x.VirtualTimeScheduler;var v=e("./observable/dom/AjaxObservable");n.AjaxResponse=v.AjaxResponse,n.AjaxError=v.AjaxError,n.AjaxTimeoutError=v.AjaxTimeoutError;var S=e("./scheduler/asap"),T=e("./scheduler/async"),k=e("./scheduler/queue"),O=e("./scheduler/animationFrame"),E=e("./symbol/rxSubscriber"),C=e("./symbol/iterator"),w=e("./symbol/observable"),A={asap:S.asap,queue:k.queue,animationFrame:O.animationFrame,async:T.async};n.Scheduler=A;var N={rxSubscriber:E.rxSubscriber,observable:w.observable,iterator:C.iterator};n.Symbol=N},{"./AsyncSubject":340,"./BehaviorSubject":341,"./Notification":343,"./Observable":344,"./ReplaySubject":347,"./Subject":350,"./Subscriber":352,"./Subscription":353,"./add/observable/bindCallback":354,"./add/observable/bindNodeCallback":355,"./add/observable/combineLatest":356,"./add/observable/concat":357,"./add/observable/defer":358,"./add/observable/dom/ajax":359,"./add/observable/dom/webSocket":360,"./add/observable/empty":361,"./add/observable/forkJoin":362,"./add/observable/from":363,"./add/observable/fromEvent":364,"./add/observable/fromEventPattern":365,"./add/observable/fromPromise":366,"./add/observable/generate":367,"./add/observable/if":368,"./add/observable/interval":369,"./add/observable/merge":370,"./add/observable/never":371,"./add/observable/of":372,"./add/observable/onErrorResumeNext":373,"./add/observable/pairs":374,"./add/observable/race":375,"./add/observable/range":376,"./add/observable/throw":377,"./add/observable/timer":378,"./add/observable/using":379,"./add/observable/zip":380,"./add/operator/audit":381,"./add/operator/auditTime":382,"./add/operator/buffer":383,"./add/operator/bufferCount":384,"./add/operator/bufferTime":385,"./add/operator/bufferToggle":386,"./add/operator/bufferWhen":387,"./add/operator/catch":388,"./add/operator/combineAll":389,"./add/operator/combineLatest":390,"./add/operator/concat":391,"./add/operator/concatAll":392,"./add/operator/concatMap":393,"./add/operator/concatMapTo":394,"./add/operator/count":395,"./add/operator/debounce":396,"./add/operator/debounceTime":397,"./add/operator/defaultIfEmpty":398,"./add/operator/delay":399,"./add/operator/delayWhen":400,"./add/operator/dematerialize":401,"./add/operator/distinct":402,"./add/operator/distinctUntilChanged":403,"./add/operator/distinctUntilKeyChanged":404,"./add/operator/do":405,"./add/operator/elementAt":406,"./add/operator/every":407,"./add/operator/exhaust":408,"./add/operator/exhaustMap":409,"./add/operator/expand":410,"./add/operator/filter":411,"./add/operator/finally":412,"./add/operator/find":413,"./add/operator/findIndex":414,"./add/operator/first":415,"./add/operator/groupBy":416,"./add/operator/ignoreElements":417,"./add/operator/isEmpty":418,"./add/operator/last":419,"./add/operator/let":420,"./add/operator/map":421,"./add/operator/mapTo":422,"./add/operator/materialize":423,"./add/operator/max":424,"./add/operator/merge":425,"./add/operator/mergeAll":426,"./add/operator/mergeMap":427,"./add/operator/mergeMapTo":428,"./add/operator/mergeScan":429,"./add/operator/min":430,"./add/operator/multicast":431,"./add/operator/observeOn":432,"./add/operator/onErrorResumeNext":433,"./add/operator/pairwise":434,"./add/operator/partition":435,"./add/operator/pluck":436,"./add/operator/publish":437,"./add/operator/publishBehavior":438,"./add/operator/publishLast":439,"./add/operator/publishReplay":440,"./add/operator/race":441,"./add/operator/reduce":442,"./add/operator/repeat":443,"./add/operator/repeatWhen":444,"./add/operator/retry":445,"./add/operator/retryWhen":446,"./add/operator/sample":447,"./add/operator/sampleTime":448,"./add/operator/scan":449,"./add/operator/sequenceEqual":450,"./add/operator/share":451,"./add/operator/shareReplay":452,"./add/operator/single":453,"./add/operator/skip":454,"./add/operator/skipLast":455,"./add/operator/skipUntil":456,"./add/operator/skipWhile":457,"./add/operator/startWith":458,"./add/operator/subscribeOn":459,"./add/operator/switch":460,"./add/operator/switchMap":461,"./add/operator/switchMapTo":462,"./add/operator/take":463,"./add/operator/takeLast":464,"./add/operator/takeUntil":465,"./add/operator/takeWhile":466,"./add/operator/throttle":467,"./add/operator/throttleTime":468,"./add/operator/timeInterval":469,"./add/operator/timeout":470,"./add/operator/timeoutWith":471,"./add/operator/timestamp":472,"./add/operator/toArray":473,"./add/operator/toPromise":474,"./add/operator/window":475,"./add/operator/windowCount":476,"./add/operator/windowTime":477,"./add/operator/windowToggle":478,"./add/operator/windowWhen":479,"./add/operator/withLatestFrom":480,"./add/operator/zip":481,"./add/operator/zipAll":482,"./observable/ConnectableObservable":487,"./observable/dom/AjaxObservable":512,"./operator/timeInterval":624,"./operator/timestamp":627,"./scheduler/VirtualTimeScheduler":647,"./scheduler/animationFrame":648,"./scheduler/asap":649,"./scheduler/async":650,"./scheduler/queue":651,"./symbol/iterator":652,"./symbol/observable":653,"./symbol/rxSubscriber":654,"./testing/TestScheduler":659,"./util/ArgumentOutOfRangeError":661,"./util/EmptyError":662,"./util/ObjectUnsubscribedError":667,"./util/TimeoutError":669,"./util/UnsubscriptionError":670}],349:[function(e,t,n){"use strict";var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();n.Scheduler=r},{}],350:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Observable"),o=e("./Subscriber"),i=e("./Subscription"),s=e("./util/ObjectUnsubscribedError"),l=e("./SubjectSubscription"),d=e("./symbol/rxSubscriber"),c=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);n.SubjectSubscriber=c;var p=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[d.rxSubscriber]=function(){return new c(this)},t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;else return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;else return this.hasError?(e.error(this.thrownError),i.Subscription.EMPTY):this.isStopped?(e.complete(),i.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new a.Observable;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(a.Observable);n.Subject=p;var u=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):i.Subscription.EMPTY},t}(p);n.AnonymousSubject=u},{"./Observable":344,"./SubjectSubscription":351,"./Subscriber":352,"./Subscription":353,"./symbol/rxSubscriber":654,"./util/ObjectUnsubscribedError":667}],351:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./Subscription"),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,!(!t||0===t.length||e.isStopped||e.closed)){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(a.Subscription);n.SubjectSubscription=o},{"./Subscription":353}],352:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./util/isFunction"),o=e("./Subscription"),i=e("./Observer"),s=e("./symbol/rxSubscriber"),l=function(e){function t(n,r,a){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.empty;break;case 1:if(!n){this.destination=i.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new d(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new d(this,n,r,a);}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var a=new t(e,n,r);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);n.Subscriber=l;var d=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s=this,l;a.isFunction(n)?l=n:n&&(l=n.next,r=n.error,o=n.complete,n!==i.empty&&(s=Object.create(n),a.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=l,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(!t.syncErrorThrowable)throw this.unsubscribe(),e;else t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},{"./Observer":345,"./Subscription":353,"./symbol/rxSubscriber":654,"./util/isFunction":677}],353:[function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof d.UnsubscriptionError?t.errors:t)},[])}var a=e("./util/isArray"),o=e("./util/isObject"),i=e("./util/isFunction"),s=e("./util/tryCatch"),l=e("./util/errorObject"),d=e("./util/UnsubscriptionError"),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var n=this,c=n._parent,p=n._parents,u=n._unsubscribe,m=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,y=p?p.length:0;c;)c.remove(this),c=++f<y&&p[f]||null;if(i.isFunction(u)){var g=s.tryCatch(u).call(this);g===l.errorObject&&(e=!0,t=t||(l.errorObject.e instanceof d.UnsubscriptionError?r(l.errorObject.e.errors):[l.errorObject.e]))}if(a.isArray(m))for(f=-1,y=m.length;++f<y;){var h=m[f];if(o.isObject(h)){var g=s.tryCatch(h.unsubscribe).call(h);if(g===l.errorObject){e=!0,t=t||[];var b=l.errorObject.e;b instanceof d.UnsubscriptionError?t=t.concat(r(b.errors)):t.push(b)}}}if(e)throw new d.UnsubscriptionError(t)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.");}var a=this._subscriptions||(this._subscriptions=[]);return a.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();n.Subscription=c},{"./util/UnsubscriptionError":670,"./util/errorObject":673,"./util/isArray":674,"./util/isFunction":677,"./util/isObject":679,"./util/tryCatch":687}],354:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/bindCallback");t.Observable.bindCallback=n.bindCallback},{"../../Observable":344,"../../observable/bindCallback":507}],355:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/bindNodeCallback");t.Observable.bindNodeCallback=n.bindNodeCallback},{"../../Observable":344,"../../observable/bindNodeCallback":508}],356:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/combineLatest");t.Observable.combineLatest=n.combineLatest},{"../../Observable":344,"../../observable/combineLatest":509}],357:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/concat");t.Observable.concat=n.concat},{"../../Observable":344,"../../observable/concat":510}],358:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/defer");t.Observable.defer=n.defer},{"../../Observable":344,"../../observable/defer":511}],359:[function(e){"use strict";var t=e("../../../Observable"),n=e("../../../observable/dom/ajax");t.Observable.ajax=n.ajax},{"../../../Observable":344,"../../../observable/dom/ajax":514}],360:[function(e){"use strict";var t=e("../../../Observable"),n=e("../../../observable/dom/webSocket");t.Observable.webSocket=n.webSocket},{"../../../Observable":344,"../../../observable/dom/webSocket":515}],361:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/empty");t.Observable.empty=n.empty},{"../../Observable":344,"../../observable/empty":516}],362:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/forkJoin");t.Observable.forkJoin=n.forkJoin},{"../../Observable":344,"../../observable/forkJoin":517}],363:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/from");t.Observable.from=n.from},{"../../Observable":344,"../../observable/from":518}],364:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/fromEvent");t.Observable.fromEvent=n.fromEvent},{"../../Observable":344,"../../observable/fromEvent":519}],365:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/fromEventPattern");t.Observable.fromEventPattern=n.fromEventPattern},{"../../Observable":344,"../../observable/fromEventPattern":520}],366:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/fromPromise");t.Observable.fromPromise=n.fromPromise},{"../../Observable":344,"../../observable/fromPromise":521}],367:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/generate");t.Observable.generate=n.generate},{"../../Observable":344,"../../observable/generate":522}],368:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/if");t.Observable.if=n._if},{"../../Observable":344,"../../observable/if":523}],369:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/interval");t.Observable.interval=n.interval},{"../../Observable":344,"../../observable/interval":524}],370:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/merge");t.Observable.merge=n.merge},{"../../Observable":344,"../../observable/merge":525}],371:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/never");t.Observable.never=n.never},{"../../Observable":344,"../../observable/never":526}],372:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/of");t.Observable.of=n.of},{"../../Observable":344,"../../observable/of":527}],373:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/onErrorResumeNext");t.Observable.onErrorResumeNext=n.onErrorResumeNext},{"../../Observable":344,"../../observable/onErrorResumeNext":528}],374:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/pairs");t.Observable.pairs=n.pairs},{"../../Observable":344,"../../observable/pairs":529}],375:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/race");t.Observable.race=n.race},{"../../Observable":344,"../../observable/race":530}],376:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/range");t.Observable.range=n.range},{"../../Observable":344,"../../observable/range":531}],377:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/throw");t.Observable.throw=n._throw},{"../../Observable":344,"../../observable/throw":532}],378:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/timer");t.Observable.timer=n.timer},{"../../Observable":344,"../../observable/timer":533}],379:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/using");t.Observable.using=n.using},{"../../Observable":344,"../../observable/using":534}],380:[function(e){"use strict";var t=e("../../Observable"),n=e("../../observable/zip");t.Observable.zip=n.zip},{"../../Observable":344,"../../observable/zip":535}],381:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/audit");t.Observable.prototype.audit=n.audit},{"../../Observable":344,"../../operator/audit":536}],382:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/auditTime");t.Observable.prototype.auditTime=n.auditTime},{"../../Observable":344,"../../operator/auditTime":537}],383:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/buffer");t.Observable.prototype.buffer=n.buffer},{"../../Observable":344,"../../operator/buffer":538}],384:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/bufferCount");t.Observable.prototype.bufferCount=n.bufferCount},{"../../Observable":344,"../../operator/bufferCount":539}],385:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/bufferTime");t.Observable.prototype.bufferTime=n.bufferTime},{"../../Observable":344,"../../operator/bufferTime":540}],386:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/bufferToggle");t.Observable.prototype.bufferToggle=n.bufferToggle},{"../../Observable":344,"../../operator/bufferToggle":541}],387:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/bufferWhen");t.Observable.prototype.bufferWhen=n.bufferWhen},{"../../Observable":344,"../../operator/bufferWhen":542}],388:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/catch");t.Observable.prototype.catch=n._catch,t.Observable.prototype._catch=n._catch},{"../../Observable":344,"../../operator/catch":543}],389:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/combineAll");t.Observable.prototype.combineAll=n.combineAll},{"../../Observable":344,"../../operator/combineAll":544}],390:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/combineLatest");t.Observable.prototype.combineLatest=n.combineLatest},{"../../Observable":344,"../../operator/combineLatest":545}],391:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/concat");t.Observable.prototype.concat=n.concat},{"../../Observable":344,"../../operator/concat":546}],392:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/concatAll");t.Observable.prototype.concatAll=n.concatAll},{"../../Observable":344,"../../operator/concatAll":547}],393:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/concatMap");t.Observable.prototype.concatMap=n.concatMap},{"../../Observable":344,"../../operator/concatMap":548}],394:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/concatMapTo");t.Observable.prototype.concatMapTo=n.concatMapTo},{"../../Observable":344,"../../operator/concatMapTo":549}],395:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/count");t.Observable.prototype.count=n.count},{"../../Observable":344,"../../operator/count":550}],396:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/debounce");t.Observable.prototype.debounce=n.debounce},{"../../Observable":344,"../../operator/debounce":551}],397:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/debounceTime");t.Observable.prototype.debounceTime=n.debounceTime},{"../../Observable":344,"../../operator/debounceTime":552}],398:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/defaultIfEmpty");t.Observable.prototype.defaultIfEmpty=n.defaultIfEmpty},{"../../Observable":344,"../../operator/defaultIfEmpty":553}],399:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/delay");t.Observable.prototype.delay=n.delay},{"../../Observable":344,"../../operator/delay":554}],400:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/delayWhen");t.Observable.prototype.delayWhen=n.delayWhen},{"../../Observable":344,"../../operator/delayWhen":555}],401:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/dematerialize");t.Observable.prototype.dematerialize=n.dematerialize},{"../../Observable":344,"../../operator/dematerialize":556}],402:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/distinct");t.Observable.prototype.distinct=n.distinct},{"../../Observable":344,"../../operator/distinct":557}],403:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/distinctUntilChanged");t.Observable.prototype.distinctUntilChanged=n.distinctUntilChanged},{"../../Observable":344,"../../operator/distinctUntilChanged":558}],404:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/distinctUntilKeyChanged");t.Observable.prototype.distinctUntilKeyChanged=n.distinctUntilKeyChanged},{"../../Observable":344,"../../operator/distinctUntilKeyChanged":559}],405:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/do");t.Observable.prototype.do=n._do,t.Observable.prototype._do=n._do},{"../../Observable":344,"../../operator/do":560}],406:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/elementAt");t.Observable.prototype.elementAt=n.elementAt},{"../../Observable":344,"../../operator/elementAt":561}],407:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/every");t.Observable.prototype.every=n.every},{"../../Observable":344,"../../operator/every":562}],408:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/exhaust");t.Observable.prototype.exhaust=n.exhaust},{"../../Observable":344,"../../operator/exhaust":563}],409:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/exhaustMap");t.Observable.prototype.exhaustMap=n.exhaustMap},{"../../Observable":344,"../../operator/exhaustMap":564}],410:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/expand");t.Observable.prototype.expand=n.expand},{"../../Observable":344,"../../operator/expand":565}],411:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/filter");t.Observable.prototype.filter=n.filter},{"../../Observable":344,"../../operator/filter":566}],412:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/finally");t.Observable.prototype.finally=n._finally,t.Observable.prototype._finally=n._finally},{"../../Observable":344,"../../operator/finally":567}],413:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/find");t.Observable.prototype.find=n.find},{"../../Observable":344,"../../operator/find":568}],414:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/findIndex");t.Observable.prototype.findIndex=n.findIndex},{"../../Observable":344,"../../operator/findIndex":569}],415:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/first");t.Observable.prototype.first=n.first},{"../../Observable":344,"../../operator/first":570}],416:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/groupBy");t.Observable.prototype.groupBy=n.groupBy},{"../../Observable":344,"../../operator/groupBy":571}],417:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/ignoreElements");t.Observable.prototype.ignoreElements=n.ignoreElements},{"../../Observable":344,"../../operator/ignoreElements":572}],418:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/isEmpty");t.Observable.prototype.isEmpty=n.isEmpty},{"../../Observable":344,"../../operator/isEmpty":573}],419:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/last");t.Observable.prototype.last=n.last},{"../../Observable":344,"../../operator/last":574}],420:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/let");t.Observable.prototype.let=n.letProto,t.Observable.prototype.letBind=n.letProto},{"../../Observable":344,"../../operator/let":575}],421:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/map");t.Observable.prototype.map=n.map},{"../../Observable":344,"../../operator/map":576}],422:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/mapTo");t.Observable.prototype.mapTo=n.mapTo},{"../../Observable":344,"../../operator/mapTo":577}],423:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/materialize");t.Observable.prototype.materialize=n.materialize},{"../../Observable":344,"../../operator/materialize":578}],424:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/max");t.Observable.prototype.max=n.max},{"../../Observable":344,"../../operator/max":579}],425:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/merge");t.Observable.prototype.merge=n.merge},{"../../Observable":344,"../../operator/merge":580}],426:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/mergeAll");t.Observable.prototype.mergeAll=n.mergeAll},{"../../Observable":344,"../../operator/mergeAll":581}],427:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/mergeMap");t.Observable.prototype.mergeMap=n.mergeMap,t.Observable.prototype.flatMap=n.mergeMap},{"../../Observable":344,"../../operator/mergeMap":582}],428:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/mergeMapTo");t.Observable.prototype.flatMapTo=n.mergeMapTo,t.Observable.prototype.mergeMapTo=n.mergeMapTo},{"../../Observable":344,"../../operator/mergeMapTo":583}],429:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/mergeScan");t.Observable.prototype.mergeScan=n.mergeScan},{"../../Observable":344,"../../operator/mergeScan":584}],430:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/min");t.Observable.prototype.min=n.min},{"../../Observable":344,"../../operator/min":585}],431:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/multicast");t.Observable.prototype.multicast=n.multicast},{"../../Observable":344,"../../operator/multicast":586}],432:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/observeOn");t.Observable.prototype.observeOn=n.observeOn},{"../../Observable":344,"../../operator/observeOn":587}],433:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/onErrorResumeNext");t.Observable.prototype.onErrorResumeNext=n.onErrorResumeNext},{"../../Observable":344,"../../operator/onErrorResumeNext":588}],434:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/pairwise");t.Observable.prototype.pairwise=n.pairwise},{"../../Observable":344,"../../operator/pairwise":589}],435:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/partition");t.Observable.prototype.partition=n.partition},{"../../Observable":344,"../../operator/partition":590}],436:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/pluck");t.Observable.prototype.pluck=n.pluck},{"../../Observable":344,"../../operator/pluck":591}],437:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/publish");t.Observable.prototype.publish=n.publish},{"../../Observable":344,"../../operator/publish":592}],438:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/publishBehavior");t.Observable.prototype.publishBehavior=n.publishBehavior},{"../../Observable":344,"../../operator/publishBehavior":593}],439:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/publishLast");t.Observable.prototype.publishLast=n.publishLast},{"../../Observable":344,"../../operator/publishLast":594}],440:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/publishReplay");t.Observable.prototype.publishReplay=n.publishReplay},{"../../Observable":344,"../../operator/publishReplay":595}],441:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/race");t.Observable.prototype.race=n.race},{"../../Observable":344,"../../operator/race":596}],442:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/reduce");t.Observable.prototype.reduce=n.reduce},{"../../Observable":344,"../../operator/reduce":597}],443:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/repeat");t.Observable.prototype.repeat=n.repeat},{"../../Observable":344,"../../operator/repeat":598}],444:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/repeatWhen");t.Observable.prototype.repeatWhen=n.repeatWhen},{"../../Observable":344,"../../operator/repeatWhen":599}],445:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/retry");t.Observable.prototype.retry=n.retry},{"../../Observable":344,"../../operator/retry":600}],446:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/retryWhen");t.Observable.prototype.retryWhen=n.retryWhen},{"../../Observable":344,"../../operator/retryWhen":601}],447:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/sample");t.Observable.prototype.sample=n.sample},{"../../Observable":344,"../../operator/sample":602}],448:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/sampleTime");t.Observable.prototype.sampleTime=n.sampleTime},{"../../Observable":344,"../../operator/sampleTime":603}],449:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/scan");t.Observable.prototype.scan=n.scan},{"../../Observable":344,"../../operator/scan":604}],450:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/sequenceEqual");t.Observable.prototype.sequenceEqual=n.sequenceEqual},{"../../Observable":344,"../../operator/sequenceEqual":605}],451:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/share");t.Observable.prototype.share=n.share},{"../../Observable":344,"../../operator/share":606}],452:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/shareReplay");t.Observable.prototype.shareReplay=n.shareReplay},{"../../Observable":344,"../../operator/shareReplay":607}],453:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/single");t.Observable.prototype.single=n.single},{"../../Observable":344,"../../operator/single":608}],454:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/skip");t.Observable.prototype.skip=n.skip},{"../../Observable":344,"../../operator/skip":609}],455:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/skipLast");t.Observable.prototype.skipLast=n.skipLast},{"../../Observable":344,"../../operator/skipLast":610}],456:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/skipUntil");t.Observable.prototype.skipUntil=n.skipUntil},{"../../Observable":344,"../../operator/skipUntil":611}],457:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/skipWhile");t.Observable.prototype.skipWhile=n.skipWhile},{"../../Observable":344,"../../operator/skipWhile":612}],458:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/startWith");t.Observable.prototype.startWith=n.startWith},{"../../Observable":344,"../../operator/startWith":613}],459:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/subscribeOn");t.Observable.prototype.subscribeOn=n.subscribeOn},{"../../Observable":344,"../../operator/subscribeOn":614}],460:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/switch");t.Observable.prototype.switch=n._switch,t.Observable.prototype._switch=n._switch},{"../../Observable":344,"../../operator/switch":615}],461:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/switchMap");t.Observable.prototype.switchMap=n.switchMap},{"../../Observable":344,"../../operator/switchMap":616}],462:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/switchMapTo");t.Observable.prototype.switchMapTo=n.switchMapTo},{"../../Observable":344,"../../operator/switchMapTo":617}],463:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/take");t.Observable.prototype.take=n.take},{"../../Observable":344,"../../operator/take":618}],464:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/takeLast");t.Observable.prototype.takeLast=n.takeLast},{"../../Observable":344,"../../operator/takeLast":619}],465:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/takeUntil");t.Observable.prototype.takeUntil=n.takeUntil},{"../../Observable":344,"../../operator/takeUntil":620}],466:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/takeWhile");t.Observable.prototype.takeWhile=n.takeWhile},{"../../Observable":344,"../../operator/takeWhile":621}],467:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/throttle");t.Observable.prototype.throttle=n.throttle},{"../../Observable":344,"../../operator/throttle":622}],468:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/throttleTime");t.Observable.prototype.throttleTime=n.throttleTime},{"../../Observable":344,"../../operator/throttleTime":623}],469:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/timeInterval");t.Observable.prototype.timeInterval=n.timeInterval},{"../../Observable":344,"../../operator/timeInterval":624}],470:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/timeout");t.Observable.prototype.timeout=n.timeout},{"../../Observable":344,"../../operator/timeout":625}],471:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/timeoutWith");t.Observable.prototype.timeoutWith=n.timeoutWith},{"../../Observable":344,"../../operator/timeoutWith":626}],472:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/timestamp");t.Observable.prototype.timestamp=n.timestamp},{"../../Observable":344,"../../operator/timestamp":627}],473:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/toArray");t.Observable.prototype.toArray=n.toArray},{"../../Observable":344,"../../operator/toArray":628}],474:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/toPromise");t.Observable.prototype.toPromise=n.toPromise},{"../../Observable":344,"../../operator/toPromise":629}],475:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/window");t.Observable.prototype.window=n.window},{"../../Observable":344,"../../operator/window":630}],476:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/windowCount");t.Observable.prototype.windowCount=n.windowCount},{"../../Observable":344,"../../operator/windowCount":631}],477:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/windowTime");t.Observable.prototype.windowTime=n.windowTime},{"../../Observable":344,"../../operator/windowTime":632}],478:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/windowToggle");t.Observable.prototype.windowToggle=n.windowToggle},{"../../Observable":344,"../../operator/windowToggle":633}],479:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/windowWhen");t.Observable.prototype.windowWhen=n.windowWhen},{"../../Observable":344,"../../operator/windowWhen":634}],480:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/withLatestFrom");t.Observable.prototype.withLatestFrom=n.withLatestFrom},{"../../Observable":344,"../../operator/withLatestFrom":635}],481:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/zip");t.Observable.prototype.zip=n.zipProto},{"../../Observable":344,"../../operator/zip":636}],482:[function(e){"use strict";var t=e("../../Observable"),n=e("../../operator/zipAll");t.Observable.prototype.zipAll=n.zipAll},{"../../Observable":344,"../../operator/zipAll":637}],483:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("./ScalarObservable"),i=e("./EmptyObservable"),s=function(e){function t(t,n){e.call(this),this.arrayLike=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){var r=e.length;return 0===r?new i.EmptyObservable:1===r?new o.ScalarObservable(e[0],n):new t(e,n)},t.dispatch=function(e){var t=e.arrayLike,n=e.index,r=e.length,a=e.subscriber;return a.closed?void 0:n>=r?void a.complete():void(a.next(t[n]),e.index=n+1,this.schedule(e))},t.prototype._subscribe=function(e){var n=this,r=n.arrayLike,a=n.scheduler,o=r.length;if(a)return a.schedule(t.dispatch,0,{arrayLike:r,index:0,length:o,subscriber:e});for(var s=0;s<o&&!e.closed;s++)e.next(r[s]);e.complete()},t}(a.Observable);n.ArrayLikeObservable=s},{"../Observable":344,"./EmptyObservable":489,"./ScalarObservable":503}],484:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("./ScalarObservable"),i=e("./EmptyObservable"),s=e("../util/isScheduler"),l=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var a=e.length;return 1<a?new t(e,r):1===a?new o.ScalarObservable(e[0],r):new i.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,a=e.subscriber;return n>=r?void a.complete():void(a.next(t[n]),a.closed||(e.index=n+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.array,r=n.length,a=this.scheduler;if(a)return a.schedule(t.dispatch,0,{array:n,index:0,count:r,subscriber:e});for(var o=0;o<r&&!e.closed;o++)e.next(n[o]);e.complete()},t}(a.Observable);n.ArrayObservable=l},{"../Observable":344,"../util/isScheduler":681,"./EmptyObservable":489,"./ScalarObservable":503}],485:[function(e,t,n){"use strict";function r(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function a(e){var t=e.err,n=e.subject;n.error(t)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),s=e("../util/tryCatch"),l=e("../util/errorObject"),d=e("../AsyncSubject"),c=function(e){function t(t,n,r,a,o){e.call(this),this.callbackFunc=t,this.selector=n,this.args=r,this.context=a,this.scheduler=o}/**
     * Converts a callback API to a function that returns an Observable.
     *
     * <span class="informal">Give it a function `f` of type `f(x, callback)` and
     * it will return a function `g` that when called as `g(x)` will output an
     * Observable.</span>
     *
     * `bindCallback` is not an operator because its input and output are not
     * Observables. The input is a function `func` with some parameters, but the
     * last parameter must be a callback function that `func` calls when it is
     * done.
     *
     * The output of `bindCallback` is a function that takes the same parameters
     * as `func`, except the last one (the callback). When the output function
     * is called with arguments, it will return an Observable. If `func` function
     * calls its callback with one argument, the Observable will emit that value.
     * If on the other hand callback is called with multiple values, resulting
     * Observable will emit an array with these arguments.
     *
     * It is very important to remember, that input function `func` is not called
     * when output function is, but rather when Observable returned by output
     * function is subscribed. This means if `func` makes AJAX request, that request
     * will be made every time someone subscribes to resulting Observable, but not before.
     *
     * Optionally, selector function can be passed to `bindObservable`. That function
     * takes the same arguments as callback, and returns value
     * that will be emitted by Observable instead of callback parameters themselves.
     * Even though by default multiple arguments passed to callback appear in the stream as array,
     * selector function will be called with arguments directly, just as callback would.
     * This means you can imagine default selector (when one is not provided explicitly)
     * as function that aggregates all its arguments into array, or simply returns first argument,
     * if there is only one.
     *
     * Last optional parameter - {@link Scheduler} - can be used to control when call
     * to `func` happens after someone subscribes to Observable, as well as when results
     * passed to callback will be emitted. By default subscription to Observable calls `func`
     * synchronously, but using `Scheduler.async` as last parameter will defer call to input function,
     * just like wrapping that call in `setTimeout` with time `0` would. So if you use async Scheduler
     * and call `subscribe` on output Observable, all function calls that are currently executing,
     * will end before `func` is invoked.
     *
     * When it comes to emitting results passed to callback, by default they are emitted
     * immediately after `func` invokes callback. In particular, if callback is called synchronously,
     * then subscription to resulting Observable will call `next` function synchronously as well.
     * If you want to defer that call, using `Scheduler.async` will, again, do the job.
     * This means that by using `Scheduler.async` you can, in a sense, ensure that `func`
     * always calls its callback asynchronously, thus avoiding terrifying Zalgo.
     *
     * Note that Observable created by output function will always emit only one value
     * and then complete right after. Even if `func` calls callback multiple times, values from
     * second and following calls will never appear in the stream. If you need to
     * listen for multiple calls, you probably want to use {@link fromEvent} or
     * {@link fromEventPattern} instead.
     *
     * If `func` depends on some context (`this` property), that context will be set
     * to the same context that output function has at call time. In particular, if `func`
     * is called as method of some object, in order to preserve proper behaviour,
     * it is recommended to set context of output function to that object as well,
     * provided `func` is not already bound.
     *
     * If input function calls its callback in "node style" (i.e. first argument to callback is
     * optional error parameter signaling whether call failed or not), {@link bindNodeCallback}
     * provides convenient error handling and probably is a better choice.
     * `bindCallback` will treat such functions without any difference and error parameter
     * (whether passed or not) will always be interpreted as regular callback argument.
     *
     *
     * @example <caption>Convert jQuery's getJSON to an Observable API</caption>
     * // Suppose we have jQuery.getJSON('/my/url', callback)
     * var getJSONAsObservable = Rx.Observable.bindCallback(jQuery.getJSON);
     * var result = getJSONAsObservable('/my/url');
     * result.subscribe(x => console.log(x), e => console.error(e));
     *
     *
     * @example <caption>Receive array of arguments passed to callback</caption>
     * someFunction((a, b, c) => {
     *   console.log(a); // 5
     *   console.log(b); // 'some string'
     *   console.log(c); // {someProperty: 'someValue'}
     * });
     *
     * const boundSomeFunction = Rx.Observable.bindCallback(someFunction);
     * boundSomeFunction().subscribe(values => {
     *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]
     * });
     *
     *
     * @example <caption>Use bindCallback with selector function</caption>
     * someFunction((a, b, c) => {
     *   console.log(a); // 'a'
     *   console.log(b); // 'b'
     *   console.log(c); // 'c'
     * });
     *
     * const boundSomeFunction = Rx.Observable.bindCallback(someFunction, (a, b, c) => a + b + c);
     * boundSomeFunction().subscribe(value => {
     *   console.log(value) // 'abc'
     * });
     *
     *
     * @example <caption>Compare behaviour with and without async Scheduler</caption>
     * function iCallMyCallbackSynchronously(cb) {
     *   cb();
     * }
     *
     * const boundSyncFn = Rx.Observable.bindCallback(iCallMyCallbackSynchronously);
     * const boundAsyncFn = Rx.Observable.bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);
     *
     * boundSyncFn().subscribe(() => console.log('I was sync!'));
     * boundAsyncFn().subscribe(() => console.log('I was async!'));
     * console.log('This happened...');
     *
     * // Logs:
     * // I was sync!
     * // This happened...
     * // I was async!
     *
     *
     * @example <caption>Use bindCallback on object method</caption>
     * const boundMethod = Rx.Observable.bindCallback(someObject.methodWithCallback);
     * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject
     * .subscribe(subscriber);
     *
     *
     * @see {@link bindNodeCallback}
     * @see {@link from}
     * @see {@link fromPromise}
     *
     * @param {function} func Function with a callback as the last parameter.
     * @param {function} [selector] A function which takes the arguments from the
     * callback and maps those to a value to emit on the output Observable.
     * @param {Scheduler} [scheduler] The scheduler on which to schedule the
     * callbacks.
     * @return {function(...params: *): Observable} A function which returns the
     * Observable that delivers the same values the callback would deliver.
     * @static true
     * @name bindCallback
     * @owner Observable
     */return o(t,e),t.create=function(e,n,r){return void 0===n&&(n=void 0),function(){for(var a=[],o=0;o<arguments.length;o++)a[o-0]=arguments[o];return new t(e,n,a,this,r)}},t.prototype._subscribe=function(e){var n=this.callbackFunc,r=this.args,a=this.scheduler,o=this.subject;if(!a){if(!o){o=this.subject=new d.AsyncSubject;var i=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=e.source,a=r.selector,o=r.subject;if(a){var i=s.tryCatch(a).apply(this,t);i===l.errorObject?o.error(l.errorObject.e):(o.next(i),o.complete())}else o.next(1>=t.length?t[0]:t),o.complete()};i.source=this;var c=s.tryCatch(n).apply(this.context,r.concat(i));c===l.errorObject&&o.error(l.errorObject.e)}return o.subscribe(e)}return a.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context})},t.dispatch=function(e){var t=this,n=e.source,o=e.subscriber,i=e.context,c=n.callbackFunc,p=n.args,u=n.scheduler,m=n.subject;if(!m){m=n.subject=new d.AsyncSubject;var f=function e(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];var i=e.source,d=i.selector,c=i.subject;if(d){var p=s.tryCatch(d).apply(this,n);p===l.errorObject?t.add(u.schedule(a,0,{err:l.errorObject.e,subject:c})):t.add(u.schedule(r,0,{value:p,subject:c}))}else{var m=1>=n.length?n[0]:n;t.add(u.schedule(r,0,{value:m,subject:c}))}};f.source=n;var y=s.tryCatch(c).apply(i,p.concat(f));y===l.errorObject&&m.error(l.errorObject.e)}t.add(m.subscribe(o))},t}(i.Observable);n.BoundCallbackObservable=c},{"../AsyncSubject":340,"../Observable":344,"../util/errorObject":673,"../util/tryCatch":687}],486:[function(e,t,n){"use strict";function r(e){var t=this,n=e.source,r=e.subscriber,i=e.context,s=n,p=s.callbackFunc,u=s.args,m=s.scheduler,f=n.subject;if(!f){f=n.subject=new c.AsyncSubject;var y=function e(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var i=e.source,s=i.selector,c=i.subject,p=n.shift();if(p)t.add(m.schedule(o,0,{err:p,subject:c}));else if(s){var u=l.tryCatch(s).apply(this,n);u===d.errorObject?t.add(m.schedule(o,0,{err:d.errorObject.e,subject:c})):t.add(m.schedule(a,0,{value:u,subject:c}))}else{var f=1>=n.length?n[0]:n;t.add(m.schedule(a,0,{value:f,subject:c}))}};y.source=n;var g=l.tryCatch(p).apply(i,u.concat(y));g===d.errorObject&&t.add(m.schedule(o,0,{err:d.errorObject.e,subject:f}))}t.add(f.subscribe(r))}function a(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function o(e){var t=e.err,n=e.subject;n.error(t)}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=e("../Observable"),l=e("../util/tryCatch"),d=e("../util/errorObject"),c=e("../AsyncSubject"),p=function(e){function t(t,n,r,a,o){e.call(this),this.callbackFunc=t,this.selector=n,this.args=r,this.context=a,this.scheduler=o}return i(t,e),t.create=function(e,n,r){return void 0===n&&(n=void 0),function(){for(var a=[],o=0;o<arguments.length;o++)a[o-0]=arguments[o];return new t(e,n,a,this,r)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,n=this.args,a=this.scheduler,o=this.subject;if(!a){if(!o){o=this.subject=new c.AsyncSubject;var i=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=e.source,a=r.selector,o=r.subject,i=t.shift();if(i)o.error(i);else if(a){var s=l.tryCatch(a).apply(this,t);s===d.errorObject?o.error(d.errorObject.e):(o.next(s),o.complete())}else o.next(1>=t.length?t[0]:t),o.complete()};i.source=this;var s=l.tryCatch(t).apply(this.context,n.concat(i));s===d.errorObject&&o.error(d.errorObject.e)}return o.subscribe(e)}return a.schedule(r,0,{source:this,subscriber:e,context:this.context})},t}(s.Observable);n.BoundNodeCallbackObservable=p},{"../AsyncSubject":340,"../Observable":344,"../util/errorObject":673,"../util/tryCatch":687}],487:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../Observable"),i=e("../Subscriber"),s=e("../Subscription"),l=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new p(this))},t}(o.Observable);n.ConnectableObservable=l;var d=l.prototype;n.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:d._subscribe},_isComplete:{value:d._isComplete,writable:!0},getSubject:{value:d.getSubject},connect:{value:d.connect},refCount:{value:d.refCount}};var c=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(a.SubjectSubscriber),p=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),a=t.subscribe(r);return r.closed||(r.connection=n.connect()),a},e}(),u=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(0>=t)return void(this.connection=null);if(e._refCount=t-1,1<t)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()},t}(i.Subscriber)},{"../Observable":344,"../Subject":350,"../Subscriber":352,"../Subscription":353}],488:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../util/subscribeToResult"),i=e("../OuterSubscriber"),s=function(e){function t(t){e.call(this),this.observableFactory=t}return r(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new l(e,this.observableFactory)},t}(a.Observable);n.DeferObservable=s;var l=function(e){function t(t,n){e.call(this,t),this.factory=n,this.tryDefer()}return r(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},t}(i.OuterSubscriber)},{"../Observable":344,"../OuterSubscriber":346,"../util/subscribeToResult":685}],489:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(a.Observable);n.EmptyObservable=o},{"../Observable":344}],490:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=function(e){function t(t,n){e.call(this),this.error=t,this.scheduler=n}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.error,n=e.subscriber;n.error(t)},t.prototype._subscribe=function(e){var n=this.error,r=this.scheduler;return e.syncErrorThrowable=!0,r?r.schedule(t.dispatch,0,{error:n,subscriber:e}):void e.error(n)},t}(a.Observable);n.ErrorObservable=o},{"../Observable":344}],491:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("./EmptyObservable"),i=e("../util/isArray"),s=e("../util/subscribeToResult"),l=e("../OuterSubscriber"),d=function(e){function t(t,n){e.call(this),this.sources=t,this.resultSelector=n}return r(t,e),t.create=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(null===e||0===arguments.length)return new o.EmptyObservable;var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0]),0===e.length?new o.EmptyObservable:new t(e,r)},t.prototype._subscribe=function(e){return new c(e,this.sources,this.resultSelector)},t}(a.Observable);n.ForkJoinObservable=d;var c=function(e){function t(t,n,r){e.call(this,t),this.sources=n,this.resultSelector=r,this.completed=0,this.haveValues=0;var a=n.length;this.total=a,this.values=Array(a);for(var o=0;o<a;o++){var i=n[o],l=s.subscribeToResult(this,i,null,o);l&&(l.outerIndex=o,this.add(l))}}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.values[n]=t,a._hasValue||(a._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this,r=n.haveValues,a=n.resultSelector,o=n.values,i=o.length;if(!e._hasValue)return void t.complete();if(this.completed++,this.completed===i){if(r===i){var s=a?a.apply(this,o):o;t.next(s)}t.complete()}},t}(l.OuterSubscriber)},{"../Observable":344,"../OuterSubscriber":346,"../util/isArray":674,"../util/subscribeToResult":685,"./EmptyObservable":489}],492:[function(e,t,n){"use strict";function r(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function a(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function o(e){return!!e&&"[object NodeList]"===f.call(e)}function s(e){return!!e&&"[object HTMLCollection]"===f.call(e)}function l(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},d=e("../Observable"),c=e("../util/tryCatch"),p=e("../util/isFunction"),u=e("../util/errorObject"),m=e("../Subscription"),f=Object.prototype.toString,y=function(e){function t(t,n,r,a){e.call(this),this.sourceObj=t,this.eventName=n,this.selector=r,this.options=a}return i(t,e),t.create=function(e,n,r,a){return p.isFunction(r)&&(a=r,r=void 0),new t(e,n,a,r)},t.setupSubscription=function(e,n,d,c,p){var u;if(o(e)||s(e))for(var f=0,i=e.length;f<i;f++)t.setupSubscription(e[f],n,d,c,p);else if(l(e)){e.addEventListener(n,d,p),u=function(){return e.removeEventListener(n,d)}}else if(a(e)){e.on(n,d),u=function(){return e.off(n,d)}}else if(r(e)){e.addListener(n,d),u=function(){return e.removeListener(n,d)}}else throw new TypeError("Invalid event target");c.add(new m.Subscription(u))},t.prototype._subscribe=function(n){var e=this.sourceObj,r=this.eventName,a=this.options,o=this.selector,i=o?function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=c.tryCatch(o).apply(void 0,e);r===u.errorObject?n.error(u.errorObject.e):n.next(r)}:function(t){return n.next(t)};t.setupSubscription(e,r,i,n,a)},t}(d.Observable);n.FromEventObservable=y},{"../Observable":344,"../Subscription":353,"../util/errorObject":673,"../util/isFunction":677,"../util/tryCatch":687}],493:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isFunction"),o=e("../Observable"),i=e("../Subscription"),s=function(e){function t(t,n,r){e.call(this),this.addHandler=t,this.removeHandler=n,this.selector=r}return r(t,e),t.create=function(e,n,r){return new t(e,n,r)},t.prototype._subscribe=function(t){var e=this,n=this.removeHandler,r=this.selector?function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];e._callSelector(t,n)}:function(n){t.next(n)},o=this._callAddHandler(r,t);a.isFunction(n)&&t.add(new i.Subscription(function(){n(r,o)}))},t.prototype._callSelector=function(t,e){try{var n=this.selector.apply(this,e);t.next(n)}catch(n){t.error(n)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(n){t.error(n)}},t}(o.Observable);n.FromEventPatternObservable=s},{"../Observable":344,"../Subscription":353,"../util/isFunction":677}],494:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isArray"),o=e("../util/isArrayLike"),i=e("../util/isPromise"),s=e("./PromiseObservable"),l=e("./IteratorObservable"),d=e("./ArrayObservable"),c=e("./ArrayLikeObservable"),p=e("../symbol/iterator"),u=e("../Observable"),m=e("../operator/observeOn"),f=e("../symbol/observable"),y=function(e){function t(t,n){e.call(this,null),this.ish=t,this.scheduler=n}return r(t,e),t.create=function(e,n){if(null!=e){if("function"==typeof e[f.observable])return e instanceof u.Observable&&!n?e:new t(e,n);if(a.isArray(e))return new d.ArrayObservable(e,n);if(i.isPromise(e))return new s.PromiseObservable(e,n);if("function"==typeof e[p.iterator]||"string"==typeof e)return new l.IteratorObservable(e,n);if(o.isArrayLike(e))return new c.ArrayLikeObservable(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,n=this.scheduler;return null==n?t[f.observable]().subscribe(e):t[f.observable]().subscribe(new m.ObserveOnSubscriber(e,n,0))},t}(u.Observable);n.FromObservable=y},{"../Observable":344,"../operator/observeOn":587,"../symbol/iterator":652,"../symbol/observable":653,"../util/isArray":674,"../util/isArrayLike":675,"../util/isPromise":680,"./ArrayLikeObservable":483,"./ArrayObservable":484,"./IteratorObservable":498,"./PromiseObservable":501}],495:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../util/isScheduler"),i=function(e){return e},s=function(e){function t(t,n,r,a,o){e.call(this),this.initialState=t,this.condition=n,this.iterate=r,this.resultSelector=a,this.scheduler=o}return r(t,e),t.create=function(e,n,r,a,s){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||i,e.scheduler):void 0===a||o.isScheduler(a)?new t(e,n,r,i,a):new t(e,n,r,a,s)},t.prototype._subscribe=function(e){var n=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:n});var r=this,a=r.condition,o=r.resultSelector,i=r.iterate;do{if(a){var s=void 0;try{s=a(n)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var l=void 0;try{l=o(n)}catch(t){return void e.error(t)}if(e.next(l),e.closed)break;try{n=i(n)}catch(t){return void e.error(t)}}while(!0)},t.dispatch=function(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var a;try{a=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed)return t.next(a),t.closed?void 0:this.schedule(e)}},t}(a.Observable);n.GenerateObservable=s},{"../Observable":344,"../util/isScheduler":681}],496:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../util/subscribeToResult"),i=e("../OuterSubscriber"),s=function(e){function t(t,n,r){e.call(this),this.condition=t,this.thenSource=n,this.elseSource=r}return r(t,e),t.create=function(e,n,r){return new t(e,n,r)},t.prototype._subscribe=function(e){var t=this,n=t.condition,r=t.thenSource,a=t.elseSource;return new l(e,n,r,a)},t}(a.Observable);n.IfObservable=s;var l=function(e){function t(t,n,r,a){e.call(this,t),this.condition=n,this.thenSource=r,this.elseSource=a,this.tryIf()}return r(t,e),t.prototype.tryIf=function(){var e=this,t=e.condition,n=e.thenSource,r=e.elseSource,a;try{a=t();var i=a?n:r;i?this.add(o.subscribeToResult(this,i)):this._complete()}catch(e){this._error(e)}},t}(i.OuterSubscriber)},{"../Observable":344,"../OuterSubscriber":346,"../util/subscribeToResult":685}],497:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isNumeric"),o=e("../Observable"),i=e("../scheduler/async"),s=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=i.async),e.call(this),this.period=t,this.scheduler=n,(!a.isNumeric(t)||0>t)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=i.async)}return r(t,e),t.create=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=i.async),new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.subscriber,r=e.period;n.next(t),n.closed||(e.index+=1,this.schedule(e,r))},t.prototype._subscribe=function(e){var n=this.period,r=this.scheduler;e.add(r.schedule(t.dispatch,n,{index:0,subscriber:e,period:n}))},t}(o.Observable);n.IntervalObservable=s},{"../Observable":344,"../scheduler/async":650,"../util/isNumeric":678}],498:[function(e,t,n){"use strict";function r(e){var t=e[c.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new m(e);if(!t)throw new TypeError("object is not iterable");return e[c.iterator]()}function a(e){var t=+e.length;return isNaN(t)?0:0!=t&&i(t)?(t=s(t)*Math.floor(Math.abs(t)),0>=t?0:t>f?f:t):t}function i(e){return"number"==typeof e&&l.root.isFinite(e)}function s(e){var t=+e;return 0==t?t:isNaN(t)?t:0>t?-1:1}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},l=e("../util/root"),d=e("../Observable"),c=e("../symbol/iterator"),p=function(e){function t(t,n){if(e.call(this),this.scheduler=n,null==t)throw new Error("iterator cannot be null.");this.iterator=r(t)}return o(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.hasError,r=e.iterator,a=e.subscriber;if(n)return void a.error(e.error);var o=r.next();return o.done?void a.complete():(a.next(o.value),e.index=t+1,a.closed?void("function"==typeof r.return&&r.return()):void this.schedule(e))},t.prototype._subscribe=function(e){var n=this,r=n.iterator,a=n.scheduler;if(a)return a.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});do{var o=r.next();if(o.done){e.complete();break}else e.next(o.value);if(e.closed){"function"==typeof r.return&&r.return();break}}while(!0)},t}(d.Observable);n.IteratorObservable=p;var u=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.str=e,this.idx=t,this.len=n}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),m=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=a(e)),this.arr=e,this.idx=t,this.len=n}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),f=9007199254740991},{"../Observable":344,"../symbol/iterator":652,"../util/root":684}],499:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../util/noop"),i=function(e){function t(){e.call(this)}return r(t,e),t.create=function(){return new t},t.prototype._subscribe=function(){o.noop()},t}(a.Observable);n.NeverObservable=i},{"../Observable":344,"../util/noop":682}],500:[function(e,t,n){"use strict";function r(e){var t=e.obj,n=e.keys,r=e.length,a=e.index,o=e.subscriber;if(a===r)return void o.complete();var i=n[a];o.next([i,t[i]]),e.index=a+1,this.schedule(e)}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Observable"),i=function(e){function t(t,n){e.call(this),this.obj=t,this.scheduler=n,this.keys=Object.keys(t)}return a(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=t.keys,a=t.scheduler,o=n.length;if(a)return a.schedule(r,0,{obj:this.obj,keys:n,length:o,index:0,subscriber:e});for(var i=0,s;i<o;i++)s=n[i],e.next([s,this.obj[s]]);e.complete()},t}(o.Observable);n.PairsObservable=i},{"../Observable":344}],501:[function(e,t,n){"use strict";function r(e){var t=e.value,n=e.subscriber;n.closed||(n.next(t),n.complete())}function a(e){var t=e.err,n=e.subscriber;n.closed||n.error(t)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/root"),s=e("../Observable"),l=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return o(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,o=this.scheduler;if(null==o)this._isScalar?!e.closed&&(e.next(this.value),e.complete()):n.then(function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){i.root.setTimeout(function(){throw e})});else if(!this._isScalar)n.then(function(n){t.value=n,t._isScalar=!0,e.closed||e.add(o.schedule(r,0,{value:n,subscriber:e}))},function(t){e.closed||e.add(o.schedule(a,0,{err:t,subscriber:e}))}).then(null,function(e){i.root.setTimeout(function(){throw e})});else if(!e.closed)return o.schedule(r,0,{value:this.value,subscriber:e})},t}(s.Observable);n.PromiseObservable=l},{"../Observable":344,"../util/root":684}],502:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=function(e){function t(t,n,r){e.call(this),this.start=t,this._count=n,this.scheduler=r}return r(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),void 0===n&&(n=0),new t(e,n,r)},t.dispatch=function(e){var t=e.start,n=e.index,r=e.count,a=e.subscriber;return n>=r?void a.complete():void(a.next(t),a.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=0,r=this.start,a=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:n,count:a,start:r,subscriber:e});do{if(n++>=a){e.complete();break}if(e.next(r++),e.closed)break}while(!0)},t}(a.Observable);n.RangeObservable=o},{"../Observable":344}],503:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():void(r.next(n),r.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):void(e.next(n),e.closed||e.complete())},t}(a.Observable);n.ScalarObservable=o},{"../Observable":344}],504:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../scheduler/asap"),i=e("../util/isNumeric"),s=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=o.asap),e.call(this),this.source=t,this.delayTime=n,this.scheduler=r,(!i.isNumeric(n)||0>n)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=o.asap)}return r(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=o.asap),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source,a=this.scheduler;return a.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(a.Observable);n.SubscribeOnObservable=s},{"../Observable":344,"../scheduler/asap":649,"../util/isNumeric":678}],505:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isNumeric"),o=e("../Observable"),i=e("../scheduler/async"),s=e("../util/isScheduler"),l=e("../util/isDate"),d=function(e){function t(t,n,r){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,a.isNumeric(n)?this.period=1>+n&&1||+n:s.isScheduler(n)&&(r=n),s.isScheduler(r)||(r=i.async),this.scheduler=r,this.dueTime=l.isDate(t)?+t-this.scheduler.now():t}return r(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),new t(e,n,r)},t.dispatch=function(e){var t=e.index,n=e.period,r=e.subscriber,a=this;if(r.next(t),!r.closed)return-1===n?r.complete():void(e.index=t+1,a.schedule(e,n))},t.prototype._subscribe=function(e){var n=this,r=n.period,a=n.dueTime,o=n.scheduler;return o.schedule(t.dispatch,a,{index:0,period:r,subscriber:e})},t}(o.Observable);n.TimerObservable=d},{"../Observable":344,"../scheduler/async":650,"../util/isDate":676,"../util/isNumeric":678,"../util/isScheduler":681}],506:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../util/subscribeToResult"),i=e("../OuterSubscriber"),s=function(e){function t(t,n){e.call(this),this.resourceFactory=t,this.observableFactory=n}return r(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=t.resourceFactory,r=t.observableFactory,a;try{return a=n(),new l(e,a,r)}catch(t){e.error(t)}},t}(a.Observable);n.UsingObservable=s;var l=function(e){function t(t,n,r){e.call(this,t),this.resource=n,this.observableFactory=r,t.add(n),this.tryUse()}return r(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(o.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(i.OuterSubscriber)},{"../Observable":344,"../OuterSubscriber":346,"../util/subscribeToResult":685}],507:[function(e,t,n){"use strict";var r=e("./BoundCallbackObservable");n.bindCallback=r.BoundCallbackObservable.create},{"./BoundCallbackObservable":485}],508:[function(e,t,n){"use strict";var r=e("./BoundNodeCallbackObservable");n.bindNodeCallback=r.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":486}],509:[function(e,t,n){"use strict";var r=e("../util/isScheduler"),a=e("../util/isArray"),o=e("./ArrayObservable"),i=e("../operator/combineLatest");n.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,s=null;return r.isScheduler(e[e.length-1])&&(s=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),new o.ArrayObservable(e,s).lift(new i.CombineLatestOperator(n))}},{"../operator/combineLatest":545,"../util/isArray":674,"../util/isScheduler":681,"./ArrayObservable":484}],510:[function(e,t,n){"use strict";var r=e("../operator/concat");n.concat=r.concatStatic},{"../operator/concat":546}],511:[function(e,t,n){"use strict";var r=e("./DeferObservable");n.defer=r.DeferObservable.create},{"./DeferObservable":488}],512:[function(e,t,n){"use strict";function r(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;if(!!u.root.XDomainRequest)return new u.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function a(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;var e;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;3>n;n++)try{if(e=t[n],new u.root.ActiveXObject(e))break}catch(t){}return new u.root.ActiveXObject(e)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}function o(e,t){return void 0===t&&(t=null),new b({method:"GET",url:e,headers:t})}function i(e,t,n){return new b({method:"POST",url:e,body:t,headers:n})}function s(e,t){return new b({method:"DELETE",url:e,headers:t})}function l(e,t,n){return new b({method:"PUT",url:e,body:t,headers:n})}function d(e,t,n){return new b({method:"PATCH",url:e,body:t,headers:n})}function c(e,t){return new b({method:"GET",url:e,responseType:"json",headers:t}).lift(new h.MapOperator(function(e){return e.response},null))}var p=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},u=e("../../util/root"),m=e("../../util/tryCatch"),f=e("../../util/errorObject"),y=e("../../Observable"),g=e("../../Subscriber"),h=e("../../operator/map");n.ajaxGet=o;n.ajaxPost=i;n.ajaxDelete=s;n.ajaxPut=l;n.ajaxPatch=d;n.ajaxGetJSON=c;var b=function(e){function t(t){e.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?r.call(this):a()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)n.url=t;else for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);this.request=n}return p(t,e),t.prototype._subscribe=function(e){return new _(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=o,e.post=i,e.delete=s,e.put=l,e.patch=d,e.getJSON=c,e}(),t}(y.Observable);n.AjaxObservable=b;var _=function(e){function t(t,n){e.call(this,t),this.request=n,this.done=!1;var r=n.headers=n.headers||{};n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||u.root.FormData&&n.body instanceof u.root.FormData||"undefined"==typeof n.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return p(t,e),t.prototype.next=function(t){this.done=!0;var e=this,n=e.xhr,r=e.request,a=e.destination,o=new x(t,n,r);a.next(o)},t.prototype.send=function(){var e=this,t=e.request,n=e.request,r=n.user,a=n.method,o=n.url,i=n.async,s=n.password,l=n.headers,d=n.body,c=t.createXHR,p=m.tryCatch(c).call(t);if(p===f.errorObject)this.error(f.errorObject.e);else{this.xhr=p,this.setupEvents(p,t);var u;if(u=r?m.tryCatch(p.open).call(p,a,o,i,r,s):m.tryCatch(p.open).call(p,a,o,i),u===f.errorObject)return this.error(f.errorObject.e),null;if(i&&(p.timeout=t.timeout,p.responseType=t.responseType),"withCredentials"in p&&(p.withCredentials=!!t.withCredentials),this.setHeaders(p,l),u=d?m.tryCatch(p.send).call(p,d):m.tryCatch(p.send).call(p),u===f.errorObject)return this.error(f.errorObject.e),null}return p},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(u.root.FormData&&e instanceof u.root.FormData)return e;if(t){var n=t.indexOf(";");-1!==n&&(t=t.substring(0,n))}return"application/x-www-form-urlencoded"===t?Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&"):"application/json"===t?JSON.stringify(e):e},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.setupEvents=function(e,t){function n(t){var e=n,r=e.subscriber,a=e.progressSubscriber,o=e.request;a&&a.error(t),r.error(new S(this,o))}function r(t){var e=r,n=e.subscriber,a=e.progressSubscriber,o=e.request;if(4===this.readyState){var i=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=s?200:0),200<=i&&300>i?(a&&a.complete(),n.next(t),n.complete()):(a&&a.error(t),n.error(new v("ajax error "+i,this,o)))}}var a=t.progressSubscriber;if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=a,e.upload&&"withCredentials"in e){if(a){var o;o=function(t){var e=o.progressSubscriber;e.next(t)},u.root.XDomainRequest?e.onprogress=o:e.upload.onprogress=o,o.progressSubscriber=a}var i;i=function(t){var e=i,n=e.progressSubscriber,r=e.subscriber,a=e.request;n&&n.error(t),r.error(new v("ajax error",this,a))},e.onerror=i,i.request=t,i.subscriber=this,i.progressSubscriber=a}e.onreadystatechange=r,r.subscriber=this,r.progressSubscriber=a,r.request=t},t.prototype.unsubscribe=function(){var t=this,n=t.done,r=t.xhr;!n&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(g.Subscriber);n.AjaxSubscriber=_;var x=function(){return function(e,t,n){switch(this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.responseType){case"json":this.response="response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText;}}}();n.AjaxResponse=x;var v=function(e){function t(t,n,r){e.call(this,t),this.message=t,this.xhr=n,this.request=r,this.status=n.status}return p(t,e),t}(Error);n.AjaxError=v;var S=function(e){function t(t,n){e.call(this,"ajax timeout",t,n)}return p(t,e),t}(v);n.AjaxTimeoutError=S},{"../../Observable":344,"../../Subscriber":352,"../../operator/map":576,"../../util/errorObject":673,"../../util/root":684,"../../util/tryCatch":687}],513:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../../Subject"),o=e("../../Subscriber"),i=e("../../Observable"),s=e("../../Subscription"),l=e("../../util/root"),d=e("../../ReplaySubject"),c=e("../../util/tryCatch"),p=e("../../util/errorObject"),u=e("../../util/assign"),m=function(e){function t(t,n){if(t instanceof i.Observable)e.call(this,n,t);else{if(e.call(this),this.WebSocketCtor=l.root.WebSocket,this._output=new a.Subject,"string"==typeof t?this.url=t:u.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new d.ReplaySubject}}return r(t,e),t.prototype.resultSelector=function(t){return JSON.parse(t.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var n=new t(this,this.destination);return n.operator=e,n},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new d.ReplaySubject),this._output=new a.Subject},t.prototype.multiplex=function(e,t,n){var r=this;return new i.Observable(function(a){var o=c.tryCatch(e)();o===p.errorObject?a.error(p.errorObject.e):r.next(o);var i=r.subscribe(function(e){var t=c.tryCatch(n)(e);t===p.errorObject?a.error(p.errorObject.e):t&&a.next(e)},function(e){return a.error(e)},function(){return a.complete()});return function(){var e=c.tryCatch(t)();e===p.errorObject?a.error(p.errorObject.e):r.next(e),i.unsubscribe()}})},t.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,n=this._output,r=null;try{r=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=r,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(t){return void n.error(t)}var a=new s.Subscription(function(){t.socket=null,r&&1===r.readyState&&r.close()});r.onopen=function(i){var e=t.openObserver;e&&e.next(i);var s=t.destination;t.destination=o.Subscriber.create(function(e){return 1===r.readyState&&r.send(e)},function(a){var e=t.closingObserver;e&&e.next(void 0),a&&a.code?r.close(a.code,a.reason):n.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var e=t.closingObserver;e&&e.next(void 0),r.close(),t._resetState()}),s&&s instanceof d.ReplaySubject&&a.add(s.subscribe(t.destination))},r.onerror=function(r){t._resetState(),n.error(r)},r.onclose=function(r){t._resetState();var e=t.closeObserver;e&&e.next(r),r.wasClean?n.complete():n.error(r)},r.onmessage=function(r){var e=c.tryCatch(t.resultSelector)(r);e===p.errorObject?n.error(p.errorObject.e):n.next(e)}},t.prototype._subscribe=function(e){var t=this,n=this.source;if(n)return n.subscribe(e);this.socket||this._connectSocket();var r=new s.Subscription;return r.add(this._output.subscribe(e)),r.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),r},t.prototype.unsubscribe=function(){var t=this,n=t.source,r=t.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),n||(this.destination=new d.ReplaySubject)},t}(a.AnonymousSubject);n.WebSocketSubject=m},{"../../Observable":344,"../../ReplaySubject":347,"../../Subject":350,"../../Subscriber":352,"../../Subscription":353,"../../util/assign":672,"../../util/errorObject":673,"../../util/root":684,"../../util/tryCatch":687}],514:[function(e,t,n){"use strict";var r=e("./AjaxObservable");n.ajax=r.AjaxObservable.create},{"./AjaxObservable":512}],515:[function(e,t,n){"use strict";var r=e("./WebSocketSubject");n.webSocket=r.WebSocketSubject.create},{"./WebSocketSubject":513}],516:[function(e,t,n){"use strict";var r=e("./EmptyObservable");n.empty=r.EmptyObservable.create},{"./EmptyObservable":489}],517:[function(e,t,n){"use strict";var r=e("./ForkJoinObservable");n.forkJoin=r.ForkJoinObservable.create},{"./ForkJoinObservable":491}],518:[function(e,t,n){"use strict";var r=e("./FromObservable");n.from=r.FromObservable.create},{"./FromObservable":494}],519:[function(e,t,n){"use strict";var r=e("./FromEventObservable");n.fromEvent=r.FromEventObservable.create},{"./FromEventObservable":492}],520:[function(e,t,n){"use strict";var r=e("./FromEventPatternObservable");n.fromEventPattern=r.FromEventPatternObservable.create},{"./FromEventPatternObservable":493}],521:[function(e,t,n){"use strict";var r=e("./PromiseObservable");n.fromPromise=r.PromiseObservable.create},{"./PromiseObservable":501}],522:[function(e,t,n){"use strict";var r=e("./GenerateObservable");n.generate=r.GenerateObservable.create},{"./GenerateObservable":495}],523:[function(e,t,n){"use strict";var r=e("./IfObservable");n._if=r.IfObservable.create},{"./IfObservable":496}],524:[function(e,t,n){"use strict";var r=e("./IntervalObservable");n.interval=r.IntervalObservable.create},{"./IntervalObservable":497}],525:[function(e,t,n){"use strict";var r=e("../operator/merge");n.merge=r.mergeStatic},{"../operator/merge":580}],526:[function(e,t,n){"use strict";var r=e("./NeverObservable");n.never=r.NeverObservable.create},{"./NeverObservable":499}],527:[function(e,t,n){"use strict";var r=e("./ArrayObservable");n.of=r.ArrayObservable.of},{"./ArrayObservable":484}],528:[function(e,t,n){"use strict";var r=e("../operator/onErrorResumeNext");n.onErrorResumeNext=r.onErrorResumeNextStatic},{"../operator/onErrorResumeNext":588}],529:[function(e,t,n){"use strict";var r=e("./PairsObservable");n.pairs=r.PairsObservable.create},{"./PairsObservable":500}],530:[function(e,t,n){"use strict";var r=e("../operator/race");n.race=r.raceStatic},{"../operator/race":596}],531:[function(e,t,n){"use strict";var r=e("./RangeObservable");n.range=r.RangeObservable.create},{"./RangeObservable":502}],532:[function(e,t,n){"use strict";var r=e("./ErrorObservable");n._throw=r.ErrorObservable.create},{"./ErrorObservable":490}],533:[function(e,t,n){"use strict";var r=e("./TimerObservable");n.timer=r.TimerObservable.create},{"./TimerObservable":505}],534:[function(e,t,n){"use strict";var r=e("./UsingObservable");n.using=r.UsingObservable.create},{"./UsingObservable":506}],535:[function(e,t,n){"use strict";var r=e("../operator/zip");n.zip=r.zipStatic},{"../operator/zip":636}],536:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/tryCatch"),o=e("../util/errorObject"),i=e("../OuterSubscriber"),s=e("../util/subscribeToResult");n.audit=function(e){return this.lift(new l(e))};var l=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.durationSelector))},e}(),d=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1}return r(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=a.tryCatch(this.durationSelector)(e);if(t===o.errorObject)this.destination.error(o.errorObject.e);else{var n=s.subscribeToResult(this,t);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i.OuterSubscriber)},{"../OuterSubscriber":346,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],537:[function(e,t,n){"use strict";function r(e){e.clearThrottle()}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../scheduler/async"),i=e("../Subscriber");n.auditTime=function(e,t){return void 0===t&&(t=o.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.duration,this.scheduler))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.duration=n,this.scheduler=r,this.hasValue=!1}return a(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(r,this.duration,this))},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t}(i.Subscriber)},{"../Subscriber":352,"../scheduler/async":650}],538:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.buffer=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.closingNotifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.buffer=[],this.add(o.subscribeToResult(this,n))}return r(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],539:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.bufferCount=function(e,t){return void 0===t&&(t=null),this.lift(new o(e,t))};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:i}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),i=function(e){function t(t,n){e.call(this,t),this.bufferSize=n,this.buffer=[]}return r(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),e.prototype._complete.call(this)},t}(a.Subscriber),s=function(e){function t(t,n,r){e.call(this,t),this.bufferSize=n,this.startBufferEvery=r,this.buffers=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,a=t.buffers,o=t.count;this.count++,0==o%r&&a.push([]);for(var s=a.length,i;s--;)i=a[s],i.push(e),i.length===n&&(a.splice(s,1),this.destination.next(i))},t.prototype._complete=function(){for(var t=this,n=t.buffers,r=t.destination,a;0<n.length;)a=n.shift(),0<a.length&&r.next(a);e.prototype._complete.call(this)},t}(a.Subscriber)},{"../Subscriber":352}],540:[function(e,t,n){"use strict";function r(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function a(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,a=e.scheduler,i=r.openContext(),s=this;r.closed||(r.add(i.closeAction=a.schedule(o,n,{subscriber:r,context:i})),s.schedule(e,t))}function o(e){var t=e.subscriber,n=e.context;t.closeContext(n)}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=e("../scheduler/async"),l=e("../Subscriber"),d=e("../util/isScheduler");n.bufferTime=function(e){var t=arguments.length,n=s.async;d.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;2<=t&&(r=arguments[1]);var a=Number.POSITIVE_INFINITY;return 3<=t&&(a=arguments[2]),this.lift(new c(e,r,a,n))};var c=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),p=function(){return function(){this.buffer=[]}}(),u=function(e){function t(t,n,i,s,l){e.call(this,t),this.bufferTimeSpan=n,this.bufferCreationInterval=i,this.maxBufferSize=s,this.scheduler=l,this.contexts=[];var d=this.openContext();if(this.timespanOnly=null==i||0>i,this.timespanOnly){var c={subscriber:this,context:d,bufferTimeSpan:n};this.add(d.closeAction=l.schedule(r,n,c))}else{var p={subscriber:this,context:d},u={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:this,scheduler:l};this.add(d.closeAction=l.schedule(o,n,p)),this.add(l.schedule(a,i,u))}}return i(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0,a;r<n;r++){var o=t[r],i=o.buffer;i.push(e),i.length==this.maxBufferSize&&(a=o)}a&&this.onBufferFull(a)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this,n=t.contexts,r=t.destination,a;0<n.length;)a=n.shift(),r.next(a.buffer);e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,a={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(r,n,a))}},t.prototype.openContext=function(){var e=new p;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts,n=t?t.indexOf(e):-1;0<=n&&t.splice(t.indexOf(e),1)},t}(l.Subscriber)},{"../Subscriber":352,"../scheduler/async":650,"../util/isScheduler":681}],541:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscription"),o=e("../util/subscribeToResult"),i=e("../OuterSubscriber");n.bufferToggle=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.openings,this.closingSelector))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(o.subscribeToResult(this,n))}return r(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts,r;0<n.length;)r=n.shift(),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null;this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n;0<t.length;)n=t.shift(),this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null;this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector,n=t.call(this,e);n&&this.trySubscribe(n)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new a.Subscription,r={buffer:[],subscription:n};t.push(r);var i=o.subscribeToResult(this,e,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},t}(i.OuterSubscriber)},{"../OuterSubscriber":346,"../Subscription":353,"../util/subscribeToResult":685}],542:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscription"),o=e("../util/tryCatch"),i=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.bufferWhen=function(e){return this.lift(new d(e))};var d=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(e){function t(t,n){e.call(this,t),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return r(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var n=o.tryCatch(this.closingSelector)();n===i.errorObject?this.error(i.errorObject.e):(e=new a.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(l.subscribeToResult(this,n)),this.subscribing=!1)},t}(s.OuterSubscriber)},{"../OuterSubscriber":346,"../Subscription":353,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],543:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n._catch=function(e){var t=new i(e),n=this.lift(t);return t.caught=n};var i=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.selector,this.caught))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.selector=n,this.caught=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var n;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,n))}},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],544:[function(e,t,n){"use strict";var r=e("./combineLatest");n.combineAll=function(e){return this.lift(new r.CombineLatestOperator(e))}},{"./combineLatest":545}],545:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../observable/ArrayObservable"),o=e("../util/isArray"),i=e("../OuterSubscriber"),s=e("../util/subscribeToResult"),l={};n.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new a.ArrayObservable(e),new d(n))};var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project))},e}();n.CombineLatestOperator=d;var c=function(e){function t(t,n){e.call(this,t),this.project=n,this.active=0,this.values=[],this.observables=[]}return r(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0,r;n<t;n++)r=e[n],this.add(s.subscribeToResult(this,r,r,n))}},t.prototype.notifyComplete=function(){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,a=r[n],o=this.toRespond?a===l?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.project?this._tryProject(r):this.destination.next(r.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber);n.CombineLatestSubscriber=c},{"../OuterSubscriber":346,"../observable/ArrayObservable":484,"../util/isArray":674,"../util/subscribeToResult":685}],546:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return o.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof a.Observable?e[0]:new i.ArrayObservable(e,n).lift(new s.MergeAllOperator(1))}var a=e("../Observable"),o=e("../util/isScheduler"),i=e("../observable/ArrayObservable"),s=e("./mergeAll");n.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},n.concatStatic=r},{"../Observable":344,"../observable/ArrayObservable":484,"../util/isScheduler":681,"./mergeAll":581}],547:[function(e,t,n){"use strict";var r=e("./mergeAll");n.concatAll=function(){return this.lift(new r.MergeAllOperator(1))}},{"./mergeAll":581}],548:[function(e,t,n){"use strict";var r=e("./mergeMap");n.concatMap=function(e,t){return this.lift(new r.MergeMapOperator(e,t,1))}},{"./mergeMap":582}],549:[function(e,t,n){"use strict";var r=e("./mergeMapTo");n.concatMapTo=function(e,t){return this.lift(new r.MergeMapToOperator(e,t,1))}},{"./mergeMapTo":583}],550:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.count=function(e){return this.lift(new o(e,this))};var o=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate,this.source))},e}(),i=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.source=r,this.count=0,this.index=0}return r(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":352}],551:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.debounce=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector))},e}(),s=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return r(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=o.subscribeToResult(this,t),n.closed||this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],552:[function(e,t,n){"use strict";function r(e){e.debouncedNext()}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subscriber"),i=e("../scheduler/async");n.debounceTime=function(e,t){return void 0===t&&(t=i.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.dueTime,this.scheduler))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(r,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(o.Subscriber)},{"../Subscriber":352,"../scheduler/async":650}],553:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.defaultIfEmpty=function(e){return void 0===e&&(e=null),this.lift(new o(e))};var o=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.defaultValue))},e}(),i=function(e){function t(t,n){e.call(this,t),this.defaultValue=n,this.isEmpty=!0}return r(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":352}],554:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../scheduler/async"),o=e("../util/isDate"),i=e("../Subscriber"),s=e("../Notification");/**
 * Delays the emission of items from the source Observable by a given timeout or
 * until a given Date.
 *
 * <span class="informal">Time shifts each item by some specified amount of
 * milliseconds.</span>
 *
 * <img src="./img/delay.png" width="100%">
 *
 * If the delay argument is a Number, this operator time shifts the source
 * Observable by that amount of time expressed in milliseconds. The relative
 * time intervals between the values are preserved.
 *
 * If the delay argument is a Date, this operator time shifts the start of the
 * Observable execution until the given date occurs.
 *
 * @example <caption>Delay each click by one second</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var delayedClicks = clicks.delay(1000); // each click emitted after 1 second
 * delayedClicks.subscribe(x => console.log(x));
 *
 * @example <caption>Delay all clicks until a future date happens</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var date = new Date('March 15, 2050 12:00:00'); // in the future
 * var delayedClicks = clicks.delay(date); // click emitted only after that date
 * delayedClicks.subscribe(x => console.log(x));
 *
 * @see {@link debounceTime}
 * @see {@link delayWhen}
 *
 * @param {number|Date} delay The delay duration in milliseconds (a `number`) or
 * a `Date` until which the emission of the source items is delayed.
 * @param {Scheduler} [scheduler=async] The IScheduler to use for
 * managing the timers that handle the time-shift for each item.
 * @return {Observable} An Observable that delays the emissions of the source
 * Observable by the specified timeout or Date.
 * @method delay
 * @owner Observable
 */n.delay=function(e,t){void 0===t&&(t=a.async);var n=o.isDate(e),r=n?+e-t.now():Math.abs(e);return this.lift(new l(r,t))};var l=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.delay,this.scheduler))},e}(),d=function(e){function t(t,n,r){e.call(this,t),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return r(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,a=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(a);if(0<n.length){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new c(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(s.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},t}(i.Subscriber),c=function(){return function(e,t){this.time=e,this.notification=t}}()},{"../Notification":343,"../Subscriber":352,"../scheduler/async":650,"../util/isDate":676}],555:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Observable"),i=e("../OuterSubscriber"),s=e("../util/subscribeToResult");n.delayWhen=function(e,t){return t?new c(this,t).lift(new l(e)):this.lift(new l(e))};var l=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.delayDurationSelector))},e}(),d=function(e){function t(t,n){e.call(this,t),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.destination.next(e),this.removeSubscription(a),this.tryComplete()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),n=null;return-1!==t&&(n=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),n},t.prototype.tryDelay=function(e,t){var n=s.subscribeToResult(this,e,t);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(i.OuterSubscriber),c=function(e){function t(t,n){e.call(this),this.source=t,this.subscriptionDelay=n}return r(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new p(e,this.source))},t}(o.Observable),p=function(e){function t(t,n){e.call(this),this.parent=t,this.source=n,this.sourceSubscribed=!1}return r(t,e),t.prototype._next=function(){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(a.Subscriber)},{"../Observable":344,"../OuterSubscriber":346,"../Subscriber":352,"../util/subscribeToResult":685}],556:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.dematerialize=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new i(e))},e}(),i=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(a.Subscriber)},{"../Subscriber":352}],557:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult"),i=e("../util/Set");n.distinct=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.flushes))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.keySelector=n,this.values=new i.Set,r&&this.add(o.subscribeToResult(this,r))}return r(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination,n;try{n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(a.OuterSubscriber);n.DistinctSubscriber=l},{"../OuterSubscriber":346,"../util/Set":668,"../util/subscribeToResult":685}],558:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/tryCatch"),i=e("../util/errorObject");n.distinctUntilChanged=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compare,this.keySelector))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return r(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,n=e;if(t&&(n=o.tryCatch(this.keySelector)(e),n===i.errorObject))return this.destination.error(i.errorObject.e);var r=!1;if(!this.hasKey)this.hasKey=!0;else if(r=o.tryCatch(this.compare)(this.key,n),r===i.errorObject)return this.destination.error(i.errorObject.e);!1===!!r&&(this.key=n,this.destination.next(e))},t}(a.Subscriber)},{"../Subscriber":352,"../util/errorObject":673,"../util/tryCatch":687}],559:[function(e,t,n){"use strict";var r=e("./distinctUntilChanged");n.distinctUntilKeyChanged=function(e,t){return r.distinctUntilChanged.call(this,function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}},{"./distinctUntilChanged":558}],560:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n._do=function(e,t,n){return this.lift(new o(e,t,n))};var o=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.nextOrObserver,this.error,this.complete))},e}(),i=function(e){function t(t,n,r,o){e.call(this,t);var i=new a.Subscriber(n,r,o);i.syncErrorThrowable=!0,this.add(i),this.safeSubscriber=i}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":352}],561:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError");n.elementAt=function(e,t){return this.lift(new i(e,t))};var i=function(){function e(e,t){if(this.index=e,this.defaultValue=t,0>e)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.index,this.defaultValue))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.index=n,this.defaultValue=r}return r(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;0<=this.index&&("undefined"==typeof this.defaultValue?e.error(new o.ArgumentOutOfRangeError):e.next(this.defaultValue)),e.complete()},t}(a.Subscriber)},{"../Subscriber":352,"../util/ArgumentOutOfRangeError":661}],562:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.every=function(e,t){return this.lift(new o(e,t,this))};var o=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate,this.thisArg,this.source))},e}(),i=function(e){function t(t,n,r,a){e.call(this,t),this.predicate=n,this.thisArg=r,this.source=a,this.index=0,this.thisArg=r||this}return r(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(a.Subscriber)},{"../Subscriber":352}],563:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.exhaust=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return r(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],564:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.exhaustMap=function(e,t){return this.lift(new i(e,t))};var i=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return r(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,n=this.destination;try{var r=this.project(e,t);this.hasSubscription=!0,this.add(o.subscribeToResult(this,r,e,t))}catch(e){n.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination;o?this.trySelectResult(e,t,n,r):i.next(t)},t.prototype.trySelectResult=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination;try{var s=o(e,t,n,r);i.next(s)}catch(e){i.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],565:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/tryCatch"),i=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.expand=function(e,t,n){return void 0===t&&(t=r),void 0===n&&(n=void 0),t=1>(t||0)?r:t,this.lift(new d(e,t,n))};var d=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}();n.ExpandOperator=d;var c=function(e){function t(t,n,a,o){e.call(this,t),this.project=n,this.concurrent=a,this.scheduler=o,this.index=0,this.active=0,this.hasCompleted=!1,a<r&&(this.buffer=[])}return a(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,a=e.index;t.subscribeToProjection(n,r,a)},t.prototype._next=function(e){var n=this.destination;if(n.closed)return void this._complete();var r=this.index++;if(this.active<this.concurrent){n.next(e);var a=o.tryCatch(this.project)(e,r);if(a===i.errorObject)n.error(i.errorObject.e);else if(!this.scheduler)this.subscribeToProjection(a,e,r);else{var s={subscriber:this,result:a,value:e,index:r};this.add(this.scheduler.schedule(t.dispatch,0,s))}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.add(l.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&0<t.length&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(s.OuterSubscriber);n.ExpandSubscriber=c},{"../OuterSubscriber":346,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],566:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.filter=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate,this.thisArg))},e}(),i=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return r(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(a.Subscriber)},{"../Subscriber":352}],567:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Subscription");n._finally=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.callback))},e}(),s=function(e){function t(t,n){e.call(this,t),this.add(new o.Subscription(n))}return r(t,e),t}(a.Subscriber)},{"../Subscriber":352,"../Subscription":353}],568:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.find=function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return this.lift(new o(e,this,!1,t))};var o=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();n.FindValueOperator=o;var i=function(e){function t(t,n,r,a,o){e.call(this,t),this.predicate=n,this.source=r,this.yieldIndex=a,this.thisArg=o,this.index=0}return r(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this,n=t.predicate,r=t.thisArg,a=this.index++;try{var o=n.call(r||this,e,a,this.source);o&&this.notifyComplete(this.yieldIndex?a:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(a.Subscriber);n.FindValueSubscriber=i},{"../Subscriber":352}],569:[function(e,t,n){"use strict";var r=e("./find");n.findIndex=function(e,t){return this.lift(new r.FindValueOperator(e,this,!0,t))}},{"./find":568}],570:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/EmptyError");n.first=function(e,t,n){return this.lift(new i(e,t,n,this))};var i=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,n,r,a,o){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=a,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}n&&this._emit(e,t)},t.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(n)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?!this.hasCompleted&&e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},t}(a.Subscriber)},{"../Subscriber":352,"../util/EmptyError":662}],571:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Subscription"),i=e("../Observable"),s=e("../Subject"),l=e("../util/Map"),d=e("../util/FastMap");n.groupBy=function(e,t,n,r){return this.lift(new c(e,t,n,r))};var c=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),p=function(e){function t(t,n,r,a,o){e.call(this,t),this.keySelector=n,this.elementSelector=r,this.durationSelector=a,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return r(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups="string"==typeof t?new d.FastMap:new l.Map);var r=n.get(t),a;if(this.elementSelector)try{a=this.elementSelector(e)}catch(e){this.error(e)}else a=e;if(!r){r=this.subjectSelector?this.subjectSelector():new s.Subject,n.set(t,r);var o=new m(t,r,this);if(this.destination.next(o),this.durationSelector){var i;try{i=this.durationSelector(new m(t,r))}catch(e){return void this.error(e)}this.add(i.subscribe(new u(t,r,this)))}}r.closed||r.next(a)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(a.Subscriber),u=function(e){function t(t,n,r){e.call(this,n),this.key=t,this.group=n,this.parent=r}return r(t,e),t.prototype._next=function(){this.complete()},t.prototype._unsubscribe=function(){var e=this,t=e.parent,n=e.key;this.key=this.parent=null,t&&t.removeGroup(n)},t}(a.Subscriber),m=function(e){function t(t,n,r){e.call(this),this.key=t,this.groupSubject=n,this.refCountSubscription=r}return r(t,e),t.prototype._subscribe=function(e){var t=new o.Subscription,n=this,r=n.refCountSubscription,a=n.groupSubject;return r&&!r.closed&&t.add(new f(r)),t.add(a.subscribe(e)),t},t}(i.Observable);n.GroupedObservable=m;var f=function(e){function t(t){e.call(this),this.parent=t,t.count++}return r(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.Subscription)},{"../Observable":344,"../Subject":350,"../Subscriber":352,"../Subscription":353,"../util/FastMap":663,"../util/Map":665}],572:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/noop");n.ignoreElements=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype._next=function(){o.noop()},t}(a.Subscriber)},{"../Subscriber":352,"../util/noop":682}],573:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.isEmpty=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new i(e))},e}(),i=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(a.Subscriber)},{"../Subscriber":352}],574:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/EmptyError");n.last=function(e,t,n){return this.lift(new i(e,t,n,this))};var i=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,n,r,a,o){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=a,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof a&&(this.lastValue=a,this.hasValue=!0)}return r(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(n){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=n,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new o.EmptyError)},t}(a.Subscriber)},{"../Subscriber":352,"../util/EmptyError":662}],575:[function(e,t,n){"use strict";n.letProto=function(e){return e(this)}},{}],576:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.map=function(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new o(e,t))};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.project,this.thisArg))},e}();n.MapOperator=o;var i=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return r(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.Subscriber)},{"../Subscriber":352}],577:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.mapTo=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.value))},e}(),i=function(e){function t(t,n){e.call(this,t),this.value=n}return r(t,e),t.prototype._next=function(){this.destination.next(this.value)},t}(a.Subscriber)},{"../Subscriber":352}],578:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Notification");n.materialize=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},t}(a.Subscriber)},{"../Notification":343,"../Subscriber":352}],579:[function(e,t,n){"use strict";var r=e("./reduce");n.max=function(e){var t="function"==typeof e?function(t,n){return 0<e(t,n)?t:n}:function(e,t){return e>t?e:t};return this.lift(new r.ReduceOperator(t))}},{"./reduce":597}],580:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,l=e[e.length-1];return s.isScheduler(l)?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof l&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof a.Observable?e[0]:new o.ArrayObservable(e,r).lift(new i.MergeAllOperator(n))}var a=e("../Observable"),o=e("../observable/ArrayObservable"),i=e("./mergeAll"),s=e("../util/isScheduler");n.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},n.mergeStatic=r},{"../Observable":344,"../observable/ArrayObservable":484,"../util/isScheduler":681,"./mergeAll":581}],581:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new i(e))};var i=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.concurrent))},e}();n.MergeAllOperator=i;var s=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(o.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);n.MergeAllSubscriber=s},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],582:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/subscribeToResult"),i=e("../OuterSubscriber");n.mergeMap=function(e,t,n){return void 0===n&&(n=r),"number"==typeof t&&(n=t,t=null),this.lift(new s(e,t,n))};var s=function(){function e(e,t,n){void 0===n&&(n=r),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.resultSelector,this.concurrent))},e}();n.MergeMapOperator=s;var l=function(e){function t(t,n,a,o){void 0===o&&(o=r),e.call(this,t),this.project=n,this.resultSelector=a,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++,n;try{n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n,e,t)},t.prototype._innerSub=function(e,t,n){this.add(o.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,r){var a;try{a=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(a)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);n.MergeMapSubscriber=l},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],583:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../OuterSubscriber"),i=e("../util/subscribeToResult");n.mergeMapTo=function(e,t,n){return void 0===n&&(n=r),"number"==typeof t&&(n=t,t=null),this.lift(new s(e,t,n))};var s=function(){function e(e,t,n){void 0===n&&(n=r),this.ish=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.ish,this.resultSelector,this.concurrent))},e}();n.MergeMapToOperator=s;var l=function(e){function t(t,n,a,o){void 0===o&&(o=r),e.call(this,t),this.ish=n,this.resultSelector=a,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return a(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,n=this.index++,r=this.ish,a=this.destination;this.active++,this._innerSub(r,a,t,e,n)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n,r,a){this.add(i.subscribeToResult(this,e,r,a))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination;o?this.trySelectResult(e,t,n,r):i.next(t)},t.prototype.trySelectResult=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination,s;try{s=o(e,t,n,r)}catch(e){return void i.error(e)}i.next(s)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);n.MergeMapToSubscriber=l},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],584:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/tryCatch"),o=e("../util/errorObject"),i=e("../util/subscribeToResult"),s=e("../OuterSubscriber");n.mergeScan=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),this.lift(new l(e,t,n))};var l=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.accumulator,this.seed,this.concurrent))},e}();n.MergeScanOperator=l;var d=function(e){function t(t,n,r,a){e.call(this,t),this.accumulator=n,this.acc=r,this.concurrent=a,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=a.tryCatch(this.accumulator)(this.acc,e),r=this.destination;n===o.errorObject?r.error(o.errorObject.e):(this.active++,this._innerSub(n,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){this.add(i.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t){var n=this.destination;this.acc=t,this.hasValue=!0,n.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(s.OuterSubscriber);n.MergeScanSubscriber=d},{"../OuterSubscriber":346,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],585:[function(e,t,n){"use strict";var r=e("./reduce");n.min=function(e){var t="function"==typeof e?function(t,n){return 0>e(t,n)?t:n}:function(e,t){return e<t?e:t};return this.lift(new r.ReduceOperator(t))}},{"./reduce":597}],586:[function(e,t,n){"use strict";var r=e("../observable/ConnectableObservable");n.multicast=function(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new a(n,t));var o=Object.create(this,r.connectableObservableDescriptor);return o.source=this,o.subjectFactory=n,o};var a=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),a=n(r).subscribe(e);return a.add(t.subscribe(r)),a},e}();n.MulticastOperator=a},{"../observable/ConnectableObservable":487}],587:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Notification");n.observeOn=function(e,t){return void 0===t&&(t=0),this.lift(new i(e,t))};var i=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();n.ObserveOnOperator=i;var s=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return r(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(a.Subscriber);n.ObserveOnSubscriber=s;var l=function(){return function(e,t){this.notification=e,this.destination=t}}();n.ObserveOnMessage=l},{"../Notification":343,"../Subscriber":352}],588:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../observable/FromObservable"),o=e("../util/isArray"),i=e("../OuterSubscriber"),s=e("../util/subscribeToResult");n.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&o.isArray(e[0])&&(e=e[0]),this.lift(new l(e))},n.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return 1===e.length&&o.isArray(e[0])&&(e=e[0]),n=e.shift(),new a.FromObservable(n,null).lift(new l(e))};var l=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.nextSources))},e}(),d=function(e){function t(t,n){e.call(this,t),this.destination=t,this.nextSources=n}return r(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(s.subscribeToResult(this,e)):this.destination.complete()},t}(i.OuterSubscriber)},{"../OuterSubscriber":346,"../observable/FromObservable":494,"../util/isArray":674,"../util/subscribeToResult":685}],589:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.pairwise=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new i(e))},e}(),i=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return r(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(a.Subscriber)},{"../Subscriber":352}],590:[function(e,t,n){"use strict";var r=e("../util/not"),a=e("./filter");n.partition=function(e,t){return[a.filter.call(this,e,t),a.filter.call(this,r.not(e,t))]}},{"../util/not":683,"./filter":566}],591:[function(e,t,n){"use strict";function r(e,t){return function(n){for(var r=n,a=0,o;a<t;a++)if(o=r[e[a]],"undefined"!=typeof o)r=o;else return;return r}}var a=e("./map");n.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return a.map.call(this,r(e,n))}},{"./map":576}],592:[function(e,t,n){"use strict";var r=e("../Subject"),a=e("./multicast");n.publish=function(e){return e?a.multicast.call(this,function(){return new r.Subject},e):a.multicast.call(this,new r.Subject)}},{"../Subject":350,"./multicast":586}],593:[function(e,t,n){"use strict";var r=e("../BehaviorSubject"),a=e("./multicast");n.publishBehavior=function(e){return a.multicast.call(this,new r.BehaviorSubject(e))}},{"../BehaviorSubject":341,"./multicast":586}],594:[function(e,t,n){"use strict";var r=e("../AsyncSubject"),a=e("./multicast");n.publishLast=function(){return a.multicast.call(this,new r.AsyncSubject)}},{"../AsyncSubject":340,"./multicast":586}],595:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=e("../ReplaySubject"),o=e("./multicast");n.publishReplay=function(e,t,n){return void 0===e&&(e=r),void 0===t&&(t=r),o.multicast.call(this,new a.ReplaySubject(e,t,n))}},{"../ReplaySubject":347,"./multicast":586}],596:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length)if(o.isArray(e[0]))e=e[0];else return e[0];return new i.ArrayObservable(e).lift(new d)}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/isArray"),i=e("../observable/ArrayObservable"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&o.isArray(e[0])&&(e=e[0]),this.lift.call(r.apply(void 0,[this].concat(e)))},n.raceStatic=r;var d=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}();n.RaceOperator=d;var c=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return a(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],a=l.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var a=this.subscriptions[r];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);n.RaceSubscriber=c},{"../OuterSubscriber":346,"../observable/ArrayObservable":484,"../util/isArray":674,"../util/subscribeToResult":685}],597:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.reduce=function(e,t){var n=!1;return 2<=arguments.length&&(n=!0),this.lift(new o(e,t,n))};var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.accumulator,this.seed,this.hasSeed))},e}();n.ReduceOperator=o;var i=function(e){function t(t,n,r,a){e.call(this,t),this.accumulator=n,this.hasSeed=a,this.index=0,this.hasValue=!1,this.acc=r,this.hasSeed||this.index++}return r(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(a.Subscriber);n.ReduceSubscriber=i},{"../Subscriber":352}],598:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../observable/EmptyObservable");n.repeat=function(e){return void 0===e&&(e=-1),0===e?new o.EmptyObservable:0>e?this.lift(new i(-1,this)):this.lift(new i(e-1,this))};var i=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.count=n,this.source=r}return r(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this,n=t.source,r=t.count;if(0===r)return e.prototype.complete.call(this);-1<r&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(a.Subscriber)},{"../Subscriber":352,"../observable/EmptyObservable":489}],599:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../util/tryCatch"),i=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.repeatWhen=function(e){return this.lift(new d(e))};var d=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,t))},e}(),c=function(e){function t(t,n,r){e.call(this,t),this.notifier=n,this.source=r,this.sourceIsBeingSubscribedTo=!0}return r(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(!this.retries)this.subscribeToRetries();else if(this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this,t=e.notifications,n=e.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this,n=t.notifications,r=t.retries,a=t.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=n,this.retries=r,this.retriesSubscription=a,this},t.prototype.subscribeToRetries=function(){this.notifications=new a.Subject;var t=o.tryCatch(this.notifier)(this.notifications);return t===i.errorObject?e.prototype.complete.call(this):void(this.retries=t,this.retriesSubscription=l.subscribeToResult(this,t))},t}(s.OuterSubscriber)},{"../OuterSubscriber":346,"../Subject":350,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],600:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.retry=function(e){return void 0===e&&(e=-1),this.lift(new o(e,this))};var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.count,this.source))},e}(),i=function(e){function t(t,n,r){e.call(this,t),this.count=n,this.source=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this,r=n.source,a=n.count;if(0===a)return e.prototype.error.call(this,t);-1<a&&(this.count=a-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(a.Subscriber)},{"../Subscriber":352}],601:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../util/tryCatch"),i=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.retryWhen=function(e){return this.lift(new d(e,this))};var d=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,this.source))},e}(),c=function(e){function t(t,n,r){e.call(this,t),this.notifier=n,this.source=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,s=this.retriesSubscription;if(!r){if(n=new a.Subject,r=o.tryCatch(this.notifier)(n),r===i.errorObject)return e.prototype.error.call(this,i.errorObject.e);s=l.subscribeToResult(this,r)}else this.errors=null,this.retriesSubscription=null;this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=s,n.next(t)}},t.prototype._unsubscribe=function(){var e=this,t=e.errors,n=e.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(){var e=this,t=e.errors,n=e.retries,r=e.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=t,this.retries=n,this.retriesSubscription=r,this.source.subscribe(this)},t}(s.OuterSubscriber)},{"../OuterSubscriber":346,"../Subject":350,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],602:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.sample=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),r=t.subscribe(n);return r.add(o.subscribeToResult(n,this.notifier)),r},e}(),s=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return r(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],603:[function(e,t,n){"use strict";function r(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subscriber"),i=e("../scheduler/async");n.sampleTime=function(e,t){return void 0===t&&(t=i.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.period,this.scheduler))},e}(),l=function(e){function t(t,n,a){e.call(this,t),this.period=n,this.scheduler=a,this.hasValue=!1,this.add(a.schedule(r,n,{subscriber:this,period:n}))}return a(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(o.Subscriber)},{"../Subscriber":352,"../scheduler/async":650}],604:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.scan=function(e,t){var n=!1;return 2<=arguments.length&&(n=!0),this.lift(new o(e,t,n))};var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.accumulator,this.seed,this.hasSeed))},e}(),i=function(e){function t(t,n,r,a){e.call(this,t),this.accumulator=n,this._seed=r,this.hasSeed=a,this.index=0}return r(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){return this.hasSeed?this._tryNext(e):void(this.seed=e,this.destination.next(e))},t.prototype._tryNext=function(e){var t=this.index++,n;try{n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(a.Subscriber)},{"../Subscriber":352}],605:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/tryCatch"),i=e("../util/errorObject");n.sequenceEqual=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compareTo,this.comparor))},e}();n.SequenceEqualOperator=s;var l=function(e){function t(t,n,r){e.call(this,t),this.compareTo=n,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new d(t,this)))}return r(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this,t=e._a,n=e._b,r=e.comparor;0<t.length&&0<n.length;){var s=t.shift(),a=n.shift(),l=!1;r?(l=o.tryCatch(r)(s,a),l===i.errorObject&&this.destination.error(i.errorObject.e)):l=s===a,l||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(a.Subscriber);n.SequenceEqualSubscriber=l;var d=function(e){function t(t,n){e.call(this,t),this.parent=n}return r(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(a.Subscriber)},{"../Subscriber":352,"../util/errorObject":673,"../util/tryCatch":687}],606:[function(e,t,n){"use strict";function r(){return new o.Subject}var a=e("./multicast"),o=e("../Subject");n.share=function(){return a.multicast.call(this,r).refCount()}},{"../Subject":350,"./multicast":586}],607:[function(e,t,n){"use strict";var r=e("./multicast"),a=e("../ReplaySubject");n.shareReplay=function(e,t,n){var o=r.multicast.call(this,function(){return this._isComplete?i:i=new a.ReplaySubject(e,t,n)}),i;return o.refCount()}},{"../ReplaySubject":347,"./multicast":586}],608:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/EmptyError");n.single=function(e){return this.lift(new i(e,this))};var i=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.source=r,this.seenValue=!1,this.index=0}return r(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;0<this.index?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},t}(a.Subscriber)},{"../Subscriber":352,"../util/EmptyError":662}],609:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.skip=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.total))},e}(),i=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return r(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(a.Subscriber)},{"../Subscriber":352}],610:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError");n.skipLast=function(e){return this.lift(new i(e))};var i=function(){function e(e){if(this._skipCount=e,0>this._skipCount)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new a.Subscriber(e)):t.subscribe(new s(e,this._skipCount))},e}(),s=function(e){function t(t,n){e.call(this,t),this._skipCount=n,this._count=0,this._ring=Array(n)}return r(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,a=this._ring,o=a[r];a[r]=e,this.destination.next(o)}},t}(a.Subscriber)},{"../Subscriber":352,"../util/ArgumentOutOfRangeError":661}],611:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.skipUntil=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,n))}return r(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],612:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.skipWhile=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate))},e}(),i=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.skipping=!0,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=!!t}catch(e){this.destination.error(e)}},t}(a.Subscriber)},{"../Subscriber":352}],613:[function(e,t,n){"use strict";var r=e("../observable/ArrayObservable"),a=e("../observable/ScalarObservable"),o=e("../observable/EmptyObservable"),i=e("./concat"),s=e("../util/isScheduler");n.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];s.isScheduler(n)?e.pop():n=null;var l=e.length;return 1===l?i.concatStatic(new a.ScalarObservable(e[0],n),this):1<l?i.concatStatic(new r.ArrayObservable(e,n),this):i.concatStatic(new o.EmptyObservable(n),this)}},{"../observable/ArrayObservable":484,"../observable/EmptyObservable":489,"../observable/ScalarObservable":503,"../util/isScheduler":681,"./concat":546}],614:[function(e,t,n){"use strict";var r=e("../observable/SubscribeOnObservable");n.subscribeOn=function(e,t){return void 0===t&&(t=0),this.lift(new a(e,t))};var a=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new r.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},{"../observable/SubscribeOnObservable":504}],615:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n._switch=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.active=0,this.hasCompleted=!1}return r(t,e),t.prototype._next=function(e){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=o.subscribeToResult(this,e))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},t.prototype.unsubscribeInner=function(){this.active=0<this.active?this.active-1:0;var e=this.innerSubscription;e&&(e.unsubscribe(),this.remove(e))},t.prototype.notifyNext=function(e,t){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],616:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.switchMap=function(e,t){return this.lift(new i(e,t))};var i=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.index++,n;try{n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n,e,t)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r){this.resultSelector?this._tryNotifyNext(e,t,n,r):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,n,r){var a;try{a=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(a)},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],617:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.switchMapTo=function(e,t){return this.lift(new i(e,t))};var i=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observable,this.resultSelector))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.inner=n,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination;o?this.tryResultSelector(e,t,n,r):i.next(t)},t.prototype.tryResultSelector=function(e,t,n,r){var a=this,o=a.resultSelector,i=a.destination,s;try{s=o(e,t,n,r)}catch(e){return void i.error(e)}i.next(s)},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],618:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError"),i=e("../observable/EmptyObservable");n.take=function(e){return 0===e?new i.EmptyObservable:this.lift(new s(e))};var s=function(){function e(e){if(this.total=e,0>this.total)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(a.Subscriber)},{"../Subscriber":352,"../observable/EmptyObservable":489,"../util/ArgumentOutOfRangeError":661}],619:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError"),i=e("../observable/EmptyObservable");n.takeLast=function(e){return 0===e?new i.EmptyObservable:this.lift(new s(e))};var s=function(){function e(e){if(this.total=e,0>this.total)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,n){e.call(this,t),this.total=n,this.ring=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;if(t.length<n)t.push(e);else{t[r%n]=e}},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,a=0,o;a<n;a++)o=t++%n,e.next(r[o]);e.complete()},t}(a.Subscriber)},{"../Subscriber":352,"../observable/EmptyObservable":489,"../util/ArgumentOutOfRangeError":661}],620:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.takeUntil=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.notifier=n,this.add(o.subscribeToResult(this,n))}return r(t,e),t.prototype.notifyNext=function(){this.complete()},t.prototype.notifyComplete=function(){},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],621:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.takeWhile=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate))},e}(),i=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.destination,n;try{n=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,n)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):n.complete()},t}(a.Subscriber)},{"../Subscriber":352}],622:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(e,t){return void 0===t&&(t=n.defaultThrottleConfig),this.lift(new i(e,t.leading,t.trailing))};var i=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector,this.leading,this.trailing))},e}(),s=function(e){function t(t,n,r,a){e.call(this,t),this.destination=t,this.durationSelector=n,this._leading=r,this._trailing=a,this._hasTrailingValue=!1}return r(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=o.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this,t=e.throttled,n=e._trailingValue,r=e._hasTrailingValue,a=e._trailing;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},t.prototype._sendTrailing=function(){var e=this,t=e.destination,n=e.throttled,r=e._trailing,a=e._trailingValue,o=e._hasTrailingValue;n&&r&&o&&(t.next(a),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],623:[function(e,t,n){"use strict";function r(e){var t=e.subscriber;t.clearThrottle()}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subscriber"),i=e("../scheduler/async"),s=e("./throttle");n.throttleTime=function(e,t,n){return void 0===t&&(t=i.async),void 0===n&&(n=s.defaultThrottleConfig),this.lift(new l(e,t,n.leading,n.trailing))};var l=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),d=function(e){function t(t,n,r,a,o){e.call(this,t),this.duration=n,this.scheduler=r,this.leading=a,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}return a(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(r,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(o.Subscriber)},{"../Subscriber":352,"../scheduler/async":650,"./throttle":622}],624:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../scheduler/async");n.timeInterval=function(e){return void 0===e&&(e=o.async),this.lift(new s(e))};var i=function(){return function(e,t){this.value=e,this.interval=t}}();n.TimeInterval=i;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,n){e.call(this,t),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return r(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),n=t-this.lastTime;this.lastTime=t,this.destination.next(new i(e,n))},t}(a.Subscriber)},{"../Subscriber":352,"../scheduler/async":650}],625:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../scheduler/async"),o=e("../util/isDate"),i=e("../Subscriber"),s=e("../util/TimeoutError");n.timeout=function(e,t){void 0===t&&(t=a.async);var n=o.isDate(e),r=n?+e-t.now():Math.abs(e);return this.lift(new l(r,n,t,new s.TimeoutError()))};var l=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=n,this.errorInstance=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),d=function(e){function t(t,n,r,a,o){e.call(this,t),this.absoluteTimeout=n,this.waitFor=r,this.scheduler=a,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return r(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(i.Subscriber)},{"../Subscriber":352,"../scheduler/async":650,"../util/TimeoutError":669,"../util/isDate":676}],626:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../scheduler/async"),o=e("../util/isDate"),i=e("../OuterSubscriber"),s=e("../util/subscribeToResult");n.timeoutWith=function(e,t,n){void 0===n&&(n=a.async);var r=o.isDate(e),i=r?+e-n.now():Math.abs(e);return this.lift(new l(i,r,t,n))};var l=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),d=function(e){function t(t,n,r,a,o){e.call(this,t),this.absoluteTimeout=n,this.waitFor=r,this.withObservable=a,this.scheduler=o,this.action=null,this.scheduleTimeout()}return r(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(s.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(i.OuterSubscriber)},{"../OuterSubscriber":346,"../scheduler/async":650,"../util/isDate":676,"../util/subscribeToResult":685}],627:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../scheduler/async");n.timestamp=function(e){return void 0===e&&(e=o.async),this.lift(new s(e))};var i=function(){return function(e,t){this.value=e,this.timestamp=t}}();n.Timestamp=i;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,n){e.call(this,t),this.scheduler=n}return r(t,e),t.prototype._next=function(e){var t=this.scheduler.now();this.destination.next(new i(e,t))},t}(a.Subscriber)},{"../Subscriber":352,"../scheduler/async":650}],628:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");n.toArray=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new i(e))},e}(),i=function(e){function t(t){e.call(this,t),this.array=[]}return r(t,e),t.prototype._next=function(e){this.array.push(e)},t.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":352}],629:[function(e,t,n){"use strict";var r=e("../util/root");n.toPromise=function(e){var t=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}},{"../util/root":684}],630:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../OuterSubscriber"),i=e("../util/subscribeToResult");n.window=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new l(e),r=t.subscribe(n);return r.closed||n.add(i.subscribeToResult(n,this.windowBoundaries)),r},e}(),l=function(e){function t(t){e.call(this,t),this.window=new a.Subject,t.next(this.window)}return r(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new a.Subject;t.next(n)},t}(o.OuterSubscriber)},{"../OuterSubscriber":346,"../Subject":350,"../util/subscribeToResult":685}],631:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber"),o=e("../Subject");n.windowCount=function(e,t){return void 0===t&&(t=0),this.lift(new i(e,t))};var i=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.windowSize,this.startWindowEvery))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.destination=t,this.windowSize=n,this.startWindowEvery=r,this.windows=[new o.Subject],this.count=0,t.next(this.windows[0])}return r(t,e),t.prototype._next=function(e){for(var t=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,a=this.windows,s=a.length,l=0;l<s&&!this.closed;l++)a[l].next(e);var i=this.count-r+1;if(0<=i&&0==i%t&&!this.closed&&a.shift().complete(),0==++this.count%t&&!this.closed){var d=new o.Subject;a.push(d),n.next(d)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(a.Subscriber)},{"../Subject":350,"../Subscriber":352}],632:[function(e,t,n){"use strict";function r(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function a(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,a=e.windowCreationInterval,i=n.openWindow(),s=this,l={action:s,subscription:null};l.subscription=r.schedule(o,t,{subscriber:n,window:i,context:l}),s.add(l.subscription),s.schedule(e,a)}function o(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=e("../Subject"),l=e("../scheduler/async"),d=e("../Subscriber"),c=e("../util/isNumeric"),p=e("../util/isScheduler");n.windowTime=function(e){var t=l.async,n=null,r=Number.POSITIVE_INFINITY;return p.isScheduler(arguments[3])&&(t=arguments[3]),p.isScheduler(arguments[2])?t=arguments[2]:c.isNumeric(arguments[2])&&(r=arguments[2]),p.isScheduler(arguments[1])?t=arguments[1]:c.isNumeric(arguments[1])&&(n=arguments[1]),this.lift(new u(e,n,r,t))};var u=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),m=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return i(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(s.Subject),f=function(e){function t(t,n,i,s,l){e.call(this,t),this.destination=t,this.windowTimeSpan=n,this.windowCreationInterval=i,this.maxWindowSize=s,this.scheduler=l,this.windows=[];var d=this.openWindow();if(null!==i&&0<=i){var c={subscriber:this,window:d,context:null},p={windowTimeSpan:n,windowCreationInterval:i,subscriber:this,scheduler:l};this.add(l.schedule(o,n,c)),this.add(l.schedule(a,i,p))}else{var u={subscriber:this,window:d,windowTimeSpan:n};this.add(l.schedule(r,n,u))}}return i(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0,a;r<n;r++)a=t[r],a.closed||(a.next(e),a.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(a))},t.prototype._error=function(e){for(var t=this.windows;0<t.length;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows,t;0<e.length;)t=e.shift(),t.closed||t.complete();this.destination.complete()},t.prototype.openWindow=function(){var e=new m;this.windows.push(e);var t=this.destination;return t.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(d.Subscriber)},{"../Subject":350,"../Subscriber":352,"../scheduler/async":650,"../util/isNumeric":678,"../util/isScheduler":681}],633:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../Subscription"),i=e("../util/tryCatch"),s=e("../util/errorObject"),l=e("../OuterSubscriber"),d=e("../util/subscribeToResult");n.windowToggle=function(e,t){return this.lift(new c(e,t))};var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.openings,this.closingSelector))},e}(),p=function(e){function t(t,n,r){e.call(this,t),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=d.subscribeToResult(this,n,n))}return r(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,a=-1,o;++a<r;)o=n[a],o.window.error(t),o.subscription.unsubscribe();e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1,a;++r<n;)a=t[r],a.window.complete(),a.subscription.unsubscribe();e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1,r;++n<t;)r=e[n],r.window.unsubscribe(),r.subscription.unsubscribe()},t.prototype.notifyNext=function(e,t){if(e===this.openings){var n=this.closingSelector,r=i.tryCatch(n)(t);if(r===s.errorObject)return this.error(s.errorObject.e);var l=new a.Subject,c=new o.Subscription,p={window:l,subscription:c};this.contexts.push(p);var u=d.subscribeToResult(this,r,p);u.closed?this.closeWindow(this.contexts.length-1):(u.context=p,c.add(u)),this.destination.next(l)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,a=n.subscription;t.splice(e,1),r.complete(),a.unsubscribe()}},t}(l.OuterSubscriber)},{"../OuterSubscriber":346,"../Subject":350,"../Subscription":353,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],634:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../util/tryCatch"),i=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");n.windowWhen=function(e){return this.lift(new d(e))};var d=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(e){function t(t,n){e.call(this,t),this.destination=t,this.closingSelector=n,this.openWindow()}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.openWindow(a)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n=this.window=new a.Subject;this.destination.next(n);var r=o.tryCatch(this.closingSelector)();if(r===i.errorObject){var s=i.errorObject.e;this.destination.error(s),this.window.error(s)}else this.add(this.closingNotification=l.subscribeToResult(this,r))},t}(s.OuterSubscriber)},{"../OuterSubscriber":346,"../Subject":350,"../util/errorObject":673,"../util/subscribeToResult":685,"../util/tryCatch":687}],635:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n;"function"==typeof e[e.length-1]&&(n=e.pop());return this.lift(new i(e,n))};var i=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observables,this.project))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.observables=n,this.project=r,this.toRespond=[];var a=n.length;this.values=Array(a);for(var s=0;s<a;s++)this.toRespond.push(s);for(var s=0,i;s<a;s++)i=n[s],this.add(o.subscribeToResult(this,i,i,s))}return r(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t;var r=this.toRespond;if(0<r.length){var a=r.indexOf(n);-1!==a&&r.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.OuterSubscriber)},{"../OuterSubscriber":346,"../util/subscribeToResult":685}],636:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),new o.ArrayObservable(e).lift(new p(n))}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../observable/ArrayObservable"),i=e("../util/isArray"),s=e("../Subscriber"),l=e("../OuterSubscriber"),d=e("../util/subscribeToResult"),c=e("../symbol/iterator");n.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},n.zipStatic=r;var p=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project))},e}();n.ZipOperator=p;var u=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=r}return a(t,e),t.prototype._next=function(e){var t=this.iterators;i.isArray(e)?t.push(new f(e)):"function"==typeof e[c.iterator]?t.push(new m(e[c.iterator]())):t.push(new y(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0===t)return void this.destination.complete();this.active=t;for(var n=0,r;n<t;n++)r=e[n],r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0,a;r<t;r++)if(a=e[r],"function"==typeof a.hasValue&&!a.hasValue())return;for(var o=!1,i=[],r=0;r<t;r++){var a=e[r],s=a.next();if(a.hasCompleted()&&(o=!0),s.done)return void n.complete();i.push(s.value)}this.project?this._tryProject(i):n.next(i),o&&n.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.Subscriber);n.ZipSubscriber=u;var m=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){var e=this.index++,t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),y=function(e){function t(t,n,r){e.call(this,t),this.parent=n,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return a(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return d.subscribeToResult(this,this.observable,this,t)},t}(l.OuterSubscriber)},{"../OuterSubscriber":346,"../Subscriber":352,"../observable/ArrayObservable":484,"../symbol/iterator":652,"../util/isArray":674,"../util/subscribeToResult":685}],637:[function(e,t,n){"use strict";var r=e("./zip");n.zipAll=function(e){return this.lift(new r.ZipOperator(e))}},{"./zip":636}],638:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscription"),o=function(e){function t(){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(a.Subscription);n.Action=o},{"../Subscription":353}],639:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncAction"),o=e("../util/AnimationFrame"),i=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.requestAsyncId=function(t,n,r){return(void 0===r&&(r=0),null!==r&&0<r)?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=o.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){return(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)?e.prototype.recycleAsyncId.call(this,t,n,r):void(0===t.actions.length&&(o.AnimationFrame.cancelAnimationFrame(n),t.scheduled=void 0))},t}(a.AsyncAction);n.AnimationFrameAction=i},{"../util/AnimationFrame":660,"./AsyncAction":643}],640:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncScheduler"),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t=this.actions,n=-1,r=t.length,a;e=e||t.shift();do if(a=e.execute(e.state,e.delay))break;while(++n<r&&(e=t.shift()));if(this.active=!1,a){for(;++n<r&&(e=t.shift());)e.unsubscribe();throw a}},t}(a.AsyncScheduler);n.AnimationFrameScheduler=o},{"./AsyncScheduler":644}],641:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/Immediate"),o=e("./AsyncAction"),i=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.requestAsyncId=function(t,n,r){return(void 0===r&&(r=0),null!==r&&0<r)?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=a.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){return(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)?e.prototype.recycleAsyncId.call(this,t,n,r):void(0===t.actions.length&&(a.Immediate.clearImmediate(n),t.scheduled=void 0))},t}(o.AsyncAction);n.AsapAction=i},{"../util/Immediate":664,"./AsyncAction":643}],642:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncScheduler"),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t=this.actions,n=-1,r=t.length,a;e=e||t.shift();do if(a=e.execute(e.state,e.delay))break;while(++n<r&&(e=t.shift()));if(this.active=!1,a){for(;++n<r&&(e=t.shift());)e.unsubscribe();throw a}},t}(a.AsyncScheduler);n.AsapScheduler=o},{"./AsyncScheduler":644}],643:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/root"),o=e("./Action"),i=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),a.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?t:a.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e){var t=!1,n;try{this.work(e)}catch(r){t=!0,n=!!r&&r||new Error(r)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);n.AsyncAction=i},{"../util/root":684,"./Action":638}],644:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Scheduler"),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(a.Scheduler);n.AsyncScheduler=o},{"../Scheduler":349}],645:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncAction"),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return(void 0===n&&(n=0),0<n)?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(a.AsyncAction);n.QueueAction=o},{"./AsyncAction":643}],646:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncScheduler"),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(a.AsyncScheduler);n.QueueScheduler=o},{"./AsyncScheduler":644}],647:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("./AsyncAction"),o=e("./AsyncScheduler"),i=function(e){function t(t,n){var r=this;void 0===t&&(t=s),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this,t,function(){return r.frame}),this.maxFrames=n,this.frame=0,this.index=-1}return r(t,e),t.prototype.flush=function(){for(var e=this,t=e.actions,n=e.maxFrames,r,a;(a=t.shift())&&(this.frame=a.delay)<=n&&!(r=a.execute(a.state,a.delay)););if(r){for(;a=t.shift();)a.unsubscribe();throw r}},t.frameTimeFactor=10,t}(o.AsyncScheduler);n.VirtualTimeScheduler=i;var s=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1),e.call(this,t,n),this.scheduler=t,this.work=n,this.index=r,this.active=!0,this.index=t.index=r}return r(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var a=new t(this.scheduler,this.work);return this.add(a),a.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var a=e.actions;return a.push(this),a.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(a.AsyncAction);n.VirtualAction=s},{"./AsyncAction":643,"./AsyncScheduler":644}],648:[function(e,t,n){"use strict";var r=e("./AnimationFrameAction"),a=e("./AnimationFrameScheduler");n.animationFrame=new a.AnimationFrameScheduler(r.AnimationFrameAction)},{"./AnimationFrameAction":639,"./AnimationFrameScheduler":640}],649:[function(e,t,n){"use strict";var r=e("./AsapAction"),a=e("./AsapScheduler");n.asap=new a.AsapScheduler(r.AsapAction)},{"./AsapAction":641,"./AsapScheduler":642}],650:[function(e,t,n){"use strict";var r=e("./AsyncAction"),a=e("./AsyncScheduler");n.async=new a.AsyncScheduler(r.AsyncAction)},{"./AsyncAction":643,"./AsyncScheduler":644}],651:[function(e,t,n){"use strict";var r=e("./QueueAction"),a=e("./QueueScheduler");n.queue=new a.QueueScheduler(r.QueueAction)},{"./QueueAction":645,"./QueueScheduler":646}],652:[function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof new n()["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var a=Object.getOwnPropertyNames(r.prototype),o=0,i;o<a.length;++o)if(i=a[o],"entries"!==i&&"size"!==i&&r.prototype[i]===r.prototype.entries)return i;return"@@iterator"}var a=e("../util/root");n.symbolIteratorPonyfill=r,n.iterator=r(a.root),n.$$iterator=n.iterator},{"../util/root":684}],653:[function(e,t,n){"use strict";function r(e){var t=e.Symbol,n;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}var a=e("../util/root");n.getSymbolObservable=r,n.observable=r(a.root),n.$$observable=n.observable},{"../util/root":684}],654:[function(e,t,n){"use strict";var r=e("../util/root"),a=r.root.Symbol;n.rxSubscriber="function"==typeof a&&"function"==typeof a.for?a.for("rxSubscriber"):"@@rxSubscriber",n.$$rxSubscriber=n.rxSubscriber},{"../util/root":684}],655:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Observable"),o=e("../Subscription"),i=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(e){function t(t,n){e.call(this,function(e){var t=this,n=t.logSubscribedFrame();return e.add(new o.Subscription(function(){t.logUnsubscribedFrame(n)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=n}return r(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,n=0,r;n<t;n++)r=this.messages[n],e.add(this.scheduler.schedule(function(e){var t=e.message,n=e.subscriber;t.notification.observe(n)},r.frame,{message:r,subscriber:e}))},t}(a.Observable);n.ColdObservable=l,s.applyMixins(l,[i.SubscriptionLoggable])},{"../Observable":344,"../Subscription":353,"../util/applyMixins":671,"./SubscriptionLoggable":658}],656:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subject"),o=e("../Subscription"),i=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(e){function t(t,n){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=n}return r(t,e),t.prototype._subscribe=function(t){var n=this,r=n.logSubscribedFrame();return t.add(new o.Subscription(function(){n.logUnsubscribedFrame(r)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,n=0;n<t;n++)(function(){var t=e.messages[n];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)})()},t}(a.Subject);n.HotObservable=l,s.applyMixins(l,[i.SubscriptionLoggable])},{"../Subject":350,"../Subscription":353,"../util/applyMixins":671,"./SubscriptionLoggable":658}],657:[function(e,t,n){"use strict";var r=function(){return function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}}();n.SubscriptionLog=r},{}],658:[function(e,t,n){"use strict";var r=e("./SubscriptionLog"),a=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new r.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,n=t[e];t[e]=new r.SubscriptionLog(n.subscribedFrame,this.scheduler.now())},e}();n.SubscriptionLoggable=a},{"./SubscriptionLog":657}],659:[function(e,t,n){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Observable"),i=e("../Notification"),s=e("./ColdObservable"),l=e("./HotObservable"),d=e("./SubscriptionLog"),c=e("../scheduler/VirtualTimeScheduler"),p=function(e){function t(t){e.call(this,c.VirtualAction,750),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return a(t,e),t.prototype.createTime=function(e){var n=e.indexOf("|");if(-1===n)throw new Error("marble diagram for time should have a completion marker \"|\"");return n*t.frameTimeFactor},t.prototype.createColdObservable=function(e,n,r){if(-1!==e.indexOf("^"))throw new Error("cold observable cannot have subscription offset \"^\"");if(-1!==e.indexOf("!"))throw new Error("cold observable cannot have unsubscription marker \"!\"");var a=t.parseMarbles(e,n,r),o=new s.ColdObservable(a,this);return this.coldObservables.push(o),o},t.prototype.createHotObservable=function(e,n,r){if(-1!==e.indexOf("!"))throw new Error("hot observable cannot have unsubscription marker \"!\"");var a=t.parseMarbles(e,n,r),o=new l.HotObservable(a,this);return this.hotObservables.push(o),o},t.prototype.materializeInnerObservable=function(e,t){var n=this,r=[];return e.subscribe(function(e){r.push({frame:n.frame-t,notification:i.Notification.createNext(e)})},function(e){r.push({frame:n.frame-t,notification:i.Notification.createError(e)})},function(){r.push({frame:n.frame-t,notification:i.Notification.createComplete()})}),r},t.prototype.expectObservable=function(e,n){var a=this;void 0===n&&(n=null);var s=[],l={actual:s,ready:!1},d=t.parseMarblesAsSubscriptions(n).unsubscribedFrame,c;return this.schedule(function(){c=e.subscribe(function(e){var t=e;e instanceof o.Observable&&(t=a.materializeInnerObservable(t,a.frame)),s.push({frame:a.frame,notification:i.Notification.createNext(t)})},function(e){s.push({frame:a.frame,notification:i.Notification.createError(e)})},function(){s.push({frame:a.frame,notification:i.Notification.createComplete()})})},0),d!==r&&this.schedule(function(){return c.unsubscribe()},d),this.flushTests.push(l),{toBe:function(e,n,r){l.ready=!0,l.expected=t.parseMarbles(e,n,r,!0)}}},t.prototype.expectSubscriptions=function(e){var n={actual:e,ready:!1};return this.flushTests.push(n),{toBe:function(e){var r="string"==typeof e?[e]:e;n.ready=!0,n.expected=r.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;0<t.length;)t.shift().setup();e.prototype.flush.call(this);for(var n=this.flushTests.filter(function(e){return e.ready}),r;0<n.length;)r=n.shift(),this.assertDeepEqual(r.actual,r.expected)},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new d.SubscriptionLog(r);for(var t=e.length,n=-1,a=r,o=r,s=0;s<t;s++){var i=s*this.frameTimeFactor,l=e[s];switch(l){case"-":case" ":break;case"(":n=i;break;case")":n=-1;break;case"^":if(a!==r)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");a=-1<n?n:i;break;case"!":if(o!==r)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");o=-1<n?n:i;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+l+"'.");}}return 0>o?new d.SubscriptionLog(a):new d.SubscriptionLog(a,o)},t.parseMarbles=function(e,t,n,r){if(void 0===r&&(r=!1),-1!==e.indexOf("!"))throw new Error("conventional marble diagrams cannot have the unsubscription marker \"!\"");for(var a=e.length,o=[],l=e.indexOf("^"),d=-1===l?0:l*-this.frameTimeFactor,p="object"==typeof t?function(e){return r&&t[e]instanceof s.ColdObservable?t[e].messages:t[e]}:function(e){return e},u=-1,m=0;m<a;m++){var f=m*this.frameTimeFactor+d,y=void 0,g=e[m];switch(g){case"-":case" ":break;case"(":u=f;break;case")":u=-1;break;case"|":y=i.Notification.createComplete();break;case"^":break;case"#":y=i.Notification.createError(n||"error");break;default:y=i.Notification.createNext(p(g));}y&&o.push({frame:-1<u?u:f,notification:y})}return o},t}(c.VirtualTimeScheduler);n.TestScheduler=p},{"../Notification":343,"../Observable":344,"../scheduler/VirtualTimeScheduler":647,"./ColdObservable":655,"./HotObservable":656,"./SubscriptionLog":657}],660:[function(e,t,n){"use strict";var r=e("./root"),a=function(){return function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}}();n.RequestAnimationFrameDefinition=a,n.AnimationFrame=new a(r.root)},{"./root":684}],661:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);n.ArgumentOutOfRangeError=a},{}],662:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);n.EmptyError=a},{}],663:[function(e,t,n){"use strict";var r=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var n=this.values;for(var r in n)n.hasOwnProperty(r)&&null!==n[r]&&e.call(t,n[r],r)},e.prototype.clear=function(){this.values={}},e}();n.FastMap=r},{}],664:[function(e,t,n){"use strict";var r=e("./root"),a=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.setImmediate=this.canUseProcessNextTick()?this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.createReadyStateChangeSetImmediate():this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return!!this.root.MessageChannel},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return!!(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=function e(){var t=e,n=t.handler,r=t.args;"function"==typeof n?n.apply(void 0,r):new Function(""+n)()};return r.handler=e,r.args=t,r},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,n=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,n)),n};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",n=function n(r){var a=n.instance;r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a.runIfPresent(+r.data.slice(t.length))};n.instance=this,e.addEventListener("message",n,!1);var r=function e(){var t=e,n=t.messagePrefix,r=t.instance,a=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(n+a,"*"),a};return r.instance=this,r.messagePrefix=t,r},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var n=t.data;e.runIfPresent(n)};var n=function e(){var t=e,n=t.channel,r=t.instance,a=r.addFromSetImmediateArguments(arguments);return n.port2.postMessage(a),a};return n.channel=t,n.instance=this,n},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,n=t.root,r=n.document,a=r.documentElement,o=t.addFromSetImmediateArguments(arguments),i=r.createElement("script");return i.onreadystatechange=function(){t.runIfPresent(o),i.onreadystatechange=null,a.removeChild(i),i=null},a.appendChild(i),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,n=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,n),0),n};return e.instance=this,e},e}();n.ImmediateDefinition=a,n.Immediate=new a(r.root)},{"./root":684}],665:[function(e,t,n){"use strict";var r=e("./root"),a=e("./MapPolyfill");n.Map=r.root.Map||function(){return a.MapPolyfill}()},{"./MapPolyfill":666,"./root":684}],666:[function(e,t,n){"use strict";var r=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var n=this._keys.indexOf(e);return-1===n?(this._keys.push(e),this._values.push(t),this.size++):this._values[n]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var n=0;n<this.size;n++)e.call(t,this._values[n],this._keys[n])},e}();n.MapPolyfill=r},{}],667:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);n.ObjectUnsubscribedError=a},{}],668:[function(e,t,n){"use strict";function r(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}var a=e("./root");n.minimalSetImpl=r,n.Set=a.root.Set||r()},{"./root":684}],669:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);n.TimeoutError=a},{}],670:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(t,e),t}(Error);n.UnsubscriptionError=a},{}],671:[function(e,t,n){"use strict";n.applyMixins=function(e,t){for(var n=0,r=t.length;n<r;n++)for(var a=t[n],o=Object.getOwnPropertyNames(a.prototype),i=0,s=o.length,l;i<s;i++)l=o[i],e.prototype[l]=a.prototype[l]}},{}],672:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t.length,a=0,o;a<r;a++)for(var i in o=t[a],o)o.hasOwnProperty(i)&&(e[i]=o[i]);return e}function a(e){return e.Object.assign||r}var o=e("./root");n.assignImpl=r;n.getAssign=a,n.assign=a(o.root)},{"./root":684}],673:[function(e,t,n){"use strict";n.errorObject={e:{}}},{}],674:[function(e,t,n){"use strict";n.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],675:[function(e,t,n){"use strict";n.isArrayLike=function(e){return e&&"number"==typeof e.length}},{}],676:[function(e,t,n){"use strict";n.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},{}],677:[function(e,t,n){"use strict";n.isFunction=function(e){return"function"==typeof e}},{}],678:[function(e,t,n){"use strict";var r=e("../util/isArray");n.isNumeric=function(e){return!r.isArray(e)&&0<=e-parseFloat(e)+1}},{"../util/isArray":674}],679:[function(e,t,n){"use strict";n.isObject=function(e){return null!=e&&"object"==typeof e}},{}],680:[function(e,t,n){"use strict";n.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},{}],681:[function(e,t,n){"use strict";n.isScheduler=function(e){return e&&"function"==typeof e.schedule}},{}],682:[function(e,t,n){"use strict";n.noop=function(){}},{}],683:[function(e,t,n){"use strict";n.not=function(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}},{}],684:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,a=t||"undefined"!=typeof e&&e||r;n.root=a,function(){if(!a)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],685:[function(e,t,n){"use strict";var r=e("./root"),a=e("./isArrayLike"),o=e("./isPromise"),i=e("./isObject"),s=e("../Observable"),l=e("../symbol/iterator"),d=e("../InnerSubscriber"),c=e("../symbol/observable");n.subscribeToResult=function(e,t,n,p){var u=new d.InnerSubscriber(e,n,p);if(u.closed)return null;if(t instanceof s.Observable)return t._isScalar?(u.next(t.value),u.complete(),null):t.subscribe(u);if(a.isArrayLike(t)){for(var m=0,f=t.length;m<f&&!u.closed;m++)u.next(t[m]);u.closed||u.complete()}else{if(o.isPromise(t))return t.then(function(e){u.closed||(u.next(e),u.complete())},function(e){return u.error(e)}).then(null,function(e){r.root.setTimeout(function(){throw e})}),u;if(t&&"function"==typeof t[l.iterator]){var y=t[l.iterator]();do{var g=y.next();if(g.done){u.complete();break}if(u.next(g.value),u.closed)break}while(!0)}else if(t&&"function"==typeof t[c.observable]){var h=t[c.observable]();if("function"!=typeof h.subscribe)u.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return h.subscribe(new d.InnerSubscriber(e,n,p))}else{var b=i.isObject(t)?"an invalid object":"'"+t+"'";u.error(new TypeError("You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},{"../InnerSubscriber":342,"../Observable":344,"../symbol/iterator":652,"../symbol/observable":653,"./isArrayLike":675,"./isObject":679,"./isPromise":680,"./root":684}],686:[function(e,t,n){"use strict";var r=e("../Subscriber"),a=e("../symbol/rxSubscriber"),o=e("../Observer");n.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[a.rxSubscriber])return e[a.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(o.empty)}},{"../Observer":345,"../Subscriber":352,"../symbol/rxSubscriber":654}],687:[function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(t){return a.errorObject.e=t,a.errorObject}}var a=e("./errorObject"),o;n.tryCatch=function(e){return o=e,r}},{"./errorObject":673}],688:[function(e,t){(function(e){/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n,r,a,o,i,s,l,d,c,p,u,m,y,f,g,h;(function(n){function r(e,t){return function(n,r){return e[n]=t?t(n,r):r}}var a="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){n(r(a,r(e)))}):"object"==typeof t&&"object"==typeof t.exports?n(r(a,r(t.exports))):n(r(a))})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};n=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},r=Object.assign||function(e){for(var t=1,r=arguments.length,n;t<r;t++)for(var a in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},a=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>r.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)0>r.indexOf(t[a])&&(e[t[a]]=n[t[a]]);return e},o=function(e,t,n,a){var o=arguments.length,s=3>o?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a,r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;0<=l;l--)(r=e[l])&&(s=(3>o?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s},i=function(e,t){return function(n,r){t(n,r,e)}},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},d=function(e,n){function r(e){return function(t){return a([e,t])}}function a(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(l=s[2&r[0]?"return":r[0]?"throw":"next"])&&!(l=l.call(s,r[1])).done)return l;switch((s=0,l)&&(r=[0,l.value]),r[0]){case 0:case 1:l=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if((l=o.trys,!(l=0<l.length&&l[l.length-1]))&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!l||r[1]>l[0]&&r[1]<l[3])){o.label=r[1];break}if(6===r[0]&&o.label<l[1]){o.label=l[1],l=r;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(r);break}l[2]&&o.ops.pop(),o.trys.pop();continue;}r=n.call(e,o)}catch(t){r=[6,t],s=0}finally{i=l=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},i,s,l,d;return d={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},c=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},p=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},u=function(t,a){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o=n.call(t),i=[],s,r;try{for(;(void 0===a||0<a--)&&!(s=o.next()).done;)i.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return i},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},y=function(e){return this instanceof y?(this.v=e,this):new y(e)},f=function(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){1<p.push([e,t,n,r])||o(e,t)})})}function o(e,t){try{a(c[e](t))}catch(t){d(p[0][3],t)}}function a(e){e.value instanceof y?Promise.resolve(e.value.v).then(s,l):d(p[0][2],e)}function s(e){o("next",e)}function l(e){o("throw",e)}function d(e,t){(e(t),p.shift(),p.length)&&o(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=n.apply(e,t||[]),p=[],u;return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},g=function(e){function t(t,n){e[t]&&(r[t]=function(r){return(a=!a)?{value:y(e[t](r)),done:"return"===t}:n?n(r):r})}var r,a;return r={},t("next"),t("throw",function(t){throw t}),t("return"),r[Symbol.iterator]=function(){return this},r},h=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof p?p(e):e[Symbol.iterator]()},e("__extends",n),e("__assign",r),e("__rest",a),e("__decorate",o),e("__param",i),e("__metadata",s),e("__awaiter",l),e("__generator",d),e("__exportStar",c),e("__values",p),e("__read",u),e("__spread",m),e("__await",y),e("__asyncGenerator",f),e("__asyncDelegator",g),e("__asyncValues",h)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],689:[function(e,t,n){(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.vega=e.vega||{})})(this,function(e){"use strict";function t(e){return _.hasOwnProperty(e)}function r(e,t,r,a,o){for(var i=0,s=e.length,n;t<s;++t){if(n=e[t],!i&&n===r)return t;o&&0<=o.indexOf(n)?--i:a&&0<=a.indexOf(n)&&++i}return t}function a(e){for(var t=[],a=0,o=e.length,n=0;n<o;)n=r(e,n,f,d+p,c+u),t.push(e.substring(a,n).trim()),a=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function o(e){return"["===e[0]?n(e):i(e)}function n(e){var t=e.length,n=1,i,s;if(n=r(e,n,c,d,c),n===t)throw"Empty between selector: "+e;if(i=a(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==g)throw"Expected '>' after between selector: "+e;return(i=i.map(o),s=o(e.slice(1).trim()),s.between)?{between:i,stream:s}:(s.between=i,s)}function i(e){var a={source:b},o=[],s=[0,0],f=0,g=0,_=e.length,x=0,i,v;if(e[_-1]===u){if(x=e.lastIndexOf(p),0<=x){try{s=l(e.substring(x+1,_-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,x).trim(),_=e.length}else throw"Unmatched right brace: "+e;x=0}if(!_)throw e;if(e[0]===y&&(f=++x),i=r(e,x,m),i<_&&(o.push(e.substring(g,i).trim()),g=x=++i),x=r(e,x,d),x===_)o.push(e.substring(g,_).trim());else if(o.push(e.substring(g,x).trim()),v=[],g=++x,g===_)throw"Unmatched left bracket: "+e;for(;x<_;){if(x=r(e,x,c),x===_)throw"Unmatched left bracket: "+e;if(v.push(e.substring(g,x).trim()),x<_-1&&e[++x]!==d)throw"Expected left bracket: "+e;g=++x}if(!(_=o.length)||h.test(o[_-1]))throw"Invalid event selector: "+e;return 1<_?(a.type=o[1],f?a.markname=o[0].slice(1):t(o[0])?a.marktype=o[0]:a.source=o[0]):a.type=o[0],"!"===a.type.slice(-1)&&(a.consume=!0,a.type=a.type.slice(0,-1)),null!=v&&(a.filter=v),s[0]&&(a.throttle=s[0]),s[1]&&(a.debounce=s[1]),a}function l(e){var t=e.split(f);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}var d="[",c="]",p="{",u="}",m=":",f=",",y="@",g=">",h=/[[\]{}]/,s={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},b,_;e.selector=function(e,t,n){return b=t||"view",_=n||s,a(e.trim()).map(o)},Object.defineProperty(e,"__esModule",{value:!0})})},{}],690:[function(e,t){t.exports={name:"vega-lite",author:"Jeffrey Heer, Dominik Moritz, Kanit \"Ham\" Wongsuphasawat",version:"2.0.0-beta.19",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",main:"build/src/index.js",types:"typings/vega-lite.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{pretsc:"mkdir -p build && rm -rf build/*/** && cp package.json build/",tsc:"tsc",prebuild:"mkdir -p build/site build/test-gallery",build:"npm run build:only","build:only":"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js",postbuild:"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run data && npm run build:only && npm run build:examples-only","build:examples-only":"TZ=America/Los_Angeles ./scripts/build-examples.sh && rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples","build:example":"./scripts/build-example.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js","build:versions":"scripts/update-version.sh","build:test-gallery":"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js","check:examples":"scripts/check-examples.sh","check:schema":"scripts/check-schema.sh",clean:"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\.(js|js.map|d.ts)' -delete",data:"rsync -r node_modules/vega-datasets/data/* data",link:"npm link && npm link vega-lite",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",prestart:"npm run data && npm run build && scripts/index-examples",start:"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'",poststart:"rm examples/all-examples.json",preschema:"npm run prebuild",schema:"typescript-to-json-schema --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run build && npm run data && npm run build:site && npm run build:toc && npm run build:versions",site:"bundle exec jekyll serve",lint:"tslint --project tsconfig.json -c tslint.json --type-check",test:"npm run build:only && npm run test:only && npm run test:runtime && npm run lint",posttest:"npm run schema && npm run data && npm run mocha:examples","test:nocompile":"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples","test:only":"nyc --reporter=html --reporter=text-summary npm run mocha:test","test:runtime":"TZ=America/Los_Angeles wdio wdio.conf.js","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","test:debug":"npm run tsc && mocha --recursive --debug-brk --inspect build/test","test:debug-examples":"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples","mocha:test":"mocha --require source-map-support/register --reporter dot --recursive build/test","mocha:examples":"mocha --require source-map-support/register --reporter dot --recursive build/examples",codecov:"nyc report --reporter=json && codecov -f coverage/*.json","watch:build":"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'","watch:tsc":"npm run tsc -- -w","watch:test":"nodemon -x 'npm test'",watch:"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.0.2","@types/d3":"^4.10.0","@types/highlight.js":"^9.1.9","@types/json-stable-stringify":"^1.0.31","@types/mkdirp":"^0.5.0","@types/mocha":"^2.2.41","@types/node":"^8.0.19","@types/webdriverio":"^4.8.4",ajv:"5.2.2","browser-sync":"^2.18.13",browserify:"^14.4.0","browserify-shim":"^3.8.14",chai:"^4.1.0",cheerio:"^1.0.0-rc.2",chromedriver:"^2.30.1",codecov:"^2.3.0",d3:"^4.10.0",exorcist:"^0.4.0","highlight.js":"^9.12.0",mkdirp:"^0.5.1",mocha:"^3.5.0",nodemon:"^1.11.0",nyc:"^11.1.0","source-map-support":"^0.4.15","ts-node":"^3.2.1",tsify:"^3.0.1",tslint:"5.4.3","tslint-eslint-rules":"^4.1.1",typescript:"^2.4.2","typescript-to-json-schema":"vega/typescript-to-json-schema#v0.8.0","uglify-js":"^3.0.27",vega:"^3.0.0","vega-datasets":"vega/vega-datasets#gh-pages","vega-embed":"^3.0.0-beta.20","vega-tooltip":"^0.4.2",watchify:"^3.9.0","wdio-chromedriver-service":"^0.1.0","wdio-dot-reporter":"0.0.8","wdio-mocha-framework":"^0.5.10","wdio-static-server-service":"^1.0.1",webdriverio:"^4.8.0","yaml-front-matter":"^3.4.0"},dependencies:{"json-stable-stringify":"^1.0.1",tslib:"^1.7.1","vega-event-selector":"^2.0.0","vega-util":"^1.5.0",yargs:"^8.0.2"}}},{}],691:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};n.AGGREGATE_OPS=r.flagKeys(o),n.isAggregateOp=function(e){return!!o[e]},n.COUNTING_OPS=["count","valid","missing","distinct"],n.isCountingAggregateOp=function(e){return e&&r.contains(n.COUNTING_OPS,e)},n.SUM_OPS=["count","sum","distinct","valid","missing"],n.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],n.SHARED_DOMAIN_OP_INDEX=r.toSet(n.SHARED_DOMAIN_OPS)},{"./util":796}],692:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AXIS_PROPERTY_TYPE={grid:"grid",labelOverlap:"main",offset:"main",title:"main"},n.AXIS_PROPERTIES=["domain","format","grid","labelPadding","labels","labelOverlap","maxExtent","minExtent","offset","orient","position","tickCount","tickExtra","ticks","tickSize","title","titlePadding","values","zindex"],n.VG_AXIS_PROPERTIES=[].concat(n.AXIS_PROPERTIES,["gridScale"])},{}],693:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./channel"),a=e("./util");n.binToString=function(e){return a.isBoolean(e)?"bin":"bin"+a.keys(e).map(function(t){return"_"+t+"_"+e[t]}).join("")},n.autoMaxBins=function(e){return e===r.ROW||e===r.COLUMN||e===r.SIZE||e===r.COLOR||e===r.OPACITY||e===r.SHAPE?6:10}},{"./channel":694,"./util":796}],694:[function(e,t,n){"use strict";function r(e){return e===n.X||e===n.Y||e===n.COLOR||e===n.DETAIL||e===n.TOOLTIP||e===n.ORDER||e===n.OPACITY||e===n.ROW||e===n.COLUMN?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0}:e===n.X2||e===n.Y2?{rule:!0,bar:!0,rect:!0,area:!0}:e===n.SIZE?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0}:e===n.SHAPE?{point:!0}:e===n.TEXT?{text:!0}:void 0}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("./util"),i;(function(e){e.ROW="row",e.COLUMN="column",e.X="x",e.Y="y",e.X2="x2",e.Y2="y2",e.COLOR="color",e.SHAPE="shape",e.SIZE="size",e.OPACITY="opacity",e.TEXT="text",e.ORDER="order",e.DETAIL="detail",e.TOOLTIP="tooltip"})(i=n.Channel||(n.Channel={})),n.X=i.X,n.Y=i.Y,n.X2=i.X2,n.Y2=i.Y2,n.ROW=i.ROW,n.COLUMN=i.COLUMN,n.SHAPE=i.SHAPE,n.SIZE=i.SIZE,n.COLOR=i.COLOR,n.TEXT=i.TEXT,n.DETAIL=i.DETAIL,n.ORDER=i.ORDER,n.OPACITY=i.OPACITY,n.TOOLTIP=i.TOOLTIP;var s={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1},l=a.__assign({},s,{row:1,column:1});n.CHANNELS=o.flagKeys(l);var d=l.order,c=l.detail,p=a.__rest(l,["order","detail"]);n.SINGLE_DEF_CHANNELS=o.flagKeys(p),n.isChannel=function(e){return!!l[e]},n.UNIT_CHANNELS=o.flagKeys(s);var u=s.x,m=s.y,f=s.x2,y=s.y2,g=a.__rest(s,["x","y","x2","y2"]);n.NONSPATIAL_CHANNELS=o.flagKeys(g);var h={x:1,y:1};n.SPATIAL_SCALE_CHANNELS=o.flagKeys(h);var b=g.text,_=g.tooltip,x=g.detail,v=g.order,S=a.__rest(g,["text","tooltip","detail","order"]);n.NONSPATIAL_SCALE_CHANNELS=o.flagKeys(S);var T=a.__assign({},h,S);n.SCALE_CHANNELS=o.flagKeys(T),n.isScaleChannel=function(e){return!!T[e]},n.supportMark=function(e,t){return t in r(e)},n.getSupportedMark=r,n.rangeType=function(e){switch(e){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return"continuous";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:return"discrete";case n.COLOR:return"flexible";case n.DETAIL:case n.ORDER:return;}throw new Error("getSupportedRole not implemented for "+e)}},{"./util":796,tslib:688}],695:[function(e,t,n){"use strict";function r(e){return function(t,n){return n[e]&&t.push(n[e].combine()),t}}Object.defineProperty(n,"__esModule",{value:!0});var a=r("main"),o=r("grid");n.assembleAxes=function(e){return[].concat(e.x?[].concat(e.x.reduce(a,[]),e.x.reduce(o,[])):[],e.y?[].concat(e.y.reduce(a,[]),e.y.reduce(o,[])):[])}},{}],696:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(a.Split);n.AxisComponentPart=o},{"../split":768,tslib:688}],697:[function(e,t,n){"use strict";function r(e,t,n){if(e.labelAngle!==void 0)return(e.labelAngle%360+360)%360;return t===i.X&&(c.contains([d.NOMINAL,d.ORDINAL],n.type)||!!n.bin||s.isTimeFieldDef(n))?270:void 0}function a(e,t){if(e&&0<e){if(180<e)return"top"===t?"left":"right";if(180>e)return"top"===t?"right":"left"}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../../channel"),s=e("../../fielddef"),l=e("../../scale"),d=e("../../type"),c=e("../../util"),p=e("../common");n.labels=function(e,t,n,i){var d=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),u=e.axis(t),m=e.config,f={};if(s.isTimeFieldDef(d)){var y=e.getScaleComponent(t).get("type")===l.ScaleType.UTC;f.text={signal:p.timeFormatExpression("datum.value",d.timeUnit,u.format,m.axis.shortTimeLabels,m.timeFormat,y)}}var g=r(u,t,d);if(g&&(f.angle={value:g}),f.angle&&"x"===t){var h=a(g,i.get("orient"));h&&(f.align={value:h}),c.contains([90,270],g)&&(f.baseline={value:"middle"})}return f=o.__assign({},f,n),0===c.keys(f).length?void 0:f},n.labelAngle=r,n.labelAlign=a},{"../../channel":694,"../../fielddef":778,"../../scale":786,"../../type":795,"../../util":796,"../common":702,tslib:688}],698:[function(e,t,n){"use strict";function r(e,t){if(e){if(e.length!==t.length)return;for(var n=e.length,r=0;r<n;r++){var o=e[r].main,i=t[r].main;if(!!o!=!!i)return;if(o&&i){var s=o.getWithExplicit("orient"),l=i.getWithExplicit("orient");if(s.explicit&&l.explicit&&s.value!==l.value)return;e[r].main=a(o,i)}var d=e[r].grid,c=t[r].grid;if(!!d!=!!c)return;d&&c&&(e[r].grid=a(d,c))}}else return t.map(function(e){return u.__assign({},e.main?{main:e.main.clone()}:{},e.grid?{grid:e.grid.clone()}:{})});return e}function a(e,t){for(var n=function(n){var r=b.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",function(e,t){return"title"===n?g.titleMerger(e,t):"gridScale"===n?{explicit:e.explicit,value:e.value||t.value}:b.defaultTieBreaker(e,t,n,"axis")});e.setWithExplicit(n,r)},r=0,a=m.VG_AXIS_PROPERTIES,o;r<a.length;r++)o=a[r],n(o);return e}function o(e){return!1===e||null===e}function i(e){return y.some(S,function(t){return s(e,t)})}function s(e,t){return!("axis"!==t)||("grid"===t||"title"===t?!!e.get(t):!o(e.get(t)))}function l(e,t){return c(e,t,!0)}function d(e,t){return c(e,t,!1)}function c(t,n,e){var r=n.axis(t),a=new _.AxisComponentPart({},{scale:n.scaleName(t)});m.AXIS_PROPERTIES.forEach(function(o){var i=p(o,r,t,n,e);if(void 0!==i){var s="values"===o?!!r.values:i===r[o];a.set(o,i,s)}});var o=v.gridScale(n,t,e);void 0!==o&&a.set("gridScale",o,!1);var i=r.encoding||{},l=S.reduce(function(r,e){if(!s(a,e))return r;var o="labels"===e?x.labels(n,t,i.labels||{},a):i[e]||{};return void 0!==o&&0<y.keys(o).length&&(r[e]={update:o}),r},{});return 0<y.keys(l).length&&a.set("encode",l,!!r.encoding||!!r.labelAngle),a}function p(e,t,n,r,a){var o=r.fieldDef(n);if((!a||"main"!==m.AXIS_PROPERTY_TYPE[e])&&(a||"grid"!==m.AXIS_PROPERTY_TYPE[e])){switch(e){case"domain":return v.domain(e,t,a,n);case"format":return g.numberFormat(o,t.format,r.config);case"grid":{var i=r.component.scales[n].get("type");return g.getSpecifiedOrDefaultValue(t.grid,v.grid(i,o))}case"labels":return!a&&t.labels;case"labelOverlap":{var i=r.component.scales[n].get("type");return v.labelOverlap(o,t,n,i)}case"minExtent":return v.minMaxExtent(t.minExtent,a);case"maxExtent":return v.minMaxExtent(t.maxExtent,a);case"orient":return g.getSpecifiedOrDefaultValue(t.orient,v.orient(n));case"tickCount":{var i=r.component.scales[n].get("type"),s="x"===n?"width":"y"===n?"height":void 0,l=s?r.getSizeSignalRef(s):void 0;return g.getSpecifiedOrDefaultValue(t.tickCount,v.tickCount(n,o,i,l))}case"ticks":return v.ticks(e,t,a,n);case"title":return g.getSpecifiedOrDefaultValue(t.title,v.title(t.titleMaxLength,o,r.config));case"values":return v.values(t,r,o);case"zindex":return g.getSpecifiedOrDefaultValue(t.zindex,v.zindex(a));}return t[e]}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("tslib"),m=e("../../axis"),f=e("../../channel"),y=e("../../util"),g=e("../common"),h=e("../resolve"),b=e("../split"),_=e("./component"),x=e("./encode"),v=e("./properties"),S=["domain","grid","labels","ticks","title"];n.parseUnitAxis=function(e){return f.SPATIAL_SCALE_CHANNELS.reduce(function(t,n){if(e.axis(n)){var r={},a=d(n,e);a&&i(a)&&(r.main=a);var o=l(n,e);o&&i(o)&&(r.grid=o),t[n]=[r]}return t},{})};var T={bottom:"top",top:"bottom",left:"right",right:"left"};n.parseLayerAxis=function(e){for(var t=e.component,n=t.axes,a=t.resolve,o={top:0,bottom:0,right:0,left:0},i=function(t){t.parseAxisAndHeader(),y.keys(t.component.axes).forEach(function(o){a.axis[o]=h.parseGuideResolve(e.component.resolve,o),"shared"===a.axis[o]&&(n[o]=r(n[o],t.component.axes[o]),!n[o]&&(a.axis[o]="independent",delete n[o]))})},s=0,l=e.children,d;s<l.length;s++)d=l[s],i(d);["x","y"].forEach(function(t){for(var r=0,i=e.children,s;r<i.length;r++)(s=i[r],!!s.component.axes[t])&&("independent"===a.axis[t]&&(n[t]=(n[t]||[]).concat(s.component.axes[t]),s.component.axes[t].forEach(function(e){var t=e.main.getWithExplicit("orient"),n=t.value,r=t.explicit;if(0<o[n]&&!r){var a=T[n];o[n]>o[a]&&e.main.set("orient",a,!1)}o[n]++})),delete s.component.axes[t])})},n.parseGridAxis=l,n.parseMainAxis=d},{"../../axis":692,"../../channel":694,"../../util":796,"../common":702,"../resolve":748,"../split":768,"./component":696,"./encode":697,"./properties":699,tslib:688}],699:[function(e,t,n){"use strict";function r(e,t,n){return!n&&t[e]}Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../channel"),o=e("../../datetime"),i=e("../../fielddef"),s=e("../../log"),l=e("../../scale"),d=e("../../util");n.domainAndTicks=r,n.domain=r,n.ticks=r,n.grid=function(e,t){return!l.hasDiscreteDomain(e)&&!t.bin},n.gridScale=function(e,t,n){if(n){var r="x"===t?"y":"x";if(e.getScaleComponent(r))return e.scaleName(r)}},n.labelOverlap=function(e,t,n,r){return("x"===n||"y"===n)&&"nominal"!==e.type?"log"!==r||"greedy":void 0},n.minMaxExtent=function(e,t){return t?0:e},n.orient=function(e){switch(e){case a.X:return"bottom";case a.Y:return"left";}throw new Error(s.message.INVALID_CHANNEL_FOR_AXIS)},n.tickCount=function(e,t,n,r){return l.hasDiscreteDomain(n)||"log"===n||d.contains(["month","hours","day","quarter"],t.timeUnit)?void 0:t.bin?{signal:"min(ceil("+r.signal+"/40), "+t.bin.maxbins+")"}:{signal:"ceil("+r.signal+"/40)"}},n.title=function(e,t,n){var r=i.title(t,n);return e?d.truncate(r,e):r},n.values=function(e){var t=e.values;return e.values&&o.isDateTime(t[0])?t.map(function(e){return{signal:o.dateTimeExpr(e,!0)}}):t},n.zindex=function(e){return e?0:1}},{"../../channel":694,"../../datetime":775,"../../fielddef":778,"../../log":783,"../../scale":786,"../../util":796}],700:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../util"),o=e("./data/parse"),i=e("./layoutsize/assemble"),s=e("./model"),l=function(e){function t(t,n,r,a,o){return e.call(this,t,n,r,a,o)||this}return r.__extends(t,e),t.prototype.parseData=function(){this.component.data=o.parseData(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),a.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children,o;n<r.length;n++)o=r[n],t(o)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseAxisAndHeader()},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},i.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),a=e.assembleLayoutSize();return r.__assign({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},a?{encode:{update:a}}:{},e.assembleGroup())})},t}(s.Model);n.BaseConcatModel=l},{"../util":796,"./data/parse":719,"./layoutsize/assemble":726,"./model":745,tslib:688}],701:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../log"),a=e("../spec"),o=e("./concat"),i=e("./facet"),s=e("./layer"),l=e("./repeat"),d=e("./unit");n.buildModel=function(e,t,n,c,p,u){if(a.isFacetSpec(e))return new i.FacetModel(e,t,n,p,u);if(a.isLayerSpec(e))return new s.LayerModel(e,t,n,c,p,u);if(a.isUnitSpec(e))return new d.UnitModel(e,t,n,c,p,u);if(a.isRepeatSpec(e))return new l.RepeatModel(e,t,n,p,u);if(a.isConcatSpec(e))return new o.ConcatModel(e,t,n,p,u);throw new Error(r.message.INVALID_SPEC)}},{"../log":783,"../spec":789,"./concat":704,"./facet":723,"./layer":724,"./repeat":746,"./unit":769}],702:[function(e,t,n){"use strict";function r(e){return e.style?f.isArray(e.style)?e.style:[e.style]:[e.type]}function a(e,t,n){var a=n.mark[e],o=n[t.type];o[e]!==void 0&&(a=o[e]);for(var i=r(t),s=0,l=i;s<l.length;s++){var d=l[s],c=n.style[d],u=e;c&&c[u]!==void 0&&(a=c[u])}return a}function o(e,t,n){return e.type===m.QUANTITATIVE?t?t:n.numberFormat:void 0}function i(e,t){return"format("+e+", \""+(t||"")+"\")"}function s(e,t,n){return i(e,t||n.numberFormat)}function l(e,t,n,r){return e+" === null || isNaN("+e+") ? \"null\" : "+s(e,n,r)+" + \" - \" + "+s(t,n,r)}function d(e,t,n,r,a,o){if(!t||n){var i=n||a;return o?"utcFormat("+e+", '"+i+"')":"timeFormat("+e+", '"+i+"')"}return u.formatExpression(t,e,r,o)}Object.defineProperty(n,"__esModule",{value:!0});var c=e("../fielddef"),p=e("../scale"),u=e("../timeunit"),m=e("../type"),f=e("../util");n.applyConfig=function(t,e,n){for(var r=0,a=n;r<a.length;r++){var o=a[r],i=e[o];i!==void 0&&(t[o]={value:i})}return t},n.applyMarkConfig=function(t,e,n){for(var r=0,o=n;r<o.length;r++){var i=o[r],s=a(i,e.markDef,e.config);s!==void 0&&(t[i]={value:s})}return t},n.getStyles=r,n.getMarkConfig=a,n.formatSignalRef=function(e,t,n,r,a){var s=o(e,t,r);if(e.bin){if(a)return{signal:c.field(e,{expr:n,binSuffix:"range"})};var u=c.field(e,{expr:n}),m=c.field(e,{expr:n,binSuffix:"end"});return{signal:l(u,m,s,r)}}if("quantitative"===e.type)return{signal:""+i(c.field(e,{expr:n}),s)};if(c.isTimeFieldDef(e)){var f=c.isScaleFieldDef(e)&&e.scale&&e.scale.type===p.ScaleType.UTC;return{signal:d(c.field(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,f)}}return{signal:"''+"+c.field(e,{expr:n})}},n.getSpecifiedOrDefaultValue=function(e,t){return void 0===e?t:e},n.numberFormat=o,n.numberFormatExpr=s,n.binFormatExpression=l,n.timeFormatExpression=d,n.sortParams=function(e,t){return(f.isArray(e)?e:[e]).reduce(function(e,n){return e.field.push(c.field(n,t)),e.order.push(n.sort||"ascending"),e},{field:[],order:[]})},n.titleMerger=function(e,t){return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value}}},{"../fielddef":778,"../scale":786,"../timeunit":791,"../type":795,"../util":796}],703:[function(e,t,n){"use strict";function r(e,t){return o.__assign({},d.extractTopLevelProperties(t),d.extractTopLevelProperties(e))}function a(e,t){var n=e.config?i.stripAndRedirectConfig(e.config):void 0,r=t.autoResize,a=o.__rest(t,["autoResize"]),s=e.assembleTitle(),l=e.assembleGroupStyle(),d=o.__assign({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},{autosize:t.autoResize?{type:"pad",resize:!0}:"pad"},a,s?{title:s}:{},l?{style:l}:{},{data:[].concat(e.assembleSelectionData([]),p.assembleRootData(e.component.data))},e.assembleGroup(e.assembleLayoutSignals().concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{});return{spec:d}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../config"),s=e("../log"),l=e("../spec"),d=e("../toplevelprops"),c=e("./buildmodel"),p=e("./data/assemble"),u=e("./data/optimize");n.compile=function(e,t){t&&s.set(t);try{var n=i.initConfig(e.config),o=l.normalize(e,n),d=c.buildModel(o,null,"",void 0,void 0,n);return d.parse(),u.optimizeDataflow(d.component.data),a(d,r(e,n))}finally{t&&s.reset()}}},{"../config":773,"../log":783,"../spec":789,"../toplevelprops":793,"./buildmodel":701,"./data/assemble":706,"./data/optimize":717,tslib:688}],704:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../spec"),o=e("./baseconcat"),s=e("./buildmodel"),i=e("./layoutsize/parse"),l=function(e){function t(t,n,r,o,l){var d=e.call(this,t,n,r,l,t.resolve)||this;return d.type="concat",d.isVConcat=a.isVConcatSpec(t),d.children=(a.isVConcatSpec(t)?t.vconcat:t.hconcat).map(function(e,t){return s.buildModel(e,d,d.getName("concat_"+t),void 0,o,l)}),d}return r.__extends(t,e),t.prototype.parseLayoutSize=function(){i.parseConcatLayoutSize(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return r.__assign({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(o.BaseConcatModel);n.ConcatModel=l},{"../spec":789,"./baseconcat":700,"./buildmodel":701,"./layoutsize/parse":727,tslib:688}],705:[function(e,t,n){"use strict";function r(e,t){return t.bin?(e[l.field(t,{})]=!0,e[l.field(t,{binSuffix:"end"})]=!0,(t.type===d.ORDINAL||t.type===d.NOMINAL)&&(e[l.field(t,{binSuffix:"range"})]=!0)):e[l.field(t)]=!0,e}function a(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var a in r)r.hasOwnProperty(a)&&(n in e?e[n][a]=r[a]:e[n]={op:r[a]})}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../../channel"),l=e("../../fielddef"),s=e("../../log"),d=e("../../type"),c=e("../../util"),p=e("./dataflow"),u=function(e){function n(t,n){var r=e.call(this)||this;return r.dimensions=t,r.measures=n,r}return o.__extends(n,e),n.prototype.clone=function(){return new n(c.extend({},this.dimensions),c.duplicate(this.measures))},n.makeFromEncoding=function(e){var t=!1;e.forEachFieldDef(function(e){e.aggregate&&(t=!0)});var a={},o={};return t?(e.forEachFieldDef(function(t,n){t.aggregate?"count"===t.aggregate?(a["*"]=a["*"]||{},a["*"].count=l.field(t,{aggregate:"count"})):(a[t.field]=a[t.field]||{},a[t.field][t.aggregate]=l.field(t),i.isScaleChannel(n)&&"unaggregated"===e.scaleDomain(n)&&(a[t.field].min=l.field(t,{aggregate:"min"}),a[t.field].max=l.field(t,{aggregate:"max"}))):r(o,t)}),0===c.keys(o).length+c.keys(a).length?null:new n(o,a)):null},n.makeFromTransform=function(e){for(var t={},r={},a=0,o=e.summarize,i;a<o.length;a++)i=o[a],i.aggregate&&("count"===i.aggregate?(r["*"]=r["*"]||{},r["*"].count=i.as||l.field(i)):(r[i.field]=r[i.field]||{},r[i.field][i.aggregate]=i.as||l.field(i)));for(var s=0,d=e.groupby,i;s<d.length;s++)i=d[s],t[i]=!0;return 0===c.keys(t).length+c.keys(r).length?null:new n(t,r)},n.prototype.merge=function(e){c.differ(this.dimensions,e.dimensions)?s.debug("different dimensions, cannot merge"):(a(this.measures,e.measures),e.remove())},n.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},n.prototype.dependentFields=function(){var e={};return c.keys(this.dimensions).forEach(function(t){return e[t]=!0}),c.keys(this.measures).forEach(function(t){return e[t]=!0}),e},n.prototype.producedFields=function(){var e=this,t={};return c.keys(this.measures).forEach(function(n){c.keys(e.measures[n]).forEach(function(e){t[e+"_"+n]=!0})}),t},n.prototype.assemble=function(){var e=this,t=[],n=[],r=[];c.keys(this.measures).forEach(function(a){c.keys(e.measures[a]).forEach(function(o){r.push(e.measures[a][o]),t.push(o),n.push(a)})});var a={type:"aggregate",groupby:c.keys(this.dimensions),ops:t,fields:n,as:r};return a},n}(p.DataFlowNode);n.AggregateNode=u},{"../../channel":694,"../../fielddef":778,"../../log":783,"../../type":795,"../../util":796,"./dataflow":709,tslib:688}],706:[function(e,t,n){"use strict";function r(e){function t(r,i){if(r instanceof b.SourceNode&&!o.isUrlData(r.data)){e.push(i);var v={name:null,source:i.name,transform:[]};i=v}if(r instanceof m.ParseNode&&(r.parent instanceof b.SourceNode&&!i.source?i.format=a.__assign({},i.format||{},{parse:r.assembleFormatParse()}):i.transform=i.transform.concat(r.assembleTransforms())),r instanceof p.FacetNode)return i.name||(i.name="data_"+n++),!i.source||0<i.transform.length?(e.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach(function(t){return e.push(t)});if((r instanceof u.FilterNode||r instanceof h.NullFilterNode||r instanceof d.CalculateNode||r instanceof s.AggregateNode||r instanceof y.LookupNode||r instanceof f.IdentifierNode)&&i.transform.push(r.assemble()),(r instanceof g.NonPositiveFilterNode||r instanceof l.BinNode||r instanceof x.TimeUnitNode||r instanceof _.StackNode)&&(i.transform=i.transform.concat(r.assemble())),r instanceof s.AggregateNode&&!i.name&&(i.name="data_"+n++),r instanceof c.OutputNode)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof c.OutputNode)r.setSource(i.name);else if(i.name||(i.name="data_"+n++),r.setSource(i.name),1===r.numChildren()){e.push(i);var v={name:null,source:i.name,transform:[]};i=v}switch(r.numChildren()){case 0:r instanceof c.OutputNode&&(!i.source||0<i.transform.length)&&e.push(i);break;case 1:t(r.children[0],i);break;default:i.name||(i.name="data_"+n++);var S=i.name;!i.source||0<i.transform.length?e.push(i):S=i.source,r.children.forEach(function(e){var n={name:null,source:S,transform:[]};t(e,n)});}}var n=0;return t}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../../data"),i=e("../../util"),s=e("./aggregate"),l=e("./bin"),d=e("./calculate"),c=e("./dataflow"),p=e("./facet"),u=e("./filter"),m=e("./formatparse"),f=e("./indentifier"),y=e("./lookup"),g=e("./nonpositivefilter"),h=e("./nullfilter"),b=e("./source"),_=e("./stack"),x=e("./timeunit");n.assembleFacetData=function(e){var t=[],n=r(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t},n.assembleRootData=function(e){var n=i.vals(e.sources),a=[],o=r(a),s=0;n.forEach(function(e){e.hasName()||(e.dataName="source_"+s++);var t=e.assemble();o(e,t)}),a.forEach(function(e){0===e.transform.length&&delete e.transform}),a.sort(function(e,t){return 0===(e.transform||[]).length?-1:0===(t.transform||[]).length?1:0});for(var l=0,c=a,p;l<c.length;l++){p=c[l];for(var d=0,u=p.transform||[],m;d<u.length;d++)m=u[d],"lookup"===m.type&&(m.from=e.outputNodes[m.from].getSource())}return a}},{"../../data":774,"../../util":796,"./aggregate":705,"./bin":707,"./calculate":708,"./dataflow":709,"./facet":710,"./filter":711,"./formatparse":712,"./indentifier":713,"./lookup":714,"./nonpositivefilter":715,"./nullfilter":716,"./source":720,"./stack":721,"./timeunit":722,tslib:688}],707:[function(e,t,n){"use strict";function r(e,t,n,r){var a=e.hasDiscreteDomain(n);if(a){var o=m.isUnitModel(e)?e.axis(n)||e.legend(n)||{}:{},i=c.field(t,{expr:"datum"}),s=c.field(t,{expr:"datum",binSuffix:"end"});return{formulaAs:c.field(t,{binSuffix:"range"}),formula:u.binFormatExpression(i,s,o.format,r)}}return{}}function a(e,t){return d.binToString(e)+"_"+t}function o(e){return!!e.model}function i(e,t){if(o(e)){var n=e.model;return{signal:n.getName(t+"_bins"),extentSignal:n.getName(t+"_extent")}}return e}function s(e,t){var n=c.normalizeBin(e.bin,void 0)||{},r=a(n,e.field),o=i(t,r),s=o.signal,d=o.extentSignal,p=l.__assign({bin:n,field:e.field,as:[c.field(e,{}),c.field(e,{binSuffix:"end"})]},s?{signal:s}:{},d?{extentSignal:d}:{});return{key:r,binComponent:p}}Object.defineProperty(n,"__esModule",{value:!0});var l=e("tslib"),d=e("../../bin"),c=e("../../fielddef"),p=e("../../util"),u=e("../common"),m=e("../model"),f=e("./dataflow"),y=function(e){function n(t){var n=e.call(this)||this;return n.bins=t,n}return l.__extends(n,e),n.prototype.clone=function(){return new n(p.duplicate(this.bins))},n.makeBinFromEncoding=function(e){var t=e.reduceFieldDef(function(t,n,a){var o=n.bin;if(o){var i=s(n,{model:e}),d=i.key,c=i.binComponent;t[d]=l.__assign({},c,t[d],r(e,n,a,e.config))}return t},{});return 0===p.keys(t).length?null:new n(t)},n.makeFromTransform=function(e,t){var r=s(e,t),a=r.key,o=r.binComponent;return new n((i={},i[a]=o,i));var i},n.prototype.merge=function(e){this.bins=p.extend(e.bins),e.remove()},n.prototype.producedFields=function(){var e={};return p.vals(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},n.prototype.dependentFields=function(){var e={};return p.vals(this.bins).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return p.flatten(p.vals(this.bins).map(function(e){var t=[],n=l.__assign({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))},n}(f.DataFlowNode);n.BinNode=y},{"../../bin":693,"../../fielddef":778,"../../util":796,"../common":702,"../model":745,"./dataflow":709,tslib:688}],708:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../util"),o=e("./dataflow"),i=function(e){function t(t){var n=e.call(this)||this;return n.transform=t,n}return r.__extends(t,e),t.prototype.clone=function(){return new t(a.duplicate(this.transform))},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}(o.DataFlowNode);n.CalculateNode=i},{"../../util":796,"./dataflow":709,tslib:688}],709:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=function(){function e(e){this.debugName=e,this._children=[],this._parent=null}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children,n;e<t.length;e++)n=t[e],n.parent=this._parent;this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,r=this._children,a;n<r.length;n++)a=r[n],a.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}();n.DataFlowNode=a;var o=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.type=n,a.refCounts=r,a._source=a._name=t,a.refCounts&&!(a._name in a.refCounts)&&(a.refCounts[a._name]=0),a}return r.__extends(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(a);n.OutputNode=o},{tslib:688}],710:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../channel"),o=e("../../scale"),i=e("../../vega.schema"),s=e("../scale/domain"),l=e("./dataflow"),d=function(e){function t(t,n,r){var l=e.call(this)||this;l.model=t,l.name=n,l.data=r,l.childIndependentFieldWithStep={},t.facet.column&&(l.columnFields=[t.field(a.COLUMN)],l.columnName=t.getName("column_domain"),t.fieldDef(a.COLUMN).bin&&l.columnFields.push(t.field(a.COLUMN,{binSuffix:"range"}))),t.facet.row&&(l.rowFields=[t.field(a.ROW)],l.rowName=t.getName("row_domain"),t.fieldDef(a.ROW).bin&&l.rowFields.push(t.field(a.ROW,{binSuffix:"range"})));for(var d=0,c=["x","y"];d<c.length;d++){var p=c[d],u=t.child.component.scales[p];if(u&&!u.merged){var m=u.get("type"),f=u.get("range");if(o.hasDiscreteDomain(m)&&i.isVgRangeStep(f)){var y=s.getFieldFromDomains(u.domains);if(y)l.childIndependentFieldWithStep[p]=y;else throw new Error("We do not yet support calculation of size for faceted union domain.")}}}return l}return r.__extends(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.assembleRowColumnData=function(e,t){var n="row"===e?"y":"x",a={};return this.childIndependentFieldWithStep[n]&&(t?a={fields:["distinct_"+this.childIndependentFieldWithStep[n]],ops:["max"],as:["distinct_"+this.childIndependentFieldWithStep[n]]}:a={fields:[this.childIndependentFieldWithStep[n]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[r.__assign({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},a)]}},t.prototype.assemble=function(){var e=[],t=null;if(this.columnName&&this.rowName&&(this.childIndependentFieldWithStep.x||this.childIndependentFieldWithStep.y)){t="cross_"+this.columnName+"_"+this.rowName;var n=[].concat(this.childIndependentFieldWithStep.x?[this.childIndependentFieldWithStep.x]:[],this.childIndependentFieldWithStep.y?[this.childIndependentFieldWithStep.y]:[]),r=n.map(function(){return"distinct"});e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:n,ops:r}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t)),this.rowName&&e.push(this.assembleRowColumnData("row",t)),e},t}(l.DataFlowNode);n.FacetNode=d},{"../../channel":694,"../../scale":786,"../../vega.schema":798,"../scale/domain":751,"./dataflow":709,tslib:688}],711:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../filter"),o=e("../../util"),i=e("./dataflow"),s=function(e){function t(t,n){var r=e.call(this)||this;return r.model=t,r.filter=n,r.expr=a.expression(r.model,r.filter,r),r}return r.__extends(t,e),t.prototype.clone=function(){return new t(this.model,o.duplicate(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}(i.DataFlowNode);n.FilterNode=s},{"../../filter":779,"../../util":796,"./dataflow":709,tslib:688}],712:[function(e,t,n){"use strict";function r(e,t){var n="datum["+p.stringValue(e)+"]";if("number"===t)return"toNumber("+n+")";if("boolean"===t)return"toBoolean("+n+")";if("string"===t)return"toString("+n+")";if("date"===t)return"toDate("+n+")";if(0===t.indexOf("date:")){var r=t.slice(5,t.length);return"timeParse("+n+","+r+")"}if(0===t.indexOf("utc:")){var r=t.slice(4,t.length);return"utcParse("+n+","+r+")"}return l.warn(l.message.unrecognizedParse(t)),null}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../../aggregate"),i=e("../../fielddef"),s=e("../../filter"),l=e("../../log"),d=e("../../logical"),c=e("../../transform"),p=e("../../util"),u=e("../model"),m=e("./dataflow"),f=function(e){function t(t){var n=e.call(this)||this;return n._parse={},n._parse=t,n}return a.__extends(t,e),t.prototype.clone=function(){return new t(p.duplicate(this.parse))},t.make=function(e){var n={},r={};(e.transforms||[]).forEach(function(e){c.isCalculate(e)?r[e.as]=!0:c.isFilter(e)&&d.forEachLeave(e.filter,function(e){(s.isEqualFilter(e)||s.isRangeFilter(e)||s.isOneOfFilter(e))&&e.timeUnit&&(n[e.field]="date")})},{}),(u.isUnitModel(e)||u.isFacetModel(e))&&e.forEachFieldDef(function(e){if(i.isTimeFieldDef(e))n[e.field]="date";else if(i.isNumberFieldDef(e)){if(r[e.field]||o.isCountingAggregateOp(e.aggregate))return;n[e.field]="number"}});var a=e.data;if(a&&a.format&&a.format.parse){var m=a.format.parse;p.keys(m).forEach(function(e){n[e]=m[e]})}var f=e.component.data.ancestorParse;return p.keys(f).forEach(function(e){n[e]===f[e]?delete n[e]:l.warn(l.message.differentParse(e,n[e],f[e]))}),0===p.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=p.extend(this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){return this._parse},t.prototype.producedFields=function(){return p.toSet(p.keys(this.parse))},t.prototype.dependentFields=function(){return p.toSet(p.keys(this.parse))},t.prototype.assembleTransforms=function(){var e=this;return p.keys(this._parse).map(function(t){var n=r(t,e._parse[t]);if(!n)return null;return{type:"formula",expr:n,as:t}}).filter(function(e){return null!==e})},t}(m.DataFlowNode);n.ParseNode=f},{"../../aggregate":691,"../../fielddef":778,"../../filter":779,"../../log":783,"../../logical":784,"../../transform":794,"../../util":796,"../model":745,"./dataflow":709,tslib:688}],713:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../selection"),o=e("./dataflow"),i=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype.clone=function(){return new t},t.prototype.producedFields=function(){return e={},e[a.SELECTION_ID]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:a.SELECTION_ID}},t}(o.DataFlowNode);n.IdentifierNode=i},{"../../selection":787,"./dataflow":709,tslib:688}],714:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("vega-util"),o=e("../../log"),i=e("./dataflow"),l=e("./source"),s=function(e){function t(t,n){var r=e.call(this)||this;return r.transform=t,r.secondary=n,r}return r.__extends(t,e),t.make=function(e,n,r){var a=e.component.data.sources,o=new l.SourceNode(n.from.data),s=a[o.hash()];s||(a[o.hash()]=o,s=o);var d=e.getName("lookup_"+r),c=new i.OutputNode(d,"lookup",e.component.data.outputNodeRefCounts);return c.parent=s,e.component.data.outputNodes[d]=c,new t(n,c.getSource())},t.prototype.producedFields=function(){return a.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=r.__assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;a.isString(t)||(o.warn(o.message.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return r.__assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(i.DataFlowNode);n.LookupNode=s},{"../../log":783,"./dataflow":709,"./source":720,tslib:688,"vega-util":805}],715:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../channel"),o=e("../../scale"),i=e("../../util"),s=e("./dataflow"),l=function(e){function t(t){var n=e.call(this)||this;return n._filter=t,n}return r.__extends(t,e),t.prototype.clone=function(){return new t(i.extend({},this._filter))},t.make=function(e){var n=a.SCALE_CHANNELS.reduce(function(t,n){var r=e.getScaleComponent(n);return r&&e.field(n)?(t[e.field(n)]=r.get("type")===o.ScaleType.LOG,t):t},{});return i.keys(n).length?new t(n):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this;return i.keys(this._filter).filter(function(t){return e._filter[t]}).map(function(e){return{type:"filter",expr:"datum["+i.stringValue(e)+"] > 0"}})},t}(s.DataFlowNode);n.NonPositiveFilterNode=l},{"../../channel":694,"../../scale":786,"../../util":796,"./dataflow":709,tslib:688}],716:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../channel"),o=e("../../scale"),i=e("../../type"),s=e("../../util"),l=e("./dataflow"),d=function(e){function t(t){var n=e.call(this)||this;return n._filteredFields=t,n}return r.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._filteredFields))},t.make=function(e){var n=e.reduceFieldDef(function(t,n,r){if("filter"===e.config.invalidValues&&!n.aggregate&&n.field){var i=a.isScaleChannel(r)&&e.getScaleComponent(r);if(i){var s=i.get("type");o.hasContinuousDomain(s)&&(t[n.field]=n)}}return t},{});return 0===s.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"filteredFields",{get:function(){return this._filteredFields},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){var n=this,r=s.keys(this._filteredFields).map(function(e){return e+" "+s.hash(n._filteredFields[e])}),t=s.keys(e.filteredFields).map(function(t){return t+" "+s.hash(e.filteredFields[t])});s.differArray(r,t)||(this._filteredFields=s.extend(this._filteredFields,e._filteredFields),e.remove())},t.prototype.assemble=function(){var e=this,t=s.keys(this._filteredFields).reduce(function(t,n){var r=e._filteredFields[n];return null!==r&&(t.push("datum["+s.stringValue(r.field)+"] !== null"),s.contains([i.QUANTITATIVE,i.TEMPORAL],r.type)&&t.push("!isNaN(datum["+s.stringValue(r.field)+"])")),t},[]);return 0<t.length?{type:"filter",expr:t.join(" && ")}:null},t}(l.DataFlowNode);n.NullFilterNode=d},{"../../channel":694,"../../scale":786,"../../type":795,"../../util":796,"./dataflow":709,tslib:688}],717:[function(e,t,n){"use strict";function r(e){function t(r){if(!(r instanceof u.FacetNode)){var a=r.clone();if(a instanceof p.OutputNode){var o=n.FACET_SCALE_PREFIX+a.getSource();a.setSource(o),e.model.component.data.outputNodes[o]=a}else(a instanceof c.AggregateNode||a instanceof g.StackNode)&&a.addDimensions(e.fields);return d.flatten(r.children.map(t)).forEach(function(e){return e.parent=a}),[a]}return d.flatten(r.children.map(t))}return t}function a(e){if(!(e instanceof u.FacetNode))e.children.forEach(a);else if(1===e.numChildren()&&!(e.children[0]instanceof p.OutputNode)){var t=e.children[0];(t instanceof c.AggregateNode||t instanceof g.StackNode)&&t.addDimensions(e.fields),t.swapWithParent(),a(e)}else{o(e.model.component.data.main);var n=d.flatten(e.children.map(r(e)));n.forEach(function(t){return t.parent=e.model.component.data.main})}}function o(e){if(e instanceof p.OutputNode&&e.type===l.MAIN&&1===e.numChildren()){var t=e.children[0];t instanceof u.FacetNode||(t.swapWithParent(),o(e))}}function i(e){e instanceof m.NonPositiveFilterNode&&d.every(d.vals(e.filter),function(e){return!1===e})&&e.remove(),e instanceof f.NullFilterNode&&d.every(d.vals(e.filteredFields),function(e){return null===e})&&e.remove(),e instanceof p.OutputNode&&!e.isRequired()&&e.remove(),e.children.forEach(i)}function s(e){function t(e){0===e.numChildren()?n.push(e):e.children.forEach(t)}var n=[];return e.forEach(t),n}Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../data"),d=e("../../util"),c=e("./aggregate"),p=e("./dataflow"),u=e("./facet"),m=e("./nonpositivefilter"),f=e("./nullfilter"),y=e("./optimizers"),g=e("./stack");n.FACET_SCALE_PREFIX="scale_",n.optimizeDataflow=function(e){var t=d.vals(e.sources);t.forEach(i),t=t.filter(function(e){return 0<e.numChildren()}),s(t).forEach(y.iterateFromLeaves(y.removeUnusedSubtrees)),t=t.filter(function(e){return 0<e.numChildren()}),s(t).forEach(y.iterateFromLeaves(y.moveParseUp)),s(t).forEach(y.removeDuplicateTimeUnits),t.forEach(a),d.keys(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}},{"../../data":774,"../../util":796,"./aggregate":705,"./dataflow":709,"./facet":710,"./nonpositivefilter":715,"./nullfilter":716,"./optimizers":718,"./stack":721}],718:[function(e,t,n){"use strict";function r(e){function t(n){if(!(n instanceof l.SourceNode)){var r=n.parent;e(n)&&t(r)}}return t}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../../util"),i=e("./dataflow"),s=e("./formatparse"),l=e("./source"),d=e("./timeunit");n.iterateFromLeaves=r,n.moveParseUp=function(e){var t=e.parent;if(e instanceof s.ParseNode){if(t instanceof l.SourceNode)return!1;if(1<t.numChildren())return!0;if(t instanceof s.ParseNode)t.merge(e);else{if(o.hasIntersection(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0},n.removeUnusedSubtrees=function(e){return e instanceof i.OutputNode||0<e.numChildren()?!1:(e.remove(),!0)},n.removeDuplicateTimeUnits=function(e){var t={};return r(function(e){if(e instanceof d.TimeUnitNode){var n=e.producedFields(),r=o.keys(n).every(function(e){return!!t[e]});r?e.remove():t=a.__assign({},t,n)}return!0})(e)}},{"../../util":796,"./dataflow":709,"./formatparse":712,"./source":720,"./timeunit":722,tslib:688}],719:[function(e,t,n){"use strict";function r(e,t){if(e.data||!e.parent){var n=new E.SourceNode(e.data),r=n.hash();return r in t?t[r]:(t[r]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function a(e){function n(e){t?e.parent?o.insertAsParentOf(e):e.parent=o:t=e.parent||e,o=e}var t=null,r=0,a,o;e.transforms.forEach(function(o){if(p.isCalculate(o))a=new h.CalculateNode(o);else if(p.isFilter(o)){var t={},s=o.filter,m=null;if(d.isEqualFilter(s)?m=s.equal:d.isRangeFilter(s)?m=s.range[0]:d.isOneOfFilter(s)&&(m=(s.oneOf||s["in"])[0]),m&&(l.isDateTime(m)?t[s.field]="date":i.isNumber(m)?t[s.field]="number":i.isString(m)&&(t[s.field]="string")),0<u.keys(t).length){var b=new v.ParseNode(t);n(b)}a=new x.FilterNode(e,o.filter)}else if(p.isBin(o))a=g.BinNode.makeFromTransform(o,{model:e});else if(p.isTimeUnit(o))a=w.TimeUnitNode.makeFromTransform(o);else if(p.isSummarize(o))a=y.AggregateNode.makeFromTransform(o),f.requiresSelectionId(e)&&(n(a),a=new S.IdentifierNode);else if(p.isLookup(o))a=T.LookupNode.make(e,o,r++);else return void c.warn(c.message.invalidTransformIgnored(o));n(a)});var s=a;return{first:t,last:s}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("vega-util"),s=e("../../data"),l=e("../../datetime"),d=e("../../filter"),c=e("../../log"),p=e("../../transform"),u=e("../../util"),m=e("../model"),f=e("../selection/selection"),y=e("./aggregate"),g=e("./bin"),h=e("./calculate"),b=e("./dataflow"),_=e("./facet"),x=e("./filter"),v=e("./formatparse"),S=e("./indentifier"),T=e("./lookup"),k=e("./nonpositivefilter"),O=e("./nullfilter"),E=e("./source"),C=e("./stack"),w=e("./timeunit");n.parseTransformArray=a,n.parseData=function(e){var t=r(e,e.component.data.sources),n=e.component.data.outputNodes,i=e.component.data.outputNodeRefCounts,l=t;if(f.requiresSelectionId(e)&&!e.parent){var d=new S.IdentifierNode;d.parent=l,l=d}var c=e.parent&&m.isLayerModel(e.parent);if((m.isUnitModel(e)||m.isFacetModel(e))&&c){var p=g.BinNode.makeBinFromEncoding(e);p&&(p.parent=l,l=p)}if(0<e.transforms.length){var u=a(e),h=u.first,x=u.last;h.parent=l,l=x}var T=v.ParseNode.make(e);if(T&&(T.parent=l,l=T),m.isUnitModel(e)||m.isFacetModel(e)){var E=O.NullFilterNode.make(e);if(E&&(E.parent=l,l=E),!c){var p=g.BinNode.makeBinFromEncoding(e);p&&(p.parent=l,l=p)}var A=w.TimeUnitNode.makeFromEncoding(e);A&&(A.parent=l,l=A)}var N=e.getName(s.RAW),P=new b.OutputNode(N,s.RAW,i);if(n[N]=P,P.parent=l,l=P,m.isUnitModel(e)){var R=y.AggregateNode.makeFromEncoding(e);if(R&&(R.parent=l,l=R,f.requiresSelectionId(e))){var d=new S.IdentifierNode;d.parent=l,l=d}var D=C.StackNode.make(e);D&&(D.parent=l,l=D);var I=k.NonPositiveFilterNode.make(e);I&&(I.parent=l,l=I)}var M=e.getName(s.MAIN),F=new b.OutputNode(M,s.MAIN,i);n[M]=F,F.parent=l,l=F;var j=null;if(m.isFacetModel(e)){var z=e.getName("facet");j=new _.FacetNode(e,z,F.getSource()),n[z]=j,j.parent=l,l=j}var U=o.__assign({},e.component.data.ancestorParse,T?T.parse:{});return o.__assign({},e.component.data,{outputNodes:n,outputNodeRefCounts:i,raw:P,main:F,facetRoot:j,ancestorParse:U})}},{"../../data":774,"../../datetime":775,"../../filter":779,"../../log":783,"../../transform":794,"../../util":796,"../model":745,"../selection/selection":758,"./aggregate":705,"./bin":707,"./calculate":708,"./dataflow":709,"./facet":710,"./filter":711,"./formatparse":712,"./indentifier":713,"./lookup":714,"./nonpositivefilter":715,"./nullfilter":716,"./source":720,"./stack":721,"./timeunit":722,tslib:688,"vega-util":805}],720:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../data"),o=e("../../util"),i=e("./dataflow"),s=function(e){function t(t){var n=e.call(this)||this;if(t=t||{name:"source"},a.isInlineData(t))n._data={values:t.values};else if(a.isUrlData(t)){var i=/(?:\.([^.]+))?$/.exec(t.url)[1];o.contains(["json","csv","tsv","topojson"],i)||(i="json");var s=t.format||{},l=s.type||t.formatType,d=s.property,c=s.feature,p=s.mesh,u=r.__assign({type:l?l:i},d?{property:d}:{},c?{feature:c}:{},p?{mesh:p}:{});n._data={url:t.url,format:u}}else a.isNamedData(t)&&(n._name=t.name,n._data={});return n}return r.__extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return a.isInlineData(this._data)?o.hash(this._data):a.isUrlData(this._data)?this._data.url+" "+o.hash(this._data.format):this._name},t.prototype.assemble=function(){return r.__assign({name:this._name},this._data,{transform:[]})},t}(i.DataFlowNode);n.SourceNode=s},{"../../data":774,"../../util":796,"./dataflow":709,tslib:688}],721:[function(e,t,n){"use strict";function r(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,r=i.field(n);return r&&e.push(r),e},[])}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("vega-util"),i=e("../../fielddef"),s=e("../../util"),l=e("../common"),d=e("./dataflow"),c=function(e){function t(t){var n=e.call(this)||this;return n._stack=t,n}return a.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._stack))},t.make=function(e){var n=e.stack;if(!n)return null;var a;n.groupbyChannel&&(a=e.fieldDef(n.groupbyChannel));var o=r(e),i=e.encoding.order,s;return s=i?l.sortParams(i):o.reduce(function(e,t){return e.field.push(t),e.order.push("descending"),e},{field:[],order:[]}),new t({dimensionFieldDef:a,field:e.field(n.fieldChannel),facetby:[],stackby:o,sort:s,offset:n.offset,impute:n.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return o.isArray(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[i.field(t,{binSuffix:"mid"})]:[i.field(t,{}),i.field(t,{binSuffix:"end"})]:[i.field(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,r=t.field,a=t.dimensionFieldDef,o=t.impute,s=t.offset,l=t.sort,d=t.stackby;if(o&&a){var c=a?i.field(a,{binSuffix:"mid"}):void 0;a.bin&&e.push({type:"formula",expr:"("+i.field(a,{expr:"datum"})+"+"+i.field(a,{expr:"datum",binSuffix:"end"})+")/2",as:c}),e.push({type:"impute",field:r,groupby:d,key:c,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:r,sort:l,as:[r+"_start",r+"_end"],offset:s}),e},t}(d.DataFlowNode);n.StackNode=c},{"../../fielddef":778,"../../util":796,"../common":702,"./dataflow":709,tslib:688,"vega-util":805}],722:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../fielddef"),o=e("../../timeunit"),i=e("../../util"),s=e("./dataflow"),l=function(e){function n(t){var n=e.call(this)||this;return n.formula=t,n}return r.__extends(n,e),n.prototype.clone=function(){return new n(i.duplicate(this.formula))},n.makeFromEncoding=function(e){var t=e.reduceFieldDef(function(e,t){if(t.timeUnit){var n=a.field(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===i.keys(t).length?null:new n(t)},n.makeFromTransform=function(e){return new n((t={},t[e.field]={as:e.as,timeUnit:e.timeUnit,field:e.field},t));var t},n.prototype.merge=function(e){this.formula=i.extend(this.formula,e.formula),e.remove()},n.prototype.producedFields=function(){var e={};return i.vals(this.formula).forEach(function(t){e[t.as]=!0}),e},n.prototype.dependentFields=function(){var e={};return i.vals(this.formula).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return i.vals(this.formula).map(function(e){return{type:"formula",as:e.as,expr:o.fieldExpr(e.timeUnit,e.field)}})},n}(s.DataFlowNode);n.TimeUnitNode=l},{"../../fielddef":778,"../../timeunit":791,"../../util":796,"./dataflow":709,tslib:688}],723:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../channel"),o=e("../encoding"),i=e("../fielddef"),s=e("../log"),l=e("../scale"),d=e("../util"),c=e("../vega.schema"),p=e("./buildmodel"),u=e("./data/assemble"),m=e("./data/parse"),f=e("./layout/header"),y=e("./layoutsize/parse"),g=e("./model"),h=e("./repeater"),b=e("./resolve"),_=e("./scale/domain"),x=function(e){function t(t,n,r,a,o){var i=e.call(this,t,n,r,o,t.resolve)||this;i.type="facet",i.child=p.buildModel(t.spec,i,i.getName("child"),void 0,a,o),i.children=[i.child];var s=h.replaceRepeaterInFacet(t.facet,a);return i.facet=i.initFacet(s),i}return r.__extends(t,e),t.prototype.initFacet=function(e){return o.reduce(e,function(e,t,n){return d.contains([a.ROW,a.COLUMN],n)?void 0===t.field?(s.warn(s.message.emptyFieldDef(t,n)),e):(e[n]=i.normalize(t,n),e):(s.warn(s.message.incompatibleChannel(n,"facet")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.hasDiscreteDomain=function(){return!0},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=m.parseData(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){y.parseChildrenLayoutSize(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},r=void 0===n.title?i.title(t,this.config):n.title;this.child.component.layoutHeaders[e].title&&(r+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:r,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,r=n.layoutHeaders,a=n.resolve;if(a.axis[e]=b.parseGuideResolve(a,e),"shared"===a.axis[e])for(var o="x"===e?"column":"row",i=r[o],s=0,l=t.component.axes[e];s<l.length;s++){var d=l[s],c=d.main,p=f.getHeaderType(c.get("orient"));i[p]=i[p]||[this.makeHeaderComponent(o,!1)],i[p][0].axes.push(c.combine()),delete d.main}else;}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",r=0,a=["row","column"];r<a.length;r++){var o=a[r],i=this.component.layoutHeaders[o],s=i[e];if(s&&s[0]){var l="row"===o?"height":"width";this.child.component.layoutSize.get(l)||(t[n]=t[n]||{},t[n][o]=0.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return r.__assign({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t)){var e=this.getName("column_domain");return{signal:"length(data('"+e+"'))"}}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?r.__assign({},this.channelHasField("column")?{encode:{update:{columns:{field:i.field(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(i.field(this.child.facet.column)),n.push("distinct"));else for(var r=0,a=["x","y"];r<a.length;r++){var o=a[r],s=this.child.component.scales[o];if(s&&!s.merged){var d=s.get("type"),p=s.get("range");if(l.hasDiscreteDomain(d)&&c.isVgRangeStep(p)){var u=_.getFieldFromDomains(s.domains);if(u)e.push(u),n.push("distinct");else throw new Error("We do not yet support calculation of size for faceted union domain.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this,t=e.child,n=e.facet,o=this.component.data.facetRoot,i=u.assembleFacetData(o),s=this.channelHasField(a.ROW),l=this.channelHasField(a.COLUMN),d=t.assembleLayoutSize(),c={};s&&l&&(c.aggregate={cross:!0});var p=this.getCardinalityAggregateForChild();p&&(c.aggregate=r.__assign({},c.aggregate,p));var m=t.assembleTitle(),f=t.assembleGroupStyle(),y=r.__assign({name:this.getName("cell"),type:"group"},m?{title:m}:{},f?{style:f}:{},{from:{facet:r.__assign({name:o.name,data:o.data,groupby:[].concat(s?[this.field(a.ROW)]:[],l?[this.field(a.COLUMN)]:[])},c)},sort:{field:[].concat(s?[this.field(a.ROW,{expr:"datum"})]:[],l?[this.field(a.COLUMN,{expr:"datum"})]:[]),order:[].concat(s?[n.row.sort||"ascending"]:[],l?[n.column.sort||"ascending"]:[])}},0<i.length?{data:i}:{},d?{encode:{update:d}}:{},t.assembleGroup());return[y]},t.prototype.getMapping=function(){return this.facet},t}(g.ModelWithField);n.FacetModel=x},{"../channel":694,"../encoding":776,"../fielddef":778,"../log":783,"../scale":786,"../util":796,"../vega.schema":798,"./buildmodel":701,"./data/assemble":706,"./data/parse":719,"./layout/header":725,"./layoutsize/parse":727,"./model":745,"./repeater":747,"./resolve":748,"./scale/domain":751,tslib:688}],724:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../log"),o=e("../spec"),i=e("../util"),s=e("./axis/parse"),l=e("./data/parse"),d=e("./layoutsize/assemble"),c=e("./layoutsize/parse"),p=e("./model"),u=e("./selection/selection"),m=e("./unit"),f=function(e){function t(n,i,s,l,d,c){var p=e.call(this,n,i,s,c,n.resolve)||this;p.type="layer";var u=r.__assign({},l,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return p.initSize(u),p.children=n.layer.map(function(e,n){if(o.isLayerSpec(e))return new t(e,p,p.getName("layer_"+n),u,d,c);if(o.isUnitSpec(e))return new m.UnitModel(e,p,p.getName("layer_"+n),u,d,c);throw new Error(a.message.INVALID_SPEC)}),p}return r.__extends(t,e),t.prototype.parseData=function(){this.component.data=l.parseData(this);for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseData()},t.prototype.parseLayoutSize=function(){c.parseLayerLayoutSize(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),i.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children,a;n<r.length;n++)a=r[n],t(a)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){s.parseLayerAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},d.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,r=this.children,a;n<r.length;n++)if(a=r[n],t=a.assembleTitle(),t)return t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return u.assembleLayerSelectionMarks(this,i.flatten(this.children.map(function(e){return e.assembleMarks()})))},t}(p.Model);n.LayerModel=f},{"../log":783,"../spec":789,"../util":796,"./axis/parse":698,"./data/parse":719,"./layoutsize/assemble":726,"./layoutsize/parse":727,"./model":745,"./selection/selection":758,"./unit":769,tslib:688}],725:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../../fielddef"),o=e("../common");n.HEADER_CHANNELS=["row","column"],n.HEADER_TYPES=["header","footer"],n.getHeaderType=function(e){return"top"===e||"left"===e?"header":"footer"},n.getTitleGroup=function(e,t){var n=e.component.layoutHeaders[t].title,a="row"===t?"vertical":void 0;return{name:e.getName(t+"_title"),role:t+"-title",type:"group",marks:[{type:"text",role:t+"-title-text",style:"guide-title",encode:{update:r.__assign({align:{value:"center"},text:{value:n}},"vertical"===a?{angle:{value:270}}:{})}}]}},n.getHeaderGroup=function(e,t,n,i,s){if(s){var l=null;if(i.facetFieldDef&&s.labels){var d=i.facetFieldDef,c=d.header?d.header.format:void 0;l={text:o.formatSignalRef(d,c,"parent",e.config,!0),offset:10,orient:"row"===t?"left":"top",style:"guide-label",encode:{update:r.__assign({fontWeight:{value:"normal"},angle:{value:0},fontSize:{value:10}},"row"===t?{align:{value:"right"},baseline:{value:"middle"}}:{})}}}var p=s.axes,u=p&&0<p.length;if(l||u){var m="row"===t?"height":"width";return r.__assign({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},i.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:a.field(i.facetFieldDef,{expr:"datum"}),order:i.facetFieldDef.header&&i.facetFieldDef.sort||"ascending"}}:{},l?{title:l}:{},s.sizeSignal?{encode:{update:(f={},f[m]=s.sizeSignal,f)}}:{},u?{axes:p}:{})}}return null;var f}},{"../../fielddef":778,"../common":702,tslib:688}],726:[function(e,t,n){"use strict";function r(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var d=e.getSizeSignalRef(t).signal;if("range-step"===r){var c=e.getScaleComponent(n);if(c){var p=c.get("type"),u=c.get("range");if(i.hasDiscreteDomain(p)&&s.isVgRangeStep(u)){var m=e.scaleName(n);if(l.isFacetModel(e.parent)){var f=e.parent.component.resolve;if("independent"===f.scale[n])return[a(m,u)]}return[a(m,u),{name:d,update:o(m,c,"domain('"+m+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}else return[{name:d,update:""+r}]}function a(e,t){return{name:e+"_step",value:t.step}}function o(e,t,n){var r=t.get("type"),a=t.get("padding"),o=t.get("paddingOuter");o=void 0===o?a:o;var i=t.get("paddingInner");return i="band"===r?void 0===i?a:i:1,"bandspace("+n+", "+i+", "+o+") * "+e+"_step"}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../scale"),s=e("../../vega.schema"),l=e("../model");n.assembleLayoutSignals=function(e){return[].concat(r(e,"width"),r(e,"height"))},n.sizeSignals=r,n.sizeExpr=o},{"../../scale":786,"../../vega.schema":798,"../model":745}],727:[function(e,t,n){"use strict";function r(e){a(e);var t=e.component.layoutSize;t.setWithExplicit("width",o(e,"width")),t.setWithExplicit("height",o(e,"height"))}function a(e){for(var t=0,n=e.children,r;t<n.length;t++)r=n[t],r.parseLayoutSize()}function o(e,t){for(var n="width"===t?"x":"y",r=e.component.resolve,a=0,o=e.children,i;a<o.length;a++){var s=o[a],l=s.component.layoutSize.getWithExplicit(t),c=r.scale[n];if("independent"===c&&"range-step"===l.value){i=void 0;break}if(i){if("independent"===c&&i.value!==l.value){i=void 0;break}i=d.mergeValuesWithExplicit(i,l,t,"",d.defaultTieBreaker)}else i=l}if(i){for(var p=0,u=e.children,s;p<u.length;p++)s=u[p],e.renameLayoutSize(s.getName(t),e.getName(t)),s.component.layoutSize.set(t,"merged",!1);return i}return{explicit:!1,value:void 0}}function i(e,t){var n="width"===t?"x":"y",r=e.config,a=e.getScaleComponent(n);if(a){var o=a.get("type"),i=a.get("range");return s.hasDiscreteDomain(o)&&l.isVgRangeStep(i)?"range-step":r.cell[t]}return"width"===t&&"text"===e.mark()?r.scale.textXRangeStep:r.scale.rangeStep||s.defaultScaleConfig.rangeStep}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../scale"),l=e("../../vega.schema"),d=e("../split");n.parseLayerLayoutSize=r,n.parseRepeatLayoutSize=r,n.parseConcatLayoutSize=function(e){a(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,o(e,n))},n.parseChildrenLayoutSize=a,n.parseUnitLayoutSize=function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=i(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var r=i(e,"height");t.set("height",r,!1)}}},{"../../scale":786,"../../vega.schema":798,"../split":768}],728:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("json-stable-stringify"),a=e("../../util"),o=e("./parse");n.assembleLegends=function(e){var t=e.component.legends,n={};return a.keys(t).forEach(function(a){var i=e.getScaleComponent(a),s=r(i.domains);if(n[s])for(var l=0,d=n[s];l<d.length;l++){var c=d[l],p=o.mergeLegendComponent(c,t[a]);p||n[s].push(t[a])}else n[s]=[t[a].clone()]}),a.flatten(a.vals(n)).map(function(e){return e.combine()})}},{"../../util":796,"./parse":731,"json-stable-stringify":24}],729:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(a.Split);n.LegendComponent=o},{"../split":768,tslib:688}],730:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),a=e("../../fielddef"),o=e("../../mark"),i=e("../../scale"),s=e("../../util"),l=e("../common"),d=e("../mark/mixins");n.symbols=function(e,t,n,i){var c={},p=n.mark();switch(p){case o.BAR:case o.TICK:case o.TEXT:c.shape={value:"square"};break;case o.CIRCLE:case o.SQUARE:c.shape={value:p};break;case o.POINT:case o.LINE:case o.AREA:}var u=n.markDef.filled,m=i===r.COLOR?s.without(o.FILL_STROKE_CONFIG,[u?"fill":"stroke","strokeDash","strokeDashOffset"]):o.FILL_STROKE_CONFIG;if(m=s.without(m,["strokeDash","strokeDashOffset"]),l.applyMarkConfig(c,n,m),i!==r.COLOR){var f=d.color(n);f.fill&&(f.fill.field||"transparent"===f.fill.value)&&delete f.fill,f.stroke&&(f.stroke.field||"transparent"===f.stroke.value)&&delete f.stroke,s.extend(c,f)}if(i!==r.SHAPE){var y=n.encoding.shape;a.isValueDef(y)&&(c.shape={value:y.value})}return c=s.extend(c,t||{}),0<s.keys(c).length?c:void 0},n.labels=function(e,t,n,r){var o=n.legend(r),d=n.config,c={};if(a.isTimeFieldDef(e)){var p=n.getScaleComponent(r).get("type")===i.ScaleType.UTC;t=s.extend({text:{signal:l.timeFormatExpression("datum.value",e.timeUnit,o.format,d.legend.shortTimeLabels,d.timeFormat,p)}},t||{})}return c=s.extend(c,t||{}),0<s.keys(c).length?c:void 0}},{"../../channel":694,"../../fielddef":778,"../../mark":785,"../../scale":786,"../../util":796,"../common":702,"../mark/mixins":738}],731:[function(e,t,n){"use strict";function r(e){e.component.legends=y.isUnitModel(e)?a(e):l(e)}function a(e){return[c.COLOR,c.SIZE,c.SHAPE,c.OPACITY].reduce(function(t,n){return e.legend(n)&&(t[n]=i(e,n)),t},{})}function o(e,t){switch(t){case c.COLOR:var n=e.scaleName(c.COLOR);return e.markDef.filled?{fill:n}:{stroke:n};case c.SIZE:return{size:e.scaleName(c.SIZE)};case c.SHAPE:return{shape:e.scaleName(c.SHAPE)};case c.OPACITY:return{opacity:e.scaleName(c.OPACITY)};}return null}function i(t,n){var r=t.fieldDef(n),e=t.legend(n),a=new _.LegendComponent({},o(t,n));u.LEGEND_PROPERTIES.forEach(function(r){var o=s(r,e,n,t);if(void 0!==o){var i="values"===r?!!e.values:o===e[r];a.set(r,o,i)}});var i=e.encoding||{},l=["labels","legend","title","symbols"].reduce(function(a,e){var o=x[e]?x[e](r,i[e],t,n):i[e];return void 0!==o&&0<m.keys(o).length&&(a[e]={update:o}),a},{});return 0<m.keys(l).length&&a.set("encode",l,!!e.encoding),a}function s(e,t,n,r){var a=r.fieldDef(n);return"format"===e?f.numberFormat(a,t.format,r.config):"title"===e?f.getSpecifiedOrDefaultValue(t.title,p.title(a,r.config)):"values"===e?v.values(t):"type"===e?f.getSpecifiedOrDefaultValue(t.type,v.type(a.type,n,r.getScaleComponent(n).get("type"))):t[e]}function l(e){for(var t=e.component,n=t.legends,a=t.resolve,o=function(t){r(t),m.keys(t.component.legends).forEach(function(r){a.legend[r]=g.parseGuideResolve(e.component.resolve,r),"shared"===a.legend[r]&&(n[r]=d(n[r],t.component.legends[r]),!n[r]&&(a.legend[r]="independent",delete n[r]))})},i=0,s=e.children,l;i<s.length;i++)l=s[i],o(l);return m.keys(n).forEach(function(t){for(var n=0,r=e.children,o;n<r.length;n++)(o=r[n],!!o.component.legends[t])&&"shared"===a.legend[t]&&delete o.component.legends[t]}),n}function d(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(!(n.explicit&&r.explicit&&n.value!==r.value)){for(var a=function(n){var r=b.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",function(e,t){return"title"===n?f.titleMerger(e,t):"type"===n?h.makeImplicit("symbol"):b.defaultTieBreaker(e,t,n,"legend")});e.setWithExplicit(n,r)},o=0,i=u.VG_LEGEND_PROPERTIES,s;o<i.length;o++)s=i[o],a(s);return e}}Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../channel"),p=e("../../fielddef"),u=e("../../legend"),m=e("../../util"),f=e("../common"),y=e("../model"),g=e("../resolve"),h=e("../split"),b=e("../split"),_=e("./component"),x=e("./encode"),v=e("./properties");n.parseLegend=r,n.parseLegendForChannel=i,n.mergeLegendComponent=d},{"../../channel":694,"../../fielddef":778,"../../legend":782,"../../util":796,"../common":702,"../model":745,"../resolve":748,"../split":768,"./component":729,"./encode":730,"./properties":732}],732:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),a=e("../../datetime"),o=e("../../scale"),i=e("../../util");n.values=function(e){var t=e.values;return t&&a.isDateTime(t[0])?t.map(function(e){return{signal:a.dateTimeExpr(e,!0)}}):t},n.type=function(e,t,n){return t===r.COLOR&&("quantitative"===e&&!o.isBinScale(n)||"temporal"===e&&i.contains(["time","utc"],n))?"gradient":void 0}},{"../../channel":694,"../../datetime":775,"../../scale":786,"../../util":796}],733:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("./mixins");n.area={vgMark:"area",encodeEntry:function(e){return r.__assign({},a.pointPosition("x",e,"zeroOrMin"),a.pointPosition("y",e,"zeroOrMin"),a.pointPosition2(e,"zeroOrMin"),a.color(e),a.text(e,"tooltip"),a.nonPosition("opacity",e),a.markDefProperties(e.markDef,["orient","interpolate","tension"]))}}},{"./mixins":738,tslib:688}],734:[function(e,t,n){"use strict";function r(e){var t=e.config,n=e.width,r=e.markDef.orient,a=e.encoding.size,s=e.encoding.x,c=e.scaleName(l.X),u=e.getScaleComponent(l.X);if("horizontal"===r)return i.__assign({},m.pointPosition("x",e,"zeroOrMin"),m.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(s)){var y=u.get("type");if(s.bin&&!a&&!p.hasDiscreteDomain(y))return m.binnedPosition(s,"x",e.scaleName("x"),t.bar.binSpacing);if(y===p.ScaleType.BAND)return m.bandPosition(s,"x",e)}return m.centeredBandPosition("x",e,i.__assign({},f.mid(n)),o(c,u,t))}function a(e){var t=e.config,n=e.encoding,r=e.height,a=e.markDef.orient,s=n.size,c=n.y,u=e.scaleName(l.Y),y=e.getScaleComponent(l.Y);if("vertical"===a)return i.__assign({},m.pointPosition("y",e,"zeroOrMin"),m.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(c)){var g=y.get("type");if(c.bin&&!s&&!p.hasDiscreteDomain(g))return m.binnedPosition(c,"y",e.scaleName("y"),t.bar.binSpacing);if(g===p.ScaleType.BAND)return m.bandPosition(c,"y",e)}return m.centeredBandPosition("y",e,f.mid(r),o(u,y,t))}function o(e,t,n){if(n.bar.discreteBandSize)return{value:n.bar.discreteBandSize};if(t){var r=t.get("type");if(r===p.ScaleType.POINT){var a=t.get("range");if(u.isVgRangeStep(a)&&s.isNumber(a.step))return{value:a.step-1};c.warn(c.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else return r===p.ScaleType.BAND?f.band(e):{value:n.bar.continuousBandSize}}return n.scale.rangeStep&&null!==n.scale.rangeStep?{value:n.scale.rangeStep-1}:{value:20}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),s=e("vega-util"),l=e("../../channel"),d=e("../../fielddef"),c=e("../../log"),p=e("../../scale"),u=e("../../vega.schema"),m=e("./mixins"),f=e("./valueref");n.bar={vgMark:"rect",encodeEntry:function(e){var t=e.stack;return i.__assign({},r(e,t),a(e,t),m.color(e),m.text(e,"tooltip"),m.nonPosition("opacity",e))}}},{"../../channel":694,"../../fielddef":778,"../../log":783,"../../scale":786,"../../vega.schema":798,"./mixins":738,"./valueref":744,tslib:688,"vega-util":805}],735:[function(e,t,n){"use strict";function r(e,t){return u.contains([d.POINT,d.TICK,d.CIRCLE,d.SQUARE],e)&&!i.isAggregate(t)?0.7:void 0}function a(e,t){var n=m.getMarkConfig("filled",e,t),r=e.type;return n===void 0?r!==d.POINT&&r!==d.LINE&&r!==d.RULE:n}function o(e,t,n,r){switch(e){case d.POINT:case d.CIRCLE:case d.SQUARE:case d.TEXT:case d.RECT:return;}var a=t.y&&t.y2,o=t.x&&t.x2;switch(e){case d.TICK:var i=n.x?n.x.get("type"):null,u=n.y?n.y.get("type"):null;return!c.hasDiscreteDomain(i)&&(!t.y||c.hasDiscreteDomain(u)||s.isFieldDef(t.y)&&t.y.bin)?"vertical":"horizontal";case d.RULE:case d.BAR:case d.AREA:if(a)return"vertical";if(o)return"horizontal";if(e===d.RULE){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case d.LINE:var m=s.isFieldDef(t.x)&&s.isContinuous(t.x),f=s.isFieldDef(t.y)&&s.isContinuous(t.y);if(m&&!f)return"horizontal";if(!m&&f)return"vertical";if(m&&f){var y=t.x,g=t.y,h=y.type===p.TEMPORAL,b=g.type===p.TEMPORAL;return h&&!b?"vertical":!h&&b?"horizontal":!y.aggregate&&g.aggregate?"vertical":y.aggregate&&!g.aggregate?"horizontal":r?r:(e===d.LINE&&t.order||l.warn(l.message.unclearOrientContinuous(e)),"vertical")}return void l.warn(l.message.unclearOrientDiscreteOrEmpty(e));}return"vertical"}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../encoding"),s=e("../../fielddef"),l=e("../../log"),d=e("../../mark"),c=e("../../scale"),p=e("../../type"),u=e("../../util"),m=e("../common");n.normalizeMarkDef=function(e,t,n,r){var i=e.orient||m.getMarkConfig("orient",e,r);e.orient=o(e.type,t,n,i),i!==void 0&&i!==e.orient&&l.warn(l.message.orientOverridden(e.orient,i));var s=e.filled;s===void 0&&(e.filled=a(e,r))},n.initEncoding=function(e,t,n,a){var o=m.getMarkConfig("opacity",e,a);if(!t.opacity&&o===void 0){var i=r(e.type,t,n);i!==void 0&&(t.opacity={value:i})}return t}},{"../../encoding":776,"../../fielddef":778,"../../log":783,"../../mark":785,"../../scale":786,"../../type":795,"../../util":796,"../common":702}],736:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("./mixins");n.line={vgMark:"line",encodeEntry:function(e){return r.__assign({},a.pointPosition("x",e,"zeroOrMin"),a.pointPosition("y",e,"zeroOrMin"),a.color(e),a.text(e,"tooltip"),a.nonPosition("opacity",e),a.nonPosition("size",e,{vgChannel:"strokeWidth"}),a.markDefProperties(e.markDef,["interpolate","tension"]))}}},{"./mixins":738,tslib:688}],737:[function(e,t,n){"use strict";function r(e){if(_.isUnitModel(e))S.normalizeMarkDef(e.markDef,e.encoding,e.component.scales,e.config);else for(var t=0,n=e.children,a;t<n.length;t++)a=n[t],r(a)}function a(e){var t=e.mark(),n=s(e),r=e.markDef.clip===void 0?l(e):!!e.markDef.clip,a=b.getStyles(e.markDef),i=o(e),c=[d.__assign({name:e.getName("marks"),type:A[t].vgMark},r?{clip:!0}:{},a?{style:a}:{},i?{sort:i}:{},{from:{data:(0<n.length?N:"")+e.requestDataName(u.MAIN)},encode:{update:A[t].encodeEntry(e)}})];return 0<n.length?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:N+e.requestDataName(u.MAIN),data:e.requestDataName(u.MAIN),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:c}]:c}function o(e){if("line"===e.mark()&&e.channelHasField("order"))return b.sortParams(e.encoding.order,{expr:"datum"});var t="horizontal"===e.markDef.orient?"y":"x",n=e.sort(t),r=g.isSortField(n)?f.field({aggregate:m.isAggregate(e.encoding)?n.op:void 0,field:n.field},{expr:"datum"}):e.field(t,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return{field:r,order:"descending"}}function i(e){var t=e.mark(),n=b.getStyles(e.markDef),r=void 0===e.markDef.clip?l(e):!!e.markDef.clip,a=[];return a.push(d.__assign({name:e.getName("marks"),type:A[t].vgMark},r?{clip:!0}:{},n?{style:n}:{},{from:{data:e.requestDataName(u.MAIN)},encode:{update:A[t].encodeEntry(e)}})),a}function s(e){return p.NONSPATIAL_CHANNELS.reduce(function(t,n){var r=e.encoding;if("order"===n)return t;if("detail"===n){var a=r[n];a&&(c.isArray(a)?a:[a]).forEach(function(e){e.aggregate||t.push(f.field(e,{}))})}else{var o=f.getFieldDef(r[n]);o&&!o.aggregate&&t.push(f.field(o,{}))}return t},[])}function l(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("domainRaw")||n&&n.get("domainRaw")}Object.defineProperty(n,"__esModule",{value:!0});var d=e("tslib"),c=e("vega-util"),p=e("../../channel"),u=e("../../data"),m=e("../../encoding"),f=e("../../fielddef"),y=e("../../mark"),g=e("../../sort"),h=e("../../util"),b=e("../common"),_=e("../model"),x=e("./area"),v=e("./bar"),S=e("./init"),T=e("./line"),k=e("./point"),O=e("./rect"),E=e("./rule"),C=e("./text"),w=e("./tick"),A={area:x.area,bar:v.bar,line:T.line,point:k.point,text:C.text,tick:w.tick,rect:O.rect,rule:E.rule,circle:k.circle,square:k.square};n.parseMarkDef=r,n.parseMarkGroup=function(e){return h.contains([y.LINE,y.AREA],e.mark())?a(e):i(e)};var N="faceted_path_";n.getPathSort=o},{"../../channel":694,"../../data":774,"../../encoding":776,"../../fielddef":778,"../../mark":785,"../../sort":788,"../../util":796,"../common":702,"../model":745,"./area":733,"./bar":734,"./init":735,"./line":736,"./point":739,"./rect":740,"./rule":741,"./text":742,"./tick":743,tslib:688,"vega-util":805}],738:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={});var r=n.defaultValue,o=n.vgChannel,i=n.defaultRef||(r===void 0?void 0:{value:r}),s=t.encoding[e];return a(t,s,o||e,function(n){return u.midPoint(e,n,t.scaleName(e),t.getScaleComponent(e),null,i)})}function a(e,t,n,r){var a=t&&t.condition,o=r(t);if(a){var s=r(a);return l={},l[n]=[i.__assign({test:p.predicate(e,a.selection)},s)].concat(o===void 0?[]:[o]),l}return void 0===o?{}:(d={},d[n]=o,d);var l,d}function o(e,t,n,r){var a=t.encoding,o=t.stack,i=u.stackable(e,a[e],t.scaleName(e),t.getScaleComponent(e),o,n);return s={},s[r||e]=i,s;var s}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),s=e("../../fielddef"),l=e("../../log"),d=e("../../util"),c=e("../common"),p=e("../selection/selection"),u=e("./valueref");n.color=function(t){var n=t.config,a=t.markDef.filled,o=a?"fill":"stroke",i=r("color",t,{vgChannel:o,defaultValue:c.getMarkConfig(o,t.markDef,n)||c.getMarkConfig("color",t.markDef,n)});return!i.fill&&d.contains(["bar","point","circle","square"],t.mark())&&(i.fill={value:"transparent"}),i},n.markDefProperties=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]={value:e[n]}),t},{})},n.valueIfDefined=function(e,t){return void 0===t?void 0:(n={},n[e]={value:t},n);var n},n.nonPosition=r,n.text=function(e,t){void 0===t&&(t="text");var n=e.encoding[t];return a(e,n,t,function(t){return u.text(t,e.config)})},n.bandPosition=function(e,t,n){var a=n.scaleName(t),o="x"===t?"width":"height";if(n.encoding.size){var d=n.markDef.orient;if(d){var c=(p={},p[t+"c"]=u.fieldRef(e,a,{},{band:0.5}),p);if(s.getFieldDef(n.encoding.size))l.warn(l.message.cannotUseSizeFieldWithBandSize(t));else if(s.isValueDef(n.encoding.size))return i.__assign({},c,r("size",n,{vgChannel:o}))}else l.warn(l.message.cannotApplySizeToNonOrientedMark(n.markDef.type))}return m={},m[t]=u.fieldRef(e,a,{binSuffix:"range"}),m[o]=u.band(a),m;var p,m},n.centeredBandPosition=function(e,t,n,a){var s="x"===e?"xc":"yc",l="x"===e?"width":"height";return i.__assign({},o(e,t,n,s),r("size",t,{defaultRef:a,vgChannel:l}))},n.binnedPosition=function(e,t,n,r){return"x"===t?{x2:u.bin(e,n,"start",r),x:u.bin(e,n,"end")}:{y2:u.bin(e,n,"start"),y:u.bin(e,n,"end",r)}},n.pointPosition=o,n.pointPosition2=function(e,t,n){var r=e.encoding,a=e.markDef,o=e.stack;n=n||("horizontal"===a.orient?"x2":"y2");var i="x2"===n?"x":"y",s=u.stackable2(n,r[i],r[n],e.scaleName(i),e.getScaleComponent(i),o,t);return l={},l[n]=s,l;var l}},{"../../fielddef":778,"../../log":783,"../../util":796,"../common":702,"../selection/selection":758,"./valueref":744,tslib:688}],739:[function(e,t,n){"use strict";function r(e,t){var n=e.config,r=e.width,i=e.height;return o.__assign({},s.pointPosition("x",e,l.mid(r)),s.pointPosition("y",e,l.mid(i)),s.color(e),s.text(e,"tooltip"),s.nonPosition("size",e),a(e,n,t),s.nonPosition("opacity",e))}function a(e,t,n){return n?{shape:{value:n}}:s.nonPosition("shape",e,{defaultValue:i.getMarkConfig("shape",e.markDef,t)})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../common"),s=e("./mixins"),l=e("./valueref");n.shapeMixins=a,n.point={vgMark:"symbol",encodeEntry:function(e){return r(e)}},n.circle={vgMark:"symbol",encodeEntry:function(e){return r(e,"circle")}},n.square={vgMark:"symbol",encodeEntry:function(e){return r(e,"square")}}},{"../common":702,"./mixins":738,"./valueref":744,tslib:688}],740:[function(e,t,n){"use strict";function r(e){var t=e.encoding.x,n=e.encoding.x2,r=e.getScaleComponent(i.X),a=r?r.get("type"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return p.binnedPosition(t,"x",e.scaleName("x"),0);if(s.isFieldDef(t)&&r&&c.hasDiscreteDomain(a)){if(a===c.ScaleType.BAND)return p.bandPosition(t,"x",e);throw new Error(l.message.scaleTypeNotWorkWithMark(d.RECT,a))}else return o.__assign({},p.pointPosition("x",e,"zeroOrMax"),p.pointPosition2(e,"zeroOrMin","x2"))}function a(e){var t=e.encoding.y,n=e.encoding.y2,r=e.getScaleComponent(i.Y),a=r?r.get("type"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return p.binnedPosition(t,"y",e.scaleName("y"),0);if(s.isFieldDef(t)&&r&&c.hasDiscreteDomain(a)){if(a===c.ScaleType.BAND)return p.bandPosition(t,"y",e);throw new Error(l.message.scaleTypeNotWorkWithMark(d.RECT,a))}else return o.__assign({},p.pointPosition("y",e,"zeroOrMax"),p.pointPosition2(e,"zeroOrMin","y2"))}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../../channel"),s=e("../../fielddef"),l=e("../../log"),d=e("../../mark"),c=e("../../scale"),p=e("./mixins");n.rect={vgMark:"rect",encodeEntry:function(e){return o.__assign({},r(e),a(e),p.color(e),p.text(e,"tooltip"),p.nonPosition("opacity",e))}}},{"../../channel":694,"../../fielddef":778,"../../log":783,"../../mark":785,"../../scale":786,"./mixins":738,tslib:688}],741:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("./mixins"),o=e("./valueref");n.rule={vgMark:"rule",encodeEntry:function(e){var t=e.config,n=e.markDef,i=e.width,s=e.height,l=n.orient;return r.__assign({},a.pointPosition("x",e,"horizontal"===l?"zeroOrMin":o.mid(i)),a.pointPosition("y",e,"vertical"===l?"zeroOrMin":o.mid(s)),a.pointPosition2(e,"zeroOrMax"),a.color(e),a.text(e,"tooltip"),a.nonPosition("opacity",e),a.nonPosition("size",e,{vgChannel:"strokeWidth"}))}}},{"./mixins":738,"./valueref":744,tslib:688}],742:[function(e,t,n){"use strict";function r(e,t){return l.isFieldDef(t)&&t.type===d.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:e.scale.textXRangeStep/2}}function a(e,t,n){var r=c.getMarkConfig("align",e,n);return void 0===r?s.channelHasField(t,i.X)?"center":"right":void 0}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../../channel"),s=e("../../encoding"),l=e("../../fielddef"),d=e("../../type"),c=e("../common"),p=e("./mixins"),u=e("./valueref");n.text={vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,i=e.height,s=n.text;return o.__assign({},p.pointPosition("x",e,r(t,s)),p.pointPosition("y",e,u.mid(i)),p.text(e),p.color(e),p.text(e,"tooltip"),p.nonPosition("opacity",e),p.nonPosition("size",e,{vgChannel:"fontSize"}),p.valueIfDefined("align",a(e.markDef,n,t)))}}},{"../../channel":694,"../../encoding":776,"../../fielddef":778,"../../type":795,"../common":702,"./mixins":738,"./valueref":744,tslib:688}],743:[function(e,t,n){"use strict";function r(e){var t=e.config,n=e.markDef.orient,r=e.getScaleComponent("horizontal"===n?"x":"y");if(t.tick.bandSize!==void 0)return t.tick.bandSize;var a=r?r.get("range"):void 0,i=a&&o.isVgRangeStep(a)?a.step:t.scale.rangeStep;if("number"!=typeof i)throw new Error("Function does not handle non-numeric rangeStep");return i/1.5}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../../vega.schema"),i=e("./mixins"),s=e("./valueref");n.tick={vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,o=e.width,l=e.height,d=n.orient,c="horizontal"===d?"width":"height",p="horizontal"===d?"height":"width";return a.__assign({},i.pointPosition("x",e,s.mid(o),"xc"),i.pointPosition("y",e,s.mid(l),"yc"),i.nonPosition("size",e,{defaultValue:r(e),vgChannel:c}),(u={},u[p]={value:t.tick.thickness},u),i.color(e),i.nonPosition("opacity",e));var u}}},{"../../vega.schema":798,"./mixins":738,"./valueref":744,tslib:688}],744:[function(e,t,n){"use strict";function r(e,t,n,r){var a={scale:t,field:u.field(e,n)};return r?c.__assign({},a,r):a}function a(e,t){return{signal:"(scale(\""+t+"\", "+u.field(e,{expr:"datum"})+") + "+("scale(\""+t+"\", "+u.field(e,{binSuffix:"end",expr:"datum"})+"))/2")}}function o(e,t,n,o,c,y){if(t){if(u.isFieldDef(t)){if(t.bin)return f.contains(["x","y"],e)?c&&c.impute?r(t,n,{binSuffix:"mid"}):a(t,n):r(t,n,m.isBinScale(o.get("type"))?{}:{binSuffix:"range"});var g=o.get("type");return m.hasDiscreteDomain(g)?"band"===g?r(t,n,{binSuffix:"range"},{band:0.5}):r(t,n,{binSuffix:"range"}):r(t,n,{})}if(u.isValueDef(t))return{value:t.value};throw new Error("FieldDef without field or value.")}if("zeroOrMin"===y){if(e===p.X||e===p.X2)return i(n,o);if(e===p.Y||e===p.Y2)return l(n,o);throw new Error("Unsupported channel "+e+" for base function")}else if("zeroOrMax"===y){if(e===p.X||e===p.X2)return s(n,o);if(e===p.Y||e===p.Y2)return d(n,o);throw new Error("Unsupported channel "+e+" for base function")}return y}function i(e,t){return e&&!f.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}function s(e,t){return e&&!f.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"width"}}}function l(e,t){return e&&!f.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"height"}}}function d(e,t){return e&&!f.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}Object.defineProperty(n,"__esModule",{value:!0});var c=e("tslib"),p=e("../../channel"),u=e("../../fielddef"),m=e("../../scale"),f=e("../../util"),y=e("../common");n.stackable=function(e,t,n,a,i,s){return u.isFieldDef(t)&&i&&e===i.fieldChannel?r(t,n,{suffix:"end"}):o(e,t,n,a,i,s)},n.stackable2=function(e,t,n,a,i,s,l){return u.isFieldDef(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?r(t,a,{suffix:"start"}):o(e,n,a,i,s,l)},n.bin=function(e,t,n,a){var o="start"===n?void 0:"end";return r(e,t,{binSuffix:o},a?{offset:a}:{})},n.fieldRef=r,n.band=function(e,t){return void 0===t&&(t=!0),{scale:e,band:t}},n.midPoint=o,n.text=function(e,t){if(e){if(u.isFieldDef(e))return y.formatSignalRef(e,e.format,"datum",t);if(u.isValueDef(e))return{value:e.value}}},n.mid=function(e){return c.__assign({},e,{mult:0.5})}},{"../../channel":694,"../../fielddef":778,"../../scale":786,"../../util":796,"../common":702,tslib:688}],745:[function(e,t,n){"use strict";function r(e){return e&&"unit"===e.type}function a(e){return e&&"facet"===e.type}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("vega-util"),s=e("../channel"),l=e("../encoding"),d=e("../fielddef"),c=e("../log"),p=e("../scale"),u=e("../title"),m=e("../transform"),f=e("../util"),y=e("../vega.schema"),g=e("./axis/assemble"),h=e("./layout/header"),b=e("./layoutsize/assemble"),_=e("./legend/assemble"),x=e("./legend/parse"),v=e("./mark/mark"),S=e("./scale/assemble"),T=e("./scale/domain"),k=e("./scale/parse"),O=e("./split"),E=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();n.NameMap=E,n.isUnitModel=r,n.isFacetModel=a,n.isRepeatModel=function(e){return e&&"repeat"===e.type},n.isConcatModel=function(e){return e&&"concat"===e.type},n.isLayerModel=function(e){return e&&"layer"===e.type};var C=function(){function e(e,t,n,r,a){var s=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=s.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=s.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=r,this.name=e.name||n,this.title=i.isString(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new E,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new E,this.data=e.data,this.description=e.description,this.transforms=m.normalizeTransform(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?o.__assign({},t.component.data.ancestorParse):{}},layoutSize:new O.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:o.__assign({scale:{},axis:{},legend:{}},a||{}),selection:null,scales:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseMarkDef(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){k.parseScale(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseMarkDef=function(){v.parseMarkDef(this)},e.prototype.parseLegend=function(){x.parseLegend(this)},e.prototype.assembleGroupStyle=function(){return"unit"===this.type||"layer"===this.type?"cell":void 0},e.prototype.assembleLayoutSize=function(){return"unit"===this.type||"layer"===this.type?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}:void 0},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,r=h.HEADER_CHANNELS,a;n<r.length;n++)a=r[n],e[a].title&&t.push(h.getTitleGroup(this,a));for(var o=0,i=h.HEADER_CHANNELS;o<i.length;o++)for(var a=i[o],s=e[a],l=0,d=h.HEADER_TYPES,c;l<d.length;l++)if(c=d[l],s[c])for(var p=0,u=s[c];p<u.length;p++){var m=u[p],f=h.getHeaderGroup(this,a,c,s,m);f&&t.push(f)}return t},e.prototype.assembleAxes=function(){return g.assembleAxes(this.component.axes)},e.prototype.assembleLegends=function(){return _.assembleLegends(this)},e.prototype.assembleTitle=function(){var e=o.__assign({},u.extractTitleConfig(this.config.title).nonMark,this.title);return e.text?(f.contains(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&c.warn(c.message.cannotSetTitleAnchor(this.type)),e.anchor="start"),0<f.keys(e).length?e:void 0):void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};e=e.concat(this.assembleSelectionSignals()),0<e.length&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||a(this.parent)?S.assembleScales(this):[];0<r.length&&(t.scales=r);var o=this.assembleAxes();0<o.length&&(t.axes=o);var i=this.assembleLegends();return 0<i.length&&(t.legends=i),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children,a;t<n.length;t++)if(a=n[t],r(a)){if(a.channelHasField(e))return!0;}else if(a.hasDescendantWithFieldOnChannel(e))return!0;return!1},e.prototype.getName=function(e){return f.varName((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(a(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),o=n.get("range");if(p.hasDiscreteDomain(r)&&y.isVgRangeStep(o)){var i=n.get("name"),s=T.getFieldFromDomains(n.domains),l=d.field({aggregate:"distinct",field:s},{expr:"datum"});return{signal:b.sizeExpr(i,n,l)}}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):s.isChannel(e)&&s.isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(c.message.selectionNotFound(t));return n},e}();n.Model=C;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n?d.field(n,t):void 0},t.prototype.reduceFieldDef=function(e,n,r){return l.reduce(this.getMapping(),function(t,n,r){var a=d.getFieldDef(n);return a?e(t,a,r):t},n,r)},t.prototype.forEachFieldDef=function(e,n){l.forEach(this.getMapping(),function(t,n){var r=d.getFieldDef(t);r&&e(r,n)},n)},t}(C);n.ModelWithField=w},{"../channel":694,"../encoding":776,"../fielddef":778,"../log":783,"../scale":786,"../title":792,"../transform":794,"../util":796,"../vega.schema":798,"./axis/assemble":695,"./layout/header":725,"./layoutsize/assemble":726,"./legend/assemble":728,"./legend/parse":731,"./mark/mark":737,"./scale/assemble":749,"./scale/domain":751,"./scale/parse":752,"./split":768,tslib:688,"vega-util":805}],746:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("./baseconcat"),o=e("./buildmodel"),i=e("./layoutsize/parse"),s=function(e){function t(t,n,r,a,o){var i=e.call(this,t,n,r,o,t.resolve)||this;return i.type="repeat",i.repeat=t.repeat,i.children=i._initChildren(t,i.repeat,a,o),i}return r.__extends(t,e),t.prototype._initChildren=function(e,t,n,r){for(var a=[],i=t.row||[n?n.row:null],s=t.column||[n?n.column:null],l=0,d=i,c;l<d.length;l++){c=d[l];for(var p=0,u=s;p<u.length;p++){var m=u[p],f=(c?"_"+c:"")+(m?"_"+m:""),y={row:c,column:m};a.push(o.buildModel(e.spec,this,this.getName("child"+f),void 0,y,r))}}return a},t.prototype.parseLayoutSize=function(){i.parseRepeatLayoutSize(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(a.BaseConcatModel);n.RepeatModel=s},{"./baseconcat":700,"./buildmodel":701,"./layoutsize/parse":727,tslib:688}],747:[function(e,t,n){"use strict";function r(e,t){var n=e.field;return s.isRepeatRef(n)?n.repeat in t?o.__assign({},e,{field:t[n.repeat]}):(l.warn(l.message.noSuchRepeatedValue(n.repeat)),null):e}function a(e,t){var n={};for(var a in e)if(e.hasOwnProperty(a)){var o=e[a];if(i.isArray(o))n[a]=o.map(function(e){return r(e,t)}).filter(function(e){return null!==e});else{var s=r(o,t);null!==s&&(n[a]=s)}}return n}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("vega-util"),s=e("../fielddef"),l=e("../log");n.replaceRepeaterInFacet=function(e,t){return a(e,t)},n.replaceRepeaterInEncoding=function(e,t){return a(e,t)}},{"../fielddef":778,"../log":783,tslib:688,"vega-util":805}],748:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../channel"),a=e("../log"),o=e("../util"),i=e("./model");n.defaultScaleResolve=function(e,t){if(i.isLayerModel(t)||i.isFacetModel(t))return"shared";if(i.isConcatModel(t)||i.isRepeatModel(t))return o.contains(r.SPATIAL_SCALE_CHANNELS,e)?"independent":"shared";throw new Error("invalid model type for resolve")},n.parseGuideResolve=function(e,t){var n=e.scale[t],i=o.contains(r.SPATIAL_SCALE_CHANNELS,t)?"axis":"legend";return"independent"===n?("shared"===e[i][t]&&a.warn(a.message.independentScaleMeansIndependentGuide(t)),"independent"):e[i][t]||"shared"}},{"../channel":694,"../log":783,"../util":796,"./model":745}],749:[function(e,t,n){"use strict";function r(e){return c.isLayerModel(e)||c.isConcatModel(e)||c.isRepeatModel(e)?e.children.reduce(function(e,t){return e.concat(r(t))},a(e)):a(e)}function a(e){return l.keys(e.component.scales).reduce(function(t,n){var r=e.component.scales[n];if(r.merged)return t;var a=r.combine(),s=a.domainRaw,l=a.range,c=a.name,m=a.type,f=a.domainRaw,y=a.range,g=i.__rest(a,["name","type","domainRaw","range"]);l=o(l,c,e,n),s&&p.isRawSelectionDomain(s)&&(s=p.selectionScaleDomain(e,s));var h=r.domains.map(function(t){return d.isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t}),b=u.mergeDomains(h);return t.push(i.__assign({name:c,type:m,domain:b},s?{domainRaw:s}:{},{range:l},g)),t},[])}function o(e,t,n,r){if("x"===r||"y"===r){if(d.isVgRangeStep(e))return{step:{signal:t+"_step"}};if(s.isArray(e)&&2===e.length){var a=e[0],o=e[1];if(0===a&&d.isVgSignalRef(o))return[0,{signal:n.getSizeName(o.signal)}];if(d.isVgSignalRef(a)&&0===o)return[{signal:n.getSizeName(a.signal)},0]}}return e}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),s=e("vega-util"),l=e("../../util"),d=e("../../vega.schema"),c=e("../model"),p=e("../selection/selection"),u=e("./domain");n.assembleScales=r,n.assembleScalesForModel=a,n.assembleScaleRange=o},{"../../util":796,"../../vega.schema":798,"../model":745,"../selection/selection":758,"./domain":751,tslib:688,"vega-util":805}],750:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../split"),o=function(e){function t(t,n){var r=e.call(this,{},{name:t})||this;return r.merged=!1,r.domains=[],r.setWithExplicit("type",n),r}return r.__extends(t,e),t}(a.Split);n.ScaleComponent=o},{"../split":768,tslib:688}],751:[function(e,t,n){"use strict";function r(e){O.isUnitModel(e)?a(e):o(e)}function a(e){var t=e.specifiedScales,n=e.component.scales;S.keys(n).forEach(function(r){var a=t[r],o=a?a.domain:void 0,i=s(e,r),l=n[r];l.domains=i,x.isSelectionDomain(o)&&l.set("domainRaw",{signal:E.SELECTION_DOMAIN+JSON.stringify(o)},!0)})}function o(e){for(var t=0,n=e.children,a;t<n.length;t++)a=n[t],r(a);var o=e.component.scales;S.keys(o).forEach(function(t){for(var n=0,r=e.children,a;n<r.length;n++){var i=r[n],s=i.component.scales[t];s&&(a==void 0?a=s.domains:a=a.concat(s.domains))}O.isFacetModel(e)&&a.forEach(function(e){T.isDataRefDomain(e)&&(e.data=k.FACET_SCALE_PREFIX+e.data.replace(k.FACET_SCALE_PREFIX,""))}),o[t].domains=a})}function i(e,t,n,r){if("unaggregated"===e){var a=c(t,n),o=a.valid,i=a.reason;if(!o)return void _.warn(i)}else if(e===void 0&&r.useUnaggregatedDomain){var o=c(t,n).valid;if(o)return"unaggregated"}return e}function s(e,t){var n=e.getScaleComponent(t).get("type"),r=i(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return(r!==e.scaleDomain(t)&&(e.specifiedScales[t]=u.__assign({},e.specifiedScales[t],{domain:r})),"x"===t&&e.channelHasField("x2"))?e.channelHasField("x")?l(n,r,e,"x").concat(l(n,r,e,"x2")):l(n,r,e,"x2"):"y"===t&&e.channelHasField("y2")?e.channelHasField("y")?l(n,r,e,"y").concat(l(n,r,e,"y2")):l(n,r,e,"y2"):l(n,r,e,t)}function l(e,t,n,r){var a=n.fieldDef(r);if(t&&"unaggregated"!==t&&!x.isSelectionDomain(t))if(a.bin)_.warn(_.message.conflictedDomain(r));else return b.isDateTime(t[0])?t.map(function(e){return{signal:"{data: "+b.dateTimeExpr(e,!0)+"}"}}):[t];var o=n.stack;if(o&&r===o.fieldChannel){if("normalize"===o.offset)return[[0,1]];var i=n.requestDataName(h.MAIN);return[{data:i,field:n.field(r,{suffix:"start"})},{data:i,field:n.field(r,{suffix:"end"})}]}var s=g.isScaleChannel(r)?d(n,r,e):void 0;if("unaggregated"===t){var i=n.requestDataName(h.MAIN);return[{data:i,field:n.field(r,{aggregate:"min"})},{data:i,field:n.field(r,{aggregate:"max"})}]}if(a.bin){if(x.isBinScale(e)){var l=n.getName(y.binToString(a.bin)+"_"+a.field+"_bins");return[{signal:"sequence("+l+".start, "+l+".stop + "+l+".step, "+l+".step)"}]}if(x.hasDiscreteDomain(e))return[{data:s&&S.isBoolean(s)?n.requestDataName(h.MAIN):n.requestDataName(h.RAW),field:n.field(r,{binSuffix:"range"}),sort:s||{field:n.field(r,{}),op:"min"}}];if("x"===r||"y"===r){var i=n.requestDataName(h.MAIN);return[{data:i,field:n.field(r,{})},{data:i,field:n.field(r,{binSuffix:"end"})}]}return[{data:n.requestDataName(h.MAIN),field:n.field(r,{})}]}return s?[{data:S.isBoolean(s)?n.requestDataName(h.MAIN):n.requestDataName(h.RAW),field:n.field(r),sort:s}]:[{data:n.requestDataName(h.MAIN),field:n.field(r)}]}function d(e,t,n){if(x.hasDiscreteDomain(n)){var r=e.sort(t);return v.isSortField(r)?r:"descending"===r?{op:"min",field:e.field(t),order:"descending"}:!!S.contains(["ascending",void 0],r)||void 0}}function c(e,t){return e.aggregate?f.SHARED_DOMAIN_OP_INDEX[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:_.message.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:_.message.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:_.message.unaggregateDomainHasNoEffectForRawField(e)}}function p(e){var t=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort,n=u.__rest(e,["sort"]);return n}return e}),S.hash),n=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort;return void 0===t||S.isBoolean(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(function(e){return e!==void 0}),S.hash);if(1===t.length){var r=e[0];if(T.isDataRefDomain(r)&&0<n.length){var a=n[0];return 1<n.length&&(_.warn(_.message.MORE_THAN_ONE_SORT),a=!0),u.__assign({},r,{sort:a})}return r}var o=n.filter(function(e){return!!S.isBoolean(e)||!("count"!==e.op)||(_.warn(_.message.domainSortDropped(e)),!1)}),i=!0;if(1===o.length)i=o[0];else if(1<o.length){var s=o.filter(function(e){return!1!==e});1<s.length?(_.warn(_.message.MORE_THAN_ONE_SORT),i=!0):i=s[0]}var l=S.unique(e.map(function(e){return T.isDataRefDomain(e)?e.data:null}),function(e){return e});if(1===l.length&&null!==l[0]){var r={data:l[0],fields:t.map(function(e){return e.field}),sort:i};return r}return{fields:t,sort:i}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("tslib"),m=e("vega-util"),f=e("../../aggregate"),y=e("../../bin"),g=e("../../channel"),h=e("../../data"),b=e("../../datetime"),_=e("../../log"),x=e("../../scale"),v=e("../../sort"),S=e("../../util"),T=e("../../vega.schema"),k=e("../data/optimize"),O=e("../model"),E=e("../selection/selection");n.parseScaleDomain=r,n.parseDomainForChannel=s,n.domainSort=d,n.canUseUnaggregatedDomain=c,n.mergeDomains=p,n.getFieldFromDomains=function(e){var t=p(e);return T.isDataRefDomain(t)&&m.isString(t.field)?t.field:void 0}},{"../../aggregate":691,"../../bin":693,"../../channel":694,"../../data":774,"../../datetime":775,"../../log":783,"../../scale":786,"../../sort":788,"../../util":796,"../../vega.schema":798,"../data/optimize":717,"../model":745,"../selection/selection":758,tslib:688,"vega-util":805}],752:[function(e,t,n){"use strict";function r(e){e.component.scales=c.isUnitModel(e)?a(e):o(e)}function a(e){var t=e.encoding,n=e.config,r=e.mark();return i.SCALE_CHANNELS.reduce(function(a,o){var i={},l=t[o],d;if(s.isFieldDef(l)?(d=l,i=l.scale||{}):s.isConditionalDef(l)&&s.isFieldDef(l.condition)?(d=l.condition,i=l.condition.scale||{}):"x"===o?d=s.getFieldDef(t.x2):"y"===o&&(d=s.getFieldDef(t.y2)),d){var c=i.type,p=h.scaleType(i.type,o,d,r,i.rangeStep,n.scale);a[o]=new m.ScaleComponent(e.scaleName(o+"",!0),{value:p,explicit:c===p})}return a},{})}function o(e){for(var t=e.component.scales={},n={},a=e.component.resolve,o=function(t){r(t),d.keys(t.component.scales).forEach(function(r){if(a.scale[r]=a.scale[r]||p.defaultScaleResolve(r,e),"shared"===a.scale[r]){var o=n[r],i=t.component.scales[r].getWithExplicit("type");o?l.scaleCompatible(o.value,i.value)?n[r]=u.mergeValuesWithExplicit(o,i,"type","scale",b):(a[r].scale="independent",delete n[r]):n[r]=i}})},i=0,s=e.children,c;i<s.length;i++)c=s[i],o(c);return d.keys(n).forEach(function(r){var a=e.scaleName(r,!0),o=n[r];t[r]=new m.ScaleComponent(a,o);for(var i=0,s=e.children;i<s.length;i++){var l=s[i],d=l.component.scales[r];d&&(l.renameScale(d.get("name"),a),d.merged=!0)}}),t}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../channel"),s=e("../../fielddef"),l=e("../../scale"),d=e("../../util"),c=e("../model"),p=e("../resolve"),u=e("../split"),m=e("./component"),f=e("./domain"),y=e("./properties"),g=e("./range"),h=e("./type");n.parseScale=function(e){r(e),f.parseScaleDomain(e);for(var t=0,n=l.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES,a;t<n.length;t++)a=n[t],y.parseScaleProperty(e,a);g.parseScaleRange(e)},n.parseScaleCore=r;var b=u.tieBreakByComparing(function(e,t){return l.scaleTypePrecedence(e)-l.scaleTypePrecedence(t)})},{"../../channel":694,"../../fielddef":778,"../../scale":786,"../../util":796,"../model":745,"../resolve":748,"../split":768,"./component":750,"./domain":751,"./properties":753,"./range":754,"./type":755}],753:[function(e,t,n){"use strict";function r(e,t){x.isUnitModel(e)?a(e,t):i(e,t)}function a(e,t){var n=e.component.scales;_.keys(n).forEach(function(r){var a=e.specifiedScales[r],i=n[r],s=e.getScaleComponent(r),l=e.fieldDef(r),d=e.sort(r),c=e.config,p=a[t],u=s.get("type"),m=g.scaleTypeSupportProperty(u,t),f=g.channelScalePropertyIncompatability(r,t);if(void 0!==p&&(m?f&&y.warn(f):y.warn(y.message.scalePropertyNotWorkWithScaleType(u,t,r))),m&&void 0===f)if(void 0!==p)i.copyKeyFromObject(t,a);else{var h=o(t,a,s,r,l,d,c.scale);void 0!==h&&i.set(t,h,!1)}})}function o(e,t,n,r,a,o,i){return"nice"===e?s(n.get("type"),r,a):"padding"===e?l(r,n.get("type"),i):"paddingInner"===e?d(n.get("padding"),r,i):"paddingOuter"===e?c(n.get("padding"),r,n.get("type"),n.get("paddingInner"),i):"round"===e?p(r,i):"reverse"===e?u(n.get("type"),o):"zero"===e?m(r,a,t.domain):i[e]}function i(e,t){for(var n=e.component.scales,a=0,o=e.children,i;a<o.length;a++)i=o[a],"range"===t?S.parseScaleRange(i):r(i,t);_.keys(n).forEach(function(r){for(var a=0,o=e.children,i;a<o.length;a++){var s=o[a],l=s.component.scales[r];if(l){var d=l.getWithExplicit(t);i=v.mergeValuesWithExplicit(i,d,t,"scale",v.tieBreakByComparing(function(e,n){return"range"===t?e.step&&n.step?e.step-n.step:0:0}))}}n[r].setWithExplicit(t,i)})}function s(e,t,n){return b.contains([g.ScaleType.TIME,g.ScaleType.UTC],e)?h.smallestUnit(n.timeUnit):n.bin?void 0:b.contains([f.X,f.Y],t)}function l(e,t,n){return b.contains([f.X,f.Y],e)&&t===g.ScaleType.POINT?n.pointPadding:void 0}function d(e,t,n){return void 0===e?b.contains([f.X,f.Y],t)?n.bandPaddingInner:void 0:void 0}function c(e,t,n,r,a){return void 0===e?b.contains([f.X,f.Y],t)&&n===g.ScaleType.BAND?void 0===a.bandPaddingOuter?r/2:a.bandPaddingOuter:void 0:void 0}function p(e,t){return b.contains(["x","y"],e)?t.round:void 0}function u(e,t){return g.hasContinuousDomain(e)&&"descending"===t||void 0}function m(e,t,n){if("size"===e&&"quantitative"===t.type)return!0;return!!n&&"unaggregated"!==n||t.bin||!b.contains([f.X,f.Y],e)?!1:!0}Object.defineProperty(n,"__esModule",{value:!0});var f=e("../../channel"),y=e("../../log"),g=e("../../scale"),h=e("../../timeunit"),b=e("../../util"),_=e("../../util"),x=e("../model"),v=e("../split"),S=e("./range");n.parseScaleProperty=r,n.parseNonUnitScaleProperty=i,n.nice=s,n.padding=l,n.paddingInner=d,n.paddingOuter=c,n.round=p,n.reverse=u,n.zero=m},{"../../channel":694,"../../log":783,"../../scale":786,"../../timeunit":791,"../../util":796,"../model":745,"../split":768,"./range":754}],754:[function(e,t,n){"use strict";function r(e){var t=e.component.scales;u.SCALE_CHANNELS.forEach(function(n){var r=t[n];if(r){var i=e.specifiedScales[n],s=e.fieldDef(n),l="x"===n?"width":"y"===n?"height":void 0,d=l?e.component.layoutSize.get(l):void 0,c=a(e),p=o(n,r.get("type"),s.type,i,e.config,r.get("zero"),e.mark(),d,e.getName(l),c);r.setWithExplicit("range",p)}})}function a(e){var t=[],n=e.getScaleComponent("x"),r=n&&n.get("range");r&&g.isVgRangeStep(r)&&p.isNumber(r.step)&&t.push(r.step);var a=e.getScaleComponent("y"),o=a&&a.get("range");return o&&g.isVgRangeStep(o)&&p.isNumber(o.step)&&t.push(o.step),t}function o(e,t,r,a,o,l,d,c,p,u){for(var y=!!c||null===a.rangeStep,g=0,h=n.RANGE_PROPERTIES,_;g<h.length;g++)if(_=h[g],void 0!==a[_]){var x=f.scaleTypeSupportProperty(t,_),v=f.channelScalePropertyIncompatability(e,_);if(!x)m.warn(m.message.scalePropertyNotWorkWithScaleType(t,_,e));else if(v)m.warn(v);else switch(_){case"range":return b.makeImplicit(a[_]);case"scheme":return b.makeImplicit(i(a[_]));case"rangeStep":var S=a[_];if(null!==S){if(void 0===c)return b.makeImplicit({step:S});m.warn(m.message.rangeStepDropped(e))}}}return{explicit:!1,value:s(e,t,r,o,l,d,p,u,y)}}function i(e){if(f.isExtendedScheme(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function s(e,t,n,r,a,o,i,s,c){switch(e){case u.X:case u.Y:if(y.contains(["point","band"],t)&&!c)if(e===u.X&&"text"===o){if(r.scale.textXRangeStep)return{step:r.scale.textXRangeStep};}else if(r.scale.rangeStep)return{step:r.scale.rangeStep};return e===u.X?[0,{signal:i}]:[{signal:i},0];case u.SIZE:var p=l(o,a,r),m=d(o,s,r);return[p,m];case u.SHAPE:return"symbol";case u.COLOR:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===o?"heatmap":"ramp";case u.OPACITY:return[r.scale.minOpacity,r.scale.maxOpacity];}throw new Error("Scale range undefined for channel "+e)}function l(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize;}throw new Error(m.message.incompatibleChannel("size",e))}function d(e,t,n){var r=n.scale;switch(e){case"bar":case"tick":return void 0===n.scale.maxBandSize?c(t,n.scale)-1:n.scale.maxBandSize;case"line":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var a=c(t,r);return(a-2)*(a-2);}throw new Error(m.message.incompatibleChannel("size",e))}function c(e,t){return 0<e.length?Math.min.apply(null,e):t.rangeStep?t.rangeStep:21}Object.defineProperty(n,"__esModule",{value:!0});var p=e("vega-util"),u=e("../../channel"),m=e("../../log"),f=e("../../scale"),y=e("../../util"),g=e("../../vega.schema"),h=e("../model"),b=e("../split"),_=e("./properties");n.RANGE_PROPERTIES=["range","rangeStep","scheme"],n.parseScaleRange=function(e){h.isUnitModel(e)?r(e):_.parseNonUnitScaleProperty(e,"range")},n.parseRangeForChannel=o,n.defaultRange=s},{"../../channel":694,"../../log":783,"../../scale":786,"../../util":796,"../../vega.schema":798,"../model":745,"../split":768,"./properties":753,"vega-util":805}],755:[function(e,t,n){"use strict";function r(e,t,n,r,o){switch(t.type){case"nominal":case"ordinal":return"color"===e||"discrete"===i.rangeType(e)?("shape"===e&&"ordinal"===t.type&&s.warn(s.message.discreteChannelCannotEncode(e,"ordinal")),"ordinal"):a(e,n,r,o);case"temporal":if("color"===e)return"sequential";return"discrete"===i.rangeType(e)?(s.warn(s.message.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":if("color"===e)return t.bin?"bin-ordinal":"sequential";return"discrete"===i.rangeType(e)?(s.warn(s.message.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";}throw new Error(s.message.invalidFieldType(t.type))}function a(e,t){if(p.contains(["x","y"],e)){if("rect"===t)return"band";if("bar"===t)return"band"}return"point"}function o(e,t){var n=t.type;if(u.contains([c.Type.ORDINAL,c.Type.NOMINAL],n))return void 0===e||d.hasDiscreteDomain(e);return n===c.Type.TEMPORAL?u.contains([l.ScaleType.TIME,l.ScaleType.UTC,l.ScaleType.SEQUENTIAL,void 0],e):n!==c.Type.QUANTITATIVE||(t.bin?u.contains([l.ScaleType.BIN_LINEAR,l.ScaleType.BIN_ORDINAL,l.ScaleType.LINEAR],e):u.contains([l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.SQRT,l.ScaleType.QUANTILE,l.ScaleType.QUANTIZE,l.ScaleType.LINEAR,l.ScaleType.SEQUENTIAL,void 0],e))}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../channel"),s=e("../../log"),l=e("../../scale"),d=e("../../scale"),c=e("../../type"),p=e("../../util"),u=e("../../util");n.scaleType=function(e,t,n,a,d,c){var p=r(t,n,a,d,c);return i.isScaleChannel(t)?void 0===e?p:l.channelSupportScaleType(t,e)?o(e,n)?e:(s.warn(s.message.scaleTypeNotWorkWithFieldDef(e,p)),p):(s.warn(s.message.scaleTypeNotWorkWithChannel(t,e,p)),p):null},n.fieldDefMatchScaleType=o},{"../../channel":694,"../../log":783,"../../scale":786,"../../type":795,"../../util":796}],756:[function(e,t,n){"use strict";function r(e,t,r){var o=c.channelSignalName(t,r,"visual"),s=c.channelSignalName(t,r,"data"),u=p.default.has(t),m=e.scaleName(r),f=d.stringValue(m),y=e.getScaleComponent(r),g=y?y.get("type"):void 0,h=e.getSizeSignalRef(r===i.X?"width":"height").signal,b=r+"(unit)",_=a(t,function(e,t){return e.concat({events:t.between[0],update:"["+b+", "+b+"]"},{events:t,update:"["+o+"[0], clamp("+b+", 0, "+h+")]"})});return _.push({events:{signal:t.name+n.SCALE_TRIGGER},update:l.hasContinuousDomain(g)&&!l.isBinScale(g)?"[scale("+f+", "+s+"[0]), scale("+f+", "+s+"[1])]":"[0, 0]"}),u?[{name:s,on:[]}]:[{name:o,value:[],on:_},{name:s,on:[{events:{signal:o},update:o+"[0] === "+o+"[1] ? null : invert("+f+", "+o+")"}]}]}function a(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(s.warn(n+" is not an ordered event stream for interval selections"),e)},[])}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("../../channel"),s=e("../../log"),l=e("../../scale"),d=e("../../util"),c=e("./selection"),p=e("./transforms/scales");n.BRUSH="_brush",n.SCALE_TRIGGER="_scale_trigger";n.default={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,t){var o=t.name,u=p.default.has(t),m=[],f=[],y=[],g=[];if(t.translate&&!u){var h="!event.item || event.item.mark.name !== "+d.stringValue(o+n.BRUSH);a(t,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);0>n.indexOf(h)&&n.push(h)})}return t.project.forEach(function(n){var a=n.channel;if(a!==i.X&&a!==i.Y)return void s.warn("Interval selections only support x and y encoding channels.");var o=r(e,t,a),p=c.channelSignalName(t,a,"data"),u=c.channelSignalName(t,a,"visual"),h=d.stringValue(e.scaleName(a)),b=e.getScaleComponent(a).get("type"),_=l.hasContinuousDomain(b)?"+":"";m.push.apply(m,o),y.push(p),f.push("{encoding: "+d.stringValue(a)+", "+("field: "+d.stringValue(n.field)+", extent: "+p+"}")),g.push({scaleName:e.scaleName(a),expr:"(!isArray("+p+") || "+("("+_+"invert("+h+", "+u+")[0] === "+_+p+"[0] && ")+(_+"invert("+h+", "+u+")[1] === "+_+p+"[1]))")})}),u||m.push({name:o+n.SCALE_TRIGGER,update:g.map(function(e){return e.expr}).join(" && ")+(" ? "+(o+n.SCALE_TRIGGER)+" : {}")}),m.concat({name:o+c.TUPLE,on:[{events:y.map(function(e){return{signal:e}}),update:y.join(" && ")+(" ? {unit: "+c.unitName(e)+", intervals: ["+f.join(", ")+"]} : null")}]})},modifyExpr:function(e,t){var n=t.name+c.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+c.unitName(e)+"}")},marks:function(e,t,r){var a=t.name,i=c.spatialProjections(t),s=i.xi,l=i.yi,u="data("+d.stringValue(t.name+c.STORE)+")";if(p.default.has(t))return r;var m={x:null===s?{value:0}:{signal:a+"_x[0]"},y:null===l?{value:0}:{signal:a+"_y[0]"},x2:null===s?{field:{group:"width"}}:{signal:a+"_x[1]"},y2:null===l?{field:{group:"height"}}:{signal:a+"_y[1]"}};"global"===t.resolve&&d.keys(m).forEach(function(t){m[t]=[o.__assign({test:u+".length && "+u+"[0].unit === "+c.unitName(e)},m[t]),{value:0}]});var f=t.mark,y=f.fill,g=f.fillOpacity,h=o.__rest(f,["fill","fillOpacity"]),b=d.keys(h).reduce(function(e,t){return e[t]={value:h[t]},e},{});return[{name:a+n.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:y},fillOpacity:{value:g}},update:m}}].concat(r,{name:a+n.BRUSH,type:"rect",clip:!0,encode:{enter:o.__assign({fill:{value:"transparent"}},b),update:m}})}}},{"../../channel":694,"../../log":783,"../../scale":786,"../../util":796,"./selection":758,"./transforms/scales":763,tslib:688}],757:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../util"),a=e("./selection"),o=e("./transforms/nearest");n.default={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:function(e,t){var n=t.project,i=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",s=[],l=n.map(function(e){return r.stringValue(e.channel)}).filter(function(t){return t}).join(", "),d=n.map(function(e){return r.stringValue(e.field)}).join(", "),c=n.map(function(t){var n=t.channel,a=e.fieldDef(n);return a&&a.bin?(s.push(t.field),"["+i+"["+r.stringValue(e.field(n,{}))+"], "+(i+"["+r.stringValue(e.field(n,{binSuffix:"end"}))+"]]")):i+"["+r.stringValue(t.field)+"]"}).join(", ");return[{name:t.name+a.TUPLE,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+a.unitName(e)+", encodings: ["+l+"], "+("fields: ["+d+"], values: ["+c+"]")+(s.length?", "+s.map(function(e){return r.stringValue("bin_"+e)+": 1"}).join(", "):"")+"} : null",force:!0}]}]},modifyExpr:function(e,t){var n=t.name+a.TUPLE;return n+", "+("global"===t.resolve?"null":"{unit: "+a.unitName(e)+"}")}}},{"../../util":796,"./selection":758,"./transforms/nearest":761}],758:[function(e,t,n){"use strict";function r(e,t){var n=t;return a(e,function(r,a){n=a.marks?a.marks(e,r,n):n,h.forEachTransform(r,function(a){a.marks&&(n=a.marks(e,r,t,n))})}),n}function a(e,t){var n=e.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var a=n[r];t(a,o(a.type))}}function o(e){return"single"===e?g.default:"multi"===e?y.default:"interval"===e?f.default:null}function i(e){for(var t=e.parent;t&&!m.isFacetModel(t);)t=t.parent;return t}Object.defineProperty(n,"__esModule",{value:!0});var s=e("tslib"),l=e("vega-event-selector"),d=e("../../channel"),c=e("../../log"),p=e("../../selection"),u=e("../../util"),m=e("../model"),f=e("./interval"),y=e("./multi"),g=e("./single"),h=e("./transforms/transforms");n.STORE="_store",n.TUPLE="_tuple",n.MODIFY="_modify",n.SELECTION_DOMAIN="_selection_domain_",n.parseUnitSelection=function(e,t){var n={},r=e.config.selection,a=function(a){if(!t.hasOwnProperty(a))return"continue";var o=t[a],i=r[o.type];for(var d in i)"encodings"==d&&o.fields||"fields"==d&&o.encodings||("mark"==d&&(o[d]=s.__assign({},i[d],o[d])),(void 0===o[d]||!0===o[d])&&(o[d]=i[d]||o[d]));a=u.varName(a);var c=n[a]=u.extend({},o,{name:a,events:u.isString(o.on)?l.selector(o.on,"scope"):o.on});h.forEachTransform(c,function(t){t.parse&&t.parse(e,o,c)})};for(var o in t)a(o);return n},n.assembleUnitSelectionSignals=function(e,t){a(e,function(r,a){var o=r.name,i=a.modifyExpr(e,r);t.push.apply(t,a.signals(e,r)),h.forEachTransform(r,function(n){n.signals&&(t=n.signals(e,r,t)),n.modifyExpr&&(i=n.modifyExpr(e,r,i))}),t.push({name:o+n.MODIFY,on:[{events:{signal:o+n.TUPLE},update:"modify("+u.stringValue(r.name+n.STORE)+", "+i+")"}]})});var r=i(e);if(t.length&&r){var o=u.stringValue(r.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:l.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+o+").datum"}]})}return t},n.assembleTopLevelSignals=function(e,t){var n=!1;if(a(e,function(r,a){a.topLevelSignals&&(t=a.topLevelSignals(e,r,t)),h.forEachTransform(r,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}),n=!0}),n){var r=t.filter(function(e){return"unit"===e.name});r.length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return t},n.assembleUnitSelectionData=function(e,t){return a(e,function(e){var r=t.filter(function(t){return t.name===e.name+n.STORE});r.length||t.push({name:e.name+n.STORE})}),t},n.assembleUnitSelectionMarks=r,n.assembleLayerSelectionMarks=function(e,t){return e.children.forEach(function(e){m.isUnitModel(e)&&(t=r(e,t))}),t},n.predicate=function(e,t,r){var a=[],i=u.logicalExpr(t,function(t){var i=u.varName(t),s=e.getSelectionComponent(i,t),l=u.stringValue(i+n.STORE);if(s.timeUnit){var d=r||e.component.data.raw,c=s.timeUnit.clone();d.parent?c.insertAsParentOf(d):d.parent=c}return a.push(l),o(s.type).predicate+("("+l+", datum")+("global"===s.resolve?")":", "+u.stringValue(s.resolve)+")")});return"!("+a.map(function(e){return"length(data("+e+"))"}).join(" || ")+(") || ("+i+")")},n.isRawSelectionDomain=function(e){return 0<=e.signal.indexOf(n.SELECTION_DOMAIN)},n.selectionScaleDomain=function(e,t){var r=JSON.parse(t.signal.replace(n.SELECTION_DOMAIN,"")),a=u.varName(r.selection),i=e.component.selection&&e.component.selection[a];if(i)c.warn("Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view.");else return i=e.getSelectionComponent(a,r.selection),r.encoding||r.field||(r.field=i.project[0].field,1<i.project.length&&c.warn("A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. Using \"field\": "+u.stringValue(r.field)+".")),{signal:o(i.type).scaleDomain+("("+u.stringValue(a+n.STORE)+", "+u.stringValue(r.encoding||null)+", ")+u.stringValue(r.field||null)+("global"===i.resolve?")":", "+u.stringValue(i.resolve)+")")};return{signal:"null"}},n.unitName=function(e){var t=u.stringValue(e.name),n=i(e);return n&&(t+=(n.facet.row?" + '_' + facet["+u.stringValue(n.field("row"))+"]":"")+(n.facet.column?" + '_' + facet["+u.stringValue(n.field("column"))+"]":"")),t},n.requiresSelectionId=function(e){var t=!1;return a(e,function(e){t=t||e.project.some(function(e){return e.field===p.SELECTION_ID})}),t},n.channelSignalName=function(e,t,n){return u.varName(e.name+"_"+("visual"===n?t:e.fields[t]))},n.spatialProjections=function(e){var t=null,n=null,r=null,a=null;return e.project.forEach(function(e,o){e.channel===d.X?(t=e,n=o):e.channel===d.Y&&(r=e,a=o)}),{x:t,xi:n,y:r,yi:a}}},{"../../channel":694,"../../log":783,"../../selection":787,"../../util":796,"../model":745,"./interval":756,"./multi":757,"./single":759,"./transforms/transforms":765,tslib:688,"vega-event-selector":689}],759:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../util"),a=e("./multi"),o=e("./selection"),i={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:a.default.signals,topLevelSignals:function(e,t,n){var a=n.filter(function(e){return e.name===t.name}),s="data("+r.stringValue(t.name+o.STORE)+")";return a.length?n:n.concat({name:t.name,update:s+".length && {"+t.project.map(function(e,t){return e.field+": "+(s+"[0].values")+"["+t+"]"}).join(", ")+"}"})},modifyExpr:function(e,t){var n=t.name+o.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+o.unitName(e)+"}")}};n.default=i},{"../../util":796,"./multi":757,"./selection":758}],760:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../util"),a=e("../selection"),o=e("./nearest");n.default={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var a=t.name,i=t.project,s=t.bind,l=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.forEach(function(e){var o=r.varName(a+"_"+e.field),i=n.filter(function(e){return e.name===o});i.length||n.unshift({name:o,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+l+"["+r.stringValue(e.field)+"] : null"}],bind:s[e.field]||s[e.channel]||s})}),n},signals:function(e,t,n){var o=t.name,i=t.project,s=n.filter(function(e){return e.name===o+a.TUPLE})[0],l=i.map(function(e){return r.stringValue(e.field)}).join(", "),d=i.map(function(e){return r.varName(o+"_"+e.field)});return s.update=d.join(" && ")+" ? {fields: ["+l+"], values: ["+d.join(", ")+"]} : null",delete s.value,delete s.on,n}}},{"../../../util":796,"../selection":758,"./nearest":761}],761:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../selection"),a="voronoi";n.default={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n,o){var i=r.spatialProjections(t),s=i.x,l=i.y,d=n[0],c=o.indexOf(d),p=d.name===e.getName("pathgroup"),u=function(e){return e.name&&0<=e.name.indexOf(a)},m={name:e.getName(a),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:0.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:!s&&(s||l)?{expr:"0"}:"datum.x",y:!l&&(s||l)?{expr:"0"}:"datum.y",size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};return p&&!d.marks.filter(u).length?(d.marks.push(m),o.splice(c,1,d)):!p&&!o.filter(u).length&&o.splice(c+1,0,m),o}}},{"../selection":758}],762:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../log"),a=e("../../../util"),o=e("../../data/timeunit");n.default={has:function(e){return e.fields!==void 0||e.encodings!==void 0},parse:function(e,t,n){var i={},s={};(t.fields||[]).forEach(function(e){return i[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(!n)r.warn(r.message.cannotProjectOnChannelWithoutField(t));else if(n.timeUnit){var a=e.field(t);i[a]=t,s[a]={as:a,field:n.field,timeUnit:n.timeUnit}}else i[n.field]=t});var l=n.project||(n.project=[]);for(var d in i)i.hasOwnProperty(d)&&l.push({field:d,channel:i[d]});var c=n.fields||(n.fields={});l.filter(function(e){return e.channel}).forEach(function(e){return c[e.channel]=e.field}),a.keys(s).length&&(n.timeUnit=new o.TimeUnitNode(s))}}},{"../../../log":783,"../../../util":796,"../../data/timeunit":722}],763:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../log"),a=e("../../../scale"),o=e("../../../util"),i=e("../selection");n.default={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var o=n.scales=[];n.project.forEach(function(t){var s=t.channel,l=e.getScaleComponent(s),d=l?l.get("type"):void 0;return l&&a.hasContinuousDomain(d)&&!a.isBinScale(d)?void(l.set("domainRaw",{signal:i.channelSignalName(n,s,"data")},!0),o.push(s)):void r.warn("Scale bindings are currently only supported for scales with unbinned, continuous domains.")})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var r=t.scales.filter(function(e){return!n.filter(function(n){return n.name===i.channelSignalName(t,e,"data")}).length});return n.concat(r.map(function(e){return{name:i.channelSignalName(t,e,"data")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var r=n.filter(function(n){return n.name===i.channelSignalName(t,e,"data")})[0];r.push="outer",delete r.value,delete r.update}),n}},n.domain=function(e,t){var n=o.stringValue(e.scaleName(t));return"domain("+n+")"}},{"../../../log":783,"../../../scale":786,"../../../util":796,"../selection":758}],764:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../selection"),a="_toggle";n.default={has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+a,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+r.TUPLE,o=t.name+a;return o+" ? null : "+n+", "+("global"===t.resolve?o+" ? null : true, ":o+" ? null : {unit: "+r.unitName(e)+"}, ")+(o+" ? "+n+" : null")}}},{"../selection":758}],765:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./inputs"),a=e("./nearest"),o=e("./project"),i=e("./scales"),s=e("./toggle"),l=e("./translate"),d=e("./zoom"),c={project:o.default,toggle:s.default,scales:i.default,translate:l.default,zoom:d.default,inputs:r.default,nearest:a.default};n.forEachTransform=function(e,n){for(var r in c)c[r].has(e)&&n(c[r])}},{"./inputs":760,"./nearest":761,"./project":762,"./scales":763,"./toggle":764,"./translate":766,"./zoom":767}],766:[function(e,t,n){"use strict";function r(e,t,n,r,a){var i=t.name,p=s.default.has(t),u=a.filter(function(e){return e.name===l.channelSignalName(t,n,p?"data":"visual")})[0],m=i+c,f=e.getSizeSignalRef(r).signal,y=e.getScaleComponent(n),g=y.get("type"),h=p&&n===o.X?"-":"",b=i+d+".extent_"+n,_=""+h+m+"."+n+" / "+(p?""+f:"span("+b+")"),x=p?"log"===g?"panLog":"pow"===g?"panPow":"panLinear":"panLinear",v=x+"("+b+", "+_+(p&&"pow"===g?", "+(y.get("exponent")||1):"")+")";u.on.push({events:{signal:m},update:p?v:"clampRange("+v+", 0, "+f+")"})}Object.defineProperty(n,"__esModule",{value:!0});var a=e("vega-event-selector"),o=e("../../../channel"),i=e("../interval"),l=e("../selection"),s=e("./scales"),d="_translate_anchor",c="_translate_delta";n.default={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var p=t.name,u=s.default.has(t),m=p+d,f=l.spatialProjections(t),g=f.x,h=f.y,y=a.selector(t.translate,"scope");return u||(y=y.map(function(t){return t.between[0].markname=p+i.BRUSH,t})),n.push({name:m,value:{},on:[{events:y.map(function(t){return t.between[0]}),update:"{x: x(unit), y: y(unit)"+(null===g?"":", extent_x: "+(u?s.domain(e,o.X):"slice("+l.channelSignalName(t,"x","visual")+")"))+(null===h?"":", extent_y: "+(u?s.domain(e,o.Y):"slice("+l.channelSignalName(t,"y","visual")+")"))+"}"}]},{name:p+c,value:{},on:[{events:y,update:"{x: "+m+".x - x(unit), y: "+m+".y - y(unit)}"}]}),null!==g&&r(e,t,o.X,"width",n),null!==h&&r(e,t,o.Y,"height",n),n}}},{"../../../channel":694,"../interval":756,"../selection":758,"./scales":763,"vega-event-selector":689}],767:[function(e,t,n){"use strict";function r(e,t,n,r,a){var o=t.name,i=d.default.has(t),s=a.filter(function(e){return e.name===l.channelSignalName(t,n,i?"data":"visual")})[0],u=e.getSizeSignalRef(r).signal,m=e.getScaleComponent(n),f=m.get("type"),y=i?d.domain(e,n):s.name,g=o+p,h=i?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear",b=h+"("+y+", "+(""+o+c+"."+n)+", "+g+(i&&"pow"===f?", "+(m.get("exponent")||1):"")+")";s.on.push({events:{signal:g},update:i?b:"clampRange("+b+", 0, "+u+")"})}Object.defineProperty(n,"__esModule",{value:!0});var a=e("vega-event-selector"),o=e("../../../channel"),i=e("../../../util"),s=e("../interval"),l=e("../selection"),d=e("./scales"),c="_zoom_anchor",p="_zoom_delta";n.default={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var u=t.name,m=d.default.has(t),f=l.spatialProjections(t),g=f.x,h=f.y,y=i.stringValue(e.scaleName(o.X)),b=i.stringValue(e.scaleName(o.Y)),_=a.selector(t.zoom,"scope");return m||(_=_.map(function(t){return t.markname=u+s.BRUSH,t})),n.push({name:u+c,on:[{events:_,update:m?"{"+[y?"x: invert("+y+", x(unit))":"",b?"y: invert("+b+", y(unit))":""].filter(function(e){return!!e}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:u+p,on:[{events:_,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==g&&r(e,t,"x","width",n),null!==h&&r(e,t,"y","height",n),n}}},{"../../../channel":694,"../../../util":796,"../interval":756,"../selection":758,"./scales":763,"vega-event-selector":689}],768:[function(e,t,n){"use strict";function r(e,t,n,r){return e.explicit&&t.explicit&&o.warn(o.message.mergeConflictingProperty(n,r,e.value,t.value)),e}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../log"),i=e("../util"),s=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(i.duplicate(this.explicit),i.duplicate(this.implicit))},e.prototype.combine=function(){return a.__assign({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0===this.explicit[e]?this.implicit[e]:this.explicit[e]},e.prototype.getWithExplicit=function(e){return void 0===this.explicit[e]?void 0===this.implicit[e]?{explicit:!1,value:void 0}:{explicit:!1,value:this.implicit[e]}:{explicit:!0,value:this.explicit[e]}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0===t.explicit[e]?void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1):this.set(e,t.explicit[e],!0)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e.prototype.extend=function(t,n){return new e(n?a.__assign({},this.explicit,t):this.explicit,n?this.implicit:a.__assign({},this.implicit,t))},e}();n.Split=s,n.makeExplicit=function(e){return{explicit:!0,value:e}},n.makeImplicit=function(e){return{explicit:!1,value:e}},n.tieBreakByComparing=function(e){return function(t,n,a,o){var i=e(t.value,n.value);if(0<i)return t;return 0>i?n:r(t,n,a,o)}},n.defaultTieBreaker=r,n.mergeValuesWithExplicit=function(e,t,n,a,o){return void 0===o&&(o=r),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:e.value===t.value?e:o(e,t,n,a)}},{"../log":783,"../util":796,tslib:688}],769:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),a=e("../channel"),o=e("../encoding"),i=e("../encoding"),s=e("../fielddef"),l=e("../mark"),d=e("../scale"),c=e("../stack"),p=e("../util"),u=e("./axis/parse"),m=e("./data/parse"),f=e("./layoutsize/assemble"),y=e("./layoutsize/parse"),g=e("./mark/init"),h=e("./mark/mark"),b=e("./model"),_=e("./repeater"),x=e("./selection/selection"),v=function(e){function t(t,n,a,o,s,d){void 0===o&&(o={});var p=e.call(this,t,n,a,d,void 0)||this;p.type="unit",p.specifiedScales={},p.specifiedAxes={},p.specifiedLegends={},p.selection={},p.children=[],p.initSize(r.__assign({},o,t.width?{width:t.width}:{},t.height?{height:t.height}:{})),p.markDef=l.isMarkDef(t.mark)?r.__assign({},t.mark):{type:t.mark};var u=p.markDef.type,m=p.encoding=i.normalizeEncoding(_.replaceRepeaterInEncoding(t.encoding||{},s),u);return p.stack=c.stack(u,m,p.config.stack),p.specifiedScales=p.initScales(u,m),p.encoding=g.initEncoding(p.markDef,m,p.stack,p.config),p.specifiedAxes=p.initAxes(m),p.specifiedLegends=p.initLegend(m),p.selection=t.selection,p}return r.__extends(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.hasDiscreteDomain=function(e){if(a.isScaleChannel(e)){var t=this.getScaleComponent(e);return t&&d.hasDiscreteDomain(t.get("type"))}return!1},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return a.SCALE_CHANNELS.reduce(function(e,n){var r=t[n],a,o;return s.isFieldDef(r)?(a=r,o=r.scale):s.isConditionalDef(r)&&s.isFieldDef(r.condition)?(a=r.condition,o=r.condition.scale):"x"===n?a=s.getFieldDef(t.x2):"y"===n&&(a=s.getFieldDef(t.y2)),a&&(e[n]=o||{}),e},{})},t.prototype.initAxes=function(e){return[a.X,a.Y].reduce(function(t,n){var o=e[n];if(s.isFieldDef(o)||n===a.X&&s.isFieldDef(e.x2)||n===a.Y&&s.isFieldDef(e.y2)){var i=s.isFieldDef(o)?o.axis:null;null!==i&&!1!==i&&(t[n]=r.__assign({},i))}return t},{})},t.prototype.initLegend=function(e){return a.NONSPATIAL_SCALE_CHANNELS.reduce(function(t,n){var a=e[n];if(a){var o=s.isFieldDef(a)?a.legend:a.condition&&s.isFieldDef(a.condition)?a.condition.legend:null;null!==o&&!1!==o&&(t[n]=r.__assign({},o))}return t},{})},t.prototype.parseData=function(){this.component.data=m.parseData(this)},t.prototype.parseLayoutSize=function(){y.parseUnitLayoutSize(this)},t.prototype.parseSelection=function(){this.component.selection=x.parseUnitSelection(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=h.parseMarkGroup(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=u.parseUnitAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return x.assembleTopLevelSignals(this,e)},t.prototype.assembleSelectionSignals=function(){return x.assembleUnitSelectionSignals(this,[])},t.prototype.assembleSelectionData=function(e){return x.assembleUnitSelectionData(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return f.assembleLayoutSignals(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&b.isLayerModel(this.parent)||(e=x.assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n=p.duplicate(this.encoding),r;return r={mark:this.markDef,encoding:n},e||(r.config=p.duplicate(this.config)),t||(r.data=p.duplicate(this.data)),r},t.prototype.mark=function(){return this.markDef.type},t.prototype.channelHasField=function(e){return o.channelHasField(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return s.getFieldDef(t)},t}(b.ModelWithField);n.UnitModel=v},{"../channel":694,"../encoding":776,"../fielddef":778,"../mark":785,"../scale":786,"../stack":790,"../util":796,"./axis/parse":698,"./data/parse":719,"./layoutsize/assemble":726,"./layoutsize/parse":727,"./mark/init":735,"./mark/mark":737,"./model":745,"./repeater":747,"./selection/selection":758,tslib:688}],770:[function(e,t,n){"use strict";function r(e){return!!e.type}function a(e){return l.__assign({},e,{encoding:c.reduce(e.encoding,function(e,t,r){return-1<f.indexOf(r)?e[r]=t:m.warn(m.message.incompatibleChannel(r,n.BOXPLOT)),e},{})})}function o(e){var t=e.mark,a=e.encoding,o=l.__rest(e,["mark","encoding"]);if(u.isFieldDef(a.x)&&u.isContinuous(a.x)){if(u.isFieldDef(a.y)&&u.isContinuous(a.y)){if(a.x.aggregate===void 0&&a.y.aggregate===n.BOXPLOT)return"vertical";if(void 0===a.y.aggregate&&a.x.aggregate===n.BOXPLOT)return"horizontal";if(a.x.aggregate===n.BOXPLOT&&a.y.aggregate===n.BOXPLOT)throw new Error("Both x and y cannot have aggregate");else return r(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(u.isFieldDef(a.y)&&u.isContinuous(a.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}function i(e,t){var r=e.mark,a=e.encoding,o=l.__rest(e,["mark","encoding"]),i,s;if("vertical"===t?(s="y",i=a.y):(s="x",i=a.x),i&&i.aggregate){var d=i.aggregate,c=l.__rest(i,["aggregate"]);d!==n.BOXPLOT&&m.warn("Continuous axis should not have customized aggregation function "+d),i=c}return{continuousAxisChannelDef:i,continuousAxis:s}}function s(e,t,r){var a=i(e,t),o=a.continuousAxisChannelDef,s=a.continuousAxis,l=e.encoding,d=[{aggregate:"q1",field:o.field,as:"lowerBox"},{aggregate:"q3",field:o.field,as:"upperBox"},{aggregate:"median",field:o.field,as:"midBox"}],c=[];void 0===r?(d.push({aggregate:"min",field:o.field,as:"lowerWhisker"}),d.push({aggregate:"max",field:o.field,as:"upperWhisker"})):c=[{calculate:"datum.upperBox - datum.lowerBox",as:"IQR"},{calculate:"datum.lowerBox - datum.IQR * "+r,as:"lowerWhisker"},{calculate:"datum.upperBox + datum.IQR * "+r,as:"lowerWhisker"}];var m=[],f=[],y=[],g={};return p.forEach(l,function(e,t){if(t!==s)if(u.isFieldDef(e)){if(e.aggregate&&e.aggregate!==n.BOXPLOT)d.push({aggregate:e.aggregate,field:e.field,as:u.field(e)});else if(void 0===e.aggregate){var r=u.field(e),a=e.bin;if(a){var o=e.field;f.push({bin:a,field:o,as:r})}else if(e.timeUnit){var i=e.timeUnit,c=e.field;y.push({timeUnit:i,field:c,as:r})}m.push(r)}g[t]={field:u.field(e),type:e.type}}else g[t]=l[t]}),{transform:[].concat(f,y,[{summarize:d,groupby:m}],c),continuousAxisChannelDef:o,continuousAxis:s,encodingWithoutContinuousAxis:g}}Object.defineProperty(n,"__esModule",{value:!0});var l=e("tslib"),d=e("vega-util"),c=e("../encoding"),p=e("./../encoding"),u=e("./../fielddef"),m=e("./../log");n.BOXPLOT="box-plot",n.isBoxPlotDef=r,n.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],n.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size"]};var f=["x","y","color","detail","opacity","size"];n.filterUnsupportedChannels=a,n.normalizeBoxPlot=function(e,t){e=a(e);var n=e.mark,i=e.encoding,c=e.selection,p=l.__rest(e,["mark","encoding","selection"]),u;r(n)&&n.extent&&d.isNumber(n.extent)&&(u=n.extent);var m=o(e),f=s(e,m,u),y=f.transform,g=f.continuousAxisChannelDef,h=f.continuousAxis,b=f.encodingWithoutContinuousAxis,_=b.size,x=b.color,v=l.__rest(b,["size","color"]),S=_?{size:_}:{size:{value:t.box.size}},T={};return g.scale&&(T.scale=g.scale),g.axis&&(T.axis=g.axis),l.__assign({},p,{transform:y,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:l.__assign((k={},k[h]=l.__assign({field:"lowerWhisker",type:g.type},T),k[h+"2"]={field:"lowerBox",type:g.type},k),v)},{mark:{type:"rule",style:"boxWhisker"},encoding:l.__assign((O={},O[h]={field:"upperBox",type:g.type},O[h+"2"]={field:"upperWhisker",type:g.type},O),v)},l.__assign({},c?{selection:c}:{},{mark:{type:"bar",style:"box"},encoding:l.__assign((E={},E[h]={field:"lowerBox",type:g.type},E[h+"2"]={field:"upperBox",type:g.type},E),b,S)}),{mark:{type:"tick",style:"boxMid"},encoding:l.__assign((C={},C[h]={field:"midBox",type:g.type},C),v,S)}]});var k,O,E,C}},{"../encoding":776,"./../encoding":776,"./../fielddef":778,"./../log":783,tslib:688,"vega-util":805}],771:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib");n.ERRORBAR="error-bar",n.normalizeErrorBar=function(e){var t=e.mark,n=e.selection,a=e.encoding,o=r.__rest(e,["mark","selection","encoding"]),i=a.size,s=r.__rest(a,["size"]),l=a.x2,d=a.y2,c=r.__rest(a,["x2","y2"]),p=c.x,u=c.y,m=r.__rest(c,["x","y"]);if(!a.x2&&!a.y2)throw new Error("Neither x2 or y2 provided");return r.__assign({},o,{layer:[{mark:"rule",encoding:s},{mark:"tick",encoding:c},{mark:"tick",encoding:a.x2?r.__assign({x:a.x2,y:a.y},m):r.__assign({x:a.x,y:a.y2},m)}]})}},{tslib:688}],772:[function(e,t,n){"use strict";function r(e,t){l[e]=t}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("./../mark"),i=e("./boxplot"),s=e("./errorbar"),l={};n.add=r,n.remove=function(e){delete l[e]},n.COMPOSITE_MARK_STYLES=i.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=a.__assign({},i.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),r(i.BOXPLOT,i.normalizeBoxPlot),r(s.ERRORBAR,s.normalizeErrorBar),n.normalize=function(e,t){var n=o.isMarkDef(e.mark)?e.mark.type:e.mark,r=l[n];if(r)return r(e,t);throw new Error("Unregistered composite mark "+n)}},{"./../mark":785,"./boxplot":770,"./errorbar":771,tslib:688}],773:[function(e,t,n){"use strict";function r(e,t,n){var r="title"===t?m.extractTitleConfig(e.title).mark:e[t],o=a.__assign({},r,e.style[t]);0<f.keys(o).length&&(e.style[n||t]=o),delete e[t]}Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("./compositemark"),i=e("./compositemark/index"),s=e("./guide"),l=e("./legend"),d=e("./mark"),c=e("./mark"),p=e("./scale"),u=e("./selection"),m=e("./title"),f=e("./util");n.defaultCellConfig={width:200,height:200},n.defaultConfig={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",cell:n.defaultCellConfig,mark:c.defaultMarkConfig,area:{},bar:c.defaultBarConfig,circle:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:c.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:"white"},scale:p.defaultScaleConfig,axis:{domainColor:"#888",tickColor:"#888"},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:l.defaultLegendConfig,selection:u.defaultConfig,style:{},title:{}},n.initConfig=function(e){return f.mergeDeep(f.duplicate(n.defaultConfig),e)};var y=["cell"].concat(d.PRIMITIVE_MARKS,o.COMPOSITE_MARK_STYLES),g=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],h=a.__assign({cell:["width","height"]},d.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,i.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);n.stripAndRedirectConfig=function(e){e=f.duplicate(e);for(var t=0,n=g,a;t<n.length;t++)a=n[t],delete e[a];if(e.axis)for(var o=0,i=s.VL_ONLY_GUIDE_CONFIG,a;o<i.length;o++)a=i[o],delete e.axis[a];if(e.legend)for(var l=0,c=s.VL_ONLY_GUIDE_CONFIG,a;l<c.length;l++)a=c[l],delete e.legend[a];if(e.mark)for(var p=0,u=d.VL_ONLY_MARK_CONFIG_PROPERTIES,a;p<u.length;p++)a=u[p],delete e.mark[a];for(var m=0,b=y,_;m<b.length;m++){_=b[m];for(var x=0,v=d.VL_ONLY_MARK_CONFIG_PROPERTIES,a;x<v.length;x++)a=v[x],delete e[_][a];var S=h[_];if(S)for(var T=0,k=S,a;T<k.length;T++)a=k[T],delete e[_][a];r(e,_)}for(var a in r(e,"title","group-title"),e)f.isObject(e[a])&&0===f.keys(e[a]).length&&delete e[a];return 0<f.keys(e).length?e:void 0}},{"./compositemark":772,"./compositemark/index":772,"./guide":780,"./legend":782,"./mark":785,"./scale":786,"./selection":787,"./title":792,"./util":796,tslib:688}],774:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isUrlData=function(e){return!!e.url},n.isInlineData=function(e){return!!e.values},n.isNamedData=function(e){return!!e.name},n.MAIN="main",n.RAW="raw"},{}],775:[function(e,t,n){"use strict";function r(e){if(s.isNumber(e))return 4<e&&i.warn(i.message.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(i.message.invalidTimeUnit("quarter",e))}function a(e){if(s.isNumber(e))return e-1+"";var t=e.toLowerCase(),r=n.MONTHS.indexOf(t);if(-1!==r)return r+"";var a=t.substr(0,3),o=n.SHORT_MONTHS.indexOf(a);if(-1!==o)return o+"";throw new Error(i.message.invalidTimeUnit("month",e))}function o(e){if(s.isNumber(e))return e%7+"";var t=e.toLowerCase(),r=n.DAYS.indexOf(t);if(-1!==r)return r+"";var a=t.substr(0,3),o=n.SHORT_DAYS.indexOf(a);if(-1!==o)return o+"";throw new Error(i.message.invalidTimeUnit("day",e))}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./log"),s=e("./util");n.isDateTime=function(e){return!!e&&(!!e.year||!!e.quarter||!!e.month||!!e.date||!!e.day||!!e.hours||!!e.minutes||!!e.seconds||!!e.milliseconds)},n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=function(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&1<s.keys(e).length&&(i.warn(i.message.droppedDay(e)),e=s.duplicate(e),delete e.day),void 0===e.year?void 0===e.day?n.push(0):n.push(2006):n.push(e.year),void 0!==e.month){var l=t?a(e.month):e.month;n.push(l)}else if(void 0!==e.quarter){var d=t?r(e.quarter):e.quarter;n.push(d+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var c=t?o(e.day):e.day;n.push(c+"+1")}else n.push(1);for(var p=0,u=["hours","minutes","seconds","milliseconds"],m;p<u.length;p++)m=u[p],void 0===e[m]?n.push(0):n.push(e[m]);return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}},{"./log":783,"./util":796}],776:[function(e,t,n){"use strict";function r(e,t){var n=e&&e[t];return!!n&&(s.isArray(n)?s.some(n,function(e){return!!e.field}):o.isFieldDef(n)||o.hasConditionFieldDef(n))}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./channel"),o=e("./fielddef"),i=e("./log"),s=e("./util");n.channelHasField=r,n.isAggregate=function(e){return s.some(a.CHANNELS,function(t){if(r(e,t)){var n=e[t];if(s.isArray(n))return s.some(n,function(e){return!!e.aggregate});var a=o.getFieldDef(n);return a&&!!a.aggregate}return!1})},n.normalizeEncoding=function(e,t){return s.keys(e).reduce(function(n,r){if(!a.supportMark(r,t))return i.warn(i.message.incompatibleChannel(r,t)),n;if("size"===r&&"line"===t){var l=o.getFieldDef(e[r]);if(l&&l.aggregate)return i.warn(i.message.incompatibleChannel(r,t,"when the field is aggregated.")),n}if("detail"===r||"order"===r){var d=e[r];d&&(n[r]=(s.isArray(d)?d:[d]).reduce(function(e,t){return o.isFieldDef(t)?e.push(o.normalizeFieldDef(t,r)):i.warn(i.message.emptyFieldDef(t,r)),e},[]))}else{var d=e[r];if(!o.isFieldDef(d)&&!o.isValueDef(d)&&!o.isConditionalDef(d))return i.warn(i.message.emptyFieldDef(d,r)),n;n[r]=o.normalize(d,r)}return n},{})},n.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},n.fieldDefs=function(e){var t=[];return a.CHANNELS.forEach(function(n){if(r(e,n)){var a=e[n];(s.isArray(a)?a:[a]).forEach(function(e){o.isFieldDef(e)?t.push(e):o.hasConditionFieldDef(e)&&t.push(e.condition)})}}),t},n.forEach=function(e,t,n){e&&s.keys(e).forEach(function(r){var a=r;s.isArray(e[a])?e[a].forEach(function(e){t.call(n,e,a)}):t.call(n,e[a],a)})},n.reduce=function(e,t,n,a){return e?s.keys(e).reduce(function(n,r){var o=r;return s.isArray(e[o])?e[o].reduce(function(e,n){return t.call(a,e,n,o)},n):t.call(a,n,e[o],o)},n):n}},{"./channel":694,"./fielddef":778,"./log":783,"./util":796}],777:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},{}],778:[function(e,t,n){"use strict";function r(e){return!!e&&!!e.condition&&a(e.condition)}function a(e){return!!e&&(!!e.field||"count"===e.aggregate)}function o(e){switch(e.type){case"nominal":case"ordinal":return!0;case"quantitative":return!!e.bin;case"temporal":return!1;}throw new Error(g.message.invalidFieldType(e.type))}function i(e){return!o(e)}function s(e){return"count"===e.aggregate}function l(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(y.rangeType(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative";}}function d(e,t){if(e.aggregate&&!m.isAggregateOp(e.aggregate)){var n=e.aggregate,r=u.__rest(e,["aggregate"]);g.warn(g.message.invalidAggregate(e.aggregate)),e=r}if(e.timeUnit&&(e=u.__assign({},e,{timeUnit:h.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=u.__assign({},e,{bin:c(e.bin,t)})),e.type){var a=b.getFullName(e.type);e.type!==a&&(e=u.__assign({},e,{type:a})),"quantitative"!==e.type&&m.isCountingAggregateOp(e.aggregate)&&(g.warn(g.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=u.__assign({},e,{type:"quantitative"}))}else{var o=l(e,t);g.warn(g.message.emptyOrInvalidFieldType(e.type,t,o)),e=u.__assign({},e,{type:o})}var i=p(e,t),s=i.compatible,d=i.warning;return s||g.warn(d),e}function c(e,t){return _.isBoolean(e)?{maxbins:f.autoMaxBins(t)}:e.maxbins||e.step?e:u.__assign({},e,{maxbins:f.autoMaxBins(t)})}function p(e,t){switch(t){case"row":case"column":return i(e)&&!e.timeUnit?{compatible:!1,warning:g.message.facetChannelShouldBeDiscrete(t)}:x;case"x":case"y":case"color":case"text":case"detail":case"tooltip":return x;case"opacity":case"size":case"x2":case"y2":return o(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:x;case"shape":return"nominal"===e.type?x:{compatible:!1,warning:"Shape channel should be used with nominal data only"};case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:x;}throw new Error("channelCompatability not implemented for channel "+t)}Object.defineProperty(n,"__esModule",{value:!0});var u=e("tslib"),m=e("./aggregate"),f=e("./bin"),y=e("./channel"),g=e("./log"),h=e("./timeunit"),b=e("./type"),_=e("./util");n.isRepeatRef=function(e){return e&&!_.isString(e)&&"repeat"in e},n.isConditionalDef=function(e){return!!e&&!!e.condition},n.hasConditionFieldDef=r,n.isFieldDef=a,n.isValueDef=function(e){return e&&"value"in e&&e.value!==void 0},n.isScaleFieldDef=function(e){return!!e&&(!!e.scale||!!e.sort)},n.field=function(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,a=t.suffix;if(s(e))n="count_*";else{var o;t.nofn||(e.bin?(o=f.binToString(e.bin),a=t.binSuffix||""):e.aggregate?o=(t.aggregate||e.aggregate)+"":e.timeUnit&&(o=e.timeUnit+"")),o&&(n=o+"_"+n)}return a&&(n=n+"_"+a),r&&(n=r+"_"+n),t.expr&&(n=t.expr+"["+_.stringValue(n)+"]"),n},n.isDiscrete=o,n.isContinuous=i,n.isCount=s,n.title=function(e,t){if(s(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field},n.defaultType=l,n.getFieldDef=function(e){if(a(e))return e;return r(e)?e.condition:void 0},n.normalize=function(e,t){if(a(e))return d(e,t);return r(e)?u.__assign({},e,{condition:d(e.condition,t)}):e},n.normalizeFieldDef=d,n.normalizeBin=c;var x={compatible:!0};n.channelCompatibility=p,n.isNumberFieldDef=function(e){return"quantitative"===e.type||!!e.bin},n.isTimeFieldDef=function(e){return"temporal"===e.type||!!e.timeUnit}},{"./aggregate":691,"./bin":693,"./channel":694,"./log":783,"./timeunit":791,"./type":795,"./util":796,tslib:688}],779:[function(e,t,n){"use strict";function r(e){return e&&e.selection}function a(e){return e&&!!e.field&&e.equal!==void 0}function o(e){return e&&e.field&&f.isArray(e.range)&&2===e.range.length}function i(e){return e&&!!e.field&&(f.isArray(e.oneOf)||f.isArray(e.in))}function s(e){return i(e)||a(e)||o(e)}function l(e){var t=e.timeUnit?"time("+y.fieldExpr(e.timeUnit,e.field)+")":m.field(e,{expr:"datum"});if(a(e))return t+"==="+d(e.equal,e.timeUnit);if(i(e)){var n=e.oneOf||e["in"];return"indexof(["+n.map(function(t){return d(t,e.timeUnit)}).join(",")+"], "+t+") !== -1"}if(o(e)){var r=e.range[0],s=e.range[1];return null!==r&&null!==s?"inrange("+t+", ["+d(r,e.timeUnit)+", "+d(s,e.timeUnit)+"])":null===r?null===s?void 0:t+" <= "+s:t+" >= "+r}throw new Error("Invalid field filter: "+JSON.stringify(e))}function d(e,t){if(u.isDateTime(e)){var n=u.dateTimeExpr(e,!0);return"time("+n+")"}if(y.isLocalSingleTimeUnit(t)){var r={};r[t]=e;var n=u.dateTimeExpr(r,!0);return"time("+n+")"}return y.isUtcSingleTimeUnit(t)?d(e,y.getLocalTimeUnit(t)):JSON.stringify(e)}Object.defineProperty(n,"__esModule",{value:!0});var c=e("tslib"),p=e("./compile/selection/selection"),u=e("./datetime"),m=e("./fielddef"),y=e("./timeunit"),f=e("./util");n.isSelectionFilter=r,n.isEqualFilter=a,n.isRangeFilter=o,n.isOneOfFilter=i,n.isFieldFilter=s,n.expression=function(e,t,n){return f.logicalExpr(t,function(t){return f.isString(t)?t:r(t)?p.predicate(e,t.selection,n):l(t)})},n.fieldFilterExpression=l,n.normalizeFilter=function(e){return s(e)&&e.timeUnit?c.__assign({},e,{timeUnit:y.normalizeTimeUnit(e.timeUnit)}):e}},{"./compile/selection/selection":758,"./datetime":775,"./fielddef":778,"./timeunit":791,"./util":796,tslib:688}],780:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"]},{}],781:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.axis=e("./axis"),n.aggregate=e("./aggregate"),n.bin=e("./bin"),n.channel=e("./channel"),n.compositeMark=e("./compositemark");var r=e("./compile/compile");n.compile=r.compile,n.config=e("./config"),n.data=e("./data"),n.datetime=e("./datetime"),n.encoding=e("./encoding"),n.facet=e("./facet"),n.fieldDef=e("./fielddef"),n.legend=e("./legend"),n.mark=e("./mark"),n.scale=e("./scale"),n.sort=e("./sort"),n.spec=e("./spec"),n.stack=e("./stack"),n.timeUnit=e("./timeunit"),n.transform=e("./transform"),n.type=e("./type"),n.util=e("./util"),n.validate=e("./validate"),n.version=e("../package.json").version},{"../package.json":690,"./aggregate":691,"./axis":692,"./bin":693,"./channel":694,"./compile/compile":703,"./compositemark":772,"./config":773,"./data":774,"./datetime":775,"./encoding":776,"./facet":777,"./fielddef":778,"./legend":782,"./mark":785,"./scale":786,"./sort":788,"./spec":789,"./stack":790,"./timeunit":791,"./transform":794,"./type":795,"./util":796,"./validate":797}],782:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultLegendConfig={},n.LEGEND_PROPERTIES=["entryPadding","format","offset","orient","tickCount","title","type","values","zindex"],n.VG_LEGEND_PROPERTIES=[].concat(["fill","stroke","shape","size","opacity","encode"],n.LEGEND_PROPERTIES)},{}],783:[function(e,t,n){"use strict";function r(){return i=o,i}Object.defineProperty(n,"__esModule",{value:!0});var a=e("vega-util"),o=a.logger(a.Warn),i=o,s=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.warns).push.apply(n,e),this;var n},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.infos).push.apply(n,e),this;var n},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.debugs).push.apply(n,e),this;var n},e}();n.LocalLogger=s,n.runLocalLogger=function(e){var t=i=new s;e(t),r()},n.wrap=function(e){return function(){var t=i=new s;e(t),r()}},n.set=function(e){return i=e,i},n.reset=r,n.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.warn.apply(i,arguments)},n.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.info.apply(i,arguments)},n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.debug.apply(i,arguments)};var l;(function(e){e.INVALID_SPEC="Invalid spec",e.cannotProjectOnChannelWithoutField=function(e){return"Cannot project a selection on encoding channel \""+e+"\", which has no field."},e.selectionNotFound=function(e){return"Cannot find a selection named \""+e+"\""},e.noSuchRepeatedValue=function(e){return"Unknown repeated value \""+e+"\"."},e.cannotSetTitleAnchor=function(e){return"Cannot set title \"anchor\" for a "+e+" spec"},e.unrecognizedParse=function(e){return"Unrecognized parse \""+e+"\"."},e.differentParse=function(e,t,n){return"An ancestor parsed field \""+e+"\" as "+n+" but a child wants to parse the field as "+t+"."},e.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+JSON.stringify(e)+"."},e.NO_FIELDS_NEEDS_AS="If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the the data from the secondary source.",e.invalidFieldType=function(e){return"Invalid field type \""+e+"\""},e.invalidFieldTypeForCountAggregate=function(e,t){return"Invalid field type \""+e+"\" for aggregate: \""+t+"\", using \"quantitative\" instead."},e.invalidAggregate=function(e){return"Invalid aggregation operator \""+e+"\""},e.emptyOrInvalidFieldType=function(e,t,n){return"Invalid field type \""+e+"\" for channel \""+t+"\", using \""+n+"\" instead."},e.emptyFieldDef=function(e,t){return"Dropping "+JSON.stringify(e)+" from channel \""+t+"\" since it does not contain data field or value."},e.incompatibleChannel=function(e,t,n){return e+" dropped as it is incompatible with \""+t+"\""+(n?" when "+n:"")+"."},e.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},e.discreteChannelCannotEncode=function(e,t){return"Using discrete channel \""+e+"\" to encode \""+t+"\" field can be misleading as it does not encode "+("ordinal"===t?"order":"magnitude")+"."},e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",e.unclearOrientContinuous=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode continous fields. In this case, we use vertical by default"},e.unclearOrientDiscreteOrEmpty=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode discrete or empty fields."},e.orientOverridden=function(e,t){return"Specified orient \""+e+"\" overridden with \""+t+"\""},e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",e.cannotUseScalePropertyWithNonColor=function(e){return"Cannot use the scale property \""+e+"\" with non-color channel."},e.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+JSON.stringify(e)+")."},e.unaggregateDomainWithNonSharedDomainOp=function(e){return"Unaggregated domain not applicable for \""+e+"\" since it produces values outside the origin domain of the source data."},e.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+JSON.stringify(e)+")."},e.CANNOT_USE_RANGE_WITH_POSITION="Cannot use a custom \"range\" with x or y channel.  Please customize width, height, padding, or rangeStep instead.",e.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},e.cannotApplySizeToNonOrientedMark=function(e){return"Cannot apply size to non-oriented mark \""+e+"\"."},e.rangeStepDropped=function(e){return"rangeStep for \""+e+"\" is dropped as top-level "+("x"===e?"width":"height")+" is provided."},e.scaleTypeNotWorkWithChannel=function(e,t,n){return"Channel \""+e+"\" does not work with \""+t+"\" scale. We are using \""+n+"\" scale instead."},e.scaleTypeNotWorkWithFieldDef=function(e,t){return"FieldDef does not work with \""+e+"\" scale. We are using \""+t+"\" scale instead."},e.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+"\" is dropped as it does not work with "+e+" scale."},e.scaleTypeNotWorkWithMark=function(e,t){return"Scale type \""+t+"\" does not work with mark \""+e+"\"."},e.mergeConflictingProperty=function(e,t,n,r){return"Conflicting "+t+" property \""+e+"\" (\""+n+"\" and \""+r+"\").  Using \""+n+"\"."},e.independentScaleMeansIndependentGuide=function(e){return"Setting the scale to be independent for \""+e+"\" means we also have to set the guide (axis or legend) to be independent."},e.conflictedDomain=function(e){return"Cannot set "+e+"-scale's \"domain\" as it is binned. Please use \"bin\"'s \"extent\" instead."},e.domainSortDropped=function(e){return"Dropping sort property \""+JSON.stringify(e)+"\" as unioned domains only support boolean or op 'count'."},e.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",e.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",e.cannotStackRangedMark=function(e){return"Cannot stack \""+e+"\" if there is already \""+e+"2\""},e.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},e.cannotStackNonSummativeAggregate=function(e){return"Cannot stack when the aggregate function is non-summative (\""+e+"\")"},e.invalidTimeUnit=function(e,t){return"Invalid "+e+": \""+t+"\""},e.dayReplacedWithDate=function(e){return"Time unit \""+e+"\" is not supported. We are replacing it with "+e.replace("day","date")+"."},e.droppedDay=function(e){return"Dropping day from datetime "+JSON.stringify(e)+" as day cannot be combined with other units."}})(l=n.message||(n.message={}))},{"vega-util":805}],784:[function(e,t,n){"use strict";function r(e){return!!e.or}function a(e){return!!e.and}function o(e){return!!e.not}function i(e,t){if(o(e))i(e.not,t);else if(a(e))for(var n=0,s=e.and,l;n<s.length;n++)l=s[n],i(l,t);else if(r(e))for(var d=0,c=e.or,l;d<c.length;d++)l=c[d],i(l,t);else t(e)}function s(e,t){return o(e)?{not:s(e.not,t)}:a(e)?{and:e.and.map(function(e){return s(e,t)})}:r(e)?{or:e.or.map(function(e){return s(e,t)})}:t(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isLogicalOr=r,n.isLogicalAnd=a,n.isLogicalNot=o,n.forEachLeave=i,n.normalizeLogicalOperand=s},{}],785:[function(e,t,n){"use strict";function r(e){return e.type}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./util"),o;(function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.POINT="point",e.RECT="rect",e.RULE="rule",e.TEXT="text",e.TICK="tick",e.CIRCLE="circle",e.SQUARE="square"})(o=n.Mark||(n.Mark={})),n.AREA=o.AREA,n.BAR=o.BAR,n.LINE=o.LINE,n.POINT=o.POINT,n.TEXT=o.TEXT,n.TICK=o.TICK,n.RECT=o.RECT,n.RULE=o.RULE,n.CIRCLE=o.CIRCLE,n.SQUARE=o.SQUARE;var i={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,rule:1,circle:1,square:1};n.isMark=function(e){return!!i[e]},n.PRIMITIVE_MARKS=a.flagKeys(i),n.isMarkDef=r;var s=a.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(e){var t=r(e)?e.type:e;return t in s},n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],n.FILL_CONFIG=["fill","fillOpacity"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},n.defaultMarkConfig={color:"#4c78a8"},n.defaultBarConfig={binSpacing:1,continuousBandSize:2},n.defaultTickConfig={thickness:1}},{"./util":796}],786:[function(e,t,n){"use strict";function r(e){return e in m}function a(e){return e in u}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("./channel"),s=e("./log"),l=e("./util"),d;(function(e){e.LINEAR="linear",e.BIN_LINEAR="bin-linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.TIME="time",e.UTC="utc",e.SEQUENTIAL="sequential",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.ORDINAL="ordinal",e.BIN_ORDINAL="bin-ordinal",e.POINT="point",e.BAND="band"})(d=n.ScaleType||(n.ScaleType={}));var c={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};n.SCALE_TYPES=l.keys(c),n.getScaleCategory=function(e){return c[e]},n.scaleCompatible=function(e,t){return c[e]===c[t]};var p={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:0,band:1,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};n.scaleTypePrecedence=function(e){return p[e]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var u=l.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var m=l.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var f=l.toSet(n.DISCRETE_DOMAIN_SCALES),y=l.toSet(["bin-linear","bin-ordinal"]);n.TIME_SCALE_TYPES=["time","utc"],n.hasDiscreteDomain=function(e){return e in f},n.isBinScale=function(e){return e in y},n.hasContinuousDomain=r,n.isContinuousToContinuous=a,n.defaultScaleConfig={round:!0,textXRangeStep:90,rangeStep:21,pointPadding:0.5,bandPaddingInner:0.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:0.3,maxOpacity:0.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(e){return e&&!!e.name},n.isSelectionDomain=function(e){return e&&e.selection};var g={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=l.flagKeys(g);var h=g.type,b=g.domain,_=g.range,x=g.rangeStep,v=g.scheme,S=o.__rest(g,["type","domain","range","rangeStep","scheme"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=l.flagKeys(S),n.scaleTypeSupportProperty=function(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return l.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return l.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return a(e)||"band"===e||"point"===e;case"rangeStep":case"padding":case"paddingOuter":return l.contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return a(e)||"sequential"===e;case"nice":return a(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return r(e)&&!l.contains(["log","time","utc","bin-linear","threshold","quantile"],e);}throw new Error("Invalid scale property "+t+".")},n.channelScalePropertyIncompatability=function(e,t){switch(t){case"range":return"x"===e||"y"===e?s.message.CANNOT_USE_RANGE_WITH_POSITION:void 0;case"interpolate":case"scheme":return"color"===e?void 0:s.message.cannotUseScalePropertyWithNonColor(e);case"type":case"domain":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return;}throw new Error("Invalid scale property \""+t+"\".")},n.channelSupportScaleType=function(e,t){return e===i.Channel.X||e===i.Channel.Y||e===i.Channel.SIZE||e===i.Channel.OPACITY?a(t)||l.contains(["band","point"],t):e===i.Channel.COLOR?"band"!==t:!(e!==i.Channel.SHAPE)&&"ordinal"===t}},{"./channel":694,"./log":783,"./util":796,tslib:688}],787:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SELECTION_ID="_vgsid_",n.defaultConfig={single:{on:"click",fields:[n.SELECTION_ID],resolve:"global"},multi:{on:"click",fields:[n.SELECTION_ID],toggle:"event.shiftKey",resolve:"global"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:0.125,stroke:"white"},resolve:"global"}}},{}],788:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSortField=function(e){return!!e&&("count"===e.op||!!e.field)&&!!e.op}},{}],789:[function(e,t,n){"use strict";function r(e){return e.facet!==void 0}function a(e){return!!e.mark}function o(e){return e.layer!==void 0}function i(e){return e.repeat!==void 0}function s(e){return l(e)||d(e)}function l(e){return e.vconcat!==void 0}function d(e){return e.hconcat!==void 0}function c(e,t){if(r(e))return p(e,t);if(o(e))return u(e,t);if(i(e))return m(e,t);if(l(e))return f(e,t);if(d(e))return y(e,t);if(a(e)){var n=E.channelHasField(e.encoding,k.ROW),s=E.channelHasField(e.encoding,k.COLUMN);return n||s?g(e,t):b(e,t)}throw new Error(w.message.INVALID_SPEC)}function p(e,t){var n=e.spec,r=T.__rest(e,["spec"]);return T.__assign({},r,{spec:c(n,t)})}function u(e,t){var n=e.layer,r=T.__rest(e,["layer"]);return T.__assign({},r,{layer:n.map(function(e){return o(e)?u(e,t):b(e,t)})})}function m(e,t){var n=e.spec,r=T.__rest(e,["spec"]);return T.__assign({},r,{spec:c(n,t)})}function f(e,t){var n=e.vconcat,r=T.__rest(e,["vconcat"]);return T.__assign({},r,{vconcat:n.map(function(e){return c(e,t)})})}function y(e,t){var n=e.hconcat,r=T.__rest(e,["hconcat"]);return T.__assign({},r,{hconcat:n.map(function(e){return c(e,t)})})}function g(e,t){var n=e.encoding,r=n.row,a=n.column,o=T.__rest(n,["row","column"]),i=e.mark,s=e.width,l=e.height,d=e.selection,c=e.encoding,p=T.__rest(e,["mark","width","height","selection","encoding"]);return T.__assign({},p,{facet:T.__assign({},r?{row:r}:{},a?{column:a}:{}),spec:b(T.__assign({mark:i},s?{width:s}:{},l?{height:l}:{},{encoding:o},d?{selection:d}:{}),t)})}function h(e){return A.isPrimitiveMark(e.mark)}function b(e,t){if(h(e)){if(E.isRanged(e.encoding))return _(e);var n=t&&t.overlay,r=n&&e.mark===A.AREA&&P.contains(["linepoint","line"],n.area),a=n&&(n.line&&e.mark===A.LINE||"linepoint"===n.area&&e.mark===A.AREA);return a||r?x(e,a,r,t):e}return O.normalize(e,t)}function _(e){var t=E.channelHasField(e.encoding,k.X),n=E.channelHasField(e.encoding,k.Y),r=E.channelHasField(e.encoding,k.X2),a=E.channelHasField(e.encoding,k.Y2);if(r&&!t||a&&!n){var o=P.duplicate(e);return r&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),a&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}return e}function x(e,t,n,r){var a=e.mark,o=e.selection,i=e.encoding,s=T.__rest(e,["mark","selection","encoding"]),l=[{mark:a,encoding:i}],d=N.stack(a,i,r?r.stack:void 0),c=i;if(d){var p=d.fieldChannel,u=d.offset;c=T.__assign({},i,(m={},m[p]=T.__assign({},i[p],u?{stack:u}:{}),m))}return n&&l.push(T.__assign({mark:{type:"line",style:"lineOverlay"}},o?{selection:o}:{},{encoding:c})),t&&l.push(T.__assign({mark:{type:"point",filled:!0,style:"pointOverlay"}},o?{selection:o}:{},{encoding:c})),T.__assign({},s,{layer:l});var m}function v(e,t){return t.forEach(function(t){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),r=P.hash(n);e[r]=e[r]||t}),e}function S(e,t){if(void 0===t&&(t={}),o(e))e.layer.forEach(function(e){a(e)?v(t,C.fieldDefs(e.encoding)):S(e,t)});else if(r(e))v(t,C.fieldDefs(e.facet)),S(e.spec,t);else if(i(e))S(e.spec,t);else if(s(e)){var n=l(e)?e.vconcat:e.hconcat;n.forEach(function(e){return S(e,t)})}else v(t,C.fieldDefs(e.encoding));return t}Object.defineProperty(n,"__esModule",{value:!0});var T=e("tslib"),k=e("./channel"),O=e("./compositemark"),E=e("./encoding"),C=e("./encoding"),w=e("./log"),A=e("./mark"),N=e("./stack"),P=e("./util");n.isFacetSpec=r,n.isUnitSpec=a,n.isLayerSpec=o,n.isRepeatSpec=i,n.isConcatSpec=s,n.isVConcatSpec=l,n.isHConcatSpec=d,n.normalize=c,n.fieldDefs=function(e){return P.vals(S(e))},n.isStacked=function(e,t){return t=t||e.config,!!A.isPrimitiveMark(e.mark)&&null!==N.stack(e.mark,e.encoding,t?t.stack:void 0)}},{"./channel":694,"./compositemark":772,"./encoding":776,"./log":783,"./mark":785,"./stack":790,"./util":796,tslib:688}],790:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./aggregate"),a=e("./channel"),o=e("./encoding"),i=e("./fielddef"),s=e("./log"),l=e("./mark"),d=e("./scale"),c=e("./util");n.STACKABLE_MARKS=[l.BAR,l.AREA,l.RULE,l.POINT,l.CIRCLE,l.SQUARE,l.LINE,l.TEXT,l.TICK],n.STACK_BY_DEFAULT_MARKS=[l.BAR,l.AREA],n.stack=function(e,t,p){var u=l.isMarkDef(e)?e.type:e;if(!c.contains(n.STACKABLE_MARKS,u))return null;if(!o.isAggregate(t))return null;var m=a.NONSPATIAL_CHANNELS.reduce(function(e,n){if(o.channelHasField(t,n)){var r=t[n];(c.isArray(r)?r:[r]).forEach(function(t){var r=i.getFieldDef(t);r.aggregate||e.push({channel:n,fieldDef:r})})}return e},[]);if(0===m.length)return null;var f=i.isFieldDef(t.x),y=i.isFieldDef(t.y),g=i.isFieldDef(t.x)&&!!t.x.aggregate,h=i.isFieldDef(t.y)&&!!t.y.aggregate;if(g!==h){var b=g?a.X:a.Y,_=t[b],x=_.aggregate,v=_.scale,S=null;return S=void 0===_.stack?c.contains(n.STACK_BY_DEFAULT_MARKS,u)?void 0===p?"zero":p:p:_.stack,S&&"none"!==S?v&&v.type&&v.type!==d.ScaleType.LINEAR?(s.warn(s.message.cannotStackNonLinearScale(v.type)),null):o.channelHasField(t,b===a.X?a.X2:a.Y2)?(s.warn(s.message.cannotStackRangedMark(b)),null):c.contains(r.SUM_OPS,x)?{groupbyChannel:g?y?a.Y:null:f?a.X:null,fieldChannel:b,impute:c.contains(["area","line"],u),stackBy:m,offset:S}:(s.warn(s.message.cannotStackNonSummativeAggregate(x)),null):null}return null}},{"./aggregate":691,"./channel":694,"./encoding":776,"./fielddef":778,"./log":783,"./mark":785,"./scale":786,"./util":796}],791:[function(e,t,n){"use strict";function r(e){return!!f[e]}function a(e,t){var n=g[e],r=t?"setUTC"+n.substr(3):n,a="get"+(t?"UTC":"")+n.substr(3);return{setDateMethod:r,getDateMethod:a}}function o(e,t){var n=e.indexOf(t);return-1<n&&(t!==d.SECONDS||0===n||"i"!==e.charAt(n-1))}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),s=e("./datetime"),l=e("./log"),c=e("./util"),d;(function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"})(d=n.TimeUnit||(n.TimeUnit={}));var p={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};n.TIMEUNIT_PARTS=c.flagKeys(p),n.isLocalSingleTimeUnit=function(e){return!!p[e]};var u={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};n.isUtcSingleTimeUnit=function(e){return!!u[e]};var m={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},f=i.__assign({},u,m);n.isUTCTimeUnit=r,n.getLocalTimeUnit=function(e){return e.substr(3)};var y=i.__assign({},p,u,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},m);n.TIMEUNITS=c.flagKeys(y),n.isTimeUnit=function(e){return!!y[e]};var g={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};n.convert=function(e,t){var i=r(e),s=i?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0);return n.TIMEUNIT_PARTS.forEach(function(n){if(o(e,n))switch(n){case d.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case d.QUARTER:{var r=a("month",i),l=r.getDateMethod,c=r.setDateMethod;s[c](3*Math.floor(t[l]()/3));break}default:var p=a(n,i),u=p.getDateMethod,m=p.setDateMethod;s[m](t[u]());}}),s},n.containsTimeUnit=o,n.fieldExpr=function(e,t){function a(e){return e===d.QUARTER?"("+l+"quarter("+i+")-1)":""+l+e+"("+i+")"}var i="datum["+c.stringValue(t)+"]",l=r(e)?"utc":"",p=n.TIMEUNIT_PARTS.reduce(function(t,n){return o(e,n)&&(t[n]=a(n)),t},{});return s.dateTimeExpr(p)},n.smallestUnit=function(e){return e?o(e,d.SECONDS)?"second":o(e,d.MINUTES)?"minute":o(e,d.HOURS)?"hour":o(e,d.DAY)||o(e,d.DATE)?"day":o(e,d.MONTH)?"month":o(e,d.YEAR)?"year":void 0:void 0},n.formatExpression=function(e,t,n,r){if(e){var a=[],i="",s=o(e,d.YEAR);o(e,d.QUARTER)&&(i="'Q' + quarter("+t+")"),o(e,d.MONTH)&&a.push(!1===n?"%B":"%b"),o(e,d.DAY)?a.push(n?"%a":"%A"):o(e,d.DATE)&&a.push("%d"+(s?",":"")),s&&a.push(n?"%y":"%Y");var l=[];o(e,d.HOURS)&&l.push("%H"),o(e,d.MINUTES)&&l.push("%M"),o(e,d.SECONDS)&&l.push("%S"),o(e,d.MILLISECONDS)&&l.push("%L");var c=[];return 0<a.length&&c.push(a.join(" ")),0<l.length&&c.push(l.join(":")),0<c.length&&(i&&(i+=" + ' ' + "),i+=r?"utcFormat("+t+", '"+c.join(" ")+"')":"timeFormat("+t+", '"+c.join(" ")+"')"),i||void 0}},n.normalizeTimeUnit=function(e){return"day"!==e&&0<=e.indexOf("day")?(l.warn(l.message.dayReplacedWithDate(e)),e.replace("day","date")):e}},{"./datetime":775,"./log":783,"./util":796,tslib:688}],792:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib");n.extractTitleConfig=function(e){var t=e.anchor,n=e.offset,a=e.orient,o=e.color,i=r.__rest(e,["anchor","offset","orient","color"]),s=r.__assign({},i,o?{fill:o}:{}),l=r.__assign({},t?{anchor:t}:{},n?{offset:n}:{},a?{orient:a}:{});return{mark:s,nonMark:l}}},{tslib:688}],793:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=["background","padding","autoResize"];n.extractTopLevelProperties=function(e){return r.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}},{}],794:[function(e,t,n){"use strict";function r(e){return e.filter!==void 0}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./filter"),o=e("./logical");n.isFilter=r,n.isLookup=function(e){return e.lookup!==void 0},n.isCalculate=function(e){return e.calculate!==void 0},n.isBin=function(e){return!!e.bin},n.isTimeUnit=function(e){return e.timeUnit!==void 0},n.isSummarize=function(e){return e.summarize!==void 0},n.normalizeTransform=function(e){return e.map(function(e){return r(e)?{filter:o.normalizeLogicalOperand(e.filter,a.normalizeFilter)}:e})}},{"./filter":779,"./logical":784}],795:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;(function(e){e.QUANTITATIVE="quantitative",e.ORDINAL="ordinal",e.TEMPORAL="temporal",e.NOMINAL="nominal"})(r=n.Type||(n.Type={}));var a={quantitative:1,ordinal:1,temporal:1,nominal:1};n.isType=function(e){return!!a[e]},n.QUANTITATIVE=r.QUANTITATIVE,n.ORDINAL=r.ORDINAL,n.TEMPORAL=r.TEMPORAL,n.NOMINAL=r.NOMINAL,n.getFullName=function(e){if(e)switch(e=e.toLowerCase(),e){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal";}}},{}],796:[function(e,t,n){"use strict";function r(e,t){return-1<e.indexOf(t)}function a(e,t){return e.filter(function(e){return!r(t,e)})}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,a=t,o;r<a.length;r++)o=a[r],e=i(e,o);return e}function i(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||u.isArray(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=o(u.isArray(t[n].constructor)?[]:{},t[n]):o(e[n],t[n]));return e}function s(e){return JSON.parse(JSON.stringify(e))}function l(e){return!0===e||!1===e}function d(e,t){return p.isLogicalNot(e)?"!("+d(e.not,t)+")":p.isLogicalAnd(e)?"("+e.and.map(function(e){return d(e,t)}).join(") && (")+")":p.isLogicalOr(e)?"("+e.or.map(function(e){return d(e,t)}).join(") || (")+")":t(e)}Object.defineProperty(n,"__esModule",{value:!0});var c=e("json-stable-stringify"),u=e("vega-util"),p=e("./logical"),m=e("vega-util");n.extend=m.extend,n.isArray=m.isArray,n.isObject=m.isObject,n.isNumber=m.isNumber,n.isString=m.isString,n.truncate=m.truncate,n.toSet=m.toSet,n.stringValue=m.stringValue,n.pick=function(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},n.omit=function(e,t){var n=s(e);return t.forEach(function(e){delete n[e]}),n},n.hash=function(e){return u.isString(e)||u.isNumber(e)||l(e)?e+"":c(e)},n.contains=r,n.without=a,n.union=function(e,t){return e.concat(a(t,e))},n.some=function(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1},n.every=function(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0},n.flatten=function(e){return[].concat.apply([],e)},n.mergeDeep=o,n.unique=function(e,t){for(var n=[],r={},a=0,o=e,i,s;a<o.length;a++)(s=o[a],i=t(s),!(i in r))&&(r[i]=1,n.push(s));return n},n.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},n.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},n.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},n.keys=Object.keys,n.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},n.flagKeys=function(e){return n.keys(e)},n.duplicate=s,n.isBoolean=l,n.varName=function(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t},n.logicalExpr=d},{"./logical":784,"json-stable-stringify":24,"vega-util":805}],797:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./mark"),a=e("./mark"),o=e("./util");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:o.toSet(["row","column","x","y","size","color","detail"]),line:o.toSet(["row","column","x","y","color","detail"]),area:o.toSet(["row","column","x","y","color","detail"]),tick:o.toSet(["row","column","x","y","color","detail"]),circle:o.toSet(["row","column","x","y","color","size","detail"]),square:o.toSet(["row","column","x","y","color","size","detail"]),point:o.toSet(["row","column","x","y","color","size","detail","shape"]),text:o.toSet(["row","column","size","color","text"])},n.getEncodingMappingError=function(e,t,o){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===o&&(o=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var s=r.isMarkDef(e.mark)?e.mark.type:e.mark,l=e.encoding,d=t[s],c=o[s];for(var p in d)if(!(d[p]in l))return"Missing encoding channel \""+d[p]+"\" for mark \""+s+"\"";for(var i in l)if(!c[i])return"Encoding channel \""+i+"\" is not supported by mark type \""+s+"\"";return s!==a.BAR||l.x||l.y?null:"Missing both x and y for bar"}},{"./mark":785,"./util":796}],798:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util");n.isVgSignalRef=function(e){return!!e.signal},n.isVgRangeStep=function(e){return!!e.step},n.isDataRefUnionedDomain=function(e){return!r.isArray(e)&&"fields"in e&&!("data"in e)},n.isFieldRefUnionDomain=function(e){return!r.isArray(e)&&"fields"in e&&"data"in e},n.isDataRefDomain=function(e){return!r.isArray(e)&&"field"in e&&"data"in e},n.isSignalRefDomain=function(e){return!r.isArray(e)&&"signal"in e}},{"./util":796}],799:[function(e,t,n){"use strict";function r(e){return 0==e%1?o.format(",")(e):o.format(",.2f")(e)}function a(e){var t=s.timeFormat(".%L"),n=s.timeFormat(":%S"),r=s.timeFormat("%I:%M"),a=s.timeFormat("%I %p"),o=s.timeFormat("%a %d"),l=s.timeFormat("%b %d"),d=s.timeFormat("%B"),c=s.timeFormat("%Y");return(i.timeSecond(e)<e?t:i.timeMinute(e)<e?n:i.timeHour(e)<e?r:i.timeDay(e)<e?a:i.timeMonth(e)<e?i.timeWeek(e)<e?o:l:i.timeYear(e)<e?d:c)(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("d3-format"),i=e("d3-time"),s=e("d3-time-format");n.customFormat=function(e,t,n){if(void 0!==e&&null!==e&&t)switch(t){case"time":return n?s.timeFormat(n)(e):a(e);case"number":return n?o.format(n)(e):r(e);case"string":default:return e;}},n.autoFormat=function(e){return"number"==typeof e?r(e):e instanceof Date?a(e):e},n.autoNumberFormat=r,n.autoTimeFormat=a},{"d3-format":18,"d3-time":21,"d3-time-format":20}],800:[function(e,t,n){"use strict";function r(e,t){e.addEventListener("mouseover.tooltipInit",function(e,n){l(n)&&(a(),g=window.setTimeout(function(){o(e,n,t)},t.delay||p.DELAY))}),e.addEventListener("mousemove.tooltipUpdate",function(e,n){l(n)&&y&&i(e,n,t)}),e.addEventListener("mouseout.tooltipRemove",function(e,n){l(n)&&(a(),y&&s(e,n,t))})}function a(){window.clearTimeout(g),g=void 0}function o(e,t,n){var r=f.getTooltipPlaceholder(),a=u.getTooltipData(t,n);a&&0!==a.length&&(f.bindData(r,a),f.updatePosition(e,n),f.updateColorTheme(n),c.select("#vis-tooltip").style("visibility","visible"),y=!0,n.onAppear&&n.onAppear(e,t))}function i(e,t,n){l(t)&&(f.updatePosition(e,n),n.onMove&&n.onMove(e,t))}function s(e,t,n){l(t)&&(c.select("#vis-tooltip").style("visibility","hidden"),y=!1,f.clearData(),f.clearColorTheme(),f.clearPosition(),n.onDisappear&&n.onDisappear(e,t))}function l(e){return e&&e.datum&&!e.datum._facetID}function d(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0});var c=e("d3-selection"),p=e("./options"),u=e("./parseOption"),m=e("./supplementField"),f=e("./tooltipDisplay"),y=!1,g;n.vega=function(e,t){return void 0===t&&(t={showAllFields:!0}),r(e,d(t)),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),a()}}},n.vegaLite=function(e,t,n){return void 0===n&&(n={showAllFields:!0}),n=m.supplementOptions(d(n),t),r(e,n),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),a()}}}},{"./options":801,"./parseOption":802,"./supplementField":803,"./tooltipDisplay":804,"d3-selection":19}],801:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],802:[function(e,t,n){"use strict";function r(e,t){var n=[];return t.fields.forEach(function(t){var r=t.title?t.title:t.field,o=a(e,t.field);if(void 0!==o){var i=c.customFormat(o,t.formatType,t.format)||c.autoFormat(o);n.push({title:r,value:i})}}),n}function a(e,t){var n=t.split("."),r=n[0],o;return n.shift(),e[r]&&(o=e[r],n.forEach(function(e){o=o,o[e]&&(o=o[e])})),void 0===o?void console.warn("[Tooltip] Cannot find field "+t+" in data."):o}function o(e,t){var n=[],r={};if(t&&t.fields)for(var a=0,o=t.fields,i;a<o.length;a++)i=o[a],r[i.field]=i;for(var s in e)if(e.hasOwnProperty(s)){var l=e[s],d=void 0;d=r[s]&&r[s].title?r[s].title:s;var p=void 0,u=void 0;r[s]&&(p=r[s].formatType,u=r[s].format);var m=c.customFormat(l,p,u)||c.autoFormat(l);n.push({title:d,value:m})}return n}function i(e,t){t.forEach(function(t){delete e[t]})}function s(e,t){t&&t.forEach(function(t){t.removeOriginalTemporalField&&i(e,[t.removeOriginalTemporalField])})}function l(e,t){if(t)return t.forEach(function(t){if(!0===t.bin){var n=t.field,r=n.concat("_start"),a=n.concat("_mid"),o=n.concat("_end"),s=e[r],l=e[o];if(void 0!==s&&void 0!==l){e[n]=s+"-"+l}var d=[];d.push(r,a,o),i(e,d)}}),e}function d(e,t){if("line"===e||"area"===e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];a instanceof Date&&n.push(r)}i(t,n)}}Object.defineProperty(n,"__esModule",{value:!0});var c=e("./formatFieldValue");n.getTooltipData=function(e,t){if("group"!==e.mark.marktype){var n={},a;for(var c in e.datum)e.datum.hasOwnProperty(c)&&(n[c]=e.datum[c]);return i(n,["_id","_prev","width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),s(n,t.fields),l(n,t.fields),d(e.mark.marktype,n),a=!0===t.showAllFields?o(n,t):r(n,t),a}},n.prepareCustomFieldsData=r,n.getValue=a,n.prepareAllFieldsData=o,n.removeFields=i,n.removeDuplicateTimeFields=s,n.combineBinFields=l,n.dropFieldsForLineArea=d},{"./formatFieldValue":799}],803:[function(e,t,n){"use strict";function r(e,t){if(t&&e&&!(0>=e.length)){if(t.aggregate){for(var n=0,r=e,a;n<r.length;n++)if(a=r[n],a.field===t.field&&a.aggregate===t.aggregate)return a;for(var o=0,i=e,a;o<i.length;o++)if(a=i[o],a.field===t.field&&!a.aggregate)return a;return}for(var s=0,l=e,a;s<l.length;s++)if(a=l[s],a.field===t.field)return a}}function a(e,t){if(t&&t.field&&e)for(var n=0,r=e,a;n<r.length;n++)if(a=r[n],a.field===t.field){if(!a.aggregate)return a;if(a.aggregate===t.aggregate||!t.aggregate)return a}}function o(e,t,n){var r=i.util.extend({},n.config);if(!e&&!t)return void console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.");!e&&t&&(e={}),e&&!t&&(t={});var a={field:t.field?i.fieldDef.field(t):e.field};if(t.type===s.TEMPORAL&&t.timeUnit){var o=t.field;a.removeOriginalTemporalField=o;for(var d=i.spec.fieldDefs(n),c=0,p=d,u;c<p.length;c++)if(u=p[c],u.field===o&&!u.timeUnit){a.removeOriginalTemporalField=void 0;break}}if(r.countTitle||(r.countTitle=i.config.defaultConfig.countTitle),a.title=e.title?e.title:i.fieldDef.title(t,r),a.formatType=e.formatType?e.formatType:l[t.type],e.format)a.format=e.format;else switch(a.formatType){case"time":a.format=t.timeUnit?i.timeUnit.formatExpression(t.timeUnit,"",!1,!1).split("'")[1]:r.timeFormat||i.config.defaultConfig.timeFormat;break;case"number":a.format=r.numberFormat;break;case"string":default:}return t.bin&&(a.field=a.field.replace("_start","_range"),a.bin=!0,a.formatType="string"),a}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-lite"),s=e("vega-lite/build/src/type"),l={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};n.supplementOptions=function(e,t){var n=[];return!1===e.showAllFields?e.fields&&e.fields.forEach(function(e){var r=a(i.spec.fieldDefs(t),e),s=o(e,r,t);n.push(s)}):i.spec.fieldDefs(t).forEach(function(a){var i=r(e.fields,a),s=o(i,a,t);n.push(s)}),e.fields=n,e},n.getFieldOption=r,n.getFieldDef=a,n.supplementFieldOption=o},{"vega-lite":781,"vega-lite/build/src/type":795}],804:[function(e,t,n){"use strict";function r(){a.select("#vis-tooltip").classed("dark-theme light-theme",!1)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("d3-selection");n.getTooltipPlaceholder=function(){var e;return e=a.select("#vis-tooltip").empty()?a.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):a.select("#vis-tooltip"),e},n.bindData=function(e,t){e.selectAll("table").remove();var n=e.append("table").selectAll(".tooltip-row").data(t);n.exit().remove();var r=n.enter().append("tr").attr("class","tooltip-row");r.append("td").attr("class","key").text(function(e){return e.title+":"}),r.append("td").attr("class","value").text(function(e){return e.value})},n.clearData=function(){a.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},n.updatePosition=function(e,t){var n=10,r=10;t&&t.offset&&t.offset.x!==void 0&&null!==t.offset.x&&(n=t.offset.x),t&&t.offset&&t.offset.y!==void 0&&null!==t.offset.y&&(r=t.offset.y),a.select("#vis-tooltip").style("top",function(){var t=this.getBoundingClientRect().height;return e.clientY+t+r<window.innerHeight?""+(e.clientY+r)+"px":""+(e.clientY-t-r)+"px"}).style("left",function(){var t=this.getBoundingClientRect().width;return e.clientX+t+n<window.innerWidth?""+(e.clientX+n)+"px":""+(e.clientX-t-n)+"px"})},n.clearPosition=function(){a.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},n.updateColorTheme=function(e){r(),e&&"dark"===e.colorTheme?a.select("#vis-tooltip").classed("dark-theme",!0):a.select("#vis-tooltip").classed("light-theme",!0)},n.clearColorTheme=r},{"d3-selection":19}],805:[function(e,t,n){var r=Math.ceil;(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.vega=e.vega||{})})(this,function(e){"use strict";function t(e){return null==e?null:e.fields}function n(e){return i(e)?"["+e.map(n)+"]":c(e)||p(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function a(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function o(e){return A(e)?e:w(e)?e:Date.parse(e)}var s=function(e,t,n){return e.fields=t||[],e.fname=n,e},l=function(e){throw Error(e)},d=function(e){function t(){r.push(n+e.substring(s,i)),n="",s=i+1}var r=[],a=null,o=0,d=e.length,n="",s,i,p;for(e+="",s=i=0;i<d;++i)if(p=e[i],"\\"===p)n+=e.substring(s,i),s=++i;else if(p===a)t(),a=null,o=-1;else if(a)continue;else s===o&&"\""===p?(s=i+1,a=p):s===o&&"'"===p?(s=i+1,a=p):"."!==p||o?"["===p?(i>s&&t(),o=s=i+1):"]"===p&&(o||l("Access path missing open bracket: "+e),0<o&&t(),o=0,s=i+1):i>s?t():s=i+1;return o&&l("Access path missing closing bracket: "+e),a&&l("Access path missing closing quote: "+e),i>s&&(i++,t()),r},i=Array.isArray,c=function(e){return e===Object(e)},p=function(e){return"string"==typeof e},u=function(e,t){var r=d(e),a="return _["+r.map(n).join("][")+"];";return s(Function("_",a),[e=1===r.length?r[0]:e],t||e)},m=[],f=u("id"),y=s(function(e){return e},m,"identity"),g=s(function(){return 0},m,"zero"),h=s(function(){return 1},m,"one"),b=s(function(){return!0},m,"true"),_=s(function(){return!1},m,"false"),x=0,v=1,S=2,T=3,k=4,O=function(e){return null==e?[]:i(e)?e:[e]},E=function(e){return"function"==typeof e},C={},w=function(e){return"[object Date]"===Object.prototype.toString.call(e)},A=function(e){return"number"==typeof e},N=function(e,t){for(var n="";0<=--t;)n+=e;return n};e.accessor=s,e.accessorName=function(e){return null==e?null:e.fname},e.accessorFields=t,e.id=f,e.identity=y,e.zero=g,e.one=h,e.truthy=b,e.falsy=_,e.logger=function(e){var t=e||x;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=v&&a("error","ERROR",arguments),this},warn:function(){return t>=S&&a("warn","WARN",arguments),this},info:function(){return t>=T&&a("log","INFO",arguments),this},debug:function(){return t>=k&&a("log","DEBUG",arguments),this}}},e.None=x,e.Error=v,e.Warn=S,e.Info=T,e.Debug=k,e.array=O,e.compare=function(e,r){var a=[],o=(e=O(e)).map(function(e,t){return null==e?null:(a.push(t),E(e)?e:d(e).map(n).join("]["))}),l=a.length-1,c=O(r),p="var u,v;return ",m,i,y,f,u,g,h,b,_;if(0>l)return null;for(i=0;i<=l;++i)m=a[i],y=o[m],E(y)?(g="f"+m,f="(u=this."+g+"(a))",u="(v=this."+g+"(b))",(h=h||{})[g]=y):(f="(u=a["+y+"])",u="(v=b["+y+"])"),g="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===c[m]?(_=-1,b=1):(_=1,b=-1),p+="("+f+"<"+u+"||u==null)&&v!=null?"+b+":(u>v||v==null)&&u!=null?"+_+":"+g+"!==u&&v===v?"+b+":v!==v&&u===u?"+_+(m<l?":":":0");return y=Function("a","b",p+";"),h&&(y=y.bind(h)),e=e.reduce(function(e,n){return E(n)?(t(n)||[]).forEach(function(t){e[t]=1}):null!=n&&(e[n+""]=1),e},{}),s(y,Object.keys(e))},e.constant=function(e){return E(e)?e:function(){return e}},e.debounce=function(t,e){function n(){e(a),r=a=null}var r,a;return function(o){a=o,r&&clearTimeout(r),r=setTimeout(n,t)}},e.error=l,e.extend=function(e){for(var t=1,n=arguments.length,r,a;t<n;++t)for(a in r=arguments[t],r)e[a]=r[a];return e},e.extentIndex=function(e,t){var r=-1,o=e.length,n,a,i,s,l;if(null==t){for(;++r<o;)if(a=e[r],null!=a&&a>=a){n=i=a;break}for(s=l=r;++r<o;)a=e[r],null!=a&&(n>a&&(n=a,s=r),i<a&&(i=a,l=r))}else{for(;++r<o;)if(a=t(e[r],r,e),null!=a&&a>=a){n=i=a;break}for(s=l=r;++r<o;)a=t(e[r],r,e),null!=a&&(n>a&&(n=a,s=r),i<a&&(i=a,l=r))}return[s,l]},e.fastmap=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==C}var n={},r,a;return r={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,a){return t(e)||(++r.size,n[e]===C&&--r.empty),n[e]=a,this},delete:function(e){return t(e)&&(--r.size,++r.empty,n[e]=C),this},clear:function(){r.size=r.empty=0,r.object=n={}},test:function(e){return arguments.length?(a=e,r):a},clean:function(){var e={},t=0,o,i;for(o in n)i=n[o],i===C||a&&a(i)||(e[o]=i,++t);r.size=t,r.empty=0,r.object=n=e}},e&&Object.keys(e).forEach(function(t){r.set(t,e[t])}),r},e.field=u,e.inherits=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},e.isArray=i,e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=w,e.isFunction=E,e.isNumber=A,e.isObject=c,e.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},e.isString=p,e.key=function(e){e=e?O(e):e;var t=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+d(e).map(n).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return s(t,e,"key")},e.merge=function(e,t,n,r){var a=t.length,o=n.length;if(!o)return t;if(!a)return n;for(var s=r||new t.constructor(a+o),l=0,d=0,c=0;l<a&&d<o;++c)s[c]=0<e(t[l],n[d])?n[d++]:t[l++];for(;l<a;++l,++c)s[c]=t[l];for(;d<o;++d,++c)s[c]=n[d];return s},e.pad=function(e,t,a,o){var i=a||" ",l=e+"",s=t-l.length;return 0>=s?l:"left"===o?N(i,s)+l:"center"===o?N(i,~~(s/2))+l+N(i,r(s/2)):l+N(i,s)},e.peek=function(e){return e[e.length-1]},e.repeat=N,e.splitAccessPath=d,e.stringValue=n,e.toBoolean=function(e){return null==e||""===e?null:e&&"false"!==e&&"0"!==e&&!!e},e.toDate=function(e,t){return t=t||o,null==e||""===e?null:t(e)},e.toNumber=function(e){return null==e||""===e?null:+e},e.toString=function(e){return null==e||""===e?null:e+""},e.toSet=function(e){for(var t={},r=0,a=e.length;r<a;++r)t[e[r]]=1;return t},e.truncate=function(t,a,o,i){var d=null==i?"\u2026":i,e=t+"",s=e.length,n=Math.max(0,a-d.length);return s<=a?e:"left"===o?d+e.slice(s-n):"center"===o?e.slice(0,r(n/2))+d+e.slice(s-~~(n/2)):e.slice(0,n)+d},e.visitArray=function(e,r,a){if(e){var o=0,i=e.length,n;if(r)for(;o<i;++o)(n=r(e[o]))&&a(n,o,e);else e.forEach(a)}},Object.defineProperty(e,"__esModule",{value:!0})})},{}],806:[function(e,t,n){var a=Math.tan,r=Math.atan,o=Math.exp,i=Math.acos,s=Math.sin,c=Math.cos,l=Math.PI,u=Math.sqrt,d=Math.LN2,m=Math.log,f=Math.round,S=Math.max,p=Math.abs,g=Math.floor,T=Math.ceil,O=Math.pow,y=String.fromCharCode,N=Math.min;(function(h){(function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.vega=e.vega||{})})(this,function(t){"use strict";function b(e){return null==e?null:e.fname}function w(e){return null==e?null:e.fields}function P(e){return Ih(e)?"["+e.map(P)+"]":Mh(e)||Fh(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function n(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function v(e){return db(e)?e:lb(e)?e:Date.parse(e)}function k(e){var t=e||id,n=[],r={};return n.add=function(e){var a=t(e);return r[a]||(r[a]=1,n.push(e)),n},n.remove=function(e){var a=t(e),o;return r[a]&&(r[a]=0,0<=(o=n.indexOf(e))&&n.splice(o,1)),n},n}function R(e){return!!(e&&I(e))}function I(e){return e[Tb]}function M(e,t){return e[Tb]=t,e}function F(e){var n=e===Object(e)?e:{data:e};return I(n)?n:M(n,kb++)}function j(e){return z(e,F({}))}function z(e,t){for(var n in e)t[n]=e[n];return t}function U(e,t){return M(t,I(e))}function $(e){return e&&e.constructor===W}function W(){var e=[],r=[],a=[],o=[],s=[],l=!1;return{constructor:W,insert:function(r){for(var t=Kh(r),a=0,o=t.length;a<o;++a)e.push(t[a]);return this},remove:function(e){for(var t=Qh(e)?o:r,a=Kh(e),s=0,i=a.length;s<i;++s)t.push(a[s]);return this},modify:function(e,t,n){var r={field:t,value:eb(n)};return Qh(e)?(r.filter=e,s.push(r)):(r.tuple=e,a.push(r)),this},encode:function(e,n){return Qh(e)?s.push({filter:e,field:n}):a.push({tuple:e,field:n}),this},reflow:function(){return l=!0,this},pulse:function(d,c){function p(e,t,n){n?e[t]=n(e):d.encode=t,l||(u[I(e)]=e)}var u,y,i,n,m,f,t;for(y=0,i=e.length;y<i;++y)d.add.push(F(e[y]));for(u={},y=0,i=r.length;y<i;++y)f=r[y],u[I(f)]=f;for(y=0,i=o.length;y<i;++y)m=o[y],c.forEach(function(e){m(e)&&(u[I(e)]=e)});for(t in u)d.rem.push(u[t]);for(u={},y=0,i=a.length;y<i;++y)n=a[y],p(n.tuple,n.field,n.value),d.modifies(n.field);for(y=0,i=s.length;y<i;++y)n=s[y],m=n.filter,c.forEach(function(e){m(e)&&p(e,n.field,n.value)}),d.modifies(n.field);if(l)d.mod=r.length||o.length?c.filter(function(e){return u.hasOwnProperty(I(e))}):c.slice();else for(t in u)d.mod.push(u[t]);return d}}}function q(){Object.defineProperty(this,Ob,{writable:!0,value:{}})}function V(e,t,n,r){this.id=++Cb,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function H(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Y(e,t,n){this.id=++Ab,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function G(e,t,n){return new Y(e,t,n)}function Z(){}function X(e,t){var r=new Z;if(e instanceof Z)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var a=-1,i=e.length,n;if(null==t)for(;++a<i;)r.set(a,e[a]);else for(;++a<i;)r.set(t(n=e[a],a,e),n)}else if(e)for(var o in e)r.set(o,e[o]);return r}function K(){return{}}function Q(e,t,n){e[t]=n}function J(){return X()}function ee(e,t,n){e.set(t,n)}function te(){}function ne(){for(var e=0,r=arguments.length,n={},a;e<r;++e){if(!(a=arguments[e]+"")||a in n)throw new Error("illegal type: "+a);n[a]=[]}return new ae(n)}function ae(e){this._=e}function oe(e,n){return e.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");if(0<=a&&(r=e.slice(a+1),e=e.slice(0,a)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function ie(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function se(e,t,r){for(var a=0,o=e.length;a<o;++a)if(e[a].name===t){e[a]=Ib,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=r&&e.push({name:t,value:r}),e}function le(e){return function(t,n){e(null==t?n:null)}}function de(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function ce(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function pe(e,t){var n=ce(e);return function(r,a){return t(n(r),a,e)}}function ue(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function me(e,t){return nb({},e.options,t)}function fe(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function ye(e,t){return t=me(this,t),new Promise(function(n,r){var a={href:null},o,i,s,l;return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+P(e)):void(i=Ub.test(e),(l=t.baseURL)&&!i&&(!_e(e,"/")&&"/"!==l[l.length-1]&&(e="/"+e),e=l+e),s=(o=_e(e,$b))||"file"===t.mode||"http"!==t.mode&&!i&&be(),o?e=e.slice($b.length):_e(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(a,"localFile",{value:!!s}),a.href=e,n(a))})}function ge(e,t){return t=me(this,t),new Promise(function(n,r){var a=Mb(e),o;for(o in t.headers)a.header(o,t.headers[o]);Bb.forEach(function(e){t[e]&&a[e](t[e])}),a.on("error",function(t){r(t||"Error loading URL: "+e)}).on("load",function(e){var t=e&&e.responseText;e&&0!==e.status?n(t):r(t||"Error")}).get()})}function he(e){return new Promise(function(t,n){var r=be();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function be(){var t="function"==typeof e&&e("fs");return t&&Qh(t.readFile)?t:null}function _e(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function xe(e,t){var r=Vb.slice(),a,o,i,n;for(o=0,i=e.length;o<i;++o){for(a=t?e[o][t]:e[o],n=0;n<r.length;++n)Se(a)&&!r[n](a)&&(r.splice(n,1),--n);if(0===r.length)return"string"}return Hb[Vb.indexOf(r[0])]}function ve(e,t){return t.reduce(function(t,n){return t[n]=xe(e,n),t},{})}function Se(e){return null!=e&&e===e}function Te(e){return!isNaN(+e)&&!(e instanceof Date)}function ke(e){return function(t,n){var r={delimiter:e};return Oe(t,n?nb(n,r):r)}}function Oe(e,t){return t.header&&(e=t.header.map(P).join(t.delimiter)+"\n"+e),Fb(t.delimiter).parse(e+"")}function Ee(e){return"function"==typeof h&&Qh(h.isBuffer)&&h.isBuffer(e)}function Ce(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function we(e){if(!e)return Gb;var t=e.scale[0],n=e.scale[1],r=e.translate[0],a=e.translate[1],o,s;return function(e,l){l||(o=s=0),e[0]=(o+=e[0])*t+r,e[1]=(s+=e[1])*n+a}}function Le(e,r){for(var n=e.length,a=n-r,o;a<--n;)o=e[a],e[a++]=e[n],e[n]=o}function Ae(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:Ne(e,t)};return null==t.id&&delete n.id,n}function Ne(e,t){function r(e,t){t.length&&t.pop();for(var r=d[0>e?~e:e],a=0,o=r.length,n;a<o;++a)t.push(n=r[a].slice()),l(n,a);0>e&&Le(t,o)}function n(e){return e=e.slice(),l(e,0),e}function a(e){for(var t=[],a=0,o=e.length;a<o;++a)r(e[a],t);return 2>t.length&&t.push(t[0].slice()),t}function o(e){for(var t=a(e);4>t.length;)t.push(t[0].slice());return t}function i(e){return e.map(o)}function s(e){var n=e.type;return"GeometryCollection"===n?{type:n,geometries:e.geometries.map(s)}:n in c?{type:n,coordinates:c[n](e)}:null}var l=we(e.transform),d=e.arcs,c={Point:function(e){return n(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(n)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return i(e.arcs)},MultiPolygon:function(e){return e.arcs.map(i)}};return s(t)}function Pe(e,t,r){function a(e){var t=0>e?~e:e;(c[t]||(c[t]=[])).push({i:e,g:u})}function o(e){e.forEach(a)}function s(e){e.forEach(o)}function l(e){"GeometryCollection"===e.type?e.geometries.forEach(l):e.type in p&&(u=e,p[e.type](e.arcs))}var d=[];if(1<arguments.length){var c=[],p={LineString:o,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}},u;l(t),c.forEach(3>arguments.length?function(e){d.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&d.push(e[0].i)})}else for(var m=0,i=e.arcs.length;m<i;++m)d.push(m);return{type:"MultiLineString",arcs:Xb(e,d)}}function Re(e,t,n,r){function a(t){return e(t=new Date(+t)),t}return a.floor=a,a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:g(n)),e},a.range=function(n,r,o){var i=[];if(n=a.ceil(n),o=null==o?1:g(o),!(n<r)||!(0<o))return i;do i.push(new Date(+n));while((t(n,o),e(n),n<r));return i},a.filter=function(n){return Re(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(0>r)for(;0>=++r;)for(;t(e,-1),!n(e););else for(;0<=--r;)for(;t(e,1),!n(e););})},n&&(a.count=function(t,r){return e_.setTime(+t),t_.setTime(+r),e(e_),e(t_),g(n(e_,t_))},a.every=function(e){return e=g(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return 0==r(t)%e}:function(t){return 0==a.count(0,t)%e}):a:null}),a}function De(e){return Re(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a_)/s_})}function Ie(e){return Re(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/s_})}function Me(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fe(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function je(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function ze(e){function t(e,t){return function(r){var a=[],o=-1,i=0,s=e.length,n,l,d;for(r instanceof Date||(r=new Date(+r));++o<s;)37===e.charCodeAt(o)&&(a.push(e.slice(i,o)),null==(l=R_[n=e.charAt(++o)])?l="e"===n?" ":"0":n=e.charAt(++o),(d=t[n])&&(n=d(r,l)),a.push(n),i=o+1);return a.push(e.slice(i,o)),a.join("")}}function n(e,t){return function(n){var a=je(1900),o=r(a,e,n+="",0);if(o!=n.length)return null;if("p"in a&&(a.H=a.H%12+12*a.p),"W"in a||"U"in a){"w"in a||(a.w="W"in a?1:0);var i="Z"in a?Fe(je(a.y)).getUTCDay():t(je(a.y)).getDay();a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7}return"Z"in a?(a.H+=0|a.Z/100,a.M+=a.Z%100,Fe(a)):t(a)}}function r(e,t,r,a){for(var o=0,i=t.length,n=r.length,s,l;o<i;){if(a>=n)return-1;if(s=t.charCodeAt(o++),37===s){if(s=t.charAt(o++),l=k[s in R_?t.charAt(o++):s],!l||0>(a=l(e,r,a)))return-1;}else if(s!=r.charCodeAt(a++))return-1}return a}var a=e.dateTime,o=e.date,s=e.time,i=e.periods,l=e.days,c=e.shortDays,p=e.months,u=e.shortMonths,m=Be(i),f=We(i),y=Be(l),g=We(l),h=Be(c),b=We(c),_=Be(p),x=We(p),v=Be(u),S=We(u),d={a:function(e){return c[e.getDay()]},A:function(e){return l[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return p[e.getMonth()]},c:null,d:at,e:at,H:ot,I:it,j:st,L:lt,m:dt,M:ct,p:function(e){return i[+(12<=e.getHours())]},S:pt,U:ut,w:mt,W:ft,x:null,X:null,y:yt,Y:gt,Z:ht,"%":Pt},T={a:function(e){return c[e.getUTCDay()]},A:function(e){return l[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return p[e.getUTCMonth()]},c:null,d:bt,e:bt,H:_t,I:xt,j:vt,L:St,m:Tt,M:kt,p:function(e){return i[+(12<=e.getUTCHours())]},S:Ot,U:Et,w:Ct,W:wt,x:null,X:null,y:Lt,Y:At,Z:Nt,"%":Pt},k={a:function(e,t,r){var a=h.exec(t.slice(r));return a?(e.w=b[a[0].toLowerCase()],r+a[0].length):-1},A:function(e,t,r){var a=y.exec(t.slice(r));return a?(e.w=g[a[0].toLowerCase()],r+a[0].length):-1},b:function(e,t,r){var a=v.exec(t.slice(r));return a?(e.m=S[a[0].toLowerCase()],r+a[0].length):-1},B:function(e,t,r){var a=_.exec(t.slice(r));return a?(e.m=x[a[0].toLowerCase()],r+a[0].length):-1},c:function(e,t,n){return r(e,a,t,n)},d:Ke,e:Ke,H:Je,I:Je,j:Qe,L:nt,m:Xe,M:et,p:function(e,t,r){var a=m.exec(t.slice(r));return a?(e.p=f[a[0].toLowerCase()],r+a[0].length):-1},S:tt,U:Ve,w:qe,W:He,x:function(e,t,n){return r(e,o,t,n)},X:function(e,t,n){return r(e,s,t,n)},y:Ge,Y:Ye,Z:Ze,"%":rt};return d.x=t(o,d),d.X=t(s,d),d.c=t(a,d),T.x=t(o,T),T.X=t(s,T),T.c=t(a,T),{format:function(e){var n=t(e+="",d);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",Me);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",T);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,Fe);return t.toString=function(){return e},t}}}function Ue(e,t,n){var r=0>e?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?Array(n-o+1).join(t)+a:a)}function $e(e){return e.replace(M_,"\\$&")}function Be(e){return new RegExp("^(?:"+e.map($e).join("|")+")","i")}function We(e){for(var t={},r=-1,a=e.length;++r<a;)t[e[r].toLowerCase()]=r;return t}function qe(e,t,r){var a=D_.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Ve(e,t,r){var a=D_.exec(t.slice(r));return a?(e.U=+a[0],r+a[0].length):-1}function He(e,t,r){var a=D_.exec(t.slice(r));return a?(e.W=+a[0],r+a[0].length):-1}function Ye(e,t,r){var a=D_.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function Ge(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(68<+a[0]?1900:2e3),r+a[0].length):-1}function Ze(e,t,r){var a=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function Xe(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function Ke(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function Qe(e,t,r){var a=D_.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function Je(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function et(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function tt(e,t,r){var a=D_.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function nt(e,t,r){var a=D_.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function rt(e,t,r){var a=I_.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function at(e,t){return Ue(e.getDate(),t,2)}function ot(e,t){return Ue(e.getHours(),t,2)}function it(e,t){return Ue(e.getHours()%12||12,t,2)}function st(e,t){return Ue(1+p_.count(x_(e),e),t,3)}function lt(e,t){return Ue(e.getMilliseconds(),t,3)}function dt(e,t){return Ue(e.getMonth()+1,t,2)}function ct(e,t){return Ue(e.getMinutes(),t,2)}function pt(e,t){return Ue(e.getSeconds(),t,2)}function ut(e,t){return Ue(u_.count(x_(e),e),t,2)}function mt(e){return e.getDay()}function ft(e,t){return Ue(m_.count(x_(e),e),t,2)}function yt(e,t){return Ue(e.getFullYear()%100,t,2)}function gt(e,t){return Ue(e.getFullYear()%1e4,t,4)}function ht(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Ue(0|t/60,"0",2)+Ue(t%60,"0",2)}function bt(e,t){return Ue(e.getUTCDate(),t,2)}function _t(e,t){return Ue(e.getUTCHours(),t,2)}function xt(e,t){return Ue(e.getUTCHours()%12||12,t,2)}function vt(e,t){return Ue(1+T_.count(P_(e),e),t,3)}function St(e,t){return Ue(e.getUTCMilliseconds(),t,3)}function Tt(e,t){return Ue(e.getUTCMonth()+1,t,2)}function kt(e,t){return Ue(e.getUTCMinutes(),t,2)}function Ot(e,t){return Ue(e.getUTCSeconds(),t,2)}function Et(e,t){return Ue(k_.count(P_(e),e),t,2)}function Ct(e){return e.getUTCDay()}function wt(e,t){return Ue(O_.count(P_(e),e),t,2)}function Lt(e,t){return Ue(e.getUTCFullYear()%100,t,2)}function At(e,t){return Ue(e.getUTCFullYear()%1e4,t,4)}function Nt(){return"+0000"}function Pt(){return"%"}function Rt(e){return F_=ze(e),j_=F_.format,z_=F_.parse,U_=F_.utcFormat,$_=F_.utcParse,F_}function Dt(e,t,r){r=r||z_;var a=e.columns||Object.keys(e[0]),o,s,l,d,i,c,n;for("auto"===t&&(t=ve(e,a)),a=Object.keys(t),o=a.map(function(e){var n=t[e],a,o;if(n&&(0===n.indexOf("date:")||0===n.indexOf("utc:")))return a=n.split(/:(.+)?/,2),o=a[1],("'"===o[0]&&"'"===o[o.length-1]||"\""===o[0]&&"\""===o[o.length-1])&&(o=o.slice(1,-1)),"utc"===a[0]?$_(o):r(o);if(!qb[n])throw Error("Illegal format pattern: "+e+":"+n);return qb[n]}),(d=0,c=e.length,n=a.length);d<c;++d)for(s=e[d],i=0;i<n;++i)l=a[i],s[l]=o[i](s[l])}function It(e){var t=new Promise(function(e,t){n=e,o=t}),n,o;return t.requests=0,t.done=function(){0==--t.requests&&e.runAfter(function(){e._pending=null;try{e.run(),n(e)}catch(e){o(e)}})},e._pending=t}function Mt(n,e,r,t,a,o){var i=nb({},o,H_),s,l;Qh(r)||(r=eb(r)),t===void 0?s=function(t){n.touch(r(t))}:Qh(t)?(l=new V(null,t,a,!1),s=function(a){var e=r(a),t;l.evaluate(a),$(t=l.value)?n.pulse(e,t,o):n.update(e,t,i)}):s=function(a){n.update(r(a),t,i)},e.apply(s)}function Ft(e,t,n,r,a,o){var i,s;r===void 0?s=n:(i=Qh(r)?r:eb(r),r=n?function(e,t){var r=i(e,t);return n.skip()?r:n.skip(!0).value=r}:i,s=new V(null,r,a,!1),s.modified(o&&o.force),s.rank=0,n&&(s.skip(!0),s.value=n.value,s.targets().add(n))),t.targets().add(s)}function jt(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function zt(e,n){return e?function(r,t){return e(r,t)&&n(r,t)}:n}function Ut(e,t){var n=[];return Sb(e,t,function(e){n.push(e)}),n}function $t(e,t){var n={};return e.visit(t,function(e){n[I(e)]=1}),function(e){return n[I(e)]?null:e}}function Bt(e,t,r,a){var o=this,s=0,l,d,c,i,n;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=a||null,this.pulses=r,(c=0,i=r.length);c<i;++c)if(l=r[c],l.stamp===t){if(l.fields)for(n in d=o.fields||(o.fields={}),l.fields)d[n]=1;l.changed(o.ADD)&&(s|=o.ADD),l.changed(o.REM)&&(s|=o.REM),l.changed(o.MOD)&&(s|=o.MOD)}this.changes=s}function Wt(e){this.cmp=e,this.nodes=[]}function qt(e,t,n,r){var a,o,i;for(a=e[n];n>t;){if(i=n-1>>1,o=e[i],0>r(a,o)){e[n]=o,n=i;continue}break}return e[n]=a}function Vt(e,t,n){for(var r=t,a=e.length,o=e[t],i=2*t+1,s;i<a;)s=i+1,s<a&&0<=n(e[i],e[s])&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=o,qt(e,r,t,n)}function Ht(){this._log=Xh(),this.logLevel(Hh),this._clock=0,this._rank=0,this._loader=Wb(),this._touched=k(Uh),this._pulses={},this._pulse=null,this._heap=new Wt(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function Yt(e){return function(){return this._log[e].apply(this,arguments)}}function Gt(e,t){V.call(this,e,null,t)}function Zt(e){var n=Xt(e);return n&&n.Definition||null}function Xt(e){return e=e&&e.toLowerCase(),cx.hasOwnProperty(e)?cx[e]:null}function Kt(e){return function(t){for(var r=e.length,n=1,a=e[0](t)+"";n<r;++n)a+="|"+e[n](t);return a}}function Qt(e){return e&&e.length?1===e.length?e[0]:Kt(e):function(){return""}}function Jt(e,t,n){return n||e+(t?"_"+t:"")}function en(e,t){return px[e](t)}function tn(e){return function(t){var n=nb({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function nn(e,t){return e.idx-t.idx}function rn(e,t){function n(e,r){function a(t){e[t]||n(e,e[t]=px[t]())}return r.req&&r.req.forEach(a),t&&r.str&&r.str.forEach(a),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[],o;for(o in r)a.push(r[o]);return a.sort(nn)}function an(e,t){var n=rn(e,!0),r="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",i="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return n.forEach(function(e){r+=e.init,o+=e.add,i+=e.rem}),e.slice().sort(nn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(r),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",i),a.prototype.set=Function("t",s),a.prototype.get=t||id,a.fields=e.map(function(e){return e.out}),a}function on(e){return null===e?NaN:+e}function sn(e){return function(t,n){return yx(e(t),n)}}function ln(e,t,n){var r=(t-e)/S(0,n),a=g(m(r)/Nh),o=r/O(10,a);return 0<=a?(o>=kx?10:o>=Ox?5:o>=Ex?2:1)*O(10,a):-O(10,-a)/(o>=kx?10:o>=Ox?5:o>=Ex?2:1)}function dn(e,t,n){var r=p(t-e)/S(0,n),a=O(10,g(m(r)/Nh)),o=r/a;return o>=kx?a*=10:o>=Ox?a*=5:o>=Ex&&(a*=2),t<e?-a:a}function cn(e){var t=e.length,n=Mx(e),r=(n[2]-n[0])/1.34;return 1.06*N(u(vx(e)),r)*O(t,-0.2)}function pn(e){this._key=e?jh(e):I,this.reset()}function un(e){Gt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function mn(e){Gt.call(this,null,e)}function fn(e){Gt.call(this,[],e)}function yn(e){V.call(this,null,gn,e)}function gn(e){return this.value&&!e.modified()?this.value:Jh(e.fields,e.orders)}function hn(e){Gt.call(this,null,e)}function bn(e,t,n){return"upper"===t?e=e.toUpperCase():"lower"===t?e=e.toLowerCase():void 0,e.match(n)}function _n(e){Gt.call(this,null,e)}function xn(e,r,a,o){for(var s=[],l={},t=e.length,n=0,i,d;n<t;++n)for(l[r]=d=e[n],i=0;i<t;++i)l[a]=e[i],o(l)&&(s.push(F(l)),l={},l[r]=d);return s}function vn(e,t){var n=e[Zx];Yx.hasOwnProperty(n)||Rh("Unknown distribution function: "+n);var r=Yx[n]();for(var a in e)a==Xx?r.data((e.from||t()).map(e[a])):a==Gx?r[a](e[a].map(function(e){return vn(e,t)})):typeof r[a]==Zx&&r[a](e[a]);return r}function Sn(e){Gt.call(this,null,e)}function Tn(e){return function(){return e.materialize(e.SOURCE).source}}function kn(e){Gt.call(this,[+Infinity,-Infinity],e)}function On(e,t){V.call(this,e),this.parent=t}function En(e){Gt.call(this,{},e),this._keys=ob();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var r=0,a=t.active;r<a;++r)e(t[r],r,t)}}function Cn(e){V.call(this,null,wn,e)}function wn(e){return this.value&&!e.modified()?this.value:Ih(e.name)?Kh(e.name).map(function(e){return jh(e)}):jh(e.name,e.as)}function Ln(e){Gt.call(this,ob(),e)}function An(e){Gt.call(this,{},e)}function Nn(e){return e.fields.join("|")}function Pn(e){Gt.call(this,null,e)}function Rn(e){Gt.call(this,[],e)}function Dn(e){Gt.call(this,[],e)}function In(e){var t=e.method||iv.value,n;return null==iv[t]?void Rh("Unrecognized imputation method: "+t):t===iv.value?(n=void 0===e.value?0:e.value,function(){return n}):iv[t]}function Mn(e){var n=e.field;return function(e){return e?n(e):NaN}}function Fn(e,r,a,o){var s=function(e){return e(n)},l=[],d=o?o.slice():[],c={},p={},u,m,f,y,i,g,h,n;for(d.forEach(function(e,t){c[e]=t+1}),y=0,h=e.length;y<h;++y)n=e[y],g=a(n),i=c[g]||(c[g]=d.push(g)),m=(u=r?r.map(s):sv)+"",(f=p[m])||(f=p[m]=[],l.push(f),f.values=u),f[i-1]=n;return l.domain=d,l}function jn(e){un.call(this,e)}function zn(e){V.call(this,null,Un,e)}function Un(e){return this.value&&!e.modified()?this.value:pb(e.fields)}function $n(e){Gt.call(this,{},e)}function Bn(e){V.call(this,null,Wn,e)}function Wn(t){if(this.value&&!t.modified())return this.value;var r=+Infinity,a=-Infinity,o=t.extents,s,i,n;for(s=0,i=o.length;s<i;++s)n=o[s],n[0]<r&&(r=n[0]),n[1]>a&&(a=n[1]);return[r,a]}function qn(e){V.call(this,null,Vn,e)}function Vn(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function Hn(e){Gt.call(this,null,e)}function Gn(e){En.call(this,e)}function Qn(e){Gt.call(this,null,e)}function Jn(e){Gt.call(this,null,e)}function er(e){Gt.call(this,[],e),this.count=0}function tr(e){Gt.call(this,null,e)}function nr(e){Gt.call(this,null,e),this.modified(!0)}function rr(e){Gt.call(this,ob(),e)}function ar(e){Gt.call(this,null,e)}function or(e,t,n,r){var a=_v[e](t,n);return{init:a.init||$h,update:function(e,n){n[r]=a.next(e)}}}function ir(e){function t(e){Kh(w(e)).forEach(function(e){i[e]=1})}var n=this,r=Kh(e.ops),a=Kh(e.fields),o=Kh(e.params),s=Kh(e.as),l=n.outputs=[],d=n.windows=[],i={},c={},p=!0,u=[],f=[];t(e.sort),r.forEach(function(e,n){var r=a[n],i=b(r),y=Jt(e,i,s[n]);if(t(r),l.push(y),_v.hasOwnProperty(e))d.push(or(e,a[n],o[n],y));else{if(null==r&&"count"!==e&&Rh("Null aggregate field specified."),"count"===e)return void u.push(y);p=!1;var g=c[i];g||(g=c[i]=[],g.field=r,f.push(g)),g.push(en(e,y))}}),(u.length||f.length)&&(n.cell=sr(f,u,p)),n.inputs=Object.keys(i)}function sr(e,r,o){e=e.map(function(e){return an(e,e.field)});var s={num:0,agg:null,store:!1,count:r};if(!o)for(var l=e.length,d=s.agg=Array(l),t=0;t<l;++t)d[t]=new e[t](s);if(s.store)var a=s.data=new pn;return s.add=function(e){if(s.num+=1,!o){a&&a.add(e);for(var t=0;t<l;++t)d[t].add(d[t].get(e),e)}},s.rem=function(e){if(s.num-=1,!o){a&&a.rem(e);for(var t=0;t<l;++t)d[t].rem(d[t].get(e),e)}},s.set=function(e){var t,i;for(a&&a.values(),t=0,i=r.length;t<i;++t)e[r[t]]=s.num;if(!o)for(t=0,i=d.length;t<i;++t)d[t].set(e)},s.init=function(){s.num=0,a&&a.reset();for(var e=0;e<l;++e)d[e].init()},s}function lr(e){Gt.call(this,{},e),this._mlen=0,this._mods=[]}function dr(e,t,r){var a=r.sort,o=a&&!r.ignorePeers,s=r.frame||[null,0],l=e.data(a),d=l.length,n=0,i=o?gx(a):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:a||eb(-1)};for(t.init();n<d;++n)pr(c,s,n,d),o&&ur(c,i),t.update(c,l[n])}function pr(e,t,r,a){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:S(0,r-p(t[0])),e.i1=null==t[1]?a:N(a,r+p(t[1])+1),e.index=r}function ur(e,t){var r=e.i0,a=e.i1-1,o=e.compare,i=e.data,s=i.length-1;0<r&&!o(i[r],i[r-1])&&(e.i0=t.left(i,i[r])),a<s&&!o(i[a],i[a+1])&&(e.i1=t.right(i,i[a]))}function mr(e){this.clear(),e&&this.union(e)}function fr(e){this.mark=e,this.bounds=this.bounds||new mr}function yr(e){fr.call(this,e),this.items=this.items||[]}function gr(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hr(e,t){t=t.toLowerCase();for(var r=e.childNodes,a=0,o=r.length;a<o;++a)if(r[a].tagName.toLowerCase()===t)return r[a]}function br(e,t,n,r){var o=e.childNodes[t],a;return o&&o.tagName.toLowerCase()===n.toLowerCase()||(a=o||null,o=gr(e.ownerDocument,n,r),e.insertBefore(o,a)),o}function _r(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function xr(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function vr(e){this._pending=0,this._loader=e||Wb()}function Sr(e){e._pending+=1}function Tr(e){e._pending-=1}function kr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Or(){return new kr}function Er(e){return 1<e?0:-1>e?$v:i(e)}function Cr(e){return 1<=e?Bv:-1>=e?-Bv:Ch(e)}function wr(e){return e.innerRadius}function Lr(e){return e.outerRadius}function Ar(e){return e.startAngle}function Nr(e){return e.endAngle}function Pr(e){return e&&e.padAngle}function Rr(e,n,r,a,o,i,s,l){var d=r-e,c=a-n,p=s-o,u=l-i,m=(p*(n-i)-u*(e-o))/(u*d-p*c);return[e+m*d,n+m*c]}function Dr(e,t,n,a,o,i,s){var l=e-n,c=t-a,p=(s?i:-i)/zv(l*l+c*c),u=p*c,m=-p*l,f=e+u,y=t+m,g=n+u,h=a+m,b=(f+g)/2,_=(y+h)/2,x=g-f,v=h-y,S=x*x+v*v,T=o-i,r=f*h-g*y,k=(0>v?-1:1)*zv(Mv(0,T*T*S-r*r)),d=(r*v-x*k)/S,O=(-r*x-v*k)/S,E=(r*v+x*k)/S,C=(-r*x+v*k)/S,w=d-b,A=O-_,N=E-b,P=C-_;return w*w+A*A>N*N+P*P&&(d=E,O=C),{cx:d,cy:O,x01:-u,y01:-m,x11:d*(o/T-1),y11:O*(o/T-1)}}function Ir(e){this._context=e}function Mr(e){return e[0]}function Fr(e){return e[1]}function jr(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zr(e){this._context=e}function Ur(e){this._context=e}function $r(e){this._context=e}function Br(e,t){this._basis=new zr(e),this._beta=t}function Wr(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function qr(e,t){this._context=e,this._k=(1-t)/6}function Vr(e,t){this._context=e,this._k=(1-t)/6}function Hr(e,t){this._context=e,this._k=(1-t)/6}function Yr(e,t,r){var o=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>Uv){var d=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);o=(o*d-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,i=(i*d-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>Uv){var n=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*n+e._x1*e._l23_2a-t*e._l12_2a)/c,l=(l*n+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(o,i,s,l,e._x2,e._y2)}function Gr(e,t){this._context=e,this._alpha=t}function Zr(e,t){this._context=e,this._alpha=t}function Xr(e,t){this._context=e,this._alpha=t}function Kr(e){this._context=e}function Qr(e){return 0>e?-1:1}function Jr(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||0>a&&-0),i=(n-e._y1)/(a||0>r&&-0);return(Qr(o)+Qr(i))*N(p(o),p(i),0.5*p((o*a+i*r)/(r+a)))||0}function ea(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function ta(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,a+s*t,o-s,i-s*n,o,i)}function na(e){this._context=e}function ra(e){this._context=new aa(e)}function aa(e){this._context=e}function oa(e){this._context=e}function ia(e){var t=e.length-1,n=Array(t),a=Array(t),o=Array(t),r,i;for(n[0]=0,a[0]=2,o[0]=e[0]+2*e[1],r=1;r<t-1;++r)n[r]=1,a[r]=4,o[r]=4*e[r]+2*e[r+1];for(n[t-1]=2,a[t-1]=7,o[t-1]=8*e[t-1]+e[t],r=1;r<t;++r)i=n[r]/a[r-1],a[r]-=i,o[r]-=i*o[r-1];for(n[t-1]=o[t-1]/a[t-1],r=t-2;0<=r;--r)n[r]=(o[r]-n[r+1])/a[r];for(a[t-1]=(e[t]+n[t-1])/2,r=0;r<t-1;++r)a[r]=2*e[r+1]-n[r+1];return[n,a]}function sa(e,n){this._context=e,this._t=n}function la(e,t,n){var r=nS.hasOwnProperty(e)&&nS[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}function da(e,t,n,r,a,o,d,m,f){var y=lS.call(arguments);if(iS[y])return iS[y];var g=d*(l/180),h=s(g),b=c(g);n=p(n),r=p(r);var _=0.5*(b*(m-e))+0.5*(h*(f-t)),x=0.5*(b*(f-t))-0.5*(h*(m-e)),v=_*_/(n*n)+x*x/(r*r);1<v&&(v=u(v),n*=v,r*=v);var S=b/n,k=h/n,O=-h/r,E=b/r,C=S*m+k*f,w=O*m+E*f,A=S*e+k*t,N=O*e+E*t,P=1/((A-C)*(A-C)+(N-w)*(N-w))-0.25;0>P&&(P=0);var R=u(P);o==a&&(R=-R);var D=0.5*(C+A)-R*(N-w),I=0.5*(w+N)+R*(A-C),M=wh(w-I,C-D),F=wh(N-I,A-D),j=F-M;0>j&&1===o?j+=2*l:0<j&&0===o&&(j-=2*l);for(var z=T(p(j/(0.5*l+1e-3))),U=[],$=0;$<z;++$){var i=M+$*j/z,B=M+($+1)*j/z;U[$]=[D,I,i,B,n,r,h,b]}return iS[y]=U}function ca(e){var n=lS.call(e);if(sS[n])return sS[n];var r=e[0],a=e[1],o=e[2],i=e[3],l=e[4],d=e[5],p=e[6],u=e[7],m=u*l,f=-p*d,y=p*l,g=u*d,h=c(o),b=s(o),_=c(i),x=s(i),v=0.5*(i-o),S=s(0.5*v),T=8/3*S*S/s(v),t=r+h-T*b,k=a+b+T*h,O=r+_,E=a+x,C=O+T*x,w=E-T*_;return sS[n]=[m*t+f*k,y*t+g*k,m*C+f*w,y*C+g*w,m*O+f*E,y*O+g*E]}function pa(e,t){var r=dS[0]=e[0];if("a"===r||"A"===r)dS[1]=t*e[1],dS[2]=t*e[2],dS[6]=t*e[6],dS[7]=t*e[7];else for(var a=1,o=e.length;a<o;++a)dS[a]=t*e[a];return dS}function ua(e,t,n,r){for(var a=da(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),o=0,i;o<a.length;++o)i=ca(a[o]),e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}function ma(e){return uS.hasOwnProperty(e)?uS[e]:fa(e)}function fa(e){if(!mS.hasOwnProperty(e)){var t=oS(e);mS[e]={draw:function(e,n){cS(e,t,0,0,u(n)/2)}}}return mS[e]}function ya(e){return e.x}function ga(e){return e.y}function ha(e){return e.width}function ba(e){return e.height}function _a(e){return function(){return e}}function xa(e){return e.x||0}function x(e){return e.y||0}function va(e){return e.cornerRadius||0}function cr(e){return!1!==e.defined}function Sa(e,t,n,r){return vS.context(e)(t,n,r)}function Ta(e){return CS=e,Ta}function ka(){}function Oa(e,t){CS.add(e,t)}function Ea(e,t){return e.zindex-t.zindex||e.index-t.index}function Ca(e){if(!e.zdirty)return e.zitems;var t=e.items,r=[],a,o,i;for(o=0,i=t.length;o<i;++o)a=t[o],a.index=o,a.zindex&&r.push(a);return e.zdirty=!1,e.zitems=r.sort(Ea)}function wa(e,t){var r=e.items,a,o;if(r&&r.length){var n=Ca(e);if(n&&n.length){for(a=0,o=r.length;a<o;++a)r[a].zindex||t(r[a]);r=n}for(a=0,o=r.length;a<o;++a)t(r[a])}}function La(e,t){var n=e.items,r,a;if(!n||!n.length)return null;var o=Ca(e);for(o&&o.length&&(n=o),a=n.length;0<=--a;)if(r=t(n[a]))return r;if(n===o)for(n=e.items,a=n.length;0<=--a;)if(!n[a].zindex&&(r=t(n[a])))return r;return null}function Aa(e){return function(t,n,r){wa(n,function(n){(!r||r.intersects(n.bounds))&&Pa(e,t,n,n)})}}function Na(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Pa(e,t,n.items[0],n.items)}}function Pa(e,t,n,r){var a=null==n.opacity?1:n.opacity;0===a||e(t,r)||(n.fill&&AS(t,n,a)&&t.fill(),n.stroke&&PS(t,n,a)&&t.stroke())}function Ra(e){return e||(e=RS),function(t,n,r,a,o,i){return 1<t.pixelRatio&&(r*=t.pixelRatio,a*=t.pixelRatio),La(n,function(n){var s=n.bounds;return(!s||s.contains(o,i))&&s?e(t,n,r,a,o,i)?n:void 0:void 0})}}function Da(e,t){return function(n,r,a,o){var i=Array.isArray(r)?r[0]:r,s=null==t?i.fill:t,l=i.stroke&&n.isPointInStroke,d,c;return l&&(d=i.strokeWidth,c=i.strokeCap,n.lineWidth=null==d?1:d,n.lineCap=null==c?"butt":c),!e(n,r)&&(s&&n.isPointInPath(a,o)||l&&n.isPointInStroke(a,o))}}function Ia(e){return Ra(Da(e))}function Ma(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function Fa(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function ja(e,t){return"center"===e?t/2:"right"===e?t:0}function za(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function Ua(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=oS(n)).path=n),cS(e,r,t.x,t.y)}function $a(e,t){e.beginPath(),Sa(e,t)}function Ba(e,t,n){var r,a,o,i;return t.stroke&&PS(e,t,n)&&(r=t.x||0,a=t.y||0,o=null==t.x2?r:t.x2,i=null==t.y2?a:t.y2,e.beginPath(),e.moveTo(r,a),e.lineTo(o,i),!0)}function Wa(e){return QS=Ya(e),qa(Za(e))}function qa(e){return~~(0.8*e.length*QS)}function Va(e){return KS.font=Ka(e),Ha(Za(e))}function Ha(e){return KS.measureText(e).width}function Ya(e){return null==e.fontSize?11:e.fontSize}function Ga(e){KS=e&&(KS=Cv(1,1))?KS.getContext("2d"):null,XS.width=KS?Va:Wa}function Za(e){var t=e.text;return null==t?"":0<e.limit?Xa(e):t+""}function Xa(e){var t=+e.limit,n=e.text+"",r;if(KS?(KS.font=Ka(e),r=Ha):(QS=Ya(e),r=qa),r(n)<t)return n;var a=e.ellipsis||"\u2026",o="rtl"===e.dir,i=0,s=n.length,l;if(t-=r(a),o){for(;i<s;)l=i+s>>>1,r(n.slice(l))>t?i=l+1:s=l;return a+n.slice(i)}for(;i<s;)l=1+(i+s>>>1),r(n.slice(0,l))<t?i=l:s=l-1;return n.slice(0,i)+a}function Ka(e,t){var n=e.font;return t&&n&&(n=(n+"").replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ya(e)+"px "+(n||"sans-serif")}function Qa(e){var t=e.baseline,n=Ya(e);return f("top"===t?0.93*n:"middle"===t?0.3*n:"bottom"===t?-0.21*n:0)}function Ja(e,n,o){var i=XS.height(n),d=n.align,a=n.radius||0,r=n.x||0,p=n.y||0,u=n.dx||0,m=(n.dy||0)+Qa(n)-f(0.8*i),y,g;return a&&(g=(n.theta||0)-l/2,r+=a*c(g),p+=a*s(g)),y=XS.width(n),"center"===d?u-=y/2:"right"===d&&(u-=y),e.set(u+=r,m+=p,u+y,m+i),n.angle&&!o&&e.rotate(n.angle*l/180,r,p),e.expand(o||!y?0:1)}function eo(e,t){return JSON.stringify(e,sT,t)}function to(e){var t="string"==typeof e?JSON.parse(e):e;return no(t)}function no(e){var t=e.marktype,r=e.items,a,o,i;if(r)for(o=0,i=r.length;o<i;++o)a=t?"mark":"group",r[o][a]=e,r[o].zindex&&(r[o][a].zdirty=!0),"group"===(t||a)&&no(r[o]);return t&&iT(e),e}function ro(e){arguments.length?this.root=to(e):(this.root=ao({marktype:"group",name:"root",role:"frame"}),this.root.items=[new yr(this.root)])}function ao(e,t){return{bounds:new mr,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function oo(e){this._active=null,this._handlers={},this._loader=e||Wb()}function io(e){this._el=null,this._bgcolor=null,this._loader=new vr(e)}function so(e){oo.call(this,e),this._down=null,this._touch=null,this._first=!0}function lo(e,t,n){return function(r){var o=this._active,i=this.pickEvent(r);i===o?this.fire(e,r):((!o||!o.exit)&&this.fire(n,r),this._active=i,this.fire(t,r),this.fire(e,r))}}function co(e){return function(t){this.fire(e,t),this._active=null}}function po(e){io.call(this,e),this._redraw=!1,this._dirty=new mr}function uo(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function mo(e,t){if(null==t)return e;for(var n=bT.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function fo(e){oo.call(this,e);var t=this;t._hrefHandler=yo(t,function(e,n){n&&n.href&&t.handleHref(e,n,n.href)}),t._tooltipHandler=yo(t,function(e,n){n&&n.tooltip&&t.handleTooltip(e,n,"mouseover"===e.type?n.tooltip:null)})}function yo(e,t){return function(n){var r=n.target,a=r.__data__;n.vegaType=n.type,a=Array.isArray(a)?a[0]:a,t.call(e._obj,n,a)}}function go(e,t,n){var r="<"+e,a,o;if(t)for(a in t)o=t[a],null!=o&&(r+=" "+a+"=\""+o+"\"");return n&&(r+=" "+n),r+">"}function ho(e){return"</"+e+">"}function bo(e){io.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function _o(e,t,r){var a,o,n;for(e=br(e,r,"linearGradient",TT),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),(a=0,o=t.stops.length);a<o;++a)n=br(e,a,"stop",TT),n.setAttribute("offset",t.stops[a].offset),n.setAttribute("stop-color",t.stops[a].color);_r(e,a)}function xo(e,t,n){var r;e=br(e,n,"clipPath",TT),e.setAttribute("id",t.id),r=br(e,0,"rect",TT),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function vo(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function So(e,t,n){t=t.lastChild;var r=0,a;wa(n,function(n){a=e.draw(t,n,a),++r}),_r(t,1+r)}function To(e,t,n,r){var a=e._svg,o;if(!a&&(o=t.ownerDocument,a=gr(o,r,TT),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){var i=gr(o,"path",TT);i.setAttribute("class","background"),a.appendChild(i),i.__data__=e;var s=gr(o,"g",TT);a.appendChild(s),s.__data__=e}return(o||a.previousSibling!==n||!n)&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function ko(e,t,n){t===ET[e]||(null==t?n?OT.removeAttributeNS(n,e):OT.removeAttribute(e):n?OT.setAttributeNS(n,e,t):OT.setAttribute(e,t),ET[e]=t)}function Oo(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Eo(e){io.call(this,e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function Co(e,t,n,r){AT[r||e]=t}function wo(e,t,r,a){if(null==e)return"";var o="",s,i,n,l,d;for("bgrect"===r&&!1===t.interactive&&(o+="pointer-events: none;"),"text"===r&&(o+="font: "+Ka(e)+";"),(s=0,i=ST.length);s<i;++s)n=ST[s],l=vT[n],d=e[n],null==d?"fill"===l&&(o+=(o.length?" ":"")+"fill: none;"):(d.id&&(a.gradient[d.id]=d,d="url(#"+d.id+")"),o+=(o.length?" ":"")+l+": "+d+";");return o?"style=\""+o+"\"":null}function Lo(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ao(e,t){return e=((e||"")+"").toLowerCase(),1<arguments.length?(MT[e]=t,this):MT[e]}function No(e,t,n){return!(e!==t)||("path"===n?Po(e,t):e instanceof Date&&t instanceof Date?+e==+t:db(e)&&db(t)?p(e-t)<=FT:e&&t&&(Mh(e)||Mh(t))?null==e||null==t?!1:Ro(e,t):e==t)}function Po(e,t){return No(oS(e),oS(t))}function Ro(e,t){var n=Object.keys(e),r=Object.keys(t),o,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;0<=s;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;0<=s;s--)if(o=n[s],!No(e[o],t[o],o))return!1;return typeof e==typeof t}function Do(e){Gt.call(this,null,e)}function Io(e,t,n){return t(e.bounds.clear(),e,n)}function Mo(e){Gt.call(this,0,e)}function Fo(e){var t=e._signals[UT];return t||(e._signals[UT]=t=e.add(0)),t}function jo(e){Gt.call(this,null,e)}function zo(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}/**
 * Analyze items for overlap, changing opacity to hide items with
 * overlapping bounding boxes. This transform will preserve at least
 * two items (e.g., first and last) even if overlap persists.
 * @param {object} params - The parameters for this operator.
 * @param {object} params.method - The overlap removal method to apply.
 *   One of 'parity' (default, hide every other item until there is no
 *   more overlap) or 'greedy' (sequentially scan and hide and items that
 *   overlap with the last visible item).
 * @constructor
 */function Uo(e){Gt.call(this,null,e)}function $o(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function Bo(e){for(var t=1,r=e.length,n=e[0].bounds,a;t<r;n=a,++t)if($o(n,a=e[t].bounds))return!0}function Wo(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function qo(e){Gt.call(this,null,e)}function Vo(e){for(var t=e.items,r=t.length,n=0,a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null},o,i;n<r;++n)if(o=t[n],i=o.items,"group"===o.marktype)switch(o.role){case HT:case YT:break;case ZT:Ho(i,a.rowheaders);break;case XT:Ho(i,a.rowfooters);break;case QT:Ho(i,a.colheaders);break;case JT:Ho(i,a.colfooters);break;case KT:a.rowtitle=i[0];break;case ek:a.coltitle=i[0];break;default:Ho(i,a.marks);}return a}function Ho(e,t){for(var r=0,a=e.length;r<a;++r)t.push(e[r])}function Yo(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function Go(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Zo(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Xo(e,t){return e.bounds[t]}function Ko(e,t,n){var r=Mh(e)?e[t]:e;return null==r?n===void 0?0:n:r}function Qo(e){return 0>e?T(-e):0}function Jo(e,t,a){function o(e,t){return g(N(e,t))}function s(e,t){return T(S(e,t))}var l=Vo(t,a),d=l.marks,p="flush"===a.bounds,u=p?Yo:Go,f=new mr(0,0,0,0),h=Ko(a.align,"column"),_=Ko(a.align,"row"),v=Ko(a.padding,"column"),k=Ko(a.padding,"row"),O=a.offset,E=t.columns||a.columns||d.length,C=0>E?1:T(d.length/E),w=[],A=[],P=[],R=[],D=d.length,n,m,i,c,r,b,I,M,F,x,y,j,z;for(m=0;m<E;++m)A[m]=0;for(m=0;m<C;++m)R[m]=0;for(m=0;m<D;++m)r=u(d[m]),i=m%E,c=~~(m/E),I=i?T(u(d[m-1]).x2):0,M=c?T(u(d[m-E]).y2):0,A[i]=S(A[i],I),R[c]=S(R[c],M),w.push(v+Qo(r.x1)),P.push(k+Qo(r.y1)),e.dirty(d[m]);for(m=0;m<D;++m)0==m%E&&(w[m]=0),m<E&&(P[m]=0);if("each"===h)for(i=1;i<E;++i){for(z=0,m=i;m<D;m+=E)z<w[m]&&(z=w[m]);for(m=i;m<D;m+=E)w[m]=z+A[i]}else if("all"===h){for(j=0,i=1;i<E;++i)j<A[i]&&(j=A[i]);for(z=0,m=0;m<D;++m)m%E&&z<w[m]&&(z=w[m]);for(m=0;m<D;++m)m%E&&(w[m]=z+j)}else for(i=1;i<E;++i)for(m=i;m<D;m+=E)w[m]+=A[i];if("each"===_)for(c=1;c<C;++c){for(z=0,m=c*E,n=m+E;m<n;++m)z<P[m]&&(z=P[m]);for(m=c*E;m<n;++m)P[m]=z+R[c]}else if("all"===_){for(j=0,c=1;c<C;++c)j<R[c]&&(j=R[c]);for(z=0,m=E;m<D;++m)z<P[m]&&(z=P[m]);for(m=E;m<D;++m)P[m]=z+j}else for(c=1;c<C;++c)for(m=c*E,n=m+E;m<n;++m)P[m]+=R[c];for(F=0,m=0;m<D;++m)b=d[m],I=b.x||0,b.x=F=w[m]+(m%E?F:0),b.bounds.translate(F-I,0);for(i=0;i<E;++i)for(x=0,m=i;m<D;m+=E)b=d[m],M=b.y||0,b.y=x+=P[m],b.bounds.translate(0,x-M);for(m=0;m<D;++m)d[m].mark.bounds.clear();for(m=0;m<D;++m)b=d[m],e.dirty(b),f.union(b.mark.bounds.union(b.bounds));u=p?Zo:Xo,y=Ko(a.headerBand,"row",null),F=ei(e,l.rowheaders,d,E,C,-Ko(O,"rowHeader"),o,0,u,"x1",0,E,1,y),y=Ko(a.headerBand,"column",null),x=ei(e,l.colheaders,d,E,E,-Ko(O,"columnHeader"),o,1,u,"y1",0,1,E,y),y=Ko(a.footerBand,"row",null),ei(e,l.rowfooters,d,E,C,Ko(O,"rowFooter"),s,0,u,"x2",E-1,E,1,y),y=Ko(a.footerBand,"column",null),ei(e,l.colfooters,d,E,E,Ko(O,"columnFooter"),s,1,u,"y2",C*E-E,1,E,y),l.rowtitle&&(z=F-Ko(O,"rowTitle"),y=Ko(a.titleBand,"row",0.5),ti(e,l.rowtitle,z,0,f,y)),l.coltitle&&(z=x-Ko(O,"columnTitle"),y=Ko(a.titleBand,"column",0.5),ti(e,l.coltitle,z,1,f,y))}function ei(e,t,r,a,o,s,l,d,c,p,u,_,v,S){var T=r.length,n=0,O=0,E,i,C,k,m,b,h,g,x;for(E=u;E<T;E+=_)r[E]&&(n=l(n,c(r[E],p)));if(!t.length)return n;for(t.length>o&&(e.warn("Grid headers exceed limit: "+o),t=t.slice(0,o)),n+=s,(i=0,k=t.length);i<k;++i)e.dirty(t[i]),t[i].mark.bounds.clear();for(E=u,i=0,k=t.length;i<k;++i,E+=_){for(b=t[i],m=b.mark.bounds,C=E;null==(h=r[C]);C-=v);d?(g=null==S?h.x:f(h.bounds.x1+S*h.bounds.width()),x=n):(g=n,x=null==S?h.y:f(h.bounds.y1+S*h.bounds.height())),m.union(b.bounds.translate(g-(b.x||0),x-(b.y||0))),b.x=g,b.y=x,e.dirty(b),O=l(O,m[p])}return O}function ti(e,t,n,r,a,o){if(t){e.dirty(t);var i=n,s=n;r?i=f(a.x1+o*a.width()):s=f(a.y1+o*a.height()),t.bounds.translate(i-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=i,t.y=s,e.dirty(t)}}function ni(e){Gt.call(this,null,e)}function ri(e,t,r){var a=t.items,o=S(0,t.width||0),s=S(0,t.height||0),l=new mr().set(0,0,o,s),d=l.clone(),c=l.clone(),p=l.clone(),u=[],m,f,y,g,h,i;for(h=0,i=a.length;h<i;++h)switch(f=a[h],f.role){case dk:d.union(g=si(e,f,o,s)),(oi(f)?c:p).union(g);break;case ck:m=f;break;case uk:u.push(f);break;case pk:case mk:case fk:case yk:case gk:case hk:c.union(f.bounds),p.union(f.bounds);break;default:l.union(f.bounds);}if(m&&(d.union(g=li(e,m,d)),(oi(m)?c:p).union(g)),u.length)for(y={left:0,right:0,top:0,bottom:0,margin:r.legendMargin||8},h=0,i=u.length;h<i;++h)if(g=di(e,u[h],y,c,p,o,s),r.autosize&&r.autosize.type===tk){var n=u[h].items[0].datum.orient;n===ik||n===sk?l.add(g.x1,0).add(g.x2,0):(n===ok||n===lk)&&l.add(0,g.y1).add(0,g.y2)}else l.union(g);l.union(c).union(p).union(d),ci(e,t,l,r)}function ai(e,t,n){return e[t]===n?0:(e[t]=n,1)}function oi(e){var t=e.items[0].datum.orient;return t===ik||t===sk}function ii(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function si(e,t,n,r){var a=t.items[0],o=a.datum,l=o.orient,d=ii(o),c=a.range,p=a.offset,u=a.position,m=a.minExtent,f=a.maxExtent,g=o.title&&a.items[d[2]].items[0],h=a.titlePadding,b=a.bounds,_=0,x=0,y,i;return _k.clear().union(b),b.clear(),-1<(y=d[0])&&b.union(a.items[y].bounds),-1<(y=d[1])&&b.union(a.items[y].bounds),l===ok?(_=u||0,x=-p,i=S(m,N(f,-b.y1)),g&&(g.auto?(i+=h,g.y=-i,i+=g.bounds.height()):b.union(g.bounds)),b.add(0,-i).add(c,0)):l===ik?(_=-p,x=u||0,i=S(m,N(f,-b.x1)),g&&(g.auto?(i+=h,g.x=-i,i+=g.bounds.width()):b.union(g.bounds)),b.add(-i,0).add(0,c)):l===sk?(_=n+p,x=u||0,i=S(m,N(f,b.x2)),g&&(g.auto?(i+=h,g.x=i,i+=g.bounds.width()):b.union(g.bounds)),b.add(0,0).add(i,c)):l===lk?(_=u||0,x=r+p,i=S(m,N(f,b.y2)),g&&(g.auto?(i+=h,g.y=i,i+=g.bounds.height()):b.union(g.bounds)),b.add(0,0).add(c,i)):(_=a.x,x=a.y),(kS(b.translate(_,x),a),ai(a,"x",_+bk)|ai(a,"y",x+bk)&&(a.bounds=_k,e.dirty(a),a.bounds=b,e.dirty(a)),a.mark.bounds.clear().union(b))}function li(e,t,n){var r=t.items[0],a=r.datum,o=a.orient,i=r.offset,s=r.bounds,l=0,d=0;return _k.clear().union(s),o===ok?(l=r.x,d=n.y1-i):o===ik?(l=n.x1-i,d=r.y):o===sk?(l=n.x2+i,d=r.y):o===lk?(l=r.x,d=n.y2+i):(l=r.x,d=r.y),(s.translate(l-r.x,d-r.y),ai(r,"x",l)|ai(r,"y",d)&&(r.bounds=_k,e.dirty(r),r.bounds=s,e.dirty(r)),t.bounds.clear().union(s))}function di(e,t,n,r,a,o,i){var s=t.items[0],l=s.datum,d=l.orient,c=s.offset,p=s.bounds,u=0,m=0,y,b,h;return d===ok||d===lk?(h=a,u=n[d]):(d===ik||d===sk)&&(h=r,m=n[d]),_k.clear().union(p),p.clear(),s.items.forEach(function(e){p.union(e.bounds)}),y=f(p.width())+2*s.padding-1,b=f(p.height())+2*s.padding-1,d===ik?(u-=y+c-g(h.x1),n.left+=b+n.margin):d===sk?(u+=c+T(h.x2),n.right+=b+n.margin):d===ok?(m-=b+c-g(h.y1),n.top+=y+n.margin):d===lk?(m+=c+T(h.y2),n.bottom+=y+n.margin):"top-left"===d?(u+=c,m+=c):"top-right"===d?(u+=o-y-c,m+=c):"bottom-left"===d?(u+=c,m+=i-b-c):"bottom-right"===d?(u+=o-y-c,m+=i-b-c):(u=s.x,m=s.y),(kS(p.set(u,m,u+y,m+b),s),ai(s,"x",u)|ai(s,"width",y)|ai(s,"y",m)|ai(s,"height",b)&&(s.bounds=_k,e.dirty(s),s.bounds=p,e.dirty(s)),s.mark.bounds.clear().union(p))}function ci(e,t,n,r){var a=r.autosize||{},o=a.type,i=e._width,s=e._height,l=e.padding();if(!(1>e._autosize)&&o){var d=S(0,t.width||0),c=S(0,T(-n.x1)),p=S(0,T(n.x2-d)),u=S(0,t.height||0),m=S(0,T(-n.y1)),f=S(0,T(n.y2-u));a.contains===ak&&(i-=l.left+l.right,s-=l.top+l.bottom),o===rk?(c=0,m=0,d=i,u=s):o===tk?(d=S(0,i-c-p),u=S(0,s-m-f)):o===nk&&(i=d+c+p,s=u+m+f),e._resizeView(i,s,d,u,[c,m],a.resize)}}function ui(e){function t(t){var o=t+"",s=r.get(o);if(!s){if(n!==jk)return n;r.set(o,s=a.push(t))}return e[(s-1)%e.length]}var r=X(),a=[],n=jk;return e=null==e?[]:Fk.call(e),t.domain=function(e){if(!arguments.length)return a.slice();a=[],r=X();for(var o=-1,i=e.length,n,s;++o<i;)r.has(s=(n=e[o])+"")||r.set(s,a.push(n));return t},t.range=function(n){return arguments.length?(e=Fk.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return ui().domain(a).range(e).unknown(n)},t}function mi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fi(){}function yi(e){var t;return e=(e+"").trim().toLowerCase(),(t=Bk.exec(e))?(t=parseInt(t[1],16),new xi(15&t>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1)):(t=Wk.exec(e))?gi(parseInt(t[1],16)):(t=qk.exec(e))?new xi(t[1],t[2],t[3],1):(t=Vk.exec(e))?new xi(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Hk.exec(e))?hi(t[1],t[2],t[3],t[4]):(t=Yk.exec(e))?hi(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Gk.exec(e))?vi(t[1],t[2]/100,t[3]/100,1):(t=Zk.exec(e))?vi(t[1],t[2]/100,t[3]/100,t[4]):Xk.hasOwnProperty(e)?gi(Xk[e]):"transparent"===e?new xi(NaN,NaN,NaN,0):null}function gi(e){return new xi(255&e>>16,255&e>>8,255&e,1)}function hi(e,t,n,r){return 0>=r&&(e=t=n=NaN),new xi(e,t,n,r)}function bi(e){return(e instanceof fi||(e=yi(e)),!e)?new xi:(e=e.rgb(),new xi(e.r,e.g,e.b,e.opacity))}function _i(e,t,n,r){return 1===arguments.length?bi(e):new xi(e,t,n,null==r?1:r)}function xi(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function vi(e,t,n,r){return 0>=r?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new ki(e,t,n,r)}function Si(e){if(e instanceof ki)return new ki(e.h,e.s,e.l,e.opacity);if(e instanceof fi||(e=yi(e)),!e)return new ki;if(e instanceof ki)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=N(t,n,r),i=S(t,n,r),d=NaN,c=i-a,s=(i+a)/2;return c?(d=t===i?(n-r)/c+6*(n<r):n===i?(r-t)/c+2:(t-n)/c+4,c/=0.5>s?i+a:2-i-a,d*=60):c=0<s&&1>s?0:d,new ki(d,c,s,e.opacity)}function Ti(e,t,n,r){return 1===arguments.length?Si(e):new ki(e,t,n,null==r?1:r)}function ki(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Oi(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function Ei(e){if(e instanceof wi)return new wi(e.l,e.a,e.b,e.opacity);if(e instanceof Ii){var t=e.h*Kk;return new wi(e.l,c(t)*e.c,s(t)*e.c,e.opacity)}e instanceof xi||(e=bi(e));var n=Pi(e.r),r=Pi(e.g),a=Pi(e.b),o=Li((0.4124564*n+0.3575761*r+0.1804375*a)/Kn),i=Li((0.2126729*n+0.7151522*r+0.072175*a)/Xn),l=Li((0.0193339*n+0.119192*r+0.9503041*a)/Yn);return new wi(116*i-16,500*(o-i),200*(i-l),e.opacity)}function Ci(e,t,n,r){return 1===arguments.length?Ei(e):new wi(e,t,n,null==r?1:r)}function wi(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Li(e){return e>nO?O(e,1/3):e/tO+Zn}function Ai(e){return e>eO?e*e*e:tO*(e-Zn)}function Ni(e){return 255*(0.0031308>=e?12.92*e:1.055*O(e,1/2.4)-0.055)}function Pi(e){return 0.04045>=(e/=255)?e/12.92:O((e+0.055)/1.055,2.4)}function Ri(e){if(e instanceof Ii)return new Ii(e.h,e.c,e.l,e.opacity);e instanceof wi||(e=Ei(e));var t=wh(e.b,e.a)*Qk;return new Ii(0>t?t+360:t,u(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Di(e,t,n,r){return 1===arguments.length?Ri(e):new Ii(e,t,n,null==r?1:r)}function Ii(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Mi(e){if(e instanceof ji)return new ji(e.h,e.s,e.l,e.opacity);e instanceof xi||(e=bi(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(oO*r+E*t-aO*n)/(oO+E-aO),o=r-a,i=(D*(n-a)-B*o)/C,l=u(i*i+o*o)/(D*a*(1-a)),s=l?wh(i,o)*Qk-120:NaN;return new ji(0>s?s+360:s,l,a,e.opacity)}function Fi(e,t,n,r){return 1===arguments.length?Mi(e):new ji(e,t,n,null==r?1:r)}function ji(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function zi(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}function Ui(e,n){return function(r){return e+r*n}}function $i(e,n,r){return e=O(e,r),n=O(n,r)-e,r=1/r,function(a){return O(e+a*n,r)}}function Bi(e,t){var n=t-e;return n?Ui(e,180<n||-180>n?n-360*f(n/360):n):lO(isNaN(e)?t:e)}function Wi(e){return 1==(e=+e)?qi:function(t,n){return n-t?$i(t,n,e):lO(isNaN(t)?n:t)}}function qi(e,t){var n=t-e;return n?Ui(e,n):lO(isNaN(e)?t:e)}function Vi(e){return function(t){var a=t.length,n=Array(a),r=Array(a),o=Array(a),s,i;for(s=0;s<a;++s)i=_i(t[s]),n[s]=i.r||0,r[s]=i.g||0,o[s]=i.b||0;return n=e(n),r=e(r),o=e(o),i.opacity=1,function(e){return i.r=n(e),i.g=r(e),i.b=o(e),i+""}}}function Hi(e){return function(){return e}}function Yi(e){return function(n){return e(n)+""}}function Gi(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}function i(e,r,a,o,l,s){if(e!==a||r!==o){var d=l.push("translate(",null,t,null,n);s.push({i:d-4,x:fO(e,a)},{i:d-2,x:fO(r,o)})}else(a||o)&&l.push("translate("+a+t+o+n)}function l(e,t,n,a){e===t?t&&n.push(o(n)+"rotate("+t+r):(180<e-t?t+=360:180<t-e&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:fO(e,t)}))}function d(e,t,n,a){e===t?t&&n.push(o(n)+"skewX("+t+r):a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:fO(e,t)})}function c(e,t,n,r,a,s){if(e!==n||t!==r){var l=a.push(o(a)+"scale(",null,",",null,")");s.push({i:l-4,x:fO(e,n)},{i:l-2,x:fO(t,r)})}else(1!==n||1!==r)&&a.push(o(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],a=[];return t=e(t),n=e(n),i(t.translateX,t.translateY,n.translateX,n.translateY,r,a),l(t.rotate,n.rotate,r,a),d(t.skewX,n.skewX,r,a),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,a),t=n=null,function(e){for(var t=-1,i=a.length,n;++t<i;)r[(n=a[t]).i]=n.x(e);return r.join("")}}}function Zi(e){return((e=o(e))+1/e)/2}function Xi(e){return((e=o(e))-1/e)/2}function Ki(e){return((e=o(2*e))-1)/(e+1)}function Qi(e){return function(n,t){var r=e((n=Ti(n)).h,(t=Ti(t)).h),a=qi(n.s,t.s),o=qi(n.l,t.l),i=qi(n.opacity,t.opacity);return function(e){return n.h=r(e),n.s=a(e),n.l=o(e),n.opacity=i(e),n+""}}}function Ji(e){return function(n,t){var r=e((n=Di(n)).h,(t=Di(t)).h),a=qi(n.c,t.c),o=qi(n.l,t.l),i=qi(n.opacity,t.opacity);return function(e){return n.h=r(e),n.c=a(e),n.l=o(e),n.opacity=i(e),n+""}}}function es(e){return function t(n){function r(r,t){var a=e((r=Fi(r)).h,(t=Fi(t)).h),o=qi(r.s,t.s),i=qi(r.l,t.l),s=qi(r.opacity,t.opacity);return function(e){return r.h=a(e),r.s=o(e),r.l=i(O(e,n)),r.opacity=s(e),r+""}}return n=+n,r.gamma=t,r}(1)}function ts(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:MO(t)}function rs(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function as(e){return function(n,o){var i=e(n=+n,o=+o);return function(e){return 0>=e?n:1<=e?o:i(e)}}}function os(e,t,n,r){var a=e[0],o=e[1],i=t[0],s=t[1];return o<a?(a=n(o,a),i=r(s,i)):(a=n(a,o),i=r(i,s)),function(e){return i(a(e))}}function is(e,t,n,a){var o=N(e.length,t.length)-1,s=Array(o),l=Array(o),r=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<o;)s[r]=n(e[r],e[r+1]),l[r]=a(t[r],t[r+1]);return function(t){var n=bx(e,t,1,o)-1;return l[n](s[n](t))}}function ss(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function ls(e,t){function n(){return l=2<N(a.length,o.length)?is:os,d=c=null,r}function r(t){return(d||(d=l(a,o,s?rs(e):e,i)))(+t)}var a=jO,o=jO,i=_O,s=!1,l,d,c;return r.invert=function(e){return(c||(c=l(o,a,ts,s?as(t):t)))(+e)},r.domain=function(e){return arguments.length?(a=Mk.call(e,FO),n()):a.slice()},r.range=function(e){return arguments.length?(o=Fk.call(e),n()):o.slice()},r.rangeRound=function(e){return o=Fk.call(e),i=xO,n()},r.clamp=function(e){return arguments.length?(s=!!e,n()):s},r.interpolate=function(e){return arguments.length?(i=e,n()):i},n()}function ds(e){return new cs(e)}function cs(e){if(!(c=VO.exec(e)))throw new Error("invalid format: "+e);var t=c[1]||" ",n=c[2]||">",r=c[3]||"-",a=c[4]||"",o=!!c[5],i=c[6]&&+c[6],s=!!c[7],l=c[8]&&+c[8].slice(1),d=c[9]||"",c;"n"===d?(s=!0,d="g"):!qO[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=r,this.symbol=a,this.zero=o,this.width=i,this.comma=s,this.precision=l,this.type=d}function ps(e){return JO=QO(e),eE=JO.format,tE=JO.formatPrefix,JO}function us(e){var t=e.domain;return e.ticks=function(e){var n=t();return Cx(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return oE(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r=t(),a=0,o=r.length-1,i=r[a],s=r[o],l;return s<i&&(l=i,i=s,s=l,l=a,a=o,o=l),l=ln(i,s,n),0<l?(i=g(i/l)*l,s=T(s/l)*l,l=ln(i,s,n)):0>l&&(i=T(i*l)/l,s=g(s*l)/l,l=ln(i,s,n)),0<l?(r[a]=g(i/l)*l,r[o]=T(s/l)*l,t(r)):0>l&&(r[a]=T(i*l)/l,r[o]=g(s*l)/l,t(r)),e},e}function ms(){var e=ls(ts,fO);return e.copy=function(){return ss(e,ms())},us(e)}function fs(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Mk.call(n,FO),e):t.slice()},e.copy=function(){return fs().domain(t)},us(e)}function ys(e,t){return(t=m(t/e))?function(n){return m(n/e)/t}:MO(t)}function gs(e,n){return 0>e?function(r){return-O(-n,r)*O(-e,1-r)}:function(r){return O(n,r)*O(e,1-r)}}function hs(e){return isFinite(e)?+("1e"+e):0>e?0:e}function bs(e){return 10===e?hs:e===Eh?o:function(t){return O(e,t)}}function _s(e){return e===Eh?m:10===e&&Math.log10||2===e&&Math.log2||(e=m(e),function(t){return m(t)/e})}function xs(e){return function(t){return-e(-t)}}function vs(){function e(){return s=_s(o),l=bs(o),0>a()[0]&&(s=xs(s),l=xs(l)),t}var t=ls(ys,gs).domain([1,10]),a=t.domain,o=10,s=_s(10),l=bs(10);return t.base=function(t){return arguments.length?(o=+t,e()):o},t.domain=function(t){return arguments.length?(a(t),e()):a()},t.ticks=function(e){var c=a(),d=c[0],u=c[c.length-1],m;(m=u<d)&&(r=d,d=u,u=r);var r=s(d),i=s(u),y=null==e?10:+e,n=[],g,p,h;if(o%1||!(i-r<y))n=Cx(r,i,N(i-r,y)).map(l);else if(r=f(r)-1,i=f(i)+1,0<d){for(;r<i;++r)for(p=1,g=l(r);p<o;++p)if(h=g*p,!(h<d)){if(h>u)break;n.push(h)}}else for(;r<i;++r)for(p=o-1,g=l(r);1<=p;--p)if(h=g*p,!(h<d)){if(h>u)break;n.push(h)}return m?n.reverse():n},t.tickFormat=function(e,n){if(null==n&&(n=10==o?".0e":","),"function"!=typeof n&&(n=eE(n)),e===Infinity)return n;null==e&&(e=10);var r=S(1,o*e/t.ticks().length);return function(e){var t=e/l(f(s(e)));return t*o<o-0.5&&(t*=o),t<=r?n(e):""}},t.nice=function(){return a(iE(a(),{floor:function(e){return l(g(s(e)))},ceil:function(e){return l(T(s(e)))}}))},t.copy=function(){return ss(t,vs().base(o))},t}function Ss(e,t){return 0>e?-O(-e,t):O(e,t)}function Ts(){var e=1,t=ls(function(t,n){return(n=Ss(n,e)-(t=Ss(t,e)))?function(r){return(Ss(r,e)-t)/n}:MO(n)},function(n,r){return r=Ss(r,e)-(n=Ss(n,e)),function(a){return Ss(n+r*a,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return ss(t,Ts().exponent(e))},us(t)}function ks(){function e(){var e=0,i=S(1,a.length);for(o=Array(i-1);++e<i;)o[e-1]=Lx(r,e/i);return t}function t(e){if(!isNaN(e=+e))return a[bx(o,e)]}var r=[],a=[],o=[];return t.invertExtent=function(e){var t=a.indexOf(e);return 0>t?[NaN,NaN]:[0<t?o[t-1]:r[0],t<o.length?o[t]:r[r.length-1]]},t.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var a=0,o=t.length,n;a<o;++a)(n=t[a],null!=n&&!isNaN(n=+n))&&r.push(n);return r.sort(yx),e()},t.range=function(t){return arguments.length?(a=Fk.call(t),e()):a.slice()},t.quantiles=function(){return o.slice()},t.copy=function(){return ks().domain(r).range(a)},t}function Os(){function e(e){if(e<=e)return s[bx(n,e,0,o)]}function t(){var t=-1;for(n=Array(o);++t<o;)n[t]=((t+1)*a-(t-o)*r)/(o+1);return e}var r=0,a=1,o=1,n=[0.5],s=[0,1];return e.domain=function(e){return arguments.length?(r=+e[0],a=+e[1],t()):[r,a]},e.range=function(e){return arguments.length?(o=(s=Fk.call(e)).length-1,t()):s.slice()},e.invertExtent=function(e){var t=s.indexOf(e);return 0>t?[NaN,NaN]:1>t?[r,n[0]]:t>=o?[n[o-1],a]:[n[t-1],n[t]]},e.copy=function(){return Os().domain([r,a]).range(s)},us(e)}function Es(){function e(e){if(e<=e)return r[bx(t,e,0,a)]}var t=[0.5],r=[0,1],a=1;return e.domain=function(n){return arguments.length?(t=Fk.call(n),a=N(t.length,r.length-1),e):t.slice()},e.range=function(n){return arguments.length?(r=Fk.call(n),a=N(t.length,r.length-1),e):r.slice()},e.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},e.copy=function(){return Es().domain(t).range(r)},e}function Cs(e){return new Date(e)}function ws(e){return e instanceof Date?+e:+new Date(+e)}function Ls(e,t,n,r,a,o,i,s,l){function d(s){return(i(s)<s?y:o(s)<s?g:a(s)<s?h:r(s)<s?b:t(s)<s?n(s)<s?_:x:e(s)<s?v:S)(s)}function c(t,n,r,a){if(null==t&&(t=10),"number"==typeof t){var o=p(r-n)/t,l=gx(function(e){return e[2]}).right(T,o);l===T.length?(a=dn(n/mE,r/mE,t),t=e):l?(l=T[o/T[l-1][2]<T[l][2]/o?l-1:l],a=l[1],t=l[0]):(a=dn(n,r,t),t=s)}return null==a?t:t.every(a)}var u=ls(ts,fO),m=u.invert,f=u.domain,y=l(".%L"),g=l(":%S"),h=l("%I:%M"),b=l("%I %p"),_=l("%a %d"),x=l("%b %d"),v=l("%B"),S=l("%Y"),T=[[i,1,sE],[i,5,5*sE],[i,15,15*sE],[i,30,30*sE],[o,1,lE],[o,5,5*lE],[o,15,15*lE],[o,30,30*lE],[a,1,dE],[a,3,3*dE],[a,6,6*dE],[a,12,12*dE],[r,1,cE],[r,2,2*cE],[n,1,pE],[t,1,uE],[t,3,3*uE],[e,1,mE]];return u.invert=function(e){return new Date(m(e))},u.domain=function(e){return arguments.length?f(Mk.call(e,ws)):f().map(Cs)},u.ticks=function(e,n){var a=f(),o=a[0],i=a[a.length-1],s=i<o,r;return s&&(r=o,o=i,i=r),r=c(e,o,i,n),r=r?r.range(o,i+1):[],s?r.reverse():r},u.tickFormat=function(e,t){return null==t?d:l(t)},u.nice=function(e,t){var n=f();return(e=c(e,n[0],n[n.length-1],t))?f(iE(n,e)):u},u.copy=function(){return ss(u,Ls(e,t,n,r,a,o,i,s,l))},u}function As(e){var r=e.length;return function(n){return e[S(0,N(r-1,g(n*r)))]}}function Ns(){function e(){var e=r().length,t=i[1]<i[0],n=i[t-0],u=i[1-t],m=Dk(e,s,l);c=(u-n)/(m||1),a&&(c=g(c)),n+=(u-n-c*(e-s))*d,p=c*(1-s),a&&(n=f(n),p=f(p));var y=Tx(e).map(function(e){return n+c*e});return o(t?y.reverse():y)}var t=ui().unknown(void 0),r=t.domain,o=t.range,i=[0,1],a=!1,s=0,l=0,d=0.5,c,p;return delete t.unknown,t.domain=function(t){return arguments.length?(r(t),e()):r()},t.range=function(t){return arguments.length?(i=[+t[0],+t[1]],e()):i.slice()},t.rangeRound=function(t){return i=[+t[0],+t[1]],a=!0,e()},t.bandwidth=function(){return p},t.step=function(){return c},t.round=function(t){return arguments.length?(a=!!t,e()):a},t.padding=function(t){return arguments.length?(l=S(0,N(1,t)),s=l,e()):s},t.paddingInner=function(t){return arguments.length?(s=S(0,N(1,t)),e()):s},t.paddingOuter=function(t){return arguments.length?(l=S(0,N(1,t)),e()):l},t.align=function(t){return arguments.length?(d=S(0,N(1,t)),e()):d},t.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var s=+e[0],l=+e[1],d=i[1]<i[0],c=d?o().reverse():o(),u=c.length-1,n,a,m;if(s==s&&l==l)return(l<s&&(m=s,s=l,l=m),!(l<c[0]||s>i[1-d]))?(n=S(0,bx(c,s)-1),a=s===l?n:bx(c,l)-1,s-c[n]>p+1e-10&&++n,d&&(m=n,n=u-a,a=u-m),n>a?void 0:r().slice(n,a+1)):void 0}},t.invert=function(e){var n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return Ns().domain(r()).range(i).round(a).paddingInner(s).paddingOuter(l).align(d)},e()}function Ps(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Ps(t())},e}function Rs(e){return EE.call(e,function(e){return+e})}function Ds(){function e(e){return n(e)}function t(e){r=Rs(e),n.domain([r[0],yb(r)])}var n=ms(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var a=r.length,n=~~(a/(t||a));return 2>n?e.domain():r.filter(function(e,t){return!(t%n)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Ds().domain(e.domain()).range(e.range())},e}function Is(){function e(e){return null==e||e!==e?void 0:n[(bx(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Rs(n),e):t.slice()},e.range=function(t){return arguments.length?(n=CE.call(t),e):n.slice()},e.copy=function(){return Is().domain(e.domain()).range(e.range())},e}function Ms(e){function t(){var e=r.domain();a=e[0],o=yb(e)-a}function n(n){var r=(n-a)/o;return e(i?S(0,N(1,r)):r)}var r=ms(),a=0,o=1,i=!1;return n.clamp=function(e){return arguments.length?(i=!!e,n):i},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ms().domain(r.domain()).clamp(i).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function Fs(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Pk(n):n.invertExtent?Rk(n):void 0),n.type=e,n}}function js(e,t){return 1<arguments.length?(wE[e]=Fs(e,t),this):wE.hasOwnProperty(e)?wE[e]:void 0}function zs(e){for(var t=0|e.length/6,n=Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Us(e,t){qC[e]=WC["interpolate"+t],_[e]=WC["scheme"+t]}function $s(e,t){var n=t[0],r=yb(t)-n;return function(t){return e(n+t*r)}}function Bs(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(Ws):eb(0)}function Ws(e,t){return function(n){return e+n*(t-e)}}function qs(e,t){var n=IO[Vs(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Vs(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function Hs(e){return HC.hasOwnProperty(e)&&HC[e]}function Ys(e){return YC.hasOwnProperty(e)&&YC[e]}function Gs(e,t){var n;return Mh(t)&&(n=t.step,t=t.interval),Fh(t)&&(t="time"===e.type?Hs(t):"utc"===e.type?Ys(t):Rh("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Zs(e,t){var n=e.range(),r=n[0],a=yb(n);return r>a&&(n=a,a=r,r=n),t.filter(function(t){return t=e(t),!(t<r||t>a)})}function Xs(e,t){return e.ticks?e.ticks(t):e.domain()}function Ks(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):String;return e.type===Sk?Qs(r,Js(n)):r}function Qs(e,t){return function(n){return e(n)?t(n):""}}function Js(e){var t=ds(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1;}return el(eE(t),eE(".1f")(1)[1])}return eE(t)}function el(e,t){return function(n){var r=e(n),a=r.indexOf(t),o,i;if(0>a)return r;for(o=tl(r,a),i=o<r.length?r.slice(o):"";--o>a;)if("0"!==r[o]){++o;break}return r.slice(0,o)+i}}function tl(e,t){var n=e.lastIndexOf("e"),r;if(0<n)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),48<=r&&57>=r)return n+1}function nl(e){Gt.call(this,null,e)}function rl(e){Gt.call(this,null,e)}function al(){return F({})}function ol(e){return e.exit}function il(e){Gt.call(this,null,e)}function sl(e,t,n){if(n)return e.domain();var r=KC[e.type];return r?r(e):Xs(e,t)}function ll(e){var t=e.domain();return t.max=t.pop(),t}function dl(e,t){return KC[e.type]?cl(t):ul(t)}function cl(e){return function(t,n,r){var a=r[n+1]||r.max||+Infinity,o=pl(t,e),i=pl(a,e);return o&&i?o+"\u2013"+i:i?"< "+i:"\u2265 "+o}}function pl(e,t){return isFinite(e)?t(e):null}function ul(e){return function(t){return e(t)}}function ml(e){Gt.call(this,[],e)}function fl(e){return e.source.x}function yl(e){return e.source.y}function gl(e){return e.target.x}function hl(e){return e.target.y}function bl(e){Gt.call(this,{},e)}function _l(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function xl(e,t,n,r){var a=n-e,o=r-t,i=u(a*a+o*o)/2,s=180*wh(o,a)/l;return"M"+e+","+t+"A"+i+","+i+" "+s+" 0 1 "+n+","+r}function vl(e,t,n,r){var a=n-e,o=r-t,i=0.2*(a+o),s=0.2*(o-a);return"M"+e+","+t+"C"+(e+i)+","+(t+s)+" "+(n+s)+","+(r-i)+" "+n+","+r}function Sl(e){Gt.call(this,null,e)}function Tl(e){Gt.call(this,null,e),this.modified(!0)}function kl(e,t,r){var a=Ol(e,t.domainRaw);if(-1<a)return a;var o=t.domain,i=t.zero||void 0===t.zero&&rw[e.type],s,n;return o?((i||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(s=(o=o.slice()).length-1||1,i&&(0<o[0]&&(o[0]=0),0>o[s]&&(o[s]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[s]=t.domainMax),null!=t.domainMid&&(n=t.domainMid,(n<o[0]||n>o[s])&&r.warn("Scale domainMid exceeds domain min or max.",n),o.splice(s,0,n))),e.domain(o),t.nice&&e.nice&&e.nice(!0!==t.nice&&Gs(e,t.nice)||null),o.length):0}function Ol(e,t){return t?(e.domain(t),t.length):-1}function El(e,t,n){var r=t.round||!1,a=t.range;if(null!=t.rangeStep)a=Cl(e.type,t,n);else if(t.scheme){if(a=wl(e.type,t,n),Qh(a))return e.interpolator(a);}else if(a&&e.type===Nk)return e.interpolator(cO(Al(a,t.reverse)));a&&t.interpolate&&e.interpolate?e.interpolate(qs(t.interpolate,t.interpolateGamma)):Qh(e.round)?e.round(r):Qh(e.rangeRound)&&e.interpolate(r?xO:_O),a&&e.range(Al(a,t.reverse))}function Cl(e,t,n){e!==Tk&&e!==kk&&Rh("Only band and point scales support rangeStep.");var r=(null==t.paddingOuter?t.padding:t.paddingOuter)||0,a=e===kk?1:(null==t.paddingInner?t.padding:t.paddingInner)||0;return[0,t.rangeStep*Dk(n,a,r)]}function wl(e,t,n){var r=t.scheme.toLowerCase(),a=VC(r),o=t.schemeExtent,i;return a||Rh("Unrecognized scheme name: "+t.scheme),n=e===Lk?n+1:e===Ak?n-1:e===Ck||e===wk?+t.schemeCount||nw:n,e===Nk?Ll(a,o,t.reverse):!o&&(i=VC(r+"-"+n))?i:Qh(a)?Nl(Ll(a,o),n):e===Ek?a:a.slice(0,n)}function Ll(e,t,n){return Qh(e)&&(t||n)?$s(e,Al(t||[0,1],n)):e}function Al(e,t){return t?e.slice().reverse():e}function Nl(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r/(t-1||1));return n}function Pl(e){Gt.call(this,null,e)}function Rl(e){Gt.call(this,null,e)}function Dl(e,n,r,a,o){for(var i=(n-e.sum)/2,s=e.length,l=0,d;l<s;++l)d=e[l],d[a]=i,d[o]=i+=p(r(d))}function Il(e,n,r,a,o){for(var i=1/e.sum,s=0,l=e.length,d=0,c=0,u;d<l;++d)u=e[d],u[a]=s,u[o]=s=i*(c+=p(r(u)))}function Ml(e,n,r,a,o){for(var i=0,s=0,l=e.length,d=0,c,p;d<l;++d)p=e[d],c=r(p),0>c?(p[a]=s,p[o]=s+=c):(p[a]=i,p[o]=i+=c)}function Fl(e,r,a,o){var l=[],d=function(e){return e(m)},c,u,i,n,m,t,f,y,s;if(null==r)l.push(e.slice());else for(c={},u=0,i=e.length;u<i;++u)m=e[u],t=r.map(d),f=c[t],f||(c[t]=f=[],l.push(f)),f.push(m);for(t=0,s=0,n=l.length;t<n;++t){for(f=l[t],u=0,y=0,i=f.length;u<i;++u)y+=p(o(f[u]));f.sum=y,y>s&&(s=y),a&&f.sort(a)}return l.max=s,l}function jl(e,t){for(var r=t[0],a=t[1],o=-1,s=0,i=e.length,n=i-1;s<i;n=s++){var l=e[s],d=l[0],c=l[1],p=e[n],u=p[0],m=p[1];if(zl(l,p,t))return 0;c>a!=m>a&&r<(u-d)*(a-c)/(m-c)+d&&(o=-o)}return o}function zl(e,t,n){var r;return Ul(e,t,n)&&$l(e[r=+(e[0]===t[0])],n[r],t[r])}function Ul(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}function $l(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Bl(e,t,a){for(var r=e.width,n=e.height,o=(a<<1)+1,s=0;s<n;++s)for(var l=0,i=0;l<r+a;++l)l<r&&(i+=e.data[l+s*r]),l>=a&&(l>=o&&(i-=e.data[l-o+s*r]),t.data[l-a+s*r]=i/N(l+1,r-1+o-l,o))}function Wl(e,t,a){for(var r=e.width,n=e.height,o=(a<<1)+1,s=0;s<r;++s)for(var i=0,l=0;i<n+a;++i)i<n&&(l+=e.data[s+i*r]),i>=a&&(i>=o&&(l-=e.data[s+(i-o)*r]),t.data[s+(i-a)*r]=l/N(i+1,n-1+o-i,o))}function ql(e){return e[0]}function Vl(e){return e[1]}function Hl(e){Gt.call(this,null,e)}function Yl(e){return function(n){for(var r=Sx(n),a=r[0],o=r[1]-a,s=[],t=1;t<=e;++t)s.push(a+o*t/(e+1));return s}}function Gl(e){Gt.call(this,null,e)}function Zl(){this.reset()}function Xl(e,t,n){var r=e.s=t+n,a=r-t;e.t=t-(r-a)+(n-a)}function Kl(e){return 1<e?0:-1>e?ww:i(e)}function Ql(e){return 1<e?Lw:-1>e?-Lw:Ch(e)}function Jl(){}function ed(e,t){e&&Yw.hasOwnProperty(e.type)&&Yw[e.type](e,t)}function td(e,t,r){var a=-1,o=e.length-r,n;for(t.lineStart();++a<o;)n=e[a],t.point(n[0],n[1],n[2]);t.lineEnd()}function nd(e,t){var r=-1,a=e.length;for(t.polygonStart();++r<a;)td(e[r],t,1);t.polygonEnd()}function rd(e){return[Mw(e[1],e[0]),Ql(e[2])]}function ad(e){var t=e[0],n=e[1],r=Fw(n);return[r*Fw(t),r*Bw(t),Bw(n)]}function od(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ld(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function dd(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cd(e){var t=qw(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function pd(e,t){return[e>ww?e-Nw:e<-ww?e+Nw:e,t]}function ud(e,t,n){return(e%=Nw)?t||n?Qw(fd(e),yd(t,n)):fd(e):t||n?yd(t,n):pd}function md(e){return function(t,n){return t+=e,[t>ww?t-Nw:t<-ww?t+Nw:t,n]}}function fd(e){var t=md(e);return t.invert=md(-e),t}function yd(e,t){function n(e,t){var n=Fw(t),s=Fw(e)*n,l=Bw(e)*n,d=Bw(t),c=d*r+s*a;return[Mw(l*o-c*i,s*r-d*a),Ql(c*o+l*i)]}var r=Fw(e),a=Bw(e),o=Fw(t),i=Bw(t);return n.invert=function(e,t){var n=Fw(t),s=Fw(e)*n,l=Bw(e)*n,d=Bw(t),c=d*o-l*i;return[Mw(l*o+d*i,s*r+c*a),Ql(c*r-s*a)]},n}function gd(e,n,r,a,o,i){if(r){var s=Fw(n),l=Bw(n),d=a*r;null==o?(o=n+a*Nw,i=n-d/2):(o=hd(s,o),i=hd(s,i),(0<a?o<i:o>i)&&(o+=a*Nw));for(var c=o,t;0<a?c>i:c<i;c-=d)t=rd([s,-l*Fw(c),-l*Bw(c)]),e.point(t[0],t[1])}}function hd(e,t){t=ad(t),t[0]-=e,cd(t);var n=Kl(-t[1]);return((0>-t[2]?-n:n)+Nw-Cw)%Nw}function bd(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function _d(e){if(a=e.length){for(var t=0,r=e[0],a,n;++t<a;)r.n=n=e[t],n.p=r,r=n;r.n=n=e[0],n.p=r}}function xd(e,t,n,r){function o(a,o){return e<=a&&a<=n&&t<=o&&o<=r}function a(o,s,d,c){var p=0,a=0;if(null==o||(p=i(o,d))!==(a=i(s,d))||0>l(o,s)^0<d)do c.point(0==p||3==p?e:n,1<p?r:t);while((p=(p+d+4)%4)!=a);else c.point(s[0],s[1])}function i(r,a){return Dw(r[0]-e)<Cw?0<a?0:3:Dw(r[0]-n)<Cw?0<a?2:1:Dw(r[1]-t)<Cw?0<a?1:0:0<a?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=i(e,1),r=i(t,1);return n===r?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-r}return function(i){function l(e,t){o(e,t)&&p.point(e,t)}function d(){for(var t=0,a=0,o=g.length;a<o;++a)for(var n=g[a],i=1,s=n.length,l=n[0],d=l[0],c=l[1],p,u;i<s;++i)p=d,u=c,l=n[i],d=l[0],c=l[1],u<=r?c>r&&(d-p)*(r-u)>(c-u)*(e-p)&&++t:c<=r&&(d-p)*(r-u)<(c-u)*(e-p)&&--t;return t}function c(i,s){var l=o(i,s);if(g&&h.push([i,s]),w)_=i,T=s,k=l,w=!1,l&&(p.lineStart(),p.point(i,s));else if(l&&C)p.point(i,s);else{var d=[O=S(oL,N(aL,O)),E=S(oL,N(aL,E))],a=[i=S(oL,N(aL,i)),s=S(oL,N(aL,s))];tL(d,a,e,t,n,r)?(!C&&(p.lineStart(),p.point(d[0],d[1])),p.point(a[0],a[1]),!l&&p.lineEnd(),A=!1):l&&(p.lineStart(),p.point(i,s),A=!1)}O=i,E=s,C=l}var p=i,u=eL(),m={point:l,lineStart:function(){m.point=c,g&&g.push(h=[]),w=!0,C=!1,O=E=NaN},lineEnd:function(){f&&(c(_,T),k&&C&&u.rejoin(),f.push(u.result())),m.point=l,C&&p.lineEnd()},polygonStart:function(){p=u,f=[],g=[],A=!0},polygonEnd:function(){var e=d(),t=A&&e,n=(f=Nx(f)).length;(t||n)&&(i.polygonStart(),t&&(i.lineStart(),a(null,null,1,i),i.lineEnd()),n&&rL(f,s,e,a,i),i.polygonEnd()),p=i,f=g=h=null}},f,g,h,_,T,k,O,E,C,w,A;return m}}function vd(){dL.point=dL.lineEnd=Jl}function Sd(e,t){e*=Rw,t*=Rw,DL=e,IL=Bw(t),ML=Fw(t),dL.point=Td}function Td(e,t){e*=Rw,t*=Rw;var n=Bw(t),r=Fw(t),a=Dw(e-DL),o=Fw(a),i=Bw(a),s=r*i,l=ML*n-IL*r*o,d=IL*n+ML*r*o;lL.add(Mw(qw(s*s+l*l),d)),DL=e,IL=n,ML=r}function kd(e,t){return e&&fL.hasOwnProperty(e.type)&&fL[e.type](e,t)}function Od(e,t){return 0===mL(e,t)}function Ed(e,t){var n=mL(e[0],e[1]),r=mL(e[0],t),a=mL(t,e[1]);return r+a<=n+Cw}function Cd(e,t){return!!sL(e.map(wd),Ld(t))}function wd(e){return e=e.map(Ld),e.pop(),e}function Ld(e){return[e[0]*Rw,e[1]*Rw]}function Ad(e,t,n){var r=Tx(e,t-Cw,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Nd(e,t,n){var r=Tx(e,t-Cw,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Pd(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Tx(jw(c/a)*a,d,a).map(y).concat(Tx(jw(f/o)*o,m,o).map(b)).concat(Tx(jw(l/n)*n,s,n).filter(function(e){return Dw(e%a)>Cw}).map(g)).concat(Tx(jw(u/r)*r,p,r).filter(function(e){return Dw(e%o)>Cw}).map(h))}var n=10,r=n,a=90,o=360,i=2.5,s,l,d,c,p,u,m,f,g,h,y,b;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[y(c).concat(b(m).slice(1),y(d).reverse().slice(1),b(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(c=+t[0][0],d=+t[1][0],f=+t[0][1],m=+t[1][1],c>d&&(t=c,c=d,d=t),f>m&&(t=f,f=m,m=t),e.precision(i)):[[c,f],[d,m]]},e.extentMinor=function(t){return arguments.length?(l=+t[0][0],s=+t[1][0],u=+t[0][1],p=+t[1][1],l>s&&(t=l,l=s,s=t),u>p&&(t=u,u=p,p=t),e.precision(i)):[[l,u],[s,p]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(a=+t[0],o=+t[1],e):[a,o]},e.stepMinor=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.precision=function(t){return arguments.length?(i=+t,g=Ad(u,p,90),h=Nd(l,s,i),y=Ad(f,m,90),b=Nd(c,d,i),e):i},e.extentMajor([[-180,-90+Cw],[180,90-Cw]]).extentMinor([[-180,-80-Cw],[180,80+Cw]])}function Rd(){bL.point=Dd}function Dd(e,t){bL.point=Id,FL=zL=e,jL=UL=t}function Id(e,t){hL.add(UL*e-zL*t),zL=e,UL=t}function Md(){Id(FL,jL)}function Fd(e,t){kL+=e,OL+=t,++EL}function jd(){RL.point=zd}function zd(e,t){RL.point=Ud,Fd(WL=e,qL=t)}function Ud(e,t){var n=e-WL,r=t-qL,a=qw(n*n+r*r);CL+=a*(WL+e)/2,wL+=a*(qL+t)/2,LL+=a,Fd(WL=e,qL=t)}function $d(){RL.point=Fd}function Bd(){RL.point=qd}function Wd(){Vd($L,BL)}function qd(e,t){RL.point=Vd,Fd($L=WL=e,BL=qL=t)}function Vd(e,t){var n=e-WL,r=t-qL,a=qw(n*n+r*r);CL+=a*(WL+e)/2,wL+=a*(qL+t)/2,LL+=a,a=qL*e-WL*t,AL+=a*(WL+e),NL+=a*(qL+t),PL+=3*a,Fd(WL=e,qL=t)}function Hd(e){this._context=e}function Yd(e,t){HL.point=Gd,GL=XL=e,ZL=KL=t}function Gd(e,t){XL-=e,KL-=t,VL.add(qw(XL*XL+KL*KL)),XL=e,KL=t}function Zd(){this._string=[]}function Xd(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Kd(e){return 1<e.length}function Qd(e,t){return(0>(e=e.x)[0]?e[1]-Lw-Cw:Lw-e[1])-(0>(t=t.x)[0]?t[1]-Lw-Cw:Lw-t[1])}function Jd(e,t,n,r){var a=Bw(e-n),o,i;return Dw(a)>Cw?Iw((Bw(t)*(i=Fw(r))*Bw(n)-Bw(r)*(o=Fw(t))*Bw(e))/(o*i*a)):(t+r)/2}function ec(e){return function(t){var n=new tc;for(var r in e)n[r]=e[r];return n.stream=t,n}}function tc(){}function nc(e,t,n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),Gw(n,e.stream(TL));var i=TL.result(),s=N(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,d=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,d])}function rc(e,t,n){return nc(e,[[0,0],t],n)}function ac(e){return ec({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function oc(e,t){function n(r,o,i,s,l,d,u,f,y,g,h,_,x,v){var S=u-r,T=f-o,k=S*S+T*T;if(k>4*t&&x--){var O=s+g,a=l+h,b=d+_,c=qw(O*O+a*a+b*b),m=Ql(b/=c),E=Dw(Dw(b)-1)<Cw||Dw(i-y)<Cw?(i+y)/2:Mw(a,O),C=e(E,m),p=C[0],w=C[1],A=p-r,N=w-o,P=T*A-S*N;(P*P/k>t||0.3<Dw((S*A+T*N)/k-0.5)||s*g+l*h+d*_<rA)&&(n(r,o,i,s,l,d,p,w,E,O/=c,a/=c,b,x,v),v.point(p,w),n(p,w,E,O,a,b,u,f,y,g,h,_,x,v))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function a(){b=NaN,c.point=o,t.lineStart()}function o(r,a){var o=ad([r,a]),i=e(r,a);n(b,_,h,x,v,S,b=i[0],_=i[1],h=r,x=o[0],v=o[1],S=o[2],nA,t),t.point(b,_)}function i(){c.point=r,t.lineEnd()}function s(){a(),c.point=l,c.lineEnd=d}function l(e,t){o(p=e,t),u=b,m=_,f=x,y=v,g=S,c.point=o}function d(){n(b,_,h,x,v,S,u,m,p,f,y,g,nA,t),c.lineEnd=i,i()}var c={point:r,lineStart:a,lineEnd:i,polygonStart:function(){t.polygonStart(),c.lineStart=s},polygonEnd:function(){t.polygonEnd(),c.lineStart=a}},p,u,m,f,y,g,h,b,_,x,v,S;return c}}function ic(e){return sc(function(){return e})()}function sc(e){function t(e){return e=k(e[0]*Rw,e[1]*Rw),[e[0]*i+v,S-e[1]*i]}function n(e){return e=k.invert((e[0]-v)/i,(S-e[1])/i),e&&[e[0]*Pw,e[1]*Pw]}function r(e,t){return e=_(e,t),[e[0]*i+v,S-e[1]*i]}function a(){k=Qw(T=ud(p,u,m),_);var e=_(d,c);return v=s-e[0]*i,S=l+e[1]*i,o()}function o(){return w=A=null,t}var i=150,s=480,l=250,d=0,c=0,p=0,u=0,m=0,f=null,y=eA,g=null,h=yL,b=0.5,x=aA(r,b),_,v,S,T,k,O,E,C,w,A;return t.stream=function(e){return w&&A===e?w:w=oA(y(T,x(h(A=e))))},t.clipAngle=function(e){return arguments.length?(y=+e?tA(f=e*Rw,6*Rw):(f=null,eA),o()):f*Pw},t.clipExtent=function(e){return arguments.length?(h=null==e?(g=O=E=C=null,yL):xd(g=+e[0][0],O=+e[0][1],E=+e[1][0],C=+e[1][1]),o()):null==g?null:[[g,O],[E,C]]},t.scale=function(e){return arguments.length?(i=+e,a()):i},t.translate=function(e){return arguments.length?(s=+e[0],l=+e[1],a()):[s,l]},t.center=function(e){return arguments.length?(d=e[0]%360*Rw,c=e[1]%360*Rw,a()):[d*Pw,c*Pw]},t.rotate=function(e){return arguments.length?(p=e[0]%360*Rw,u=e[1]%360*Rw,m=2<e.length?e[2]%360*Rw:0,a()):[p*Pw,u*Pw,m*Pw]},t.precision=function(e){return arguments.length?(x=aA(r,b=e*e),o()):qw(b)},t.fitExtent=function(e,n){return nc(t,e,n)},t.fitSize=function(e,n){return rc(t,e,n)},function(){return _=e.apply(this,arguments),t.invert=_.invert&&n,a()}}function lc(e){var t=0,n=ww/3,r=sc(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Rw,n=e[1]*Rw):[t*Pw,n*Pw]},a}function dc(e){function t(e,t){return[e*n,Bw(t)/n]}var n=Fw(e);return t.invert=function(e,t){return[e/n,Ql(t*n)]},t}function cc(e,t){function r(e,t){var a=qw(n-2*o*Bw(t))/o;return[a*Bw(e*=o),i-a*Fw(e)]}var a=Bw(e),o=(a+Bw(t))/2;if(Dw(o)<Cw)return dc(e);var n=1+a*(2*o-a),i=qw(n)/o;return r.invert=function(e,t){var r=i-t;return[Mw(e,Dw(r))/o*Ww(r),Ql((n-(e*e+r*r)*o*o)/(2*o))]},r}function pc(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function uc(e){return function(t,n){var r=Fw(t),a=Fw(n),o=e(r*a);return[o*a*Bw(t),o*Bw(n)]}}function mc(e){return function(t,n){var r=qw(t*t+n*n),a=e(r),o=Bw(a),i=Fw(a);return[Mw(t*o,r*i),Ql(r&&n*o/r)]}}function fc(e,t){return[e,Uw(Vw((Lw+t)/2))]}function yc(e){function t(){var r=ww*a(),o=n(Jw(n.rotate()).invert([0,0]));return i(null==s?[[o[0]-r,o[1]-r],[o[0]+r,o[1]+r]]:e===fc?[[S(o[0]-r,s),l],[N(o[0]+r,d),c]]:[[s,S(o[1]-r,l)],[d,N(o[1]+r,c)]])}var n=ic(e),r=n.center,a=n.scale,o=n.translate,i=n.clipExtent,s=null,l,d,c;return n.scale=function(e){return arguments.length?(a(e),t()):a()},n.translate=function(e){return arguments.length?(o(e),t()):o()},n.center=function(e){return arguments.length?(r(e),t()):r()},n.clipExtent=function(e){return arguments.length?(null==e?s=l=d=c=null:(s=+e[0][0],l=+e[0][1],d=+e[1][0],c=+e[1][1]),t()):null==s?null:[[s,l],[d,c]]},t()}function gc(e){return Vw((Lw+e)/2)}function hc(e,t){function r(e,t){0<n?t<-Lw+Cw&&(t=-Lw+Cw):t>Lw-Cw&&(t=Lw-Cw);var a=n/$w(gc(t),o);return[a*Bw(o*e),n-a*Fw(o*e)]}var a=Fw(e),o=e===t?Bw(e):Uw(a/Fw(t))/Uw(gc(t)/gc(e)),n=a*$w(gc(e),o)/o;return o?(r.invert=function(e,t){var a=n-t,i=Ww(o)*qw(e*e+a*a);return[Mw(e,Dw(a))/o*Ww(a),2*Iw($w(n/i,1/o))-Lw]},r):fc}function bc(e,t){return[e,t]}function _c(e,t){function r(e,t){var r=n-t,a=o*e;return[r*Bw(a),n-r*Fw(a)]}var a=Fw(e),o=e===t?Bw(e):(a-Fw(t))/(t-e),n=a/o+e;return Dw(o)<Cw?bc:(r.invert=function(e,t){var r=n-t;return[Mw(e,Dw(r))/o*Ww(r),n-Ww(o)*qw(e*e+r*r)]},r)}function xc(e,t){var n=Fw(t),r=Fw(e)*n;return[n*Bw(e)/r,Bw(t)/r]}function vc(e,t){return[Fw(t)*Bw(e),Bw(t)]}function Sc(e,t){var n=Fw(t),r=1+Fw(e)*n;return[n*Bw(e)/r,Bw(t)/r]}function Tc(e,t){return[Uw(Vw((Lw+t)/2)),-e]}function kc(e,t){return function n(){var r=t();return r.type=e,r.path=QL().projection(r),r.copy=r.copy||function(){var e=n();return pA.forEach(function(t){r.hasOwnProperty(t)&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},r}}function Oc(e,t){return 1<arguments.length?(uA[e]=kc(e,t),this):uA.hasOwnProperty(e)?uA[e]:null}function Ec(e){return e&&e.path||cA}function Cc(e){Gt.call(this,null,e)}function wc(e){Gt.call(this,null,e)}function Lc(e){Gt.call(this,null,e)}function Ac(e,t){var n=function(n){return e(t(n))};return n.context=function(t){return e.context(t),n},n}function Nc(e){Gt.call(this,[],e),this.generator=Pd()}function Pc(e){Gt.call(this,null,e),this.modified(!0)}function Rc(e,t){var n=Mc(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function Dc(e){var t=Oc((e||"mercator").toLowerCase());return t||Rh("Unrecognized projection type: "+e),t()}function Ic(e,t,n){Qh(e[t])&&e[t](n)}function Mc(e){return e=Kh(e),1===e.length?e[0]:{type:Tw,features:e.reduce(function(e,t){return t&&t.type===Tw?e.push.apply(e,t.features):Ih(t)?e.push.apply(e,t):e.push(t),e},[])}}function Fc(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a=e._root,o={data:r},s=e._x0,l=e._y0,c=e._x1,p=e._y1,u,m,f,y,g,h,b,_,i;if(!a)return e._root=o,e;for(;a.length;)if((h=t>=(m=(s+c)/2))?s=m:c=m,(b=n>=(f=(l+p)/2))?l=f:p=f,(u=a,!(a=a[_=b<<1|h])))return u[_]=o,e;if(y=+e._x.call(null,a.data),g=+e._y.call(null,a.data),t===y&&n===g)return o.next=a,u?u[_]=o:e._root=o,e;do u=u?u[_]=[,,,,]:e._root=[,,,,],(h=t>=(m=(s+c)/2))?s=m:c=m,(b=n>=(f=(l+p)/2))?l=f:p=f;while((_=b<<1|h)==(i=(g>=f)<<1|y>=m));return u[i]=a,u[_]=o,e}function jc(e){return e[0]}function zc(e){return e[1]}function Uc(e,t,n){var r=new $c(null==t?jc:t,null==n?zc:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function $c(e,t,n,r,a,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function Bc(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Wc(e){return e.x+e.vx}function qc(e){return e.y+e.vy}function Vc(e){return e.index}function Hc(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Yc(){return LA||(PA(Gc),LA=NA.now()+AA)}function Gc(){LA=0}function Zc(){this._call=this._time=this._next=null}function Xc(e,n,r){var a=new Zc;return a.restart(e,n,r),a}function Kc(){Yc(),++kA;for(var n=RA,t;n;)0<=(t=LA-n._time)&&n._call.call(null,t),n=n._next;--kA}function Qc(){LA=(wA=NA.now())+AA,kA=OA=0;try{Kc()}finally{kA=0,ep(),LA=0}}function Jc(){var e=NA.now(),t=e-wA;t>CA&&(AA-=t,wA=e)}function ep(){for(var e=RA,t=Infinity,n,r;e;)e._call?(t>e._time&&(t=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:RA=r);DA=n,tp(t)}function tp(e){if(!kA){OA&&(OA=clearTimeout(OA));var t=e-LA;24<t?(e<Infinity&&(OA=setTimeout(Qc,t)),EA&&(EA=clearInterval(EA))):(!EA&&(wA=LA,EA=setInterval(Jc,CA)),kA=1,PA(Qc))}}function np(e){return e.x}function rp(e){return e.y}function ap(e){Gt.call(this,null,e)}function op(e,t){return function(){e.touch(t).run()}}function ip(e,t){var n=IA(e),r=!1,a=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,a()},sp(n,t,!0).on("end",function(){r=!0})}function sp(e,t,r,a){var o=Kh(t.forces),s,i,n,l;for(s=0,i=jA.length;s<i;++s)n=jA[s],n!==FA&&t.modified(n)&&e[n](t[n]);for(s=0,i=o.length;s<i;++s)l=FA+s,n=r||t.modified(FA,s)?dp(o[s]):a&&lp(o[s],a)?e.force(l):null,n&&e.force(l,n);for(i=e.numForces||0;s<i;++s)e.force(FA+s,null);return e.numForces=o.length,e}function lp(e,t){var n,r;for(n in e)if(Qh(r=e[n])&&t.modified(w(r)))return 1;return 0}function dp(e){var t,n;for(n in MA.hasOwnProperty(e.force)||Rh("Unrecognized force: "+e.force),t=MA[e.force](),e)Qh(t[n])&&cp(t[n],e[n],e);return t}function cp(e,t,n){e(Qh(t)?function(e){return t(e,n)}:t)}function pp(e,t){return e.parent===t.parent?1:2}function up(e){return e.reduce(mp,0)/e.length}function mp(e,t){return e+t.x}function fp(e){return 1+e.reduce(yp,0)}function yp(e,t){return S(e,t.y)}function gp(e){for(var t;t=e.children;)e=t[0];return e}function hp(e){for(var t;t=e.children;)e=t[t.length-1];return e}function bp(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;0<=--r;)t+=n[r].value;e.value=t}function _p(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;for(e=n.pop(),t=r.pop();e===t;)a=e,e=n.pop(),t=r.pop();return a}function xp(e,t){var r=new kp(e),a=+e.value&&(r.value=e.value),o=[r],s,l,d,c,i;for(null==t&&(t=vp);s=o.pop();)if(a&&(s.value=+s.data.value),(d=t(s.data))&&(i=d.length))for(s.children=Array(i),c=i-1;0<=c;--c)o.push(l=s.children[c]=new kp(d[c])),l.parent=s,l.depth=s.depth+1;return r.eachBefore(Tp)}function vp(e){return e.children}function Sp(e){e.data=e.data.data}function Tp(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function kp(e){this.data=e,this.depth=this.height=0,this.parent=null}function Op(e){for(var n=e.length,r,t;n;)t=0|Math.random()*n--,r=e[n],e[n]=e[t],e[t]=r;return e}function Ep(e,t){var n,r;if(Lp(t,e))return[t];for(n=0;n<e.length;++n)if(Cp(t,e[n])&&Lp(Pp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Cp(Pp(e[n],e[r]),t)&&Cp(Pp(e[n],t),e[r])&&Cp(Pp(e[r],t),e[n])&&Lp(Rp(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Cp(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return 0>n||n*n<r*r+a*a}function wp(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,a=t.y-e.y;return 0<n&&n*n>r*r+a*a}function Lp(e,t){for(var n=0;n<t.length;++n)if(!wp(e,t[n]))return!1;return!0}function Ap(e){switch(e.length){case 1:return Np(e[0]);case 2:return Pp(e[0],e[1]);case 3:return Rp(e[0],e[1],e[2]);}}function Np(e){return{x:e.x,y:e.y,r:e.r}}function Pp(e,t){var n=e.x,r=e.y,a=e.r,o=t.x,i=t.y,s=t.r,d=o-n,c=i-r,p=s-a,m=u(d*d+c*c);return{x:(n+o+d/m*p)/2,y:(r+i+c/m*p)/2,r:(m+a+s)/2}}function Rp(e,t,n){var a=e.x,o=e.y,i=e.r,s=t.x,l=t.y,d=t.r,c=n.x,p=n.y,m=n.r,f=a-s,y=a-c,g=o-l,h=o-p,b=d-i,_=m-i,x=a*a+o*o-i*i,v=x-s*s-l*l+d*d,S=x-c*c-p*p+m*m,T=y*g-f*h,k=(g*S-h*v)/(2*T)-a,O=(h*b-g*_)/T,E=(y*v-f*S)/(2*T)-o,w=(f*_-y*b)/T,N=O*O+w*w-1,A=2*(i+k*O+E*w),P=k*k+E*E-i*i,C=-(N?(A+u(A*A-4*N*P))/(2*N):P/A);return{x:a+k+O*C,y:o+E+w*C,r:C}}function Dp(e,t,n){var r=e.x,a=e.y,o=t.r+n.r,i=e.r+n.r,s=t.x-r,l=t.y-a,d=s*s+l*l;if(d){var c=0.5+((i*=i)-(o*=o))/(2*d),p=u(S(0,2*o*(i+d)-(i-=d)*i-o*o))/(2*d);n.x=r+c*s+p*l,n.y=a+c*l-p*s}else n.x=r+i,n.y=a}function Ip(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return a*a-1e-6>n*n+r*r}function Mp(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return a*a+o*o}function Fp(e){this._=e,this.next=null,this.previous=null}function jp(e){if(!(o=e.length))return 0;var t,r,a,o,n,s,l,i,d,c,p;if(t=e[0],t.x=0,t.y=0,!(1<o))return t.r;if(r=e[1],t.x=-r.r,r.x=t.r,r.y=0,!(2<o))return t.r+r.r;Dp(r,t,a=e[2]),t=new Fp(t),r=new Fp(r),a=new Fp(a),t.next=a.previous=r,r.next=t.previous=a,a.next=r.previous=t;pack:for(l=3;l<o;++l){Dp(t._,r._,a=e[l]),a=new Fp(a),i=r.next,d=t.previous,c=r._.r,p=t._.r;do if(c<=p){if(Ip(i._,a._)){r=i,t.next=r,r.previous=t,--l;continue pack}c+=i._.r,i=i.next}else{if(Ip(d._,a._)){t=d,t.next=r,r.previous=t,--l;continue pack}p+=d._.r,d=d.previous}while(i!==d.next);for(a.previous=t,a.next=r,t.next=r.previous=r=a,n=Mp(t);(a=a.next)!==r;)(s=Mp(a))<n&&(t=a,n=s);r=t.next}for(t=[r._],a=r;(a=a.next)!==r;)t.push(a._);for(a=qA(t),l=0;l<o;++l)t=e[l],t.x-=a.x,t.y-=a.y;return a.r}function zp(e){return null==e?null:Up(e)}function Up(e){if("function"!=typeof e)throw new Error;return e}function $p(){return 0}function Bp(e){return u(e.value)}function Wp(e){return function(t){t.children||(t.r=S(0,+e(t)||0))}}function qp(t,a){return function(o){if(r=o.children){var s=r.length,n=t(o)*a||0,r,l,i;if(n)for(l=0;l<s;++l)r[l].r+=n;if(i=jp(r),n)for(l=0;l<s;++l)r[l].r-=n;o.r=i+n}}}function Vp(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Hp(e){return e.id}function Yp(e){return e.parentId}function Gp(e,t){return e.parent===t.parent?1:2}function Zp(e){var t=e.children;return t?t[0]:e.t}function Xp(e){var t=e.children;return t?t[t.length-1]:e.t}function Kp(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Qp(e){for(var t=0,n=0,r=e.children,a=r.length,o;0<=--a;)o=r[a],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Jp(e,t,n){return e.a.parent===t.parent?e.a:n}function eu(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function tu(e){for(var t=new eu(e,0),r=[t],a,o,s,l,i;a=r.pop();)if(s=a._.children)for(a.children=Array(i=s.length),l=i-1;0<=l;--l)r.push(o=a.children[l]=new eu(s[l],l)),o.parent=a;return(t.parent=new eu(null,0)).children=[t],t}function nu(e,t,r,a,o,i){for(var s=[],l=t.children,d=0,c=0,p=l.length,n=t.value,u,m,f,y,g,h,b,_,x,v,T;d<p;){f=o-r,y=i-a;do g=l[c++].value;while(!g&&c<p);for(h=b=g,v=S(y/f,f/y)/(n*e),T=g*g*v,x=S(b/T,T/h);c<p;++c){if(g+=m=l[c].value,m<h&&(h=m),m>b&&(b=m),T=g*g*v,_=S(b/T,T/h),_>x){g-=m;break}x=_}s.push(u={value:g,dice:f<y,children:l.slice(d,c)}),u.dice?YA(u,r,a,o,n?a+=y*g/n:i):QA(u,r,a,n?r+=f*g/n:o,i),n-=g,d=c}return s}function ru(e){Gt.call(this,null,e)}function au(e){return e.values}function ou(e){Gt.call(this,null,e)}function iu(e,t,r){for(var a=0,o=t.length,n;a<o;++a)n=t[a],n in r&&e[n](r[n])}function su(e,r,a){for(var o=e.data,t=0,i=r.length-1;t<i;++t)o[a[t]]=e[r[t]];o[a[i]]=e.children?e.children.length:0}function lu(e){ou.call(this,e)}function du(e){ou.call(this,e)}function cu(e){Gt.call(this,null,e)}function pu(e){ou.call(this,e)}function uu(e){Gt.call(this,{},e)}function mu(e){var t;return e.parent&&(t=e.parent.data)&&null!=I(t)&&t}function fu(e){ou.call(this,e)}function yu(e){return e[0]}function gu(e){return e[1]}function hu(){this._=null}function bu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function _u(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function xu(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function vu(e){for(;e.L;)e=e.L;return e}function Su(e,t,n,r){var a=[null,null],o=CN.push(a)-1;return a.left=e,a.right=t,n&&ku(a,e,t,n),r&&ku(a,t,e,r),ON[e.index].halfedges.push(o),ON[t.index].halfedges.push(o),a}function Tu(e,t,n){var r=[t,n];return r.left=e,r}function ku(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Ou(e,t,n,o,i){var s=e[0],a=e[1],l=s[0],d=s[1],c=a[0],p=a[1],u=0,m=1,f=c-l,y=p-d,g;if(g=t-l,f||!(0<g)){if(g/=f,0>f){if(g<u)return;g<m&&(m=g)}else if(0<f){if(g>m)return;g>u&&(u=g)}if(g=o-l,f||!(0>g)){if(g/=f,0>f){if(g>m)return;g>u&&(u=g)}else if(0<f){if(g<u)return;g<m&&(m=g)}if(g=n-d,y||!(0<g)){if(g/=y,0>y){if(g<u)return;g<m&&(m=g)}else if(0<y){if(g>m)return;g>u&&(u=g)}if(g=i-d,y||!(0>g)){if(g/=y,0>y){if(g>m)return;g>u&&(u=g)}else if(0<y){if(g<u)return;g<m&&(m=g)}return 0<u||1>m?(0<u&&(e[0]=[l+u*f,d+u*y]),1>m&&(e[1]=[l+m*f,d+m*y]),!0):!0}}}}}function Eu(e,t,n,r,a){var o=e[1];if(o)return!0;var i=e[0],s=e.left,l=e.right,d=s[0],c=s[1],p=l[0],u=l[1],m=(d+p)/2,f,y;if(u===c){if(m<t||m>=r)return;if(d>p){if(!i)i=[m,n];else if(i[1]>=a)return;o=[m,a]}else{if(!i)i=[m,a];else if(i[1]<n)return;o=[m,n]}}else if(f=(d-p)/(u-c),y=(c+u)/2-f*m,-1>f||1<f){if(d>p){if(!i)i=[(n-y)/f,n];else if(i[1]>=a)return;o=[(a-y)/f,a]}else{if(!i)i=[(a-y)/f,a];else if(i[1]<n)return;o=[(n-y)/f,n]}}else if(c<u){if(!i)i=[t,f*t+y];else if(i[0]>=r)return;o=[r,f*r+y]}else{if(!i)i=[r,f*r+y];else if(i[0]<t)return;o=[t,f*t+y]}return e[0]=i,e[1]=o,!0}function Cu(e,t,n,r){for(var a=CN.length,o;a--;)Eu(o=CN[a],e,t,n,r)&&Ou(o,e,t,n,r)&&(p(o[0][0]-o[1][0])>vN||p(o[0][1]-o[1][1])>vN)||delete CN[a]}function wu(e){return ON[e.index]={site:e,halfedges:[]}}function Lu(e,t){var n=e.site,r=t.left,a=t.right;return(n===a&&(a=r,r=n),a)?wh(a[1]-r[1],a[0]-r[0]):(n===r?(r=t[1],a=t[0]):(r=t[0],a=t[1]),wh(r[0]-a[0],a[1]-r[1]))}function Au(e,t){return t[+(t.left!==e.site)]}function Nu(e,t){return t[+(t.left===e.site)]}function Pu(){for(var e=0,t=ON.length,n,r,a,o;e<t;++e)if((n=ON[e])&&(o=(r=n.halfedges).length)){var i=Array(o),s=Array(o);for(a=0;a<o;++a)i[a]=a,s[a]=Lu(n,CN[r[a]]);for(i.sort(function(e,t){return s[t]-s[e]}),a=0;a<o;++a)s[a]=r[i[a]];for(a=0;a<o;++a)r[a]=s[a]}}function Ru(e,t,n,r){var a=ON.length,o=!0,i,s,l,d,c,u,m,f,y,g,h,b;for(i=0;i<a;++i)if(s=ON[i]){for(l=s.site,c=s.halfedges,d=c.length;d--;)CN[c[d]]||c.splice(d,1);for(d=0,u=c.length;d<u;)g=Nu(s,CN[c[d]]),h=g[0],b=g[1],m=Au(s,CN[c[++d%u]]),f=m[0],y=m[1],(p(h-f)>vN||p(b-y)>vN)&&(c.splice(d,0,CN.push(Tu(l,g,p(h-e)<vN&&r-b>vN?[e,p(f-e)<vN?y:r]:p(b-r)<vN&&n-h>vN?[p(y-r)<vN?f:n,r]:p(h-n)<vN&&b-t>vN?[n,p(f-n)<vN?y:t]:p(b-t)<vN&&h-e>vN?[p(y-t)<vN?f:e,t]:null))-1),++u);u&&(o=!1)}if(o){var _=Infinity,x,v,S;for(i=0,o=null;i<a;++i)(s=ON[i])&&(l=s.site,x=l[0]-e,v=l[1]-t,S=x*x+v*v,S<_&&(_=S,o=s));if(o){var T=[e,t],k=[e,r],O=[n,r],E=[n,t];o.halfedges.push(CN.push(Tu(l=o.site,T,k))-1,CN.push(Tu(l,k,O))-1,CN.push(Tu(l,O,E))-1,CN.push(Tu(l,E,T))-1)}}for(i=0;i<a;++i)(s=ON[i])&&(s.halfedges.length||delete ON[i])}function Du(){bu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Iu(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,o=n.site;if(r!==o){var i=a[0],s=a[1],l=r[0]-i,c=r[1]-s,p=o[0]-i,m=o[1]-s,f=2*(l*m-c*p);if(!(f>=-SN)){var d=l*l+c*c,g=p*p+m*m,h=(m*d-c*g)/f,b=(l*g-p*d)/f,y=_N.pop()||new Du;y.arc=e,y.site=a,y.x=h+i,y.y=(y.cy=b+s)+u(h*h+b*b),e.circle=y;for(var _=null,x=EN._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{_=x.P;break}}else if(x.R)x=x.R;else{_=x;break}EN.insert(_,y),_||(TN=y)}}}}function Mu(e){var t=e.circle;t&&(!t.P&&(TN=t.N),EN.remove(t),_N.push(t),bu(t),e.circle=null)}function Fu(){bu(this),this.edge=this.site=this.circle=null}function ju(e){var t=xN.pop()||new Fu;return t.site=e,t}function zu(e){Mu(e),kN.remove(e),xN.push(e),bu(e)}function Uu(e){var t=e.circle,n=t.x,r=t.cy,a=[n,r],o=e.P,i=e.N,s=[e];zu(e);for(var l=o;l.circle&&p(n-l.circle.x)<vN&&p(r-l.circle.cy)<vN;)o=l.P,s.unshift(l),zu(l),l=o;s.unshift(l),Mu(l);for(var d=i;d.circle&&p(n-d.circle.x)<vN&&p(r-d.circle.cy)<vN;)i=d.N,s.push(d),zu(d),d=i;s.push(d),Mu(d);var c=s.length,u;for(u=1;u<c;++u)d=s[u],l=s[u-1],ku(d.edge,l.site,d.site,a);l=s[0],d=s[c-1],d.edge=Su(l.site,d.site,null,a),Iu(l),Iu(d)}function $u(e){for(var t=e[0],n=e[1],r=kN._,a,o,i,s;r;)if(i=Bu(r,n)-t,i>vN)r=r.L;else if(s=t-Wu(r,n),s>vN){if(!r.R){a=r;break}r=r.R}else{i>-vN?(a=r.P,o=r):s>-vN?(a=r,o=r.N):a=o=r;break}wu(e);var l=ju(e);if(kN.insert(a,l),a||o){if(a===o)return Mu(a),o=ju(a.site),kN.insert(l,o),l.edge=o.edge=Su(a.site,l.site),Iu(a),void Iu(o);if(!o)return void(l.edge=Su(a.site,l.site));Mu(a),Mu(o);var c=a.site,p=c[0],u=c[1],m=e[0]-p,f=e[1]-u,y=o.site,g=y[0]-p,h=y[1]-u,b=2*(m*h-f*g),d=m*m+f*f,_=g*g+h*h,x=[(h*d-f*_)/b+p,(m*_-g*d)/b+u];ku(o.edge,c,y,x),l.edge=Su(c,e,null,x),o.edge=Su(e,y,null,x),Iu(a),Iu(o)}}function Bu(e,t){var n=e.site,r=n[0],a=n[1],o=a-t;if(!o)return r;var i=e.P;if(!i)return-Infinity;n=i.site;var s=n[0],l=n[1],d=l-t;if(!d)return s;var c=s-r,p=1/o-1/d,m=c/d;return p?(-m+u(m*m-2*p*(c*c/(-2*d)-l+d/2+a-o/2)))/p+r:(r+s)/2}function Wu(e,t){var n=e.N;if(n)return Bu(n,t);var r=e.site;return r[1]===t?r[0]:Infinity}function qu(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Vu(e,t){return t[1]-e[1]||t[0]-e[0]}function Hu(e,t){var n=e.sort(Vu).pop(),r,a,o;for(CN=[],ON=Array(e.length),kN=new hu,EN=new hu;;)if(o=TN,n&&(!o||n[1]<o.y||n[1]===o.y&&n[0]<o.x))(n[0]!==r||n[1]!==a)&&($u(n),r=n[0],a=n[1]),n=e.pop();else if(o)Uu(o.arc);else break;if(Pu(),t){var i=+t[0][0],s=+t[0][1],l=+t[1][0],d=+t[1][1];Cu(i,s,l,d),Ru(i,s,l,d)}this.edges=CN,this.cells=ON,kN=EN=CN=ON=null}function Yu(e){Gt.call(this,null,e)}function Gu(e,t,r,a){if(!t.sprite){var o=e.context,l=e.ratio;o.clearRect(0,0,(RN<<5)/l,cw/l);var d=0,u=0,f=0,y=r.length,n,g,b,h,i;for(--a;++a<y;){if(t=r[a],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/l)+"px "+t.font,n=o.measureText(t.text+"m").width*l,b=t.size<<1,t.rotate){var _=s(t.rotate*PN),x=c(t.rotate*PN),v=n*x,T=n*_,O=b*x,E=b*_;n=S(p(v+E),p(v-E))+31>>5<<5,b=~~S(p(T+O),p(T-O))}else n=n+31>>5<<5;if(b>f&&(f=b),d+n>=RN<<5&&(d=0,u+=f,f=0),u+b>=cw)break;o.translate((d+(n>>1))/l,(u+(b>>1))/l),t.rotate&&o.rotate(t.rotate*PN),o.fillText(t.text,0,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,0,0)),o.restore(),t.width=n,t.height=b,t.xoff=d,t.yoff=u,t.x1=n>>1,t.y1=b>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,d+=n}for(var C=o.getImageData(0,0,(RN<<5)/l,cw/l).data,w=[];0<=--a;)if(t=r[a],t.hasText){for(n=t.width,g=n>>5,b=t.y1-t.y0,h=0;h<b*g;h++)w[h]=0;if(d=t.xoff,null==d)return;u=t.yoff;var A=0,N=-1;for(i=0;i<b;i++){for(h=0;h<n;h++){var P=g*i+(h>>5),k=C[(u+i)*(RN<<5)+(d+h)<<2]?1<<31-h%32:0;w[P]|=k,A|=k}A?N=i:(t.y0++,b--,i--,u++)}t.y1=t.y0+N,t.sprite=w.slice(0,(t.y1-t.y0)*g)}}}function Zu(e,t,n){n>>=5;for(var r=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=e.y1-e.y0,d=(e.y+e.y0)*n+(o>>5),c=0,p;c<l;c++){p=0;for(var u=0;u<=a;u++)if((p<<32-s|(u<a?(p=r[c*a+u])>>>s:0))&t[d+u])return!0;d+=n}return!1}function Xu(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Ku(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Qu(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*c(e),e*s(e)]}}function Ju(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function em(){try{var t="undefined"!=typeof document&&document.createElement?document.createElement("canvas"):0;return t&&t.getContext?t:new(e("canvas"))}catch(t){Rh("Canvas unavailable. Run in browser or install node-canvas.")}}function tm(e){return"function"==typeof e?e:function(){return e}}function nm(e){Gt.call(this,ch(),e)}function rm(e,t){for(var r=+Infinity,a=-Infinity,o=0,i=t.length,n;o<i;++o)n=e(t[o]),n<r&&(r=n),n>a&&(a=n);return[r,a]}function am(e){return new Uint8Array(e)}function om(e){return new Uint16Array(e)}function im(e){return new Uint32Array(e)}function sm(){var e=8,r=[],t=im(0),a=dm(0,e),o=dm(0,e);return{data:function(){return r},seen:function(){return t=lm(t,r.length)},add:function(e){for(var a=0,o=r.length,i=e.length,n;a<i;++a)n=e[a],n._index=o++,r.push(n)},remove:function(e,s){var l=r.length,n=Array(l-e),d=r,c,t,i;for(t=0;!s[t]&&t<l;++t)n[t]=r[t],d[t]=t;for(i=t;t<l;++t)c=r[t],s[t]?d[t]=-1:(d[t]=i,a[i]=a[t],o[i]=o[t],n[i]=c,c._index=i++),a[t]=0;return r=n,d},size:function(){return r.length},curr:function(){return a},prev:function(){return o},reset:function(e){o[e]=a[e]},all:function(){return 257>e?255:65537>e?65535:4294967295},set:function(e,t){a[e]|=t},clear:function(e,t){a[e]&=~t},resize:function(t,n){var r=a.length;(t>r||n>e)&&(e=S(n,e),a=dm(t,e,a),o=dm(t,e))}}}function lm(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function dm(e,t,n){var r=(257>t?am:65537>t?om:im)(e);return n&&r.set(n),r}function cm(){var e=im(0),t=[],r=0;return{insert:function(n,a,o){if(!a.length)return[];var s=r,l=a.length,d=Array(l),c=im(l),p,u,m;for(m=0;m<l;++m)d[m]=n(a[m]),c[m]=m;if(d=pm(d,c),s)p=t,u=e,t=Array(s+l),e=im(s+l),um(o,p,u,s,d,c,l,t,e);else{if(0<o)for(m=0;m<l;++m)c[m]+=o;t=d,e=c}return r=s+l,{index:c,value:d}},remove:function(a,o){var s=r,n,l,i;for(l=0;!o[e[l]]&&l<s;++l);for(i=l;l<s;++l)o[n=e[l]]||(e[i]=n,t[i]=t[l],++i);r=s-a},bisect:function(e,a){var o;return a?o=a.length:(a=t,o=r),[_x(a,e[0],0,o),bx(a,e[1],0,o)]},reindex:function(t){for(var a=0,o=r;a<o;++a)e[a]=t[e[a]]},index:function(){return e},size:function(){return r}}}function pm(e,t){return e.sort.call(t,function(t,n){var r=e[t],a=e[n];return r<a?-1:r>a?1:0}),Px(e,t)}function um(e,t,n,r,a,o,s,l,d){var c=0,p=0,u;for(u=0;c<r&&p<s;++u)t[c]<a[p]?(l[u]=t[c],d[u]=n[c++]):(l[u]=a[p],d[u]=o[p++]+e);for(;c<r;++c,++u)l[u]=t[c],d[u]=n[c];for(;p<s;++p,++u)l[u]=a[p],d[u]=o[p]+e}function mm(e){Gt.call(this,sm(),e),this._indices=null,this._dims=null}function fm(e){Gt.call(this,null,e)}function ym(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function gm(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||Rh("Unrecognized data set: "+t),n[t]}function hm(e,t){$(t)||Rh("Second argument to changes must be a changeset.");var n=gm(this,e);return n.modified=!0,this.pulse(n.input,t)}function bm(e){var t=e.padding();return S(0,e._viewWidth+t.left+t.right)}function _m(e){var t=e.padding();return S(0,e._viewHeight+t.top+t.bottom)}function xm(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function vm(e){var t=xm(e);e._renderer.background(e._background),e._renderer.resize(bm(e),_m(e),t),e._handler.origin(t)}function Sm(e,t,n){function r(e){var n=o,r;if(e)for(r=t;r;r=r.mark.group)if(r.mark.name===e){n=r;break}return n&&n.mark&&n.mark.interactive?n:{}}function a(e){if(!e)return n;Fh(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var o=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:eb(e),item:eb(t||{}),group:r,xy:a,x:function(e){return a(e)[0]},y:function(e){return a(e)[1]}}}function Tm(e){e=nb({},e);var t=e.defaults;return t&&(Ih(t.prevent)&&(t.prevent=xb(t.prevent)),Ih(t.allow)&&(t.allow=xb(t.allow))),e}function km(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,a=n&&n.allow;return!1===r||!0===a?!1:!0===r||!1===a||(r?r[t]:a?!a[t]:e.preventDefault())}function Om(e){return e.item}function Em(e){var t=e.item.mark.source;return t.source||t}function Cm(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function wm(e,t,n,r){var a=HN("div",{class:YN});a.appendChild(HN("span",{class:GN},n.name||n.signal)),t.appendChild(a);var o=Lm;switch(n.input){case"checkbox":o=Am;break;case"select":o=Nm;break;case"radio":o=Pm;break;case"range":o=Rm;}o(e,a,n,r)}function Lm(e,t,n,r){var a=HN("input");for(var o in n)"signal"!=o&&"element"!=o&&a.setAttribute("input"==o?"type":o,n[o]);a.setAttribute("name",n.signal),a.value=r,t.appendChild(a),a.addEventListener("input",function(){e.update(a.value)}),e.elements=[a],e.set=function(e){a.value=e}}function Am(e,t,n,r){var a={type:"checkbox",name:n.signal};r&&(a.checked=!0);var o=HN("input",a);t.appendChild(o),o.addEventListener("change",function(){e.update(o.checked)}),e.elements=[o],e.set=function(e){o.checked=!!e||null}}function Nm(e,t,r,n){var a=HN("select",{name:r.signal});r.options.forEach(function(e){var t={value:e};Dm(e,n)&&(t.selected=!0),a.appendChild(HN("option",t,e+""))}),t.appendChild(a),a.addEventListener("change",function(){e.update(r.options[a.selectedIndex])}),e.elements=[a],e.set=function(e){for(var t=0,o=r.options.length;t<o;++t)if(Dm(r.options[t],e))return void(a.selectedIndex=t)}}function Pm(e,t,n,r){var a=HN("span",{class:ZN});t.appendChild(a),e.elements=n.options.map(function(t){var o=XN+n.signal+"-"+t,i={id:o,type:"radio",name:n.signal,value:t};Dm(t,r)&&(i.checked=!0);var s=HN("input",i);return s.addEventListener("change",function(){e.update(t)}),a.appendChild(s),a.appendChild(HN("label",{for:o},t+"")),s}),e.set=function(t){for(var r=e.elements,a=0,o=r.length;a<o;++a)Dm(r[a].value,t)&&(r[a].checked=!0)}}function Rm(e,t,n,r){function a(){d.textContent=l.value,e.update(+l.value)}r=r===void 0?(+n.max+ +n.min)/2:r;var o=n.min||N(0,+r)||0,i=n.max||S(100,+r)||100,s=n.step||dn(o,i,100),l=HN("input",{type:"range",name:n.signal,min:o,max:i,step:s});l.value=r;var d=HN("label",{},+r);t.appendChild(l),t.appendChild(d),l.addEventListener("input",a),l.addEventListener("change",a),e.elements=[l],e.set=function(e){l.value=e,d.textContent=e}}function Dm(e,t){return e===t||e+""==t+""}function Im(e,t){if("string"==typeof t)if("undefined"!=typeof document)t=document.querySelector(t);else return e.error("DOM document instance not found."),null;return t.innerHTML="",t}function Mm(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function Fm(e,t){Rh(e+" for \"outer\" push: "+P(t))}function jm(e){this.type=e}function zm(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[];}}/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Um(e,t){if(!e)throw new Error("ASSERT: "+t)}function $m(e){return 48<=e&&57>=e}function Bm(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function Wm(e){return 0<="01234567".indexOf(e)}function qm(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)}function Vm(e){return 10===e||13===e||8232===e||8233===e}function Hm(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&MP.test(y(e))}function Ym(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&FP.test(y(e))}function Gm(){for(var e;pR<uR&&(e=cR.charCodeAt(pR),qm(e)||Vm(e));)++pR}function Zm(e){var t=0,n,r,a;for(r="u"===e?4:2,n=0;n<r;++n)pR<uR&&Bm(cR[pR])?(a=cR[pR++],t=16*t+"0123456789abcdef".indexOf(a.toLowerCase())):Of({},kP,DP);return y(t)}function Xm(){var e,t,n,r;for(e=cR[pR],t=0,"}"===e&&Of({},kP,DP);pR<uR&&(e=cR[pR++],!!Bm(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return((1114111<t||"}"!==e)&&Of({},kP,DP),65535>=t)?y(t):(n=(t-65536>>10)+55296,r=(1023&t-65536)+56320,y(n,r))}function Km(){var e,t;for(e=cR.charCodeAt(pR++),t=y(e),92===e&&(117!==cR.charCodeAt(pR)&&Of({},kP,DP),++pR,e=Zm("u"),(!e||"\\"===e||!Hm(e.charCodeAt(0)))&&Of({},kP,DP),t=e);pR<uR&&(e=cR.charCodeAt(pR),!!Ym(e));)++pR,t+=y(e),92===e&&(t=t.substr(0,t.length-1),117!==cR.charCodeAt(pR)&&Of({},kP,DP),++pR,e=Zm("u"),(!e||"\\"===e||!Ym(e.charCodeAt(0)))&&Of({},kP,DP),t+=e);return t}function Qm(){var e,t;for(e=pR++;pR<uR;){if(t=cR.charCodeAt(pR),92===t)return pR=e,Km();if(Ym(t))++pR;else break}return cR.slice(e,pR)}function Jm(){var e,t,n;return e=pR,t=92===cR.charCodeAt(pR)?Km():Qm(),n=1===t.length?sP:jP.hasOwnProperty(t)?lP:"null"===t?dP:"true"===t||"false"===t?oP:sP,{type:n,value:t,start:e,end:pR}}function ef(){var e=pR,t=cR.charCodeAt(pR),n=cR[pR],r,a,o,i;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++pR,{type:pP,value:y(t),start:e,end:pR};default:if(r=cR.charCodeAt(pR+1),61===r)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return pR+=2,{type:pP,value:y(t)+y(r),start:e,end:pR};case 33:case 61:return pR+=2,61===cR.charCodeAt(pR)&&++pR,{type:pP,value:cR.slice(e,pR),start:e,end:pR};}}return(i=cR.substr(pR,4),">>>="===i)?(pR+=4,{type:pP,value:i,start:e,end:pR}):(o=i.substr(0,3),">>>"===o||"<<="===o||">>="===o)?(pR+=3,{type:pP,value:o,start:e,end:pR}):(a=o.substr(0,2),n===a[1]&&0<="+-<>&|".indexOf(n)||"=>"===a?(pR+=2,{type:pP,value:a,start:e,end:pR}):0<="<>=!+-*%&|^/".indexOf(n)?(++pR,{type:pP,value:n,start:e,end:pR}):void Of({},kP,DP))}function tf(e){for(var t="";pR<uR&&!!Bm(cR[pR]);)t+=cR[pR++];return 0===t.length&&Of({},kP,DP),Hm(cR.charCodeAt(pR))&&Of({},kP,DP),{type:cP,value:parseInt("0x"+t,16),start:e,end:pR}}function nf(e){for(var t="0"+cR[pR++];pR<uR&&!!Wm(cR[pR]);)t+=cR[pR++];return(Hm(cR.charCodeAt(pR))||$m(cR.charCodeAt(pR)))&&Of({},kP,DP),{type:cP,value:parseInt(t,8),octal:!0,start:e,end:pR}}function rf(){var e,t,n;if(n=cR[pR],Um($m(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=pR,e="","."!==n){if(e=cR[pR++],n=cR[pR],"0"===e){if("x"===n||"X"===n)return++pR,tf(t);if(Wm(n))return nf(t);n&&$m(n.charCodeAt(0))&&Of({},kP,DP)}for(;$m(cR.charCodeAt(pR));)e+=cR[pR++];n=cR[pR]}if("."===n){for(e+=cR[pR++];$m(cR.charCodeAt(pR));)e+=cR[pR++];n=cR[pR]}if("e"===n||"E"===n)if(e+=cR[pR++],n=cR[pR],("+"===n||"-"===n)&&(e+=cR[pR++]),$m(cR.charCodeAt(pR)))for(;$m(cR.charCodeAt(pR));)e+=cR[pR++];else Of({},kP,DP);return Hm(cR.charCodeAt(pR))&&Of({},kP,DP),{type:cP,value:parseFloat(e),start:t,end:pR}}function af(){var e="",t=!1,n,r,a,o;for(n=cR[pR],Um("'"===n||"\""===n,"String literal must starts with a quote"),r=pR,++pR;pR<uR;)if(a=cR[pR++],a===n){n="";break}else if("\\"===a)a=cR[pR++],a&&Vm(a.charCodeAt(0))?"\r"===a&&"\n"===cR[pR]&&++pR:"u"===a||"x"===a?"{"===cR[pR]?(++pR,e+=Xm()):e+=Zm(a):"n"===a?e+="\n":"r"===a?e+="\r":"t"===a?e+="\t":"b"===a?e+="\b":"f"===a?e+="\f":"v"===a?e+="\x0B":Wm(a)?(o="01234567".indexOf(a),0!==o&&(t=!0),pR<uR&&Wm(cR[pR])&&(t=!0,o=8*o+"01234567".indexOf(cR[pR++]),0<="0123".indexOf(a)&&pR<uR&&Wm(cR[pR])&&(o=8*o+"01234567".indexOf(cR[pR++]))),e+=y(o)):e+=a;else if(Vm(a.charCodeAt(0)))break;else e+=a;return""!==n&&Of({},kP,DP),{type:uP,value:e,octal:t,start:r,end:pR}}function of(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return 1114111>=parseInt(t,16)?"x":void Of({},AP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){Of({},AP)}try{return new RegExp(e,t)}catch(e){return null}}function sf(){var e,t,n,r,a;for(e=cR[pR],Um("/"===e,"Regular expression literal must start with a slash"),t=cR[pR++],n=!1,r=!1;pR<uR;)if(e=cR[pR++],t+=e,"\\"===e)e=cR[pR++],Vm(e.charCodeAt(0))&&Of({},NP),t+=e;else if(Vm(e.charCodeAt(0)))Of({},NP);else if(n)"]"===e&&(n=!1);else if("/"===e){r=!0;break}else"["===e&&(n=!0);return r||Of({},NP),a=t.substr(1,t.length-2),{value:a,literal:t}}function lf(){var e,t,n;for(t="",n="";pR<uR&&(e=cR[pR],!!Ym(e.charCodeAt(0)));)++pR,"\\"===e&&pR<uR?Of({},kP,DP):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&Of({},AP,n),{value:n,literal:t}}function df(){var e,t,n,r;return mR=null,Gm(),e=pR,t=sf(),n=lf(),r=of(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:pR}}function cf(e){return e.type===sP||e.type===lP||e.type===oP||e.type===dP}function pf(){var e;return(Gm(),pR>=uR)?{type:iP,start:pR,end:pR}:(e=cR.charCodeAt(pR),Hm(e)?Jm():40===e||41===e||59===e?ef():39===e||34===e?af():46===e?$m(cR.charCodeAt(pR+1))?rf():ef():$m(e)?rf():ef())}function uf(){var e;return e=mR,pR=e.end,mR=pf(),pR=e.end,e}function mf(){var e;e=pR,mR=pf(),pR=e}function ff(e){var t=new jm(mP);return t.elements=e,t}function yf(e,t,n){var r=new jm("||"===e||"&&"===e?_P:fP);return r.operator=e,r.left=t,r.right=n,r}function gf(e,t){var n=new jm(yP);return n.callee=e,n.arguments=t,n}function hf(e,t,n){var r=new jm(gP);return r.test=e,r.consequent=t,r.alternate=n,r}function bf(e){var t=new jm(hP);return t.name=e,t}function _f(e){var t=new jm(bP);return t.value=e.value,t.raw=cR.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function vf(e,t,n){var r=new jm(xP);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Sf(e){var t=new jm(vP);return t.properties=e,t}function Tf(e,t,n){var r=new jm(SP);return r.key=t,r.value=n,r.kind=e,r}function kf(e,t){var n=new jm(TP);return n.operator=e,n.argument=t,n.prefix=!0,n}function Of(e,t){var n=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,function(e,t){return Um(t<n.length,"Message reference must be in range"),n[t]}),a;throw a=new Error(r),a.index=pR,a.description=r,a}function Ef(e){e.type===iP&&Of(e,LP),e.type===cP&&Of(e,OP),e.type===uP&&Of(e,EP),e.type===sP&&Of(e,CP),e.type===lP&&Of(e,wP),Of(e,kP,e.value)}function Cf(e){var t=uf();(t.type!==pP||t.value!==e)&&Ef(t)}function wf(e){return mR.type===pP&&mR.value===e}function Lf(e){return mR.type===lP&&mR.value===e}function Af(){var e=[];for(pR=mR.start,Cf("[");!wf("]");)wf(",")?(uf(),e.push(null)):(e.push(Vf()),wf("]")||Cf(","));return uf(),ff(e)}function Nf(){var e;return pR=mR.start,e=uf(),e.type===uP||e.type===cP?(e.octal&&Of(e,PP),_f(e)):bf(e.value)}function Pf(){var e,t,n,r;return pR=mR.start,e=mR,e.type===sP?(n=Nf(),Cf(":"),r=Vf(),Tf("init",n,r)):e.type===iP||e.type===pP?void Ef(e):(t=Nf(),Cf(":"),r=Vf(),Tf("init",t,r))}function Rf(){var e=[],t={},n=String,r,a,o;for(pR=mR.start,Cf("{");!wf("}");)r=Pf(),a=r.key.type===hP?r.key.name:n(r.key.value),o="$"+a,Object.prototype.hasOwnProperty.call(t,o)?Of({},RP):t[o]=!0,e.push(r),wf("}")||Cf(",");return Cf("}"),Sf(e)}function Df(){var e;return Cf("("),e=Hf(),Cf(")"),e}function If(){var e,t,n;if(wf("("))return Df();if(wf("["))return Af();if(wf("{"))return Rf();if(e=mR.type,pR=mR.start,e===sP||zP[mR.value])n=bf(uf().value);else if(e===uP||e===cP)mR.octal&&Of(mR,PP),n=_f(uf());else if(e===lP)throw new Error(IP);else e===oP?(t=uf(),t.value="true"===t.value,n=_f(t)):e===dP?(t=uf(),t.value=null,n=_f(t)):wf("/")||wf("/=")?(n=_f(df()),mf()):Ef(uf());return n}function Mf(){var e=[];if(Cf("("),!wf(")"))for(;pR<uR&&(e.push(Vf()),!wf(")"));)Cf(",");return Cf(")"),e}function Ff(){var e;return pR=mR.start,e=uf(),cf(e)||Ef(e),bf(e.value)}function jf(){return Cf("."),Ff()}function zf(){var e;return Cf("["),e=Hf(),Cf("]"),e}function Uf(){var e,t,n;for(e=If();;)if(wf("."))n=jf(),e=vf(".",e,n);else if(wf("("))t=Mf(),e=gf(e,t);else if(wf("["))n=zf(),e=vf("[",e,n);else break;return e}function $f(){var e=Uf();if(mR.type===pP&&(wf("++")||wf("--")))throw new Error(IP);return e}function Bf(){var e,t;if(mR.type!==pP&&mR.type!==lP)t=$f();else if(wf("++")||wf("--"))throw new Error(IP);else if(wf("+")||wf("-")||wf("~")||wf("!"))e=uf(),t=Bf(),t=kf(e.value,t);else if(Lf("delete")||Lf("void")||Lf("typeof"))throw new Error(IP);else t=$f();return t}function Wf(e){var t=0;if(e.type!==pP&&e.type!==lP)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break;default:}return t}function qf(){var e,t,n,r,a,o,s,l,d,c;if(e=mR,d=Bf(),r=mR,a=Wf(r),0===a)return d;for(r.prec=a,uf(),t=[e,mR],s=Bf(),o=[d,r,s];0<(a=Wf(mR));){for(;2<o.length&&a<=o[o.length-2].prec;)s=o.pop(),l=o.pop().value,d=o.pop(),t.pop(),n=yf(l,d,s),o.push(n);r=uf(),r.prec=a,o.push(r),t.push(mR),n=Bf(),o.push(n)}for(c=o.length-1,n=o[c],t.pop();1<c;)t.pop(),n=yf(o[c-1].value,o[c-2],n),c-=2;return n}function Vf(){var e,t,n;return e=qf(),wf("?")&&(uf(),t=Vf(),Cf(":"),n=Vf(),e=hf(e,t,n)),e}function Hf(){var e=Vf();if(wf(","))throw new Error(IP);return e}function Yf(t,n,r){var a=t+":"+r,o=WP[a];return o&&o[0]===n||(WP[a]=o=[n,n(r)]),o[1]}function Gf(e,t){return Yf("timeFormat",j_,t)(e)}function Zf(e,t,n){return qP.setMonth(e),qP.setDate(t),Gf(qP,n)}function Xf(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function Kf(e,t){var n;return Qh(e)?e:Fh(e)?(n=t.scales[e])&&n.value:void 0}function Qf(e,t,n){var r=ZP+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function Jf(e,t,n,r){if(t[0].type===HP)Qf(n,r,t[0].value);else if(t[0].type===YP)for(e in n.scales)Qf(n,r,e)}function ey(e){return function(t){return e*o(t)}}function ty(e){return function(t){return m(e*t)}}function ny(e){return function(t){return 0>t?-O(-t,e):O(t,e)}}function ry(e,t,n,r){var a=n(e[0]),o=n(yb(e)),i=(o-a)*t;return[r(a-i),r(o-i)]}function ay(e,t,n,r,a){var o=r(t),i=r(e[0]),s=r(yb(e));return[a(o+(i-o)*n),a(o+(s-o)*n)]}function oy(e){return function(t,n,r){var a=Kf(t,(r||this).context);return a&&a.path[e](n)}}function iy(e){var t=this.context.data[e];return t?t.values.value:[]}function sy(e,t,n,r){t[0].type!==HP&&Rh("First argument to data functions must be a string literal.");var a=t[0].value,o=XP+a;r.hasOwnProperty(o)||(r[o]=n.getData(a).tuplesRef())}function ly(e){return e.data}function dy(e,t){var n=iy.call(t,e);return n.root&&n.root.lookup||eR}function cy(e,t){return e===t||e!==e&&t!==t||Ih(e)&&Ih(t)&&e.length===t.length&&py(e,t)}function py(e,t){for(var r=0,a=e.length;r<a;++r)if(!cy(e[r],t[r]))return!1;return!0}function uy(e){return function(t){for(var n in e)if(!cy(t[n],e[n]))return!1;return!0}}function my(e,t){for(var r=t.fields,a=t.values,o=t.getter||(t.getter=[]),s=r.length,n=0,i;n<s;++n)if(o[n]=o[n]||jh(r[n]),i=o[n](e),lb(i)&&(i=bb(i)),lb(a[n])&&(a[n]=bb(a[n])),t[nR+r[n]]){if(lb(a[n][0])&&(a[n]=a[n].map(bb)),!tR(i,a[n],!0,!1))return!1;}else if(i!==a[n])return!1;return!0}function fy(e,t){for(var r=t.intervals,a=r.length,n=0,o,i,s;n<a;++n){if(i=r[n].extent,o=r[n].getter||(r[n].getter=jh(r[n].field)),s=o(e),!i||i[0]===i[1])return!1;if(lb(s)&&(s=bb(s)),lb(i[0])&&(i=r[n].extent=i.map(bb)),db(i[0])&&!tR(s,i))return!1;if(Fh(i[0])&&0>i.indexOf(s))return!1}return!0}function yy(e,t,r,a){for(var o=this.context.data[e],s=o?o.values.value:[],l=o?o[oR]&&o[oR].value:void 0,d=r===rR,c=s.length,n=0,i,p,u,m,f;n<c;++n)if(i=s[n],l&&d){if(p=p||{},u=p[m=i.unit]||0,-1===u)continue;if(f=a(t,i),p[m]=f?-1:++u,f&&1===l.size)return!0;if(!f&&u===l.get(m).count)return!1}else if(f=a(t,i),d^f)return f;return c&&d}function gy(e,t,n){return yy.call(this,e,t,n,my)}function hy(e,t,n,r){t[0].type!==HP&&Rh("First argument to indata must be a string literal.");var a=t[0].value,o=2<=t.length&&t[t.length-1].value,i="unit",s=GP+i;o!==rR||r.hasOwnProperty(s)||(r[s]=n.getData(a).indataRef(n,i)),sy(e,t,n,r)}function by(e,t,r,a){var o=this.context.data[e],s=o?o.values.value:[],l=o?o[oR]&&o[oR].value:void 0,d=s[0],c=0,i,n,p,u,m;if(d){for(i=t?d.encodings.length:d.fields.length;c<i;++c)if(t&&d.encodings[c]===t||r&&d.fields[c]===r){n=c,u=d[nR+d.fields[c]];break}return l&&1===l.size&&(a=aR),l&&a===rR?(m=s.reduce(function(e,t){var r=e[t.unit]||(e[t.unit]=[]);return r.push({unit:t.unit,value:t.values[n]}),e},{}),p=Object.keys(m).map(function(e){return{unit:e,value:u?xy(m[e],aR):_y(m[e],aR)}})):p=s.map(function(e){return{unit:e.unit,value:e.values[n]}}),u?xy(p,a):_y(p,a)}}function _y(e,t){for(var r={},a=0,o={},s=[],l=0,i=e.length,n,d,c,p;l<i;++l)n=e[l],d=n.unit,p=n.value,r[d]||(r[d]=++a),(c=o[p])||(o[p]=c={value:p,units:{},count:0}),c.units[d]||(c.units[d]=++c.count);for(p in o)c=o[p],t===rR&&c.count!==a||s.push(c.value);return s.length?s:void 0}function xy(e,t){for(var r=t===rR?Sy:vy,a=0,o=e.length,n,i,s,l;a<o;++a)n=e[a].value,lb(n[0])&&(n=n.map(bb)),s=n[0],l=n[1],s>l&&(l=n[0],s=n[1]),i=i?r(i,s,l):[s,l];return i&&i.length&&+i[0]!=+i[1]?i:void 0}function vy(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function Sy(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function Ty(e,t,n){return 1===arguments.length?iR[e]:(iR[e]=t,n&&(dR[e]=n),yR&&(yR.functions[e]=lR+e),this)}function ky(e){return e===bR?hR:e||hR}function Oy(e,t){var n=e.merge?Ey:e.stream?Cy:e.type?wy:Rh("Invalid stream specification: "+P(e));return n(e,t)}function Ey(e,t){var n=e.merge.map(function(e){return Oy(e,t)}),r=Ly({merge:n},e,t);return t.addStream(r).id}function Cy(e,t){var n=Oy(e.stream,t),r=Ly({stream:n},e,t);return t.addStream(r).id}function wy(e,t){var n=t.event(ky(e.source),e.type),r=Ly({stream:n},e,t);return 1===Object.keys(r).length?n:t.addStream(r).id}function Ly(e,t,n){var r=t.between;return r&&(2!==r.length&&Rh("Stream \"between\" parameter must have 2 entries: "+P(t)),e.between=[Oy(r[0],n),Oy(r[1],n)]),r=t.filter?Kh(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Ay(t.marktype,t.markname,t.markrole)),t.source===bR&&r.push("inScope(event.item)"),r.length&&(e.filter=gR("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Ay(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}function Ny(e){return iI.hasOwnProperty(e)}function Py(e,t,r,a,o){for(var i=0,s=e.length,n;t<s;++t){if(n=e[t],!i&&n===r)return t;o&&0<=o.indexOf(n)?--i:a&&0<=a.indexOf(n)&&++i}return t}function Ry(e){for(var t=[],r=0,a=e.length,n=0;n<a;)n=Py(e,n,ER,vR+TR,SR+kR),t.push(e.substring(r,n).trim()),r=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function Dy(e){return"["===e[0]?Iy(e):My(e)}function Iy(e){var t=e.length,n=1,r,a;if(n=Py(e,n,SR,vR,SR),n===t)throw"Empty between selector: "+e;if(r=Ry(e.substring(1,n)),2!==r.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wR)throw"Expected '>' after between selector: "+e;return(r=r.map(Dy),a=Dy(e.slice(1).trim()),a.between)?{between:r,stream:a}:(a.between=r,a)}function My(e){var t={source:oI},r=[],a=[0,0],o=0,s=0,l=e.length,d=0,i,c;if(e[l-1]===kR){if(d=e.lastIndexOf(TR),0<=d){try{a=Fy(e.substring(d+1,l-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,d).trim(),l=e.length}else throw"Unmatched right brace: "+e;d=0}if(!l)throw e;if(e[0]===CR&&(o=++d),i=Py(e,d,OR),i<l&&(r.push(e.substring(s,i).trim()),s=d=++i),d=Py(e,d,vR),d===l)r.push(e.substring(s,l).trim());else if(r.push(e.substring(s,d).trim()),c=[],s=++d,s===l)throw"Unmatched left bracket: "+e;for(;d<l;){if(d=Py(e,d,SR),d===l)throw"Unmatched left bracket: "+e;if(c.push(e.substring(s,d).trim()),d<l-1&&e[++d]!==vR)throw"Expected left bracket: "+e;s=++d}if(!(l=r.length)||GT.test(r[l-1]))throw"Invalid event selector: "+e;return 1<l?(t.type=r[1],o?t.markname=r[0].slice(1):Ny(r[0])?t.marktype=r[0]:t.source=r[0]):t.type=r[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=c&&(t.filter=c),a[0]&&(t.throttle=a[0]),a[1]&&(t.debounce=a[1]),t}function Fy(e){var t=e.split(ER);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}function jy(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function zy(e,t,n,r){return new jy(e,t,n,r)}function Uy(e,t){return zy("operator",e,t)}function $y(e){var t={$ref:e.id};return 0>e.id&&(e.refs=e.refs||[]).push(t),t}function By(e,t){return t?{$field:e,$name:t}:{$field:e}}function Wy(e,t){return{$compare:e,$order:t}}function qy(e){return{$key:e}}function Vy(e){return Mh(e)?(e.order===IR?"-":"+")+Hy(e.op,e.field):""}function Hy(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function Yy(e){return e&&e.signal}function Gy(e,t){return null==e?t:e}function Zy(e){return function(t,n,r){return zy(e,n,t||void 0,r)}}function Xy(e){return pD.hasOwnProperty(e)}function Ky(e){return"quantile"===e}function Qy(e,t){var n=e.type||"linear";cD.hasOwnProperty(n)||Rh("Unrecognized scale type: "+P(n)),t.addScale(e.name,{type:n,domain:void 0})}function Jy(e,t){var n=t.getScale(e.name).params,r;for(r in n.domain=rg(e.domain,e,t),null!=e.range&&(n.range=fg(e,t,n)),null!=e.interpolate&&mg(e.interpolate,n),null!=e.nice&&ug(e.nice,n),e)n.hasOwnProperty(r)||"name"===r||(n[r]=eg(e[r],t))}function eg(e,t){return Mh(e)?e.signal?t.signalRef(e.signal):Rh("Unsupported object: "+P(e)):e}function tg(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return eg(e,t)})}function ng(e){Rh("Can not find data set: "+P(e))}function rg(e,t,n){return e?e.signal?n.signalRef(e.signal):(Ih(e)?ag:e.fields?ig:og)(e,t,n):void((null!=t.domainMin||null!=t.domainMax)&&Rh("No scale domain defined for domainMin/domainMax to override."))}function ag(e,t,n){return e.map(function(e){return eg(e,n)})}function og(e,t,n){var r=n.getData(e.data);return r||ng(e.data),Xy(t.type)?r.valuesRef(n,e.field,dg(e.sort,!1)):Ky(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ig(e,t,n){var r=e.data,a=e.fields.reduce(function(e,t){return t=Fh(t)?{data:r,field:t}:Ih(t)||t.signal?sg(t,n):t,e.push(t),e},[]);return(Xy(t.type)?lg:Ky(t.type)?cg:pg)(e,n,a)}function sg(e,t){var n="_:vega:_"+lD++,r=zR({});return Ih(e)?r.value={$ingest:e}:e.signal&&t.signalRef("setdata("+P(n)+","+e.signal+")"),t.addDataPipeline(n,[r,aD({})]),{data:n,field:"data"}}function lg(e,t,n){var r,o,a,i;return r=n.map(function(e){var n=t.getData(e.data);return n||ng(e.data),n.countsRef(t,e.field)}),o=t.add(MR({groupby:DR,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(zR({pulse:$y(o)})),i=t.add(sD({field:DR,sort:t.sortRef(dg(e.sort,!0)),pulse:$y(a)})),$y(i)}function dg(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?Rh("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&Rh("Multiple domain scales support op count only."):Rh("No field provided for sort aggregate op: "+e.op):Mh(e)?e.field="key":e={field:"key"}),e}function cg(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||ng(e.data),n.domainRef(t,e.field)});return $y(t.add(ZR({values:r})))}function pg(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||ng(e.data),n.extentRef(t,e.field)});return $y(t.add(GR({extents:r})))}function ug(e,t){t.nice=Mh(e)?{interval:eg(e.interval),step:eg(e.step)}:eg(e)}function mg(e,t){t.interpolate=eg(e.type||e),null!=e.gamma&&(t.interpolateGamma=eg(e.gamma))}function fg(e,t,n){var r=e.range,a=t.config.range;if(r.signal)return t.signalRef(r.signal);if(Fh(r)){if(a&&a.hasOwnProperty(r))return e=nb({},e,{range:a[r]}),fg(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Xy(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Rh("Unrecognized scale range value: "+P(r))}else{if(r.scheme)return n.scheme=eg(r.scheme,t),r.extent&&(n.schemeExtent=tg(r.extent,t)),void(r.count&&(n.schemeCount=eg(r.count,t)));if(r.step)return void(n.rangeStep=eg(r.step,t));if(Xy(e.type)&&!Ih(r))return rg(r,e,t);Ih(r)||Rh("Unsupported range type: "+P(r))}return r.map(function(e){return eg(e,t)})}function yg(e,t){return Ih(e)?e.map(function(e){return yg(e,t)}):Mh(e)?e.signal?t.signalRef(e.signal):Rh("Unsupported parameter object: "+P(e)):e}function gg(e,t,n,r){var a,o,i;if(e.signal)a="datum",i=PD(e.signal,t,n,r);else if(e.group||e.parent){for(o=S(1,e.level||1),a="item";0<o--;)a+=".mark.group";e.parent?(i=e.parent,a+=".datum"):i=e.group}else e.datum?(a="datum",i=e.datum):Rh("Invalid field reference: "+P(e));return e.signal||(Fh(i)?(r[i]=1,i=Dh(i).map(P).join("][")):i=gg(i,t,n,r)),a+"["+i+"]"}function hg(e,t){if(!Fh(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function bg(e,t,n,r){if(Fh(e))a=ZP+e,n.hasOwnProperty(a)||(n[a]=t.scaleRef(e)),a=P(a);else{for(var a in t.scales)n[ZP+a]=t.scaleRef(a);a=P(ZP)+"+"+(e.signal?"("+PD(e.signal,t,n,r)+")":RD(e,t,n,r))}return"_["+a+"]"}function _g(e,t,n,r){var a={},o="var o=item,datum=o.datum,$;",i,s,l;for(i in e)s=e[i],Ih(s)?o+=zD(i,s,r,n,a):(l=FD(i,s,r,n,a),o+=jD("o",i,l));return o+=AD(e,t),o+="return 1;",{$expr:o,$fields:Object.keys(a),$output:Object.keys(e)}}function xg(e){return Mh(e)?e:{value:e}}function vg(e,t,n){return null==n?0:(e[t]={value:n},1)}function Sg(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=nb(e[r]||{},t[r]));return e}function Tg(e,t,n,r,a,o){var i,s;for(s in o=o||{},o.encoders={$encode:i={}},e=kg(e,t,n,r,a.config),e)i[s]=_g(e[s],t,o,a);return o}function kg(e,t,n,r,a){var o={},i,s,l;for(i in("legend"==n||0===(n+"").indexOf("axis"))&&(n=null),l=n===$D?a.group:n===UD?nb({},a.mark,a[t]):null,l)s=Og(i,e)||("fill"===i||"stroke"===i)&&(Og("fill",e)||Og("stroke",e)),s||(o[i]={value:l[i]});return Kh(r).forEach(function(t){var n=a.style&&a.style[t];for(var r in n)Og(r,e)||(o[r]={value:n[r]})}),e=nb({},e),e.enter=nb(o,e.enter),e}function Og(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function Eg(e,t,r){var a={},o,s,i;for(s=0,i=e.params.length;s<i;++s)o=e.params[s],a[o.name]=Cg(o,t,r);return a}function Cg(e,t,n){var r=e.type,a=t[e.name];if("index"===r)return Lg(e,t,n);return void 0===a?void(e.required&&Rh("Missing required "+P(t.type)+" parameter: "+P(e.name))):"param"===r?Ag(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!Yy(a)?a.map(function(t){return wg(e,t,n)}):wg(e,a,n)}function wg(e,t,n){var r=e.type;if(Yy(t))return Ig(r)?Rh("Expression references can not be signals."):Mg(r)?n.fieldRef(t):Fg(r)?n.compareRef(t):n.signalRef(t.signal);var a=e.expr||Mg(r);return a&&Pg(t)?gR(t.expr,n):a&&Rg(t)?By(t.field):Ig(r)?gR(t,n):Dg(r)?$y(n.getData(t).values):Mg(r)?By(t):Fg(r)?n.compareRef(t):t}function Lg(e,t,n){return Fh(t.from)||Rh("Lookup \"from\" parameter must be a string literal."),n.getData(t.from).lookupRef(n,t.key)}function Ag(e,t,n){var r=t[e.name];return e.array?(Ih(r)||Rh("Expected an array of sub-parameters. Instead: "+P(r)),r.map(function(t){return Ng(e,t,n)})):Ng(e,r,n)}function Ng(e,t,r){var a,o,s,l,i;for(l=0,i=e.params.length;l<i;++l){for(s in o=e.params[l],o.key)if(o.key[s]!==t[s]){o=null;break}if(o)break}return o||Rh("Unsupported parameter: "+P(t)),a=nb(Eg(o,t,r),o.key),$y(r.add(KR(a)))}function Pg(e){return e&&e.expr}function Rg(e){return e&&e.field}function Dg(e){return"data"===e}function Ig(e){return"expr"===e}function Mg(e){return"field"===e}function Fg(e){return"compare"===e}function jg(e,t,n,r,a){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=a,this.index={}}function zg(e){return Fh(e)?e:null}function Ug(e,t,r){var a=Hy(r.op,r.field),o;if(t.ops){for(var s=0,i=t.as.length;s<i;++s)if(t.as[s]===a)return;}else t.ops=["count"],t.fields=[null],t.as=["count"];r.op&&(t.ops.push((o=r.op.signal)?e.signalRef(o):r.op),t.fields.push(e.fieldRef(r.field)),t.as.push(a))}function $g(e,t,n,r,a,o,i){var s=t[n]||(t[n]={}),l=Vy(o),d=zg(a),c,p;if(null!=d&&(e=t.scope,d+=l?"|"+l:"",c=s[d]),!c){var u=o?{field:DR,pulse:t.countsRef(e,a,o)}:{field:e.fieldRef(a),pulse:$y(t.output)};l&&(u.sort=e.sortRef(o)),p=e.add(zy(r,void 0,u)),i&&(t.index[a]=p),c=$y(p),null!=d&&(s[d]=c)}return c}function Bg(e,t,n){var r=qg(t,n[1].encode,"fontSize",TD);if(e.size)return{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+r+")"};var a=qg(t,n[0].encode,"size");return S(T(u(a)),r)}function Wg(e){var t={},n=vg(t,"fill",e.fillColor)+vg(t,"stroke",e.strokeColor)+vg(t,"strokeWidth",e.strokeWidth)+vg(t,"strokeDash",e.strokeDash)+vg(t,"cornerRadius",e.cornerRadius);return n?t:void 0}function qg(e,t,n,r){var a=t&&(t.update&&t.update[n]||t.enter&&t.enter[n]);return+(a?a.value:r&&(a=e.config.style[r])&&a[n])}function Vg(e,t,n,r){var a=e.text,o=e.orient||t.orient,i=e.anchor||t.anchor,s=o===fD||o===mD?-1:1,l=o===mD||o===yD,d={group:l?"width":"height"},c={},p,u,m,f,y,g;return c.enter=p={opacity:{value:0}},vg(p,"fill",t.color),vg(p,"font",t.font),vg(p,"fontSize",t.fontSize),vg(p,"fontWeight",t.fontWeight),c.exit={opacity:{value:0}},c.update=u={opacity:{value:1},text:Mh(a)?a:{value:a+""},offset:xg((null==e.offset?t.offset:e.offset)||0)},"start"===i?(y=0,g="left"):"end"===i?(y=1,g="right"):(y=0.5,g="center"),m={field:d,mult:y},f=0>s?{value:0}:l?{field:{group:"height"}}:{field:{group:"width"}},l?(u.x=m,u.y=f,u.angle={value:0},u.baseline={value:o===mD?"bottom":"top"}):(u.x=f,u.y=m,u.angle={value:90*s},u.baseline={value:"bottom"}),u.align={value:g},u.limit={field:d},vg(u,"angle",t.angle),vg(u,"baseline",t.baseline),vg(u,"limit",t.limit),VD(GD,qD,e.style||OD,null,r,c,n)}function Hg(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(rI(e,t))}),e.on&&e.on.forEach(function(n){cI(n,t,e.name)}),t.addDataPipeline(e.name,Yg(e,t,n))}function Yg(e,r,a){var o=[],s=null,l=!1,d=!1,c,p,i,n,t;for(e.values?o.push(s=Gg({$ingest:e.values,$format:e.format})):e.url?o.push(s=Gg({$request:e.url,$format:e.format})):e.source&&(s=c=Kh(e.source).map(function(e){return $y(r.getData(e).output)}),o.push(null)),p=0,i=a.length;p<i;++p)n=a[p],t=n.metadata,s||t.source||o.push(s=Gg()),o.push(n),t.generates&&(d=!0),t.modifies&&!d&&(l=!0),t.source?s=n:t.changes&&(s=null);return c&&(i=c.length-1,o[0]=tD({derive:l,pulse:i?c:c[0]}),(l||i)&&o.splice(1,0,Gg())),s||o.push(Gg()),o.push(aD({})),o}function Gg(e){var t=zR({},e);return t.metadata={source:!0},t}function Zg(e,t){return{scale:e.scale,range:t}}function Xg(e,t){var n=t.config,r,a,o,i,s;return t.background=e.background||n.background,t.eventConfig=n.events,s=$y(t.root=t.add(Uy())),t.addSignal("width",e.width||-1),t.addSignal("height",e.height||-1),t.addSignal("padding",nP(e.padding,n)),t.addSignal("autosize",tP(e.autosize,n)),Kh(e.signals).forEach(function(e){SI[e.name]||aP(e,t)}),a=t.add(zR()),o=Sg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),o=t.add(BR(Tg(o,HD,$D,e.style,t,{pulse:$y(a)}))),i=t.add(iD({layout:t.objectProperty(e.layout),legendMargin:n.legendMargin,autosize:t.signalRef("autosize"),mark:s,pulse:$y(o)})),t.operators.pop(),t.pushState($y(o),$y(i),null),vI(e,t,!0),t.operators.push(i),r=t.add(jR({mark:s,pulse:$y(i)})),r=t.add(nD({pulse:$y(r)})),r=t.add(aD({pulse:$y(r)})),t.addData("root",new jg(t,a,a,r)),t}function Kg(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Qg(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Jg(e){return(Ih(e)?eh:th)(e)}function eh(e){for(var t="[",r=0,a=e.length,n;r<a;++r)n=e[r],t+=(0<r?",":"")+(Mh(n)?n.signal||Jg(n):P(n));return t+"]"}function th(e){var t="{",n=0,r,a;for(r in e)a=e[r],t+=(1<++n?",":"")+P(r)+":"+(Mh(a)?a.signal||Jg(a):P(a));return t+"}"}function nh(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:wI},area:{fill:wI},image:null,line:{stroke:wI,strokeWidth:CI},path:{stroke:wI},rect:{fill:wI},rule:{stroke:LI},shape:{stroke:wI},symbol:{fill:wI,size:64},text:{fill:LI,font:OI,fontSize:11},style:{"guide-label":{fill:LI,font:OI,fontSize:10},"guide-title":{fill:LI,font:OI,fontSize:11,fontWeight:"bold"},"group-title":{fill:LI,font:OI,fontSize:13,fontWeight:"bold"},point:{size:EI,strokeWidth:CI,shape:"circle"},circle:{size:EI,strokeWidth:CI},square:{size:EI,strokeWidth:CI,shape:"square"},cell:{fill:"transparent",stroke:NI}},axis:{minExtent:0,maxExtent:200,bandPosition:0.5,domain:!0,domainWidth:1,domainColor:AI,grid:!1,gridWidth:1,gridColor:NI,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:AI,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:2},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:NI,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolFillColor:"transparent",symbolStrokeColor:AI,symbolStrokeWidth:1.5,titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:2},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[0.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[0.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function rh(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function ah(e,t){return rh(["_"],e,t)}function oh(e,t){return rh(["datum","_"],e,t)}function ih(e,t){return rh(["event"],e,t)}function sh(e,t){return rh(["_","event"],e,t)}function lh(e,t){return rh(["item","_"],e,t)}function dh(e,t,n){n=n||{};var r,a;for(r in e)a=e[r],a&&a.$expr&&a.$params&&dh(a.$params,t,n),n[r]=Ih(a)?a.map(function(e){return ph(e,t)}):ph(a,t);return n}function ph(e,t){if(!e||!Mh(e))return e;for(var r=0,a=PI.length,n;r<a;++r)if(n=PI[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function uh(e){return(e+"").toLowerCase()}function mh(e){return"operator"===uh(e)}function fh(e){return"collect"===uh(e)}function yh(e,t){var n,r;e.params&&(!(n=t.get(e.id))&&Rh("Invalid operator id: "+e.id),r=dh(e.params,t),t.dataflow.connect(n,n.parameters(r)))}function gh(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function hh(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function bh(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===UI?r.left+r.right:0)}function _h(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===UI?r.top+r.bottom:0)}function xh(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n.width,a=n.height,o=n.padding;e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=bh(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=_h(e,n.size),t()},{size:a});var i=e.add(null,t,{pad:o});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=a.rank+1,i.rank=o.rank+1}function vh(e,t){return t.modified&&Ih(t.input.value)&&e.indexOf("_:vega:_")}function Sh(e,t){return!("parent"===e||t instanceof cx.Proxy)}function Th(e,t){var n=this;t=t||{},Ht.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||IT.Canvas,n._scenegraph=new ro;var r=n._scenegraph.root;n._renderer=null,n._redraw=!0,n._handler=new so().scene(r),n._eventListeners=[],n._preventDefault=!1;var a=zI(n,e,t.functions);n._runtime=a,n._signals=a.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:nb({},e)}}),a.root&&a.root.set(r),r.source=a.data.root.input,n.pulse(a.data.root.input,n.changeset().insert(r.items)),n._background=a.background||null,n._eventConfig=Tm(a.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=bh(n,n._width),n._viewHeight=_h(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,xh(n),WN(n)}function kh(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:Rh("Unrecognized signal name: "+P(t))}var Oh=Math.sign,Eh=Math.E,Ch=Math.asin,wh=Math.atan2,Lh=Number.MAX_VALUE,Ah=Math.SQRT2,Nh=Math.LN10,Ph=function(e,t,n){return e.fields=t||[],e.fname=n,e},Rh=function(e){throw Error(e)},Dh=function(e){function t(){r.push(n+e.substring(s,i)),n="",s=i+1}var r=[],a=null,o=0,l=e.length,n="",s,i,d;for(e+="",s=i=0;i<l;++i)if(d=e[i],"\\"===d)n+=e.substring(s,i),s=++i;else if(d===a)t(),a=null,o=-1;else if(a)continue;else s===o&&"\""===d?(s=i+1,a=d):s===o&&"'"===d?(s=i+1,a=d):"."!==d||o?"["===d?(i>s&&t(),o=s=i+1):"]"==d&&(o||Rh("Access path missing open bracket: "+e),0<o&&t(),o=0,s=i+1):i>s?t():s=i+1;return o&&Rh("Access path missing closing bracket: "+e),a&&Rh("Access path missing closing quote: "+e),i>s&&(i++,t()),r},Ih=Array.isArray,Mh=function(e){return e===Object(e)},Fh=function(e){return"string"==typeof e},jh=function(e,t){var n=Dh(e),r="return _["+n.map(P).join("][")+"];";return Ph(Function("_",r),[e=1===n.length?n[0]:e],t||e)},zh=[],Uh=jh("id"),id=Ph(function(e){return e},zh,"identity"),$h=Ph(function(){return 0},zh,"zero"),Bh=Ph(function(){return 1},zh,"one"),Wh=Ph(function(){return!0},zh,"true"),qh=Ph(function(){return!1},zh,"false"),Vh=0,Hh=1,Yh=2,Gh=3,Zh=4,Xh=function(e){var t=e||Vh;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=Hh&&n("error","ERROR",arguments),this},warn:function(){return t>=Yh&&n("warn","WARN",arguments),this},info:function(){return t>=Gh&&n("log","INFO",arguments),this},debug:function(){return t>=Zh&&n("log","DEBUG",arguments),this}}},Kh=function(e){return null==e?[]:Ih(e)?e:[e]},Qh=function(e){return"function"==typeof e},Jh=function(e,r){var a=[],o=(e=Kh(e)).map(function(e,t){return null==e?null:(a.push(t),Qh(e)?e:Dh(e).map(P).join("]["))}),s=a.length-1,n=Kh(r),l="var u,v;return ",c,i,p,m,u,f,d,t,y;if(0>s)return null;for(i=0;i<=s;++i)c=a[i],p=o[c],Qh(p)?(f="f"+c,m="(u=this."+f+"(a))",u="(v=this."+f+"(b))",(d=d||{})[f]=p):(m="(u=a["+p+"])",u="(v=b["+p+"])"),f="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===n[c]?(y=-1,t=1):(y=1,t=-1),l+="("+m+"<"+u+"||u==null)&&v!=null?"+t+":(u>v||v==null)&&u!=null?"+y+":"+f+"!==u&&v===v?"+t+":v!==v&&u===u?"+y+(c<s?":":":0");return p=Function("a","b",l+";"),d&&(p=p.bind(d)),e=e.reduce(function(e,t){return Qh(t)?(w(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),Ph(p,Object.keys(e))},eb=function(e){return Qh(e)?e:function(){return e}},tb=function(t,e){function n(){e(a),r=a=null}var r,a;return function(o){a=o,r&&clearTimeout(r),r=setTimeout(n,t)}},nb=function(e){for(var t=1,n=arguments.length,r,a;t<n;++t)for(a in r=arguments[t],r)e[a]=r[a];return e},rb=function(e,t){var r=-1,o=e.length,n,a,i,s,l;if(null==t){for(;++r<o;)if(a=e[r],null!=a&&a>=a){n=i=a;break}for(s=l=r;++r<o;)a=e[r],null!=a&&(n>a&&(n=a,s=r),i<a&&(i=a,l=r))}else{for(;++r<o;)if(a=t(e[r],r,e),null!=a&&a>=a){n=i=a;break}for(s=l=r;++r<o;)a=t(e[r],r,e),null!=a&&(n>a&&(n=a,s=r),i<a&&(i=a,l=r))}return[s,l]},ab={},ob=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==ab}var n={},r,a;return r={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,a){return t(e)||(++r.size,n[e]===ab&&--r.empty),n[e]=a,this},delete:function(e){return t(e)&&(--r.size,++r.empty,n[e]=ab),this},clear:function(){r.size=r.empty=0,r.object=n={}},test:function(e){return arguments.length?(a=e,r):a},clean:function(){var e={},t=0,o,i;for(o in n)i=n[o],i===ab||a&&a(i)||(e[o]=i,++t);r.size=t,r.empty=0,r.object=n=e}},e&&Object.keys(e).forEach(function(t){r.set(t,e[t])}),r},ib=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},sb=function(e){return"boolean"==typeof e},lb=function(e){return"[object Date]"===Object.prototype.toString.call(e)},db=function(e){return"number"==typeof e},cb=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},pb=function(e){e=e?Kh(e):e;var t=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+Dh(e).map(P).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return Ph(t,e,"key")},ub=function(e,t,n,r){var a=t.length,o=n.length;if(!o)return t;if(!a)return n;for(var s=r||new t.constructor(a+o),l=0,d=0,c=0;l<a&&d<o;++c)s[c]=0<e(t[l],n[d])?n[d++]:t[l++];for(;l<a;++l,++c)s[c]=t[l];for(;d<o;++d,++c)s[c]=n[d];return s},mb=function(e,t){for(var n="";0<=--t;)n+=e;return n},fb=function(e,t,r,a){var o=r||" ",i=e+"",s=t-i.length;return 0>=s?i:"left"===a?mb(o,s)+i:"center"===a?mb(o,~~(s/2))+i+mb(o,T(s/2)):i+mb(o,s)},yb=function(e){return e[e.length-1]},gb=function(e){return null==e||""===e?null:e&&"false"!=e&&"0"!=e&&!!e},hb=function(e,t){return t=t||v,null==e||""===e?null:t(e)},bb=function(e){return null==e||""===e?null:+e},_b=function(e){return null==e||""===e?null:e+""},xb=function(e){for(var t={},r=0,a=e.length;r<a;++r)t[e[r]]=1;return t},vb=function(t,r,a,o){var i=null==o?"\u2026":o,e=t+"",s=e.length,n=S(0,r-i.length);return s<=r?e:"left"===a?i+e.slice(s-n):"center"===a?e.slice(0,T(n/2))+i+e.slice(s-~~(n/2)):e.slice(0,n)+i},Sb=function(e,r,a){if(e){var o=0,i=e.length,n;if(r)for(;o<i;++o)(n=r(e[o]))&&a(n,o,e);else e.forEach(a)}},Tb=Symbol("vega_id"),kb=1,Ob="_:mod:_",Eb=q.prototype;Eb.set=function(e,t,n,r){var a=this,o=a[e],i=a[Ob];return null!=t&&0<=t?(o[t]!==n||r)&&(o[t]=n,i[t+":"+e]=-1,i[e]=-1):(o!==n||r)&&(a[e]=n,i[e]=Ih(n)?1+n.length:-1),a},Eb.modified=function(e,t){var n=this[Ob],r;if(!arguments.length){for(r in n)if(n[r])return!0;return!1}if(Ih(e)){for(r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}return null!=t&&0<=t?t+1<n[e]||!!n[t+":"+e]:!!n[e]},Eb.clear=function(){return this[Ob]={},this};var Cb=0,wb=new q,Lb=V.prototype;Lb.targets=function(){return this._targets||(this._targets=k(Uh))},Lb.set=function(e){return this.value===e?0:(this.value=e,1)},Lb.skip=H(1),Lb.modified=H(2),Lb.parameters=function(e,t){function r(e,n,r){r instanceof V?(r!==a&&(t&&r.targets().add(a),l.push(r)),s.push({op:r,name:e,index:n})):o.set(e,n,r)}t=!1!==t;var a=this,o=a._argval=a._argval||new q,s=a._argops=a._argops||[],l=[],d,c,p,n;for(d in e)if(c=e[d],d==="pulse")Kh(c).forEach(function(e){e instanceof V?e!==a&&(e.targets().add(a),l.push(e)):Rh("Pulse parameters must be operator instances.")}),a.source=c;else if(Ih(c))for(o.set(d,-1,Array(p=c.length)),n=0;n<p;++n)r(d,n,c[n]);else r(d,-1,c);return this.marshall().clear(),l},Lb.marshall=function(e){var t=this._argval||wb,r=this._argops,a,o,i,n,s;if(r&&(i=r.length))for(o=0;o<i;++o)a=r[o],n=a.op,s=n.modified()&&n.stamp===e,t.set(a.name,a.index,n.value,s);return t},Lb.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},Lb.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var Ab=0,Nb=Y.prototype;Nb._filter=Wh,Nb._apply=id,Nb.targets=function(){return this._targets||(this._targets=k(Uh))},Nb.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},Nb.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),r=this._targets,a=r?r.length:0,n=0;n<a;++n)r[n].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},Nb.filter=function(e){var t=G(e);return this.targets().add(t),t},Nb.apply=function(e){var t=G(null,e);return this.targets().add(t),t},Nb.merge=function(){var e=G();this.targets().add(e);for(var t=0,r=arguments.length;t<r;++t)arguments[t].targets().add(e);return e},Nb.throttle=function(e){var n=-1;return this.filter(function(){var t=Date.now();return t-n>e?(n=t,1):0})},Nb.debounce=function(e){var t=G();return this.targets().add(G(null,null,tb(e,function(n){var e=n.dataflow;t.receive(n),e&&e.run&&e.run()}))),t},Nb.between=function(e,t){var n=!1;return e.targets().add(G(null,null,function(){n=!0})),t.targets().add(G(null,null,function(){n=!1})),this.filter(function(){return n})};var Pb="$";Z.prototype=X.prototype={constructor:Z,has:function(e){return Pb+e in this},get:function(e){return this[Pb+e]},set:function(e,t){return this[Pb+e]=t,this},remove:function(e){var t=Pb+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Pb&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Pb&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Pb&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Pb&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Pb&&++e;return e},empty:function(){for(var e in this)if(e[0]===Pb)return!1;return!0},each:function(e){for(var t in this)t[0]===Pb&&e(this[t],t.slice(1),this)}};var Rb=function(){function e(t,s,l,d){if(s>=r.length)return null!=a&&t.sort(a),null==o?t:o(t);for(var c=-1,i=t.length,n=r[s++],p=X(),u=l(),m,f,y;++c<i;)(y=p.get(m=n(f=t[c])+""))?y.push(f):p.set(m,[f]);return p.each(function(t,n){d(u,n,e(t,s,l,d))}),u}function t(e,a){if(++a>r.length)return e;var i=n[a-1],s;return null!=o&&a>=r.length?s=e.entries():(s=[],e.each(function(e,n){s.push({key:n,values:t(e,a)})})),null==i?s:s.sort(function(e,t){return i(e.key,t.key)})}var r=[],n=[],a,o,i;return i={object:function(t){return e(t,0,K,Q)},map:function(t){return e(t,0,J,ee)},entries:function(n){return t(e(n,0,J,ee),0)},key:function(e){return r.push(e),i},sortKeys:function(e){return n[r.length-1]=e,i},sortValues:function(e){return a=e,i},rollup:function(e){return o=e,i}}},Db=X.prototype;te.prototype=function(e,t){var r=new te;if(e instanceof te)e.each(function(e){r.add(e)});else if(e){var a=-1,o=e.length;if(null==t)for(;++a<o;)r.add(e[a]);else for(;++a<o;)r.add(t(e[a],a,e))}return r}.prototype={constructor:te,has:Db.has,add:function(e){return e+="",this[Pb+e]=e,this},remove:Db.remove,clear:Db.clear,values:Db.keys,size:Db.size,empty:Db.empty,each:Db.each};var Ib={value:function(){}};ae.prototype=ne.prototype={constructor:ae,on:function(e,r){var a=this._,o=oe(e+"",a),s=-1,i=o.length,n;if(2>arguments.length){for(;++s<i;)if((n=(e=o[s]).type)&&(n=ie(a[n],e.name)))return n;return}if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++s<i;)if(n=(e=o[s]).type)a[n]=se(a[n],e.name,r);else if(null==r)for(n in a)a[n]=se(a[n],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new ae(e)},call:function(e,r){if(0<(i=arguments.length-2))for(var a=Array(i),o=0,i,n;o<i;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],o=0,i=n.length;o<i;++o)n[o].value.apply(r,a)},apply:function(e,r,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],t=0,i=o.length;t<i;++t)o[t].value.apply(r,a)}};var Mb=function(e,t){function n(e){var t=i.status,n;if(!t&&de(i)||200<=t&&300>t||304===t){if(p)try{n=p.call(d,i)}catch(t){return void r.call("error",d,t)}else n=i;r.call("load",d,n)}else r.call("error",d,e)}var r=ne("beforesend","progress","load","error"),a=X(),i=new XMLHttpRequest,o=null,s=null,l=0,d,c,p,u;if("undefined"!=typeof XDomainRequest&&!("withCredentials"in i)&&/^(http(s)?:)?\/\//.test(e)&&(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=i.ontimeout=n:i.onreadystatechange=function(e){3<i.readyState&&n(e)},i.onprogress=function(t){r.call("progress",d,t)},d={header:function(e,t){return(e=(e+"").toLowerCase(),2>arguments.length)?a.get(e):(null==t?a.remove(e):a.set(e,t+""),d)},mimeType:function(e){return arguments.length?(c=null==e?null:e+"",d):c},responseType:function(e){return arguments.length?(u=e,d):u},timeout:function(e){return arguments.length?(l=+e,d):l},user:function(e){return 1>arguments.length?o:(o=null==e?null:e+"",d)},password:function(e){return 1>arguments.length?s:(s=null==e?null:e+"",d)},response:function(e){return p=e,d},get:function(e,t){return d.send("GET",e,t)},post:function(e,t){return d.send("POST",e,t)},send:function(t,n,p){return i.open(t,e,!0,o,s),null==c||a.has("accept")||a.set("accept",c+",*/*"),i.setRequestHeader&&a.each(function(e,t){i.setRequestHeader(t,e)}),null!=c&&i.overrideMimeType&&i.overrideMimeType(c),null!=u&&(i.responseType=u),0<l&&(i.timeout=l),null==p&&"function"==typeof n&&(p=n,n=null),null!=p&&1===p.length&&(p=le(p)),null!=p&&d.on("error",p).on("load",function(e){p(null,e)}),r.call("beforesend",d,i),i.send(null==n?null:n),d},abort:function(){return i.abort(),d},on:function(){var e=r.on.apply(r,arguments);return e===r?d:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return d.get(t)}return d},Fb=function(e){function t(e,r){function i(){if(u>=p)return l;if(t)return t=!1,s;var n=u,r;if(34===e.charCodeAt(n)){for(var a=n;a++<p;)if(34===e.charCodeAt(a)){if(34!==e.charCodeAt(a+1))break;++a}return u=a+2,r=e.charCodeAt(a+1),13===r?(t=!0,10===e.charCodeAt(a+2)&&++u):10===r&&(t=!0),e.slice(n+1,a).replace(/""/g,"\"")}for(;u<p;){var i=1;if(r=e.charCodeAt(u++),10===r)t=!0;else if(13===r)t=!0,10===e.charCodeAt(u)&&(++u,++i);else if(r!==o)continue;return e.slice(n,u-i)}return e.slice(n)}for(var s={},l={},d=[],p=e.length,u=0,c=0,n,t;(n=i())!==l;){for(var m=[];n!==s&&n!==l;)m.push(n),n=i();r&&null==(m=r(m,c++))||d.push(m)}return d}function n(t){return t.map(r).join(e)}function r(e){return null==e?"":a.test(e+="")?"\""+e.replace(/\"/g,"\"\"")+"\"":e}var a=new RegExp("[\""+e+"\n\r]"),o=e.charCodeAt(0);return{parse:function(e,n){var r=t(e,function(e,t){return a?a(e,t-1):void(o=e,a=n?pe(e,n):ce(e))}),a,o;return r.columns=o,r},parseRows:t,format:function(t,n){return null==n&&(n=ue(t)),[n.map(r).join(e)].concat(t.map(function(t){return n.map(function(e){return r(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}},jb=Fb(","),zb=Fb("\t"),Ub=/^([A-Za-z]+:)?\/\//,$b="file://",Bb=["mimeType","responseType","user","password"],Wb=function(e){return{options:e||{},sanitize:ye,load:fe,file:he,http:ge}},qb={boolean:gb,integer:bb,number:bb,date:hb,string:_b},Vb=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return Te(e)&&(e=+e)==~~e},Te,function(e){return!isNaN(Date.parse(e))}],Hb=["boolean","integer","number","date"],Yb=function(e,t){var n=t&&t.property?jh(t.property):id;return Mh(e)&&!Ee(e)?Ce(n(e)):n(JSON.parse(e))},Gb=function(){},Zb=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Ae(e,t)})}:Ae(e,t)},Xb=function(e,n){function t(t){var n=e.arcs[0>t?~t:t],r=n[0],a;return e.transform?(a=[0,0],n.forEach(function(e){a[0]+=e[0],a[1]+=e[1]})):a=n[n.length-1],0>t?[a,r]:[r,a]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){a[0>e?~e:e]=1}),l.push(r)}}var a={},o={},s={},l=[],d=-1;return n.forEach(function(r,a){var o=e.arcs[0>r?~r:r],s;!(3>o.length)||o[1][0]||o[1][1]||(s=n[++d],n[d]=r,n[a]=s)}),n.forEach(function(n){var r=t(n),e=r[0],a=r[1],i,l;if(i=s[e]){if(delete s[i.end],i.push(n),i.end=a,l=o[a]){delete o[l.start];var d=l==i?i:i.concat(l);o[d.start=i.start]=s[d.end=l.end]=d}else o[i.start]=s[i.end]=i;}else if(!(i=o[a]))i=[n],o[i.start=e]=s[i.end=a]=i;else if(delete o[i.start],i.unshift(n),i.start=e,l=s[e]){delete s[l.end];var c=l===i?i:l.concat(i);o[c.start=l.start]=s[c.end=i.end]=c}else o[i.start]=s[i.end]=i}),r(s,o),r(o,s),n.forEach(function(e){a[0>e?~e:e]||l.push([e])}),l},Kb=function(e){return Ne(e,Pe.apply(this,arguments))},Qb={dsv:Oe,csv:ke(","),tsv:ke("\t"),json:Yb,topojson:function(e,t){var n,r;return(e=Yb(e,t),t&&(r=t.feature))?(n=e.objects[r])?Zb(e,n).features:Rh("Invalid TopoJSON object: "+r):t&&(r=t.mesh)?(n=e.objects[r])?[Kb(e,n)]:Rh("Invalid TopoJSON object: "+r):void Rh("Missing TopoJSON feature or mesh parameter.")}},Jb=function(e,t){return 1<arguments.length?(Qb[e]=t,this):Qb.hasOwnProperty(e)?Qb[e]:null},e_=new Date,t_=new Date,n_=Re(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});n_.every=function(e){return e=g(e),isFinite(e)&&0<e?1<e?Re(function(t){t.setTime(g(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):n_:null};var r_=1e3,a_=6e4,o_=36e5,i_=864e5,s_=6048e5,l_=Re(function(e){e.setTime(g(e/r_)*r_)},function(e,t){e.setTime(+e+t*r_)},function(e,t){return(t-e)/r_},function(e){return e.getUTCSeconds()}),d_=Re(function(e){e.setTime(g(e/a_)*a_)},function(e,t){e.setTime(+e+t*a_)},function(e,t){return(t-e)/a_},function(e){return e.getMinutes()}),c_=Re(function(e){var t=e.getTimezoneOffset()*a_%o_;0>t&&(t+=o_),e.setTime(g((+e-t)/o_)*o_+t)},function(e,t){e.setTime(+e+t*o_)},function(e,t){return(t-e)/o_},function(e){return e.getHours()}),p_=Re(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a_)/i_},function(e){return e.getDate()-1}),u_=De(0),m_=De(1),f_=De(2),y_=De(3),g_=De(4),h_=De(5),b_=De(6),__=Re(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),x_=Re(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});x_.every=function(e){return isFinite(e=g(e))&&0<e?Re(function(t){t.setFullYear(g(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var v_=Re(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*a_)},function(e,t){return(t-e)/a_},function(e){return e.getUTCMinutes()}),S_=Re(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o_)},function(e,t){return(t-e)/o_},function(e){return e.getUTCHours()}),T_=Re(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/i_},function(e){return e.getUTCDate()-1}),k_=Ie(0),O_=Ie(1),E_=Ie(2),C_=Ie(3),w_=Ie(4),L_=Ie(5),A_=Ie(6),N_=Re(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),P_=Re(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});P_.every=function(e){return isFinite(e=g(e))&&0<e?Re(function(t){t.setUTCFullYear(g(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var R_={0:"0","-":"",_:" "},D_=/^\s*\d+/,I_=/^%/,M_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,F_,j_,z_,U_,$_;Rt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var B_="%Y-%m-%dT%H:%M:%S.%LZ",W_=Date.prototype.toISOString?function(e){return e.toISOString()}:U_(B_),q_=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:$_(B_),V_=function(e,t,n){t=t||{};var r=Jb(t.type||"json");return r||Rh("Unknown data format type: "+t.type),e=r(e,t),t.parse&&Dt(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e},H_={skip:!0},Y_={},G_=1,Z_=2,X_=4,K_=G_|X_,Q_=G_|Z_|X_,J_=8,ex=16,nx=32,rx=64,ax=jt.prototype;ax.StopPropagation=Y_,ax.ADD=G_,ax.REM=Z_,ax.MOD=X_,ax.ADD_REM=G_|Z_,ax.ADD_MOD=K_,ax.ALL=Q_,ax.REFLOW=J_,ax.SOURCE=ex,ax.NO_SOURCE=nx,ax.NO_FIELDS=rx,ax.fork=function(e){return new jt(this.dataflow).init(this,e)},ax.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new jt(this.dataflow).init(this),e.add=e.source,e):e},ax.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&rx)&&(n.fields=e.fields),t&G_?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Z_?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&X_?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&nx?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},ax.runAfter=function(e){this.dataflow.runAfter(e)},ax.changed=function(e){var t=e||Q_;return t&G_&&this.add.length||t&Z_&&this.rem.length||t&X_&&this.mod.length},ax.reflow=function(e){if(e)return this.fork(Q_).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(X_,$t(this,G_))),this},ax.modifies=function(e){var t=Kh(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},ax.modified=function(e){var t=this.fields;return this.mod.length&&t&&(arguments.length?Ih(e)?e.some(function(e){return t[e]}):t[e]:!!t)},ax.filter=function(e,t){var n=this;return e&G_&&(n.addF=zt(n.addF,t)),e&Z_&&(n.remF=zt(n.remF,t)),e&X_&&(n.modF=zt(n.modF,t)),e&ex&&(n.srcF=zt(n.srcF,t)),n},ax.materialize=function(e){e=e||Q_;var t=this;return e&G_&&t.addF&&(t.add=Ut(t.add,t.addF),t.addF=null),e&Z_&&t.remF&&(t.rem=Ut(t.rem,t.remF),t.remF=null),e&X_&&t.modF&&(t.mod=Ut(t.mod,t.modF),t.modF=null),e&ex&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},ax.visit=function(e,t){var n=this,r=t,a,o;return e&ex?(Sb(n.source,n.srcF,r),n):(e&G_&&Sb(n.add,n.addF,r),e&Z_&&Sb(n.rem,n.remF,r),e&X_&&Sb(n.mod,n.modF,r),e&J_&&(a=n.source)&&(o=n.add.length+n.mod.length,o===a.length||(o?Sb(a,$t(n,K_),r):Sb(a,n.srcF,r))),n)};var ox=ib(Bt,jt);ox.fork=function(e){var n=new jt(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&n.ADD&&this.visit(n.ADD,function(e){return n.add.push(e)}),e&n.REM&&this.visit(n.REM,function(e){return n.rem.push(e)}),e&n.MOD&&this.visit(n.MOD,function(e){return n.mod.push(e)})),n},ox.changed=function(e){return this.changes&e},ox.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Ih(e)?e.some(function(e){return n[e]}):n[e]:0},ox.filter=function(){Rh("MultiPulse does not support filtering.")},ox.materialize=function(){Rh("MultiPulse does not support materialization.")},ox.visit=function(e,t){var r=this,a=r.pulses,o=a.length,n=0;if(e&r.SOURCE)for(;n<o;++n)a[n].visit(e,t);else for(;n<o;++n)a[n].stamp===r.stamp&&a[n].visit(e,t);return r};var ix={skip:!1,force:!1},sx=Wt.prototype;sx.size=function(){return this.nodes.length},sx.clear=function(){return this.nodes=[],this},sx.peek=function(){return this.nodes[0]},sx.push=function(e){var t=this.nodes;return t.push(e),qt(t,0,t.length-1,this.cmp)},sx.pop=function(){var e=this.nodes,t=e.pop(),n;return e.length?(n=e[0],e[0]=t,Vt(e,0,this.cmp)):n=t,n},sx.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,Vt(t,0,this.cmp),n},sx.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&0>this.cmp(n,e)&&(t[0]=e,e=n,Vt(t,0,this.cmp)),e};var lx=Ht.prototype;lx.stamp=function(){return this._clock},lx.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},lx.cleanThreshold=1e4,lx.add=function(e,t,n,r){var a=1,o;return e instanceof V?o=e:e&&e.prototype instanceof V?o=new e:Qh(e)?o=new V(null,e):(a=0,o=new V(e,t)),this.rank(o),a&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o},lx.connect=function(e,t){var r=e.rank,a,o;for(a=0,o=t.length;a<o;++a)if(r<t[a].rank)return void this.rerank(e)},lx.rank=function(e){e.rank=++this._rank},lx.rerank=function(e){for(var t=[e],n,r,a;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(a=r.length;0<=--a;)t.push(n=r[a]),n===e&&Rh("Cycle detected in dataflow graph.")},lx.pulse=function(e,n,r){this.touch(e,r||ix);var a=new jt(this,this._clock+(this._pulse?0:1)),o=e.pulse&&e.pulse.source||[];return a.target=e,this._pulses[e.id]=n.pulse(a,o),this},lx.touch=function(e,t){return this._pulse?this._enqueue(e):this._touched.add(e),(t||ix).skip&&e.skip(!0),this},lx.update=function(e,t,n){var r=n||ix;return(e.set(t)||r.force)&&this.touch(e,r),this},lx.changeset=W,lx.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(V_(t,n)))},lx.request=function(e,t,n){var r=this,a=r._pending||It(r);a.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(a.done,a.done)},lx.events=function(e,t,r,a){var o=this,l=G(r,a),s=function(t){t.dataflow=o;try{l.receive(t)}catch(e){o.error(e)}finally{o.run()}},d;d="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Kh(e);for(var c=0,i=d.length;c<i;++c)d[c].addEventListener(t,s);return l},lx.on=function(e,t,n,r,a){var o=e instanceof V?Ft:Mt;return o(this,e,t,n,r,a),this},lx.run=function(e){var t=this,n=0,r=t.logLevel(),a,o,i,s;if(t._pending)return t.info("Awaiting requests, delaying dataflow run."),0;if(t._pulse)return t.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!t._touched.length)return t.info("Dataflow invoked, but nothing to do."),0;t._pulse=new jt(t,++t._clock,e),r>=Gh&&(i=Date.now(),t.debug("-- START PROPAGATION ("+t._clock+") -----")),t._touched.forEach(function(e){t._enqueue(e,!0)}),t._touched=k(Uh);try{for(;0<t._heap.size();){if(a=t._heap.pop(),a.rank!==a.qrank){t._enqueue(a,!0);continue}o=a.run(t._getPulse(a,e)),r>=Zh&&t.debug(a.id,o===Y_?"STOP":o,a),o!==Y_&&(t._pulse=o,a._targets&&a._targets.forEach(function(e){t._enqueue(e)})),++n}}catch(e){s=e}if(t._pulses={},t._pulse=null,r>=Gh&&(i=Date.now()-i,t.info("> Pulse "+t._clock+": "+n+" operators; "+i+"ms")),s&&(t._postrun=[],t.error(s)),t._onrun)try{t._onrun(t,n,s)}catch(e){t.error(e)}if(t._postrun.length){var l=t._postrun;t._postrun=[],l.forEach(function(e){try{e(t)}catch(e){t.error(e)}})}return n},lx.runAsync=function(){return this._pending||Promise.resolve(this.run())},lx.runAfter=function(e,t){if(this._pulse||t)this._postrun.push(e);else try{e(this)}catch(e){this.error(e)}},lx._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},lx._getPulse=function(e,t){var n=e.source,r=this._clock,a;return n&&Ih(n)?(a=n.map(function(e){return e.pulse}),new Bt(this,r,a,t)):(n=n&&n.pulse,a=this._pulses[e.id],n&&n!==Y_&&(n.stamp===r&&a.target!==e?a=n:a.source=n.source),a)},lx.error=Yt("error"),lx.warn=Yt("warn"),lx.info=Yt("info"),lx.debug=Yt("debug"),lx.logLevel=Yt("level");var dx=ib(Gt,V);dx.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},dx.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},dx.transform=function(){};var cx={},px={values:tn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:tn({name:"count",set:"cell.num"}),missing:tn({name:"missing",set:"this.missing"}),valid:tn({name:"valid",set:"this.valid"}),sum:tn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:tn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:tn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:tn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:tn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:tn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:tn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:tn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:tn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:tn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:tn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:tn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:tn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:tn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:tn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:tn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:tn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:tn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},ux=Object.keys(px),mx=function(e){var t=e.maxbins||20,r=e.base||10,a=m(r),o=e.divide||[5,2],s=e.extent[0],l=e.extent[1],d=l-s,c,p,u,y,h,b,i,n;if(e.step)c=e.step;else if(e.steps){for(h=d/t,b=0,i=e.steps.length;b<i&&e.steps[b]<h;++b);c=e.steps[S(0,b-1)]}else{for(p=T(m(t)/a),u=e.minstep||0,c=S(u,O(r,f(m(d)/a)-p));T(d/c)>t;)c*=r;for(b=0,i=o.length;b<i;++b)h=c/o[b],h>=u&&d/h<=t&&(c=h)}return h=m(c),y=0<=h?0:~~(-h/a)+1,n=O(r,-y-1),(e.nice||void 0===e.nice)&&(h=g(s/c+n)*c,s=s<h?h-c:h,l=T(l/c)*c),{start:s,stop:l,step:c}},fx=function(e,t){var r=[],o=e.length,n=-1,i;if(null==t)for(;++n<o;)isNaN(i=on(e[n]))||r.push(i);else for(;++n<o;)isNaN(i=on(t(e[n],n,e)))||r.push(i);return r},yx=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},gx=function(e){return 1===e.length&&(e=sn(e)),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;0>e(t[o],n)?r=o+1:a=o}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;0<e(t[o],n)?a=o:r=o+1}return r}}},hx=gx(yx),bx=hx.right,_x=hx.left,xx=function(e){return null===e?NaN:+e},vx=function(e,t){var r=e.length,n=0,a=-1,o=0,i=0,s,l;if(null==t)for(;++a<r;)isNaN(s=xx(e[a]))||(l=s-o,o+=l/++n,i+=l*(s-o));else for(;++a<r;)isNaN(s=xx(t(e[a],a,e)))||(l=s-o,o+=l/++n,i+=l*(s-o));return 1<n?i/(n-1):void 0},Sx=function(e,t){var r=e.length,n=-1,a,o,i;if(null==t){for(;++n<r;)if(null!=(a=e[n])&&a>=a)for(o=i=a;++n<r;)null!=(a=e[n])&&(o>a&&(o=a),i<a&&(i=a));}else for(;++n<r;)if(null!=(a=t(e[n],n,e))&&a>=a)for(o=i=a;++n<r;)null!=(a=t(e[n],n,e))&&(o>a&&(o=a),i<a&&(i=a));return[o,i]},Tx=function(e,t,r){e=+e,t=+t,r=2>(o=arguments.length)?(t=e,e=0,1):3>o?1:+r;for(var a=-1,o=0|S(0,T((t-e)/r)),n=Array(o);++a<o;)n[a]=e+a*r;return n},kx=7.0710678118654755,Ox=3.1622776601683795,Ex=1.4142135623730951,Cx=function(e,t,r){var a=t<e,o=-1,i,n,s;if(a&&(i=e,e=t,t=i),0===(s=ln(e,t,r))||!isFinite(s))return[];if(0<s)for(e=T(e/s),t=g(t/s),n=Array(i=T(t-e+1));++o<i;)n[o]=(e+o)*s;else for(e=g(e*s),t=T(t*s),n=Array(i=T(e-t+1));++o<i;)n[o]=(e-o)/s;return a&&n.reverse(),n},wx=function(e){return T(m(e.length)/d)+1},Lx=function(e,t,r){if(null==r&&(r=xx),!!(l=e.length)){if(0>=(t=+t)||2>l)return+r(e[0],0,e);if(1<=t)return+r(e[l-1],l-1,e);var a=(l-1)*t,o=g(a),i=+r(e[o],o,e),s=+r(e[o+1],o+1,e),l;return i+(s-i)*(a-o)}},Ax=function(e,t){var r=e.length,n=-1,a,o;if(null==t){for(;++n<r;)if(null!=(a=e[n])&&a>=a)for(o=a;++n<r;)null!=(a=e[n])&&a>o&&(o=a);}else for(;++n<r;)if(null!=(a=t(e[n],n,e))&&a>=a)for(o=a;++n<r;)null!=(a=t(e[n],n,e))&&a>o&&(o=a);return o},Nx=function(e){for(var t=e.length,n=-1,r=0,a,o,i;++n<t;)r+=e[n].length;for(o=Array(r);0<=--t;)for(i=e[t],a=i.length;0<=--a;)o[--r]=i[a];return o},Px=function(e,t){for(var n=t.length,r=Array(n);n--;)r[n]=e[t[n]];return r},Rx=function(e,t){var r=e.length,n=-1,a=0,o;if(null==t)for(;++n<r;)(o=+e[n])&&(a+=o);else for(;++n<r;)(o=+t(e[n],n,e))&&(a+=o);return a},Dx=function(e,t,r,o){var s=fx(e,o),l=s.length,n=t,d,a,i,c;for(i=0,c=Array(n);i<n;++i){for(d=0,a=0;a<l;++a)d+=s[~~(Math.random()*l)];c[i]=d/l}return[Lx(c.sort(yx),r/2),Lx(c,1-r/2)]},Ix=function(e,t){var n=NaN,r={},i,d;return r.mean=function(e){return arguments.length?(i=e||0,n=NaN,r):i},r.stdev=function(e){return arguments.length?(d=null==e?1:e,n=NaN,r):d},r.sample=function(){var e=0,t=0,r,a;if(n==n)return e=n,n=NaN,e;do e=2*Math.random()-1,t=2*Math.random()-1,r=e*e+t*t;while(0===r||1<r);return a=u(-2*m(r)/r),n=i+t*a*d,i+e*a*d},r.pdf=function(e){var t=o(O(e-i,2)/(-2*O(d,2)));return 1/(d*u(2*l))*t},r.cdf=function(e){var t=(e-i)/d,n=p(t),r;if(37<n)r=0;else{var a=o(-n*n/2),s;7.07106781186547>n?(s=0.0352624965998911*n+0.700383064443688,s=s*n+6.37396220353165,s=s*n+33.912866078383,s=s*n+112.079291497871,s=s*n+221.213596169931,s=s*n+220.206867912376,r=a*s,s=0.0883883476483184*n+1.75566716318264,s=s*n+16.064177579207,s=s*n+86.7807322029461,s=s*n+296.564248779674,s=s*n+637.333633378831,s=s*n+793.826512519948,s=s*n+440.413735824752,r/=s):(s=n+0.65,s=n+4/s,s=n+3/s,s=n+2/s,s=n+1/s,r=a/s/2.506628274631)}return 0<t?1-r:r},r.icdf=function(e){if(0>=e||1<=e)return NaN;var t=2*e-1,n=8*(l-3)/(3*l*(4-l)),r=2/(l*n)+m(1-O(t,2))/2,a=m(1-t*t)/n,o=(0<t?1:-1)*u(u(r*r-a)-r);return i+d*Ah*o},r.mean(e).stdev(t)},Mx=function(e,t){var n=fx(e,t);return[Lx(n.sort(yx),0.25),Lx(n,0.5),Lx(n,0.75)]},Fx=function(e,t){var r=Ix(),a={},o=0;return a.data=function(n){return arguments.length?(e=n,o=n?n.length:0,a.bandwidth(t)):e},a.bandwidth=function(n){return arguments.length?(t=n,!t&&e&&(t=cn(e)),a):t},a.sample=function(){return e[~~(Math.random()*o)]+t*r.sample()},a.pdf=function(n){for(var a=0,s=0;s<o;++s)a+=r.pdf((n-e[s])/t);return a/t/o},a.cdf=function(n){for(var a=0,s=0;s<o;++s)a+=r.cdf((n-e[s])/t);return a/o},a.icdf=function(){throw Error("KDE icdf not supported.")},a.data(e)},jx=function(e,t){function n(e){var t=[],n=0,r;for(r=0;r<a;++r)n+=t[r]=null==e[r]?1:+e[r];for(r=0;r<a;++r)t[r]/=n;return t}var r={},a=0,o;return r.weights=function(e){return arguments.length?(o=n(t=e||[]),r):t},r.distributions=function(n){return arguments.length?(n?(a=n.length,e=n):(a=0,e=[]),r.weights(t)):e},r.sample=function(){for(var t=Math.random(),n=e[a-1],r=o[0],s=0;s<a-1;r+=o[++s])if(t<r){n=e[s];break}return n.sample()},r.pdf=function(t){for(var n=0,r=0;r<a;++r)n+=o[r]*e[r].pdf(t);return n},r.cdf=function(t){for(var n=0,r=0;r<a;++r)n+=o[r]*e[r].cdf(t);return n},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(e).weights(t)},zx=function(e,t){null==t&&(t=null==e?1:e,e=0);var n={},r,a,o;return n.min=function(e){return arguments.length?(r=e||0,o=a-r,n):r},n.max=function(e){return arguments.length?(a=e||0,o=a-r,n):a},n.sample=function(){return r+o*Math.random()},n.pdf=function(e){return e>=r&&e<=a?1/o:0},n.cdf=function(e){return e<r?0:e>a?1:(e-r)/o},n.icdf=function(e){return 0<=e&&1>=e?r+e*o:NaN},n.min(e).max(t)},Ux=pn.prototype;Ux.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ux.add=function(e){this._add.push(e)},Ux.rem=function(e){this._rem.push(e)},Ux.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e=this._add,t=this._rem,r=this._key,a=e.length,n=t.length,o=Array(a-n),s={},l,i,d;for(l=0;l<n;++l)s[r(t[l])]=1;for(l=0,i=0;l<a;++l)s[r(d=e[l])]?s[r(d)]=0:o[i++]=d;return this._rem=[],this._add=o},Ux.distinct=function(e){for(var t=this.values(),r=t.length,n={},a=0,o;0<=--r;)o=e(t[r])+"",n.hasOwnProperty(o)||(n[o]=1,++a);return a},Ux.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=rb(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Ux.argmin=function(e){return this.extent(e)[0]||{}},Ux.argmax=function(e){return this.extent(e)[1]||{}},Ux.min=function(e){var t=this.extent(e)[0];return null==t?+Infinity:e(t)},Ux.max=function(e){var t=this.extent(e)[1];return null==t?-Infinity:e(t)},Ux.quartile=function(e){return this._get===e&&this._q||(this._q=Mx(this.values(),e),this._get=e),this._q},Ux.q1=function(e){return this.quartile(e)[0]},Ux.q2=function(e){return this.quartile(e)[1]},Ux.q3=function(e){return this.quartile(e)[2]},Ux.ci=function(e){return this._get===e&&this._ci||(this._ci=Dx(this.values(),1e3,0.05,e),this._get=e),this._ci},Ux.ci0=function(e){return this.ci(e)[0]},Ux.ci1=function(e){return this.ci(e)[1]},un.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ux},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var $x=ib(un,Gt);$x.transform=function(e,t){var n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a;return this.stamp=r.stamp,this.value&&((a=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=a?this.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),r.modifies(this._outputs),n._drop=!1!==e.drop,e.cross&&1<n._dims.length&&(n._drop=!1,this.cross()),n.changes(r)},$x.cross=function(){function e(e){var n,r,a,t;for(n in e)for(a=e[n].tuple,r=0;r<l;++r)s[r][t=a[o[r]]]=t}function t(e,n,i){var d=o[i],c=s[i++],p,u;for(p in c)n[d]=c[p],u=e?e+"|"+p:p,i<l?t(u,n,i):!a[u]&&r.cell(u,n)}var r=this,a=r.value,o=r._dnames,s=o.map(function(){return{}}),l=o.length;e(r._prev),e(a),t("",{},0)},$x.init=function(e){function t(e){for(var t=Kh(w(e)),a=0,i=t.length,n;a<i;++a)o[n=t[a]]||(o[n]=1,r.push(n))}var r=this._inputs=[],a=this._outputs=[],o={};this._dims=Kh(e.groupby),this._dnames=this._dims.map(function(e){var n=b(e);return t(e),a.push(n),n}),this.cellkey=e.key?e.key:Qt(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s=e.fields||[null],l=e.ops||["count"],d=e.as||[],c=s.length,n={},p,u,f,m,y,g;for(c!==l.length&&Rh("Unmatched number of fields and aggregate ops."),g=0;g<c;++g){if(p=s[g],u=l[g],null==p&&"count"!==u&&Rh("Null aggregate field specified."),m=b(p),y=Jt(u,m,d[g]),a.push(y),"count"===u){this._counts.push(y);continue}f=n[m],f||(t(p),f=n[m]=[],f.field=p,this._measures.push(f)),"count"!==u&&(this._countOnly=!1),f.push(en(u,y))}return this._measures=this._measures.map(function(e){return an(e,e.field)}),{}},$x.cellkey=Qt(),$x.cell=function(e,n){var t=this.value[e];return t?0===t.num&&this._drop&&t.stamp<this.stamp?(t.stamp=this.stamp,this._adds[this._alen++]=t):t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t):(t=this.value[e]=this.newcell(e,n),this._adds[this._alen++]=t),t},$x.newcell=function(e,r){var t={key:e,num:0,agg:null,tuple:this.newtuple(r,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var a=this._measures,o=a.length,n;for(t.agg=Array(o),n=0;n<o;++n)t.agg[n]=new a[n](t)}return t.store&&(t.data=new pn),t},$x.newtuple=function(e,t){var r=this._dnames,a=this._dims,o={},s,i;for(s=0,i=a.length;s<i;++s)o[r[s]]=a[s](e);return t?U(t.tuple,o):F(o)},$x.add=function(e){var t=this.cellkey(e),r=this.cell(t,e),a,o,i;if(r.num+=1,!this._countOnly)for(r.store&&r.data.add(e),a=r.agg,(o=0,i=a.length);o<i;++o)a[o].add(a[o].get(e),e)},$x.rem=function(e){var t=this.cellkey(e),r=this.cell(t,e),a,o,i;if(r.num-=1,!this._countOnly)for(r.store&&r.data.rem(e),a=r.agg,(o=0,i=a.length);o<i;++o)a[o].rem(a[o].get(e),e)},$x.celltuple=function(e){var t=e.tuple,r=this._counts,a,o,i;for(e.store&&e.data.values(),o=0,i=r.length;o<i;++o)t[r[o]]=e.num;if(!this._countOnly)for(a=e.agg,o=0,i=a.length;o<i;++o)a[o].set(t);return t},$x.changes=function(e){var t=this._adds,r=this._mods,a=this._prev,o=this._drop,s=e.add,l=e.rem,d=e.mod,c,p,u,i;if(a)for(p in a)c=a[p],(!o||c.num)&&l.push(c.tuple);for(u=0,i=this._alen;u<i;++u)s.push(this.celltuple(t[u])),t[u]=null;for(u=0,i=this._mlen;u<i;++u)c=r[u],(0===c.num&&o?l:d).push(this.celltuple(c)),r[u]=null;return this._alen=this._mlen=0,this._prev=null,e},mn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Bx=ib(mn,Gt);Bx.transform=function(e,t){var n=this._bins(e),r=n.start,a=n.step,o=e.as||["bin0","bin1"],i=o[0],s=o[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(w(e.field))?t.ADD_MOD:t.ADD,t.visit(l,function(e){var t=n(e);e[i]=t,e[s]=null==t?null:r+a*(1+(t-r)/a)}),t.modifies(o)},Bx._bins=function(e){if(this.value&&!e.modified())return this.value;var n=e.field,t=mx(e),r=t.start,o=t.stop,i=t.step,s,a;null!=(s=e.anchor)&&(a=s-(r+i*g((s-r)/i)),r+=a,o+=a);var l=function(e){var t=n(e);return null==t?null:(t=S(r,N(+t,o-i)),r+i*g((t-r)/i))};return l.start=r,l.stop=o,l.step=i,this.value=Ph(l,w(n),e.name||"bin_"+b(n))};var Wx=function(e,t,n){var r=e,a=t||[],o=n||[],i={},s=0;return{add:function(e){o.push(e)},remove:function(e){i[r(e)]=++s},size:function(){return a.length},data:function(e,t){return s&&(a=a.filter(function(e){return!i[r(e)]}),i={},s=0),t&&e&&a.sort(e),o.length&&(a=e?ub(e,a,o.sort(e)):a.concat(o),o=[]),a}}};fn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var qx=ib(fn,Gt);qx.transform=function(e,t){var n=t.fork(t.ALL),r=Wx(I,this.value,n.materialize(n.ADD).add),a=e.sort,o=t.changed()||a&&(e.modified("sort")||t.modified(a.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(a,o),n},ib(yn,V),hn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:"[\\w\"]+"},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Vx=ib(hn,Gt);Vx.transform=function(e,t){function n(r){return function(a){for(var d=bn(l(a),e.case,o)||[],c=0,i=d.length,n;c<i;++c)s.test(n=d[c])||r(n)}}var r=this._parameterCheck(e,t),a=this._counts,o=this._match,s=this._stop,l=e.field,i=e.as||["text","count"],d=n(function(e){a[e]=1+(a[e]||0)}),c=n(function(e){a[e]-=1});return r?t.visit(t.SOURCE,d):(t.visit(t.ADD,d),t.visit(t.REM,c)),this._finish(t,i)},Vx._parameterCheck=function(e,t){var n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Vx._finish=function(e,n){var r=this._counts,a=this._tuples||(this._tuples={}),o=n[0],i=n[1],s=e.fork(),l,d,p;for(l in r)d=a[l],p=r[l]||0,!d&&p?(a[l]=d=F({}),d[o]=l,d[i]=p,s.add.push(d)):0===p?(d&&s.rem.push(d),r[l]=null,a[l]=null):d[i]!==p&&(d[i]=p,s.mod.push(d));return s.modifies(n)},_n.Definition={type:"Cross",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var Hx=ib(_n,Gt);Hx.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,o=e.as||["a","b"],i=o[0],a=o[1],s=!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return s?(r&&(n.rem=r),n.add=this.value=xn(t.source,i,a,e.filter||Wh)):n.mod=r,n.source=this.value,n.modifies(o)};var Yx={kde:Fx,mixture:jx,normal:Ix,uniform:zx},Gx="distributions",Zx="function",Xx="field",Kx=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];Sn.Definition={type:"Density",metadata:{generates:!0,source:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Kx.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Kx},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]};var Qx=ib(Sn,Gt);Qx.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=vn(e.distribution,Tn(t)),a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&Rh("Invalid density method: "+a),e.extent||r.data||Rh("Missing density extent parameter."),a=r[a];var o=e.as||["value","density"],i=e.extent||Sx(r.data()),s=(i[1]-i[0])/(e.steps||100),l=Tx(i[0],i[1]+s/2,s).map(function(e){var t={};return t[o[0]]=e,t[o[1]]=a(e),F(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n},kn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var Jx=ib(kn,Gt);Jx.transform=function(e,t){var n=this.value,r=e.field,a=n[0],o=n[1],i=t.ADD,s;s=t.changed()||t.modified(r.fields)||e.modified("field"),s&&(i=t.SOURCE,a=+Infinity,o=-Infinity),t.visit(i,function(e){var t=r(e);t<a&&(a=t),t>o&&(o=t)}),this.value=[a,o]};var ev=ib(On,V);ev.connect=function(e){return this.targets().add(e),e.source=this},ev.add=function(e){this.value.add.push(e)},ev.rem=function(e){this.value.rem.push(e)},ev.mod=function(e){this.value.mod.push(e)},ev.init=function(e){this.value.init(e,e.NO_SOURCE)},ev.evaluate=function(){return this.value};var tv=ib(En,Gt);tv.activate=function(e){this._targets[this._targets.active++]=e},tv.subflow=function(e,t,n,r){var a=this.value,o=a.hasOwnProperty(e)&&a[e],i,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,i=n.dataflow,o=i.add(new On(n.fork(n.NO_SOURCE),this)).connect(t(i,e,s)),a[e]=o,this.activate(o)),o},tv.transform=function(e,t){function n(e){return a.subflow(e,i,t)}var r=t.dataflow,a=this,o=e.key,i=e.subflow,s=this._keys,l=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=I(e),r=s.get(t);void 0!==r&&(s.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=o(e);s.set(I(e),t),n(t).add(e)}),l||t.modified(o.fields)?t.visit(t.MOD,function(e){var t=I(e),r=s.get(t),a=o(e);r===a?n(a).mod(e):(s.set(t,a),n(r).rem(e),n(a).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(s.get(I(e))).mod(e)}),l&&t.visit(t.REFLOW,function(e){var t=I(e),r=s.get(t),a=o(e);r!==a&&(s.set(t,a),n(r).rem(e),n(a).add(e))}),s.empty>r.cleanThreshold&&r.runAfter(s.clean),t},ib(Cn,V),Ln.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var nv=ib(Ln,Gt);nv.transform=function(e,t){function n(n){var t=I(n),r=c(n,e),o=a.get(t);r&&o?(a.delete(t),i.push(n)):r||o?p&&r&&!o&&d.push(n):(a.set(t,1),l.push(n))}var r=t.dataflow,a=this.value,o=t.fork(),i=o.add,l=o.rem,d=o.mod,c=e.expr,p=!0;return t.visit(t.REM,function(e){var t=I(e);a.has(t)?a.delete(t):l.push(e)}),t.visit(t.ADD,function(n){c(n,e)?i.push(n):a.set(I(n),1)}),t.visit(t.MOD,n),e.modified()&&(p=!1,t.visit(t.REFLOW,n)),a.empty>r.cleanThreshold&&r.runAfter(a.clean),o},An.Definition={type:"Fold",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var rv=ib(An,Gt);rv.transform=function(e,t){function r(e){for(var t=o[I(e)]=Array(m),n=0,r;n<m;++n)r=t[n]=j(e),r[c]=u[n],r[p]=l[n](e),y.add.push(r)}function a(e){for(var t=o[I(e)],r=0,a;r<m;++r)g&1<<r&&(a=z(e,t[r],n),a[c]=u[r],a[p]=l[r](e),y.mod.push(a))}var o=this.value,s=e.modified("fields"),l=e.fields,d=e.as||["key","value"],c=d[0],p=d[1],u=l.map(Nn),m=l.length,n=t.stamp,y=t.fork(t.NO_SOURCE),f=0,g=0,i;if(s){for(i in o)y.rem.push.apply(y.rem,o[i]);o=this.value={},t.visit(t.SOURCE,r)}else{for(t.visit(t.ADD,r);f<m;++f)t.modified(l[f].fields)&&(g|=1<<f);g&&t.visit(t.MOD,a),t.visit(t.REM,function(e){var t=I(e);y.rem.push.apply(y.rem,o[t]),o[t]=null})}return y.modifies(d)},Pn.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var av=ib(Pn,Gt);av.transform=function(e,t){var n=e.expr,r=e.as,a=e.modified(),o=e.initonly?t.ADD:a?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,function(a){a[r]=n(a,e)})};var ov=ib(Rn,Gt);ov.transform=function(e,n){var r=this.value,a=n.fork(n.ALL),o=e.size-r.length,i=e.generator,s,l,d;if(0<o){for(s=[];0<=--o;)s.push(d=F(i(e))),r.push(d);a.add=a.add.length?a.materialize(a.ADD).add.concat(s):s}else l=r.slice(0,-o),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(l):l,r=r.slice(-o);return a.source=this.value=r,a};var iv={value:"value",median:function(e,t){var r=e.length,n=-1,a=[],o;if(null==t)for(;++n<r;)isNaN(o=xx(e[n]))||a.push(o);else for(;++n<r;)isNaN(o=xx(t(e[n],n,e)))||a.push(o);return Lx(a.sort(yx),0.5)},mean:function(e,t){var r=e.length,n=r,a=-1,o=0,i;if(null==t)for(;++a<r;)isNaN(i=xx(e[a]))?--n:o+=i;else for(;++a<r;)isNaN(i=xx(t(e[a],a,e)))?--n:o+=i;return n?o/n:void 0},min:function(e,t){var r=e.length,n=-1,a,o;if(null==t){for(;++n<r;)if(null!=(a=e[n])&&a>=a)for(o=a;++n<r;)null!=(a=e[n])&&o>a&&(o=a);}else for(;++n<r;)if(null!=(a=t(e[n],n,e))&&a>=a)for(o=a;++n<r;)null!=(a=t(e[n],n,e))&&o>a&&(o=a);return o},max:Ax},sv=[];Dn.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var lv=ib(Dn,Gt);lv.transform=function(e,r){var a=r.fork(r.ALL),o=In(e),s=Mn(e),d=b(e.field),c=b(e.key),p=(e.groupby||[]).map(b),u=Fn(r.source,e.groupby,e.key,e.keyvals),f=[],y=this.value,h=u.domain.length,m,_,x,v,S,g,i,T,l,n;for(S=0,T=u.length;S<T;++S)for(m=u[S],x=m.values,_=NaN,i=0;i<h;++i)if(null==m[i]){for(v=u.domain[i],n={_impute:!0},(g=0,l=x.length);g<l;++g)n[p[g]]=x[g];n[c]=v,n[d]=isNaN(_)?_=o(m,s):_,f.push(F(n))}return f.length&&(a.add=a.materialize(a.ADD).add.concat(f)),y.length&&(a.rem=a.materialize(a.REM).rem.concat(y)),this.value=f,a},jn.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ux},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var dv=ib(jn,un);dv.transform=function(e,t){var n=this,r=e.modified(),a;return n.value&&(r||t.modified(n._inputs))?(a=n.value=r?n.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(a=n.value=n.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),n.changes(),t.visit(t.SOURCE,function(e){nb(e,a[n.cellkey(e)].tuple)}),t.reflow(r).modifies(this._outputs)},dv.changes=function(){var e=this._adds,t=this._mods,r,a;for(r=0,a=this._alen;r<a;++r)this.celltuple(e[r]),e[r]=null;for(r=0,a=this._mlen;r<a;++r)this.celltuple(t[r]),t[r]=null;this._alen=this._mlen=0},ib(zn,V),$n.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var cv=ib($n,Gt);cv.transform=function(e,t){var r=t,a=e.as,o=e.fields,s=e.index,i=e.values,l=null==e.default?null:e.default,d=e.modified(),c=d?t.SOURCE:t.ADD,p=o.length,n,u,m;return i?(u=i.length,1<p&&!a&&Rh("Multi-field lookup requires explicit \"as\" parameter."),a&&a.length!==p*u&&Rh("The \"as\" parameter has too few output field names."),a=a||i.map(b),n=function(e){for(var t=0,n=0,r,d;t<p;++t)if(d=s.get(o[t](e)),null==d)for(r=0;r<u;++r,++n)e[a[n]]=l;else for(r=0;r<u;++r,++n)e[a[n]]=i[r](d)}):(!a&&Rh("Missing output field names."),n=function(e){for(var t=0,n;t<p;++t)n=s.get(o[t](e)),e[a[t]]=null==n?l:n}),d?r=t.reflow(!0):(m=o.some(function(e){return t.modified(e.fields)}),c|=m?t.MOD:0),t.visit(c,n),r.modifies(a)},ib(Bn,V),ib(qn,V),ib(Hn,Gt),Hn.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)};var pv=ib(Gn,En);pv.transform=function(e,n){var r=this,a=e.subflow,o=e.field;return(e.modified("field")||o&&n.modified(w(o)))&&Rh("PreFacet does not support field modification."),this._targets.active=0,n.visit(n.MOD,function(e){var t=r.subflow(I(e),a,n,e);o?o(e).forEach(function(e){t.mod(e)}):t.mod(e)}),n.visit(n.ADD,function(e){var t=r.subflow(I(e),a,n,e);o?o(e).forEach(function(e){t.add(F(e))}):t.add(e)}),n.visit(n.REM,function(e){var t=r.subflow(I(e),a,n,e);o?o(e).forEach(function(e){t.rem(e)}):t.rem(e)}),n};var uv=ib(Qn,Gt);uv.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var mv=ib(Jn,Gt);mv.transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(),t.visit(t.REM,function(e){var t=I(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=j(e);r[I(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(z(e,r[I(e)]))})),n},er.Definition={type:"Sample",metadata:{source:!0,changes:!0},params:[{name:"size",type:"number",default:1000}]};var fv=ib(er,Gt);fv.transform=function(e,t){function r(e){var t,n;l.length<s?l.push(e):(n=~~((d+1)*Math.random()),n<l.length&&n>=c&&(t=l[n],u[I(t)]&&a.rem.push(t),l[n]=e)),++d}var a=t.fork(),o=e.modified("size"),s=e.size,l=this.value,d=this.count,c=0,u=l.reduce(function(e,n){return e[I(n)]=1,e},{});if(t.rem.length&&(t.visit(t.REM,function(e){var t=I(e);u[t]&&(u[t]=-1,a.rem.push(e)),--d}),l=l.filter(function(e){return-1!==u[I(e)]})),(t.rem.length||o)&&l.length<s&&t.source&&(c=d=l.length,t.visit(t.SOURCE,function(e){u[I(e)]||r(e)}),c=-1),o&&l.length>s){for(var p=0,i=l.length-s;p<i;++p)u[I(l[p])]=-1,a.rem.push(l[p]);l=l.slice(i)}return t.mod.length&&t.visit(t.MOD,function(e){u[I(e)]&&a.mod.push(e)}),t.add.length&&t.visit(t.ADD,r),(t.add.length||0>c)&&(a.add=l.filter(function(e){return!u[I(e)]})),this.count=d,this.value=a.source=l,a},tr.Definition={type:"Sequence",metadata:{generates:!0,source:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var yv=ib(tr,Gt);yv.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,n.source=this.value=Tx(e.start,e.stop,e.step||1).map(F),n.add=t.add.concat(this.value),n}};var gv=ib(nr,Gt);gv.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var hv=ib(rr,Gt);hv.transform=function(e,t){function n(e){o.set(a(e),e)}var r=t.dataflow,a=e.field,o=this.value,i=!0;return e.modified("field")||t.modified(a.fields)?(o.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){o.delete(a(e))}),t.visit(t.ADD,n)):i=!1,this.modified(i),o.empty>r.cleanThreshold&&r.runAfter(o.clean),t.fork()};var bv=ib(ar,Gt);bv.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var _v={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=_v.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,a=t.compare;if(e<n){for(;n+1<r.length&&!a(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,0<t||Rh("ntile num must be greater than zero.");var n=_v.cume_dist(),r=n.next;return{init:n.init,next:function(e){return T(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,a=n.data;return r<a.length?e(a[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,0<t||Rh("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},xv=Object.keys(_v),vv=ir.prototype;vv.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},vv.update=function(e,n){var t=this,r=t.cell,a=t.windows,o=e.data,i=a&&a.length,s;if(r){for(s=e.p0;s<e.i0;++s)r.rem(o[s]);for(s=e.p1;s<e.i1;++s)r.add(o[s]);r.set(n)}for(s=0;s<i;++s)a[s].update(e,n)},lr.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:xv.concat(ux)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Sv=ib(lr,Gt);Sv.transform=function(e,t){function r(e){return a.group(n(e))}var a=this,o=a.state,s=e.modified(),l,i;this.stamp=t.stamp,(!o||s)&&(o=a.state=new ir(e));var n=Qt(e.groupby);for(s||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){r(e).add(e)})):(t.visit(t.REM,function(e){r(e).remove(e)}),t.visit(t.ADD,function(e){r(e).add(e)})),l=0,i=a._mlen;l<i;++l)dr(a._mods[l],o,e);return a._mlen=0,a._mods=[],t.reflow(s).modifies(o.outputs)},Sv.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=Wx(I),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var Tv=Object.freeze({aggregate:un,bin:mn,collect:fn,compare:yn,countpattern:hn,cross:_n,density:Sn,extent:kn,facet:En,field:Cn,filter:Ln,fold:An,formula:Pn,generate:Rn,impute:Dn,joinaggregate:jn,key:zn,lookup:$n,multiextent:Bn,multivalues:qn,params:Hn,prefacet:Gn,proxy:Qn,relay:Jn,sample:er,sequence:tr,sieve:nr,subflow:On,tupleindex:rr,values:ar,window:lr}),tx=mr.prototype;tx.clone=function(){return new mr(this)},tx.clear=function(){return this.x1=+Lh,this.y1=+Lh,this.x2=-Lh,this.y2=-Lh,this},tx.empty=function(){return this.x1===+Lh&&this.y1===+Lh&&this.x2===-Lh&&this.y2===-Lh},tx.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},tx.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},tx.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},tx.round=function(){return this.x1=g(this.x1),this.y1=g(this.y1),this.x2=T(this.x2),this.y2=T(this.y2),this},tx.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},tx.rotate=function(e,t,n){var r=c(e),a=s(e),o=t-t*r+n*a,i=n-t*a-n*r,l=this.x1,d=this.x2,p=this.y1,u=this.y2;return this.clear().add(r*l-a*p+o,a*l+r*p+i).add(r*l-a*u+o,a*l+r*u+i).add(r*d-a*p+o,a*d+r*p+i).add(r*d-a*u+o,a*d+r*u+i)},tx.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},tx.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},tx.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},tx.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},tx.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},tx.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},tx.width=function(){return this.x2-this.x1},tx.height=function(){return this.y2-this.y1};var kv=0,Ov=function(e,t){var n=[],r;return r={id:"gradient_"+kv++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(e,t){return n.push({offset:e,color:t}),r}}};ib(yr,fr);var Ev;try{Ev=e("canvas")}catch(t){Ev=null}var Cv=function(e,t){var n=gr(null,"canvas");if(n&&n.getContext)n.width=e,n.height=t;else if(Ev)try{n=new Ev(e,t)}catch(t){n=null}return n},wv="undefined"==typeof Image?Ev&&Ev.Image||null:Image,Lv=vr.prototype;Lv.pending=function(){return this._pending},Lv.sanitizeURL=function(e){var t=this;return Sr(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Tr(t),e}).catch(function(){return Tr(t),null})},Lv.loadImage=function(e){var t=this;return Sr(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var n=e.href;if(!n||!wv)throw{url:n};var r=new wv;return r.onload=function(){Tr(t),r.loaded=!0},r.onerror=function(){Tr(t),r.loaded=!1},r.src=n,r}).catch(function(n){return Tr(t),{loaded:!1,width:0,height:0,src:n&&n.url||""}})},Lv.ready=function(){var e=this;return new Promise(function(t){function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}n(!1)})};var Av=l,pi=2*Av,Nv=1e-6;kr.prototype=Or.prototype={constructor:kr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(e,t,n,o,s){e=+e,t=+t,n=+n,o=+o,s=+s;var d=this._x1,c=this._y1,m=n-e,f=o-t,y=d-e,g=c-t,h=y*y+g*g;if(0>s)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(!(h>Nv));else if(!(p(g*m-f*y)>Nv)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var b=n-d,_=o-c,x=m*m+f*f,v=u(x),S=u(h),T=s*a((Av-i((x+h-(b*b+_*_))/(2*v*S)))/2),l=T/S,k=T/v;p(l-1)>Nv&&(this._+="L"+(e+l*y)+","+(t+l*g)),this._+="A"+s+","+s+",0,0,"+ +(g*b>y*_)+","+(this._x1=e+k*m)+","+(this._y1=t+k*f)}},arc:function(e,t,n,a,o,i){e=+e,t=+t,n=+n;var l=n*c(a),d=n*s(a),u=e+l,m=t+d,f=1^i,g=i?a-o:o-a;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+m:(p(this._x1-u)>Nv||p(this._y1-m)>Nv)&&(this._+="L"+u+","+m);n&&(0>g&&(g=g%pi+pi),g>pi-Nv?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-d)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=m):g>Nv&&(this._+="A"+n+","+n+",0,"+ +(g>=Av)+","+f+","+(this._x1=e+n*c(o))+","+(this._y1=t+n*s(o))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Pv=function(e){return function(){return e}},Rv=p,Dv=wh,Iv=c,Mv=S,Fv=N,jv=s,zv=u,Uv=1e-12,$v=l,Bv=$v/2,Wv=2*$v;Ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);}}};var qv=function(e){return new Ir(e)},Vv=function(){function e(e){var c=e.length,n=!1,p,i,d;for(null==o&&(l=s(d=Or())),p=0;p<=c;++p)!(p<c&&a(i=e[p],p,e))==n&&((n=!n)?l.lineStart():l.lineEnd()),n&&l.point(+t(i,p,e),+r(i,p,e));if(d)return l=null,d+""||null}var t=Mr,r=Fr,a=Pv(!0),o=null,s=qv,l=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Pv(+n),e):t},e.y=function(t){return arguments.length?(r="function"==typeof t?t:Pv(+t),e):r},e.defined=function(t){return arguments.length?(a="function"==typeof t?t:Pv(!!t),e):a},e.curve=function(t){return arguments.length?(s=t,null!=o&&(l=s(o)),e):s},e.context=function(t){return arguments.length?(null==t?o=l=null:l=s(o=t),e):o},e},Hv=function(){function e(e){var t=e.length,n=!1,m=Array(t),f=Array(t),y,i,g,h,d;for(null==c&&(u=p(d=Or())),y=0;y<=t;++y){if(!(y<t&&l(h=e[y],y,e))==n)if(n=!n)i=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),g=y-1;g>=i;--g)u.point(m[g],f[g]);u.lineEnd(),u.areaEnd()}n&&(m[y]=+r(h,y,e),f[y]=+o(h,y,e),u.point(a?+a(h,y,e):m[y],s?+s(h,y,e):f[y]))}if(d)return u=null,d+""||null}function t(){return Vv().defined(l).curve(p).context(c)}var r=Mr,a=null,o=Pv(0),s=Fr,l=Pv(!0),c=null,p=qv,u=null;return e.x=function(t){return arguments.length?(r="function"==typeof t?t:Pv(+t),a=null,e):r},e.x0=function(t){return arguments.length?(r="function"==typeof t?t:Pv(+t),e):r},e.x1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Pv(+t),e):a},e.y=function(t){return arguments.length?(o="function"==typeof t?t:Pv(+t),s=null,e):o},e.y0=function(t){return arguments.length?(o="function"==typeof t?t:Pv(+t),e):o},e.y1=function(t){return arguments.length?(s=null==t?null:"function"==typeof t?t:Pv(+t),e):s},e.lineX0=e.lineY0=function(){return t().x(r).y(o)},e.lineY1=function(){return t().x(r).y(s)},e.lineX1=function(){return t().x(a).y(o)},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:Pv(!!t),e):l},e.curve=function(t){return arguments.length?(p=t,null!=c&&(u=p(c)),e):p},e.context=function(t){return arguments.length?(null==t?c=u=null:u=p(c=t),e):c},e},Yv={draw:function(e,t){var n=u(t/$v);e.moveTo(n,0),e.arc(0,0,n,0,Wv)}},Gv=function(){};zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jr(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};Ur.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jr(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};$r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jr(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};Br.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,r=e.length-1;if(0<r)for(var a=e[0],o=n[0],s=e[r]-a,l=n[r]-o,d=-1,i;++d<=r;)i=d/r,this._basis.point(this._beta*e[d]+(1-this._beta)*(a+i*s),this._beta*n[d]+(1-this._beta)*(o+i*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Zv=function e(t){function n(e){return 1===t?new zr(e):new Br(e,t)}return n.beta=function(t){return e(+t)},n}(0.85);qr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wr(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Wr(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Xv=function e(t){function n(e){return new qr(e,t)}return n.tension=function(t){return e(+t)},n}(0);Vr.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Wr(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Kv=function e(t){function n(e){return new Vr(e,t)}return n.tension=function(t){return e(+t)},n}(0);Hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wr(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Qv=function e(t){function n(e){return new Hr(e,t)}return n.tension=function(t){return e(+t)},n}(0);Gr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=u(this._l23_2a=O(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Yr(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Jv=function e(t){function n(e){return t?new Gr(e,t):new qr(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);Zr.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=u(this._l23_2a=O(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Yr(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var eS=function e(t){function n(e){return t?new Zr(e,t):new Vr(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);Xr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=u(this._l23_2a=O(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yr(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tS=function e(t){function n(e){return t?new Xr(e,t):new Hr(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);Kr.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ta(this,this._t0,ea(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ta(this,ea(this,n=Jr(this,e,t)),n);break;default:ta(this,this._t0,n=Jr(this,e,t));}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ra.prototype=Object.create(na.prototype)).point=function(e,t){na.prototype.point.call(this,t,e)},aa.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=ia(e),a=ia(t),o=0,i=1;i<r;++o,++i)this._context.bezierCurveTo(n[0][o],a[0][o],n[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(0>=this._t)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};var nS={basis:{curve:function(e){return new zr(e)}},"basis-closed":{curve:function(e){return new Ur(e)}},"basis-open":{curve:function(e){return new $r(e)}},bundle:{curve:Zv,tension:"beta",value:0.85},cardinal:{curve:Xv,tension:"tension",value:0},"cardinal-open":{curve:Qv,tension:"tension",value:0},"cardinal-closed":{curve:Kv,tension:"tension",value:0},"catmull-rom":{curve:Jv,tension:"alpha",value:0.5},"catmull-rom-closed":{curve:eS,tension:"alpha",value:0.5},"catmull-rom-open":{curve:tS,tension:"alpha",value:0.5},linear:{curve:qv},"linear-closed":{curve:function(e){return new Kr(e)}},monotone:{horizontal:function(e){return new ra(e)},vertical:function(e){return new na(e)}},natural:{curve:function(e){return new oa(e)}},step:{curve:function(e){return new sa(e,0.5)}},"step-after":{curve:function(e){return new sa(e,1)}},"step-before":{curve:function(e){return new sa(e,0)}}},rS={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},aS=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],oS=function(e){var t=[],r,a,o,s,l,d,c,p,i,u,n;for(r=e.slice().replace(aS[0],"###$1").split(aS[1]).slice(1),p=0,u=r.length;p<u;++p){for(a=r[p],o=a.slice(1).trim().replace(aS[2],"$1###$2").split(aS[3]),d=a.charAt(0),s=[d],(i=0,n=o.length);i<n;++i)(l=+o[i])===l&&s.push(l);if(c=rS[d.toLowerCase()],s.length-1>c)for(i=1,n=s.length;i<n;i+=c)t.push([d].concat(s.slice(i,i+c)));else t.push(s)}return t},iS={},sS={},lS=[].join,dS=["l",0,0,0,0,0,0,0],cS=function(e,n,r,a,t){var o=null,s=0,l=0,d=0,c=0,p,u,m,f,y;null==r&&(r=0),null==a&&(a=0),null==t&&(t=1),e.beginPath&&e.beginPath();for(var g=0,i=n.length;g<i;++g){switch(p=n[g],1!==t&&(p=pa(p,t)),p[0]){case"l":s+=p[1],l+=p[2],e.lineTo(s+r,l+a);break;case"L":s=p[1],l=p[2],e.lineTo(s+r,l+a);break;case"h":s+=p[1],e.lineTo(s+r,l+a);break;case"H":s=p[1],e.lineTo(s+r,l+a);break;case"v":l+=p[1],e.lineTo(s+r,l+a);break;case"V":l=p[1],e.lineTo(s+r,l+a);break;case"m":s+=p[1],l+=p[2],e.moveTo(s+r,l+a);break;case"M":s=p[1],l=p[2],e.moveTo(s+r,l+a);break;case"c":u=s+p[5],m=l+p[6],d=s+p[3],c=l+p[4],e.bezierCurveTo(s+p[1]+r,l+p[2]+a,d+r,c+a,u+r,m+a),s=u,l=m;break;case"C":s=p[5],l=p[6],d=p[3],c=p[4],e.bezierCurveTo(p[1]+r,p[2]+a,d+r,c+a,s+r,l+a);break;case"s":u=s+p[3],m=l+p[4],d=2*s-d,c=2*l-c,e.bezierCurveTo(d+r,c+a,s+p[1]+r,l+p[2]+a,u+r,m+a),d=s+p[1],c=l+p[2],s=u,l=m;break;case"S":u=p[3],m=p[4],d=2*s-d,c=2*l-c,e.bezierCurveTo(d+r,c+a,p[1]+r,p[2]+a,u+r,m+a),s=u,l=m,d=p[1],c=p[2];break;case"q":u=s+p[3],m=l+p[4],d=s+p[1],c=l+p[2],e.quadraticCurveTo(d+r,c+a,u+r,m+a),s=u,l=m;break;case"Q":u=p[3],m=p[4],e.quadraticCurveTo(p[1]+r,p[2]+a,u+r,m+a),s=u,l=m,d=p[1],c=p[2];break;case"t":u=s+p[1],m=l+p[2],null===o[0].match(/[QqTt]/)?(d=s,c=l):"t"===o[0]?(d=2*s-f,c=2*l-y):"q"===o[0]&&(d=2*s-d,c=2*l-c),f=d,y=c,e.quadraticCurveTo(d+r,c+a,u+r,m+a),s=u,l=m,d=s+p[1],c=l+p[2];break;case"T":u=p[1],m=p[2],d=2*s-d,c=2*l-c,e.quadraticCurveTo(d+r,c+a,u+r,m+a),s=u,l=m;break;case"a":ua(e,s+r,l+a,[p[1],p[2],p[3],p[4],p[5],p[6]+s+r,p[7]+l+a]),s+=p[6],l+=p[7];break;case"A":ua(e,s+r,l+a,[p[1],p[2],p[3],p[4],p[5],p[6]+r,p[7]+a]),s=p[6],l=p[7];break;case"z":case"Z":e.closePath();}o=p}},pS=1.7320508075688772/2,uS={circle:{draw:function(e,t){var n=u(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,2*l)}},cross:{draw:function(e,t){var n=u(t)/2,a=n/2.5;e.moveTo(-n,-a),e.lineTo(-n,a),e.lineTo(-a,a),e.lineTo(-a,n),e.lineTo(a,n),e.lineTo(a,a),e.lineTo(n,a),e.lineTo(n,-a),e.lineTo(a,-a),e.lineTo(a,-n),e.lineTo(-a,-n),e.lineTo(-a,-a),e.closePath()}},diamond:{draw:function(e,t){var n=u(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=u(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=u(t)/2,a=pS*n;e.moveTo(0,-a),e.lineTo(-n,a),e.lineTo(n,a),e.closePath()}},"triangle-down":{draw:function(e,t){var n=u(t)/2,a=pS*n;e.moveTo(0,a),e.lineTo(-n,-a),e.lineTo(n,-a),e.closePath()}},"triangle-right":{draw:function(e,t){var n=u(t)/2,a=pS*n;e.moveTo(a,0),e.lineTo(-a,-n),e.lineTo(-a,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=u(t)/2,a=pS*n;e.moveTo(-a,0),e.lineTo(a,-n),e.lineTo(a,n),e.closePath()}}},mS={},fS=function(){function e(e,s,l){var d=null==s?+t.call(this,e):s,c=null==l?+n.call(this,e):l,p=+r.call(this,e),u=+a.call(this,e),m=+o.call(this,e),f;if(i||(i=f=Or()),0>=m)i.rect(d,c,p,u);else{var y=d+p,g=c+u;i.moveTo(d+m,c),i.lineTo(y-m,c),i.quadraticCurveTo(y,c,y,c+m),i.lineTo(y,g-m),i.quadraticCurveTo(y,g,y-m,g),i.lineTo(d+m,g),i.quadraticCurveTo(d,g,d,g-m),i.lineTo(d,c+m),i.quadraticCurveTo(d,c,d+m,c),i.closePath()}return f?(i=null,f+""||null):void 0}var t=ya,n=ga,r=ha,a=ba,o=_a(0),i=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:_a(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:_a(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:_a(+t),e):r},e.height=function(t){return arguments.length?(a="function"==typeof t?t:_a(+t),e):a},e.cornerRadius=function(t){return arguments.length?(o="function"==typeof t?t:_a(+t),e):o},e.context=function(t){return arguments.length?(i=null==t?null:t,e):i},e},yS=l,gS=function(){function e(e,a,o){var s=o/2;if(c){var l=i-a,p=e-n;if(l||p){var m=u(l*l+p*p),f=(l/=m)*d,y=(p/=m)*d,g=wh(p,l);r.moveTo(n-f,i-y),r.lineTo(e-l*s,a-p*s),r.arc(e,a,s,g-yS,g),r.lineTo(n+f,i+y),r.arc(n,i,d,g,g+yS)}else r.arc(e,a,s,0,2*yS);r.closePath()}else c=1;n=e,i=a,d=s}function t(t){var p=t.length,n=!1,u,i,d;for(null==r&&(r=d=Or()),u=0;u<=p;++u)!(u<p&&l(i=t[u],u,t))==n&&(n=!n)&&(c=0),n&&e(+a(i,u,t),+o(i,u,t),+s(i,u,t));if(d)return r=null,d+""||null}var r=null,a,o,s,l,c,n,i,d;return t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(l=e,t):l},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},hS=function(){function e(){var e=+t.apply(this,arguments),d=+n.apply(this,arguments),c=o.apply(this,arguments)-Bv,p=i.apply(this,arguments)-Bv,u=Rv(p-c),m=p>c,f,y;if(l||(l=f=Or()),d<e&&(y=d,d=e,e=y),!(d>Uv))l.moveTo(0,0);else if(u>Wv-Uv)l.moveTo(d*Iv(c),d*jv(c)),l.arc(0,0,d,c,p,!m),e>Uv&&(l.moveTo(e*Iv(p),e*jv(p)),l.arc(0,0,e,p,c,m));else{var g=c,h=p,b=c,_=p,x=u,v=u,S=s.apply(this,arguments)/2,T=S>Uv&&(a?+a.apply(this,arguments):zv(e*e+d*d)),k=Fv(Rv(d-e)/2,+r.apply(this,arguments)),O=k,E=k,C,w;if(T>Uv){var A=Cr(T/e*jv(S)),N=Cr(T/d*jv(S));(x-=2*A)>Uv?(A*=m?1:-1,b+=A,_-=A):(x=0,b=_=(c+p)/2),(v-=2*N)>Uv?(N*=m?1:-1,g+=N,h-=N):(v=0,g=h=(c+p)/2)}var P=d*Iv(g),R=d*jv(g),D=e*Iv(_),I=e*jv(_);if(k>Uv){var M=d*Iv(h),F=d*jv(h),j=e*Iv(b),z=e*jv(b);if(u<$v){var U=x>Uv?Rr(P,R,j,z,M,F,D,I):[D,I],$=P-U[0],B=R-U[1],W=M-U[0],q=F-U[1],V=1/jv(Er(($*W+B*q)/(zv($*$+B*B)*zv(W*W+q*q)))/2),H=zv(U[0]*U[0]+U[1]*U[1]);O=Fv(k,(e-H)/(V-1)),E=Fv(k,(d-H)/(V+1))}}v>Uv?E>Uv?(C=Dr(j,z,P,R,d,E,m),w=Dr(M,F,D,I,d,E,m),l.moveTo(C.cx+C.x01,C.cy+C.y01),E<k?l.arc(C.cx,C.cy,E,Dv(C.y01,C.x01),Dv(w.y01,w.x01),!m):(l.arc(C.cx,C.cy,E,Dv(C.y01,C.x01),Dv(C.y11,C.x11),!m),l.arc(0,0,d,Dv(C.cy+C.y11,C.cx+C.x11),Dv(w.cy+w.y11,w.cx+w.x11),!m),l.arc(w.cx,w.cy,E,Dv(w.y11,w.x11),Dv(w.y01,w.x01),!m))):(l.moveTo(P,R),l.arc(0,0,d,g,h,!m)):l.moveTo(P,R),e>Uv&&x>Uv?O>Uv?(C=Dr(D,I,M,F,e,-O,m),w=Dr(P,R,j,z,e,-O,m),l.lineTo(C.cx+C.x01,C.cy+C.y01),O<k?l.arc(C.cx,C.cy,O,Dv(C.y01,C.x01),Dv(w.y01,w.x01),!m):(l.arc(C.cx,C.cy,O,Dv(C.y01,C.x01),Dv(C.y11,C.x11),!m),l.arc(0,0,e,Dv(C.cy+C.y11,C.cx+C.x11),Dv(w.cy+w.y11,w.cx+w.x11),m),l.arc(w.cx,w.cy,O,Dv(w.y11,w.x11),Dv(w.y01,w.x01),!m))):l.arc(0,0,e,_,b,m):l.lineTo(D,I)}return(l.closePath(),f)?(l=null,f+""||null):void 0}var t=wr,n=Lr,r=Pv(0),a=null,o=Ar,i=Nr,s=Pr,l=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-$v/2;return[Iv(r)*e,jv(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Pv(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Pv(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:Pv(+t),e):r},e.padRadius=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Pv(+t),e):a},e.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Pv(+t),e):o},e.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Pv(+t),e):i},e.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Pv(+t),e):s},e.context=function(t){return arguments.length?(l=null==t?null:t,e):l},e}().cornerRadius(va).padAngle(function(e){return e.padAngle||0}),bS=Hv().x(xa).y1(x).y0(function(e){return(e.y||0)+(e.height||0)}).defined(cr),_S=Hv().y(x).x1(xa).x0(function(e){return(e.x||0)+(e.width||0)}).defined(cr),xS=Vv().x(xa).y(x).defined(cr),vS=fS().x(xa).y(x).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(va),SS=function(){function e(){var e;if(r||(r=e=Or()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=Pv(Yv),n=Pv(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Pv(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Pv(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}().type(function(e){return ma(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),TS=gS().x(xa).y(x).defined(cr).size(function(e){return e.size||1}),kS=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null==t.strokeWidth?1:+t.strokeWidth),e},OS=2*l,ES=OS/4,CS;Ta.beginPath=ka,Ta.closePath=ka,Ta.moveTo=Oa,Ta.lineTo=Oa,Ta.rect=function(e,t,n,r){Oa(e,t),Oa(e+n,t+r)},Ta.quadraticCurveTo=function(e,t,n,r){Oa(e,t),Oa(n,r)},Ta.bezierCurveTo=function(e,t,n,r,a,o){Oa(e,t),Oa(n,r),Oa(a,o)},Ta.arc=function(e,t,n,r,a,o){function l(e){i=n*c(e),b=n*s(e),i<d&&(d=i),i>u&&(u=i),b<m&&(m=b),b>f&&(f=b)}if(p(a-r)>OS-1e-8)return Oa(e-n,t-n),void Oa(e+n,t+n);var d=Infinity,u=-Infinity,m=Infinity,f=-Infinity,g,h,i,b;if(l(r),l(a),a!==r)if(r%=OS,0>r&&(r+=OS),a%=OS,0>a&&(a+=OS),a<r&&(o=!o,g=r,r=a,a=g),o)for(a-=OS,g=r-r%ES,h=0;3>h&&g>a;++h,g-=ES)l(g);else for(g=r-r%ES+ES,h=0;3>h&&g<a;++h,g+=ES)l(g);Oa(e+d,t+m),Oa(e+u,t+f)};var wS=function(e,t,r){for(var a=r.width(),o=r.height(),s=r.x1+t.x1*a,l=r.y1+t.y1*o,d=r.x1+t.x2*a,c=r.y1+t.y2*o,p=t.stops,u=0,i=p.length,n=e.createLinearGradient(s,l,d,c);u<i;++u)n.addColorStop(p[u].offset,p[u].color);return n},LS=function(e,t,n){return n.id?wS(e,n,t.bounds):n},AS=function(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,!!(0<n)&&(e.globalAlpha=n,e.fillStyle=LS(e,t,t.fill),!0)},NS=[],PS=function(e,t,n){var r=null==(r=t.strokeWidth)?1:r;return!(0>=r)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,!!(0<n)&&(e.globalAlpha=n,e.strokeStyle=LS(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||NS),e.lineDashOffset=t.strokeDashOffset||0),!0))},RS=function(){return!0},DS=function(e,t){return"translate("+e+","+t+")"},IS=function(e){return DS(e.x||0,e.y||0)},MS=function(e,t){function n(e,n){var r=n.x||0,a=n.y||0;e.translate(r,a),e.beginPath(),t(e,n),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",IS(n)),e("d",t(null,n))},bound:function(e,n){return t(Ta(e),n),kS(e,n).translate(n.x||0,n.y||0)},draw:Aa(n),pick:Ia(n)}},FS=MS("arc",function(e,t){return hS.context(e)(t)}),jS=function(e,t){function n(e,n){e.beginPath(),t(e,n)}var r=Da(n);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Ta(e),r),kS(e,r[0]))},draw:Na(n),pick:function(e,t,n,a,o,i){var s=t.items,l=t.bounds;return s&&s.length&&(!l||l.contains(o,i))?(1<e.pixelRatio&&(n*=e.pixelRatio,a*=e.pixelRatio),r(e,s,n,a)?s[0]:null):null}}},zS=jS("area",function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?_S:bS).curve(la(r,n.orient,n.tension)).context(e)(t)}),US=1,$S=function(e,t,n){var r=e._defs,a=t.clip_id||(t.clip_id="clip"+US++),o=r.clipping[a]||(r.clipping[a]={id:a});return o.width=n.width||0,o.height=n.height||0,"url(#"+a+")"},BS=0.5,WS={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=Fa(t,n),o=t.x||0,i=t.y||0,s=(null==t.width?r.width:t.width)||0,l=(null==t.height?r.height:t.height)||0,d=!1===t.aspect?"none":"xMidYMid";o-=ja(t.align,s),i-=za(t.baseline,l),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",DS(o,i)),e("width",s),e("height",l),e("preserveAspectRatio",d)},bound:function(e,t){var n=t.image,r=t.x||0,a=t.y||0,o=(null==t.width?n&&n.width:t.width)||0,i=(null==t.height?n&&n.height:t.height)||0;return r-=ja(t.align,o),a-=za(t.baseline,i),e.set(r,a,r+o,a+i)},draw:function(e,t,n){var r=this;wa(t,function(a){if(!n||n.intersects(a.bounds)){var o=Fa(a,r),i=a.x||0,s=a.y||0,l=(null==a.width?o.width:a.width)||0,d=(null==a.height?o.height:a.height)||0,c,p,u,m;i-=ja(a.align,l),s-=za(a.baseline,d),!1!==a.aspect&&(p=o.width/o.height,u=a.width/a.height,p===p&&u===u&&p!==u&&(u<p?(m=l/p,s+=(d-m)/2,d=m):(m=d*p,i+=(l-m)/2,l=m))),o.loaded&&(e.globalAlpha=null==(c=a.opacity)?1:c,e.drawImage(o,i,s,l,d))}})},pick:Ra(),get:Fa,xOffset:ja,yOffset:za},qS=jS("line",function(e,t){var n=t[0],r=n.interpolate||"linear";return xS.curve(la(r,n.orient,n.tension)).context(e)(t)}),VS={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",IS(t)),e("d",t.path)},bound:function(e,t){return Ua(Ta(e),t)?e.set(0,0,0,0):kS(e,t)},draw:Aa(Ua),pick:Ia(Ua)},HS={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Sa(null,t))},bound:function(e,t){var n,r;return kS(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:Aa($a),pick:Ia($a)},YS={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",IS(t)),e("x2",null==t.x2?0:t.x2-(t.x||0)),e("y2",null==t.y2?0:t.y2-(t.y||0))},bound:function(e,t){var n,r;return kS(e.set(n=t.x||0,r=t.y||0,null==t.x2?n:t.x2,null==t.y2?r:t.y2),t)},draw:function(e,t,n){wa(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Ba(e,t,r)&&e.stroke()}})},pick:Ra(function(e,t,n,r){return!!e.isPointInStroke&&Ba(e,t,1)&&e.isPointInStroke(n,r)})},GS=MS("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),ZS=MS("symbol",function(e,t){return SS.context(e)(t)}),XS={height:Ya,measureWidth:Va,estimateWidth:Wa,width:Wa,canvas:Ga},KS,QS;Ga(!0);var JS={left:"start",center:"middle",right:"end"},eT=new mr,tT={type:"text",tag:"text",nested:!1,attr:function(e,n){var o=n.dx||0,i=(n.dy||0)+Qa(n),d=n.x||0,p=n.y||0,u=n.angle||0,a=n.radius||0,r;a&&(r=(n.theta||0)-l/2,d+=a*c(r),p+=a*s(r)),e("text-anchor",JS[n.align]||"start"),u?(r=DS(d,p)+" rotate("+u+")",(o||i)&&(r+=" "+DS(o,i))):r=DS(d+o,p+i),e("transform",r)},bound:Ja,draw:function(e,t,n){wa(t,function(a){var o,i,d,p,r,t;(!n||n.intersects(a.bounds))&&(t=Za(a))&&(o=null==a.opacity?1:a.opacity,0===o||(e.font=Ka(a),e.textAlign=a.align||"left",i=a.x||0,d=a.y||0,(p=a.radius)&&(r=(a.theta||0)-l/2,i+=p*c(r),d+=p*s(r)),a.angle&&(e.save(),e.translate(i,d),e.rotate(a.angle*l/180),i=d=0),i+=a.dx||0,d+=(a.dy||0)+Qa(a),a.fill&&AS(e,a,o)&&e.fillText(t,i,d),a.stroke&&PS(e,a,o)&&e.strokeText(t,i,d),a.angle&&e.restore()))})},pick:Ra(function(e,t,n,r,o,i){if(0>=t.fontSize)return!1;if(!t.angle)return!0;var d=Ja(eT,t,!0),p=-t.angle*l/180,a=c(p),u=s(p),m=t.x,f=t.y;return d.contains(a*o-u*i+(m-m*a+f*u),u*o+a*i+(f-m*u-f*a))})},nT=jS("trail",function(e,t){return TS.context(e)(t)}),rT={arc:FS,area:zS,group:{type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",IS(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,a=n.length;r<a;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&kS(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;wa(t,function(t){var a=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0,l,d;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(d=null==t.opacity?1:t.opacity,0<d&&(e.beginPath(),l=t.stroke?BS:0,Sa(e,t,l,l),t.fill&&AS(e,t,d)&&e.fill(),t.stroke&&PS(e,t,d)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,i,s),e.clip()),n&&n.translate(-a,-o),wa(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})},pick:function(e,t,n,r,a,o){if(t.bounds&&!t.bounds.contains(a,o)||!t.items)return null;var i=this;return La(t,function(s){var l,d,c,p;if(p=s.bounds,!p||p.contains(a,o))return(d=s.x||0,c=s.y||0,e.save(),e.translate(d,c),d=a-d,c=o-c,l=La(s,function(e){return Ma(e,d,c)?i.pick(e,n,r,d,c):null}),e.restore(),l)?l:(l=!1!==t.interactive&&(s.fill||s.stroke)&&0<=d&&d<=s.width&&0<=c&&c<=s.height,l?s:null)})},background:function(e,t){var n=t.stroke?BS:0;e("class","background"),e("d",Sa(null,t,n,n))},foreground:function(e,t,n){var r=t.clip?$S(n,t,t):null;e("clip-path",r)}},image:WS,line:qS,path:VS,rect:HS,rule:YS,shape:GS,symbol:ZS,text:tT,trail:nT},aT=function(e,t,n){var r=rT[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new mr),e,n)},oT={mark:null},iT=function(e,t,r){var a=rT[e.marktype],o=a.bound,s=e.items,l=s&&s.length,d,i,n,c;if(a.nested)return l?n=s[0]:(oT.mark=e,n=oT),c=aT(n,o,r),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new mr,l)for(d=0,i=s.length;d<i;++d)t.union(aT(s[d],o,r));return e.bounds=t},sT=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],lT=ro.prototype;lT.toJSON=function(e){return eo(this.root,e||0)},lT.mark=function(e,t,n){t=t||this.root.items[0];var r=ao(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var dT=oo.prototype;dT.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},dT.element=function(){return this._el},dT.origin=function(e){return this._origin=e||[0,0],this},dT.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},dT.on=function(){},dT.off=function(){},dT.handlers=function(){var e=this._handlers,t=[],n;for(n in e)t.push.apply(t,e[n]);return t},dT.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},dT.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(n){var r=new MouseEvent(t.type,t),e=gr(null,"a");for(var a in n)e.setAttribute(a,n[a]);e.dispatchEvent(r)}).catch(function(){})},dT.handleTooltip=function(e,t,n){this._el.setAttribute("title",n||"")};var cT=io.prototype;cT.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},cT.element=function(){return this._el},cT.scene=function(){return this._el&&this._el.firstChild},cT.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},cT.resize=function(e,t,n){return this._width=e,this._height=t,this._origin=n||[0,0],this},cT.dirty=function(){},cT.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},cT._render=function(){},cT.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},cT._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then(function(e){e&&a(),n._ready=null})}return r},cT.sanitizeURL=function(e){return this._load("sanitizeURL",e)},cT.loadImage=function(e){return this._load("loadImage",e)};var pT=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]},uT=ib(so,oo);uT.initialize=function(e,t,n){var r=this._canvas=e&&hr(e,"canvas");if(r){var a=this;this.events.forEach(function(e){r.addEventListener(e,function(t){uT[e]?uT[e].call(a,t):a.fire(e,t)})})}return oo.prototype.initialize.call(this,e,t,n)},uT.canvas=function(){return this._canvas},uT.context=function(){return this._canvas.getContext("2d")},uT.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],uT.DOMMouseScroll=function(e){this.fire("mousewheel",e)},uT.mousemove=lo("mousemove","mouseover","mouseout"),uT.dragover=lo("dragover","dragenter","dragleave"),uT.mouseout=co("mouseout"),uT.dragleave=co("dragleave"),uT.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},uT.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},uT.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},uT.touchmove=function(e){this.fire("touchmove",e,!0)},uT.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},uT.fire=function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e],o,i;if("click"===e&&r&&r.href?this.handleHref(t,r,r.href):("mouseover"===e||"mouseout"===e)&&r&&r.tooltip&&this.handleTooltip(t,r,"mouseover"===e?r.tooltip:null),a)for(t.vegaType=e,o=0,i=a.length;o<i;++o)a[o].handler.call(this._obj,t,r)},uT.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},uT.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],a;if(r){for(a=r.length;0<=--a;)r[a].type===e&&(t&&r[a].handler!==t||r.splice(a,1));return this}},uT.pickEvent=function(e){var t=pT(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},uT.pick=function(e,t,n,r,a){var o=this.context(),i=rT[e.marktype];return i.pick.call(this,o,e,t,n,r,a)};var mT=function(e,t){var n=t.group;e.save(),e.beginPath(),e.rect(0,0,n.width||0,n.height||0),e.clip()},fT="undefined"==typeof window?1:window.devicePixelRatio||1,yT=function(e,t,n,r){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),i=a?fT:1;return e.width=t*i,e.height=n*i,1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=i,o.setTransform(i,0,0,i,i*r[0],i*r[1]),e},gT=ib(po,io),hT=io.prototype,bT=new mr;gT.initialize=function(e,t,n,r){return this._canvas=Cv(1,1),e&&(_r(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),hT.initialize.call(this,e,t,n,r)},gT.resize=function(e,t,n){return hT.resize.call(this,e,t,n),yT(this._canvas,this._width,this._height,this._origin),this._redraw=!0,this},gT.canvas=function(){return this._canvas},gT.context=function(){return this._canvas?this._canvas.getContext("2d"):null},gT.dirty=function(e){var t=mo(e.bounds,e.mark.group);this._dirty.union(t)},gT._render=function(e){var t=this.context(),n=this._origin,r=this._width,a=this._height,o=this._dirty;return t.save(),this._redraw||o.empty()?(this._redraw=!1,o=null):o=uo(t,o,n),this.clear(-n[0],-n[1],r,a),this.draw(t,e,o),t.restore(),this._dirty.clear(),this},gT.draw=function(e,t,n){var r=rT[t.marktype];t.clip&&mT(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},gT.clear=function(e,t,n,r){var a=this.context();a.clearRect(e,t,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(e,t,n,r))};var _T=ib(fo,oo);_T.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mouseover",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=e&&hr(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mouseover",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),oo.prototype.initialize.call(this,e,t,n)},_T.svg=function(){return this._svg},_T.on=function(e,t){var n=this.eventName(e),r=this._handlers,a={type:e,handler:t,listener:yo(this,t)};return(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener),this},_T.off=function(e,t){var n=this.eventName(e),r=this._svg,a=this._handlers[n],o;if(a){for(o=a.length;0<=--o;)(a[o].type!==e||t)&&a[o].handler!==t||(this._svg&&r.removeEventListener(n,a[o].listener),a.splice(o,1));return this}};var xT={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},vT={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ST=Object.keys(vT),TT=xT.xmlns,ns=ib(bo,io),kT=io.prototype;ns.initialize=function(e,t,n,r){return e&&(this._svg=br(e,0,"svg",TT),this._svg.setAttribute("class","marks"),_r(e,1),this._root=br(this._svg,0,"g",TT),_r(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),kT.initialize.call(this,e,t,n,r)},ns.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),kT.background.apply(this,arguments)},ns.resize=function(e,t,n){return kT.resize.call(this,e,t,n),this._svg&&(this._svg.setAttribute("width",this._width),this._svg.setAttribute("height",this._height),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ns.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var t in xT)e[t]=xT[t];return go("svg",e)+this._svg.innerHTML+ho("svg")},ns._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),_r(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ns.updateDefs=function(){var e=this._svg,t=this._defs,n=t.el,r=0,a;for(a in t.gradient)n||(t.el=n=br(e,0,"defs",TT)),_o(n,t.gradient[a],r++);for(a in t.clipping)n||(t.el=n=br(e,0,"defs",TT)),xo(n,t.clipping[a],r++);n&&(0==r?(e.removeChild(n),t.el=null):_r(n,r))},ns._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ns.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ns.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ns._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t=++this._dirtyID,r,a,s,l,d,i,n;for(d=0,i=e.length;d<i;++d){if(r=e[d],a=r.mark,a.marktype!==s&&(s=a.marktype,l=rT[s]),a.zdirty&&a.dirty!==t&&(this._dirtyAll=!1,a.dirty=t,vo(a.group,t)),r.exit){l.nested&&a.items.length?(n=a.items[0],n._svg&&this._update(l,n._svg,n)):r._svg&&(n=r._svg.parentNode,n&&n.removeChild(r._svg)),r._svg=null;continue}r=l.nested?a.items[0]:r,r._update===t||(r._svg&&r._svg.ownerSVGElement?this._update(l,r._svg,r):(this._dirtyAll=!1,vo(r,t)),r._update=t)}return!this._dirtyAll},ns.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=To(e,i,d,o.tag);t&&(a._update(o,n,e),l&&So(a,n,e)),d=n,++c}if(!this.isDirty(t))return t._svg;var a=this,o=rT[t.marktype],s=!1===t.interactive?"none":null,l="g"===o.tag,d=null,c=0,i;return i=To(t,e,n,"g"),i.setAttribute("class",xr(t)),!l&&s&&i.style.setProperty("pointer-events",s),t.clip&&i.setAttribute("clip-path",$S(a,t,t.group)),o.nested?t.items.length&&r(t.items[0]):wa(t,r),_r(i,c),i};var OT=null,ET=null,CT={group:function(e,t,n){ET=t.__values__,OT=t.childNodes[1],e.foreground(ko,n,this),OT=t.childNodes[0],e.background(ko,n,this);var r=!1===n.mark.interactive?"none":null;r!==ET.events&&(OT.style.setProperty("pointer-events",r),ET.events=r)},text:function(e,t,n){var r=Za(n);r!==ET.text&&(t.textContent=r,ET.text=r),r=Ka(n),r!==ET.font&&(t.style.setProperty("font",r),ET.font=r)}};ns._update=function(e,t,n){OT=t,ET=t.__values__,e.attr(ko,n,this);var r=CT[e.type];r&&r.call(this,e,t,n),this.style(OT,n)},ns.style=function(e,t){if(null!=t){var r,a,n,o,i;for(r=0,a=ST.length;r<a;++r)n=ST[r],i=t[n],i===ET[n]||(o=vT[n],null==i?"fill"===o?e.style.setProperty(o,"none"):e.style.removeProperty(o):(i.id&&(this._defs.gradient[i.id]=i,i="url("+Oo()+"#"+i.id+")"),e.style.setProperty(o,i+"")),ET[n]=i)}};var wT=ib(Eo,io),LT=io.prototype;wT.resize=function(e,n,r){LT.resize.call(this,e,n,r);var a=this._origin,o=this._text,t={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var i in xT)t[i]=xT[i];return o.head=go("svg",t),o.root=go("g",{transform:"translate("+a+")"}),o.foot=ho("g")+ho("svg"),this},wT.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},wT._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},wT.buildDefs=function(){var e=this._defs,t="",n,r,a,o;for(r in e.gradient){for(a=e.gradient[r],o=a.stops,t+=go("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}),n=0;n<o.length;++n)t+=go("stop",{offset:o[n].offset,"stop-color":o[n].color})+ho("stop");t+=ho("linearGradient")}for(r in e.clipping)a=e.clipping[r],t+=go("clipPath",{id:r}),t+=go("rect",{x:0,y:0,width:a.width,height:a.height})+ho("rect"),t+=ho("clipPath");return 0<t.length?go("defs")+t+ho("defs"):""};var AT;wT.attributes=function(e,t){return AT={},e(Co,t,this),AT},wT.href=function(e){var t=this,n=e.href,r;if(n){if(r=t._hrefs&&t._hrefs[n])return r;t.sanitizeURL(n).then(function(e){e["xlink:href"]=e.href,e.href=null,(t._hrefs||(t._hrefs={}))[n]=e})}return null},wT.mark=function(e){function t(t){var l=n.href(t);l&&(i+=go("a",l)),s="g"===a?null:wo(t,e,a,o),i+=go(a,n.attributes(r.attr,t),s),"text"===a?i+=Lo(Za(t)):"g"===a&&(i+=go("path",n.attributes(r.background,t),wo(t,e,"bgrect",o))+ho("path"),i+=go("g",n.attributes(r.foreground,t))+n.markGroup(t)+ho("g")),i+=ho(a),l&&(i+=ho("a"))}var n=this,r=rT[e.marktype],a=r.tag,o=this._defs,i="",s;return"g"!==a&&!1===e.interactive&&(s="style=\"pointer-events: none;\""),i+=go("g",{class:xr(e),"clip-path":e.clip?$S(n,e,e.group):null},s),r.nested?e.items&&e.items.length&&t(e.items[0]):wa(e,t),i+ho("g")},wT.markGroup=function(e){var t=this,n="";return wa(e,function(e){n+=t.mark(e)}),n};var NT="canvas",PT="png",RT="svg",DT="none",IT={Canvas:NT,PNG:PT,SVG:RT,None:DT},MT={};MT[NT]=MT[PT]={renderer:po,headless:po,handler:so},MT[RT]={renderer:bo,headless:Eo,handler:fo},MT[DT]={};var FT=1e-9,jT=ib(Do,Gt),zT=new mr;jT.transform=function(e,t){var n=t.dataflow,r=e.mark,a=r.marktype,o=rT[a],i=o.bound,s=r.clip,l=r.bounds,d;return o.nested?(r.items.length&&n.dirty(r.items[0]),l=Io(r,i),r.items.forEach(function(e){e.bounds.clear().union(l)})):"group"===a||e.modified()?(t.visit(t.MOD,function(e){n.dirty(e)}),l.clear(),r.items.forEach(function(e){l.union(Io(e,i))})):(d=t.changed(t.REM),t.visit(t.ADD,function(e){l.union(Io(e,i))}),t.visit(t.MOD,function(e){d=d||l.alignsWith(e.bounds),n.dirty(e),l.union(Io(e,i))}),d&&!s&&(l.clear(),r.items.forEach(function(e){l.union(e.bounds)}))),s&&l.intersect(zT.set(0,0,r.group.width,r.group.height)),t.modifies("bounds")};var UT=":vega_identifier:";Mo.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var $T=ib(Mo,Gt);$T.transform=function(e,t){var n=Fo(t.dataflow),r=n.value,a=e.as;return t.visit(t.ADD,function(e){e[a]||(e[a]=++r)}),n.set(this.value=r),t};var BT=ib(jo,Gt);BT.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,zo(e),e.index),n.group.context=e.context,!e.context.group&&(e.context.group=n.group),n.source=this,this.value=n);var r="group"===n.marktype?yr:fr;return t.visit(t.ADD,function(e){r.call(e,n)}),n.items=t.source,t};var WT=ib(Uo,Gt),qT={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&$o(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};WT.transform=function(e,t){var n=qT[e.method]||qT.parity,r=t.materialize(t.SOURCE).source,a=r;if(a){if("greedy"===e.method&&(a=r=r.filter(Wo)),3<=a.length&&Bo(a)){t=t.reflow(e.modified()).modifies("opacity");do a=n(a);while(3<=a.length&&Bo(a));3>a.length&&!yb(r).opacity&&(1<a.length&&(yb(a).opacity=0),yb(r).opacity=1)}return t}};var VT=ib(qo,Gt);VT.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var HT="axis",YT="legend",ZT="row-header",XT="row-footer",KT="row-title",QT="column-header",JT="column-footer",ek="column-title",tk="fit",nk="pad",rk="none",ak="padding",ok="top",ik="left",sk="right",lk="bottom",dk="axis",ck="title",pk="frame",uk="legend",mk="scope",fk="row-header",yk="row-footer",gk="column-header",hk="column-footer",bk=0.5,_k=new mr,xk=ib(ni,Gt);xk.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Jo(n,t,e.layout),ri(n,t,e)}),t};var vk=Object.freeze({bound:Do,identifier:Mo,mark:jo,overlap:Uo,render:qo,viewlayout:ni}),Sk="log",Tk="band",kk="point",Ok="linear",Ek="ordinal",Ck="quantile",wk="quantize",Lk="threshold",Ak="bin-ordinal",Nk="sequential",Pk=function(e){return function(n){var r=n[0],a=n[1],o;return a<r&&(o=r,r=a,a=o),[e.invert(r),e.invert(a)]}},Rk=function(e){return function(r){var a=e.range(),o=r[0],s=r[1],l=-1,d,c,t,i;for(s<o&&(c=o,o=s,s=c),t=0,i=a.length;t<i;++t)a[t]>=o&&a[t]<=s&&(0>l&&(l=t),d=t);if(!(0>l))return o=e.invertExtent(a[l]),s=e.invertExtent(a[d]),[void 0===o[0]?o[1]:o[0],void 0===s[1]?s[0]:s[1]]}},Dk=function(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0},Ik=Array.prototype,Mk=Ik.map,Fk=Ik.slice,jk={name:"implicit"},zk=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},Uk=0.7,$k=1/Uk,Bk=/^#([0-9a-f]{3})$/,Wk=/^#([0-9a-f]{6})$/,qk=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Vk=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Hk=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Yk=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Gk=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Zk=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Xk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zk(fi,yi,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),zk(xi,_i,mi(fi,{brighter:function(e){return e=null==e?$k:O($k,e),new xi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Uk:O(Uk,e),new xi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return e=isNaN(e)?1:S(0,N(1,e)),(1===e?"rgb(":"rgba(")+S(0,N(255,f(this.r)||0))+", "+S(0,N(255,f(this.g)||0))+", "+S(0,N(255,f(this.b)||0))+(1===e?")":", "+e+")")}})),zk(ki,Ti,mi(fi,{brighter:function(e){return e=null==e?$k:O($k,e),new ki(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Uk:O(Uk,e),new ki(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(0.5>n?n:1-n)*t,a=2*n-r;return new xi(Oi(240<=e?e-240:e+120,a,r),Oi(e,a,r),Oi(120>e?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Kk=l/180,Qk=180/l,Jk=18,Kn=0.95047,Xn=1,Yn=1.08883,Zn=4/29,eO=6/29,tO=3*eO*eO,nO=eO*eO*eO;zk(wi,Ci,mi(fi,{brighter:function(e){return new wi(this.l+Jk*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new wi(this.l-Jk*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=Xn*Ai(e),t=Kn*Ai(t),n=Yn*Ai(n),new xi(Ni(3.2404542*t-1.5371385*e-0.4985314*n),Ni(-0.969266*t+1.8760108*e+0.041556*n),Ni(0.0556434*t-0.2040259*e+1.0572252*n),this.opacity)}})),zk(Ii,Di,mi(fi,{brighter:function(e){return new Ii(this.h,this.c,this.l+Jk*(null==e?1:e),this.opacity)},darker:function(e){return new Ii(this.h,this.c,this.l-Jk*(null==e?1:e),this.opacity)},rgb:function(){return Ei(this).rgb()}}));var rO=-0.14861,A=+1.78277,B=-0.29227,C=-0.90649,D=+1.97294,E=D*C,aO=D*A,oO=A*B-C*rO;zk(ji,Fi,mi(fi,{brighter:function(e){return e=null==e?$k:O($k,e),new ji(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Uk:O(Uk,e),new ji(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Kk,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=c(e),a=s(e);return new xi(255*(t+n*(rO*r+A*a)),255*(t+n*(B*r+C*a)),255*(t+n*(D*r)),this.opacity)}}));var iO=function(e){var r=e.length-1;return function(n){var t=0>=n?n=0:1<=n?(n=1,r-1):g(n*r),a=e[t],o=e[t+1],i=0<t?e[t-1]:2*a-o,s=t<r-1?e[t+2]:2*o-a;return zi((n-t/r)*r,i,a,o,s)}},sO=function(e){var r=e.length;return function(n){var t=g((0>(n%=1)?++n:n)*r),a=e[(t+r-1)%r],o=e[t%r],i=e[(t+1)%r],s=e[(t+2)%r];return zi((n-t/r)*r,a,o,i,s)}},lO=function(e){return function(){return e}},dO=function e(t){function n(e,t){var n=a((e=_i(e)).r,(t=_i(t)).r),r=a(e.g,t.g),o=a(e.b,t.b),i=qi(e.opacity,t.opacity);return function(a){return e.r=n(a),e.g=r(a),e.b=o(a),e.opacity=i(a),e+""}}var a=Wi(t);return n.gamma=e,n}(1),cO=Vi(iO),pO=Vi(sO),uO=function(e,t){var n=t?t.length:0,r=e?N(n,e.length):0,a=Array(n),o=Array(n),s;for(s=0;s<r;++s)a[s]=_O(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(e){for(s=0;s<r;++s)o[s]=a[s](e);return o}},mO=function(e,n){var r=new Date;return e=+e,n-=e,function(a){return r.setTime(e+n*a),r}},fO=function(e,n){return e=+e,n-=e,function(r){return e+n*r}},yO=function(e,t){var n={},r={},o;for(o in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)o in e?n[o]=_O(e[o],t[o]):r[o]=t[o];return function(e){for(o in n)r[o]=n[o](e);return r}},gO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hO=new RegExp(gO.source,"g"),bO=function(e,n){var t=gO.lastIndex=hO.lastIndex=0,r=-1,a=[],s=[],o,l,d;for(e+="",n+="";(o=gO.exec(e))&&(l=hO.exec(n));)(d=l.index)>t&&(d=n.slice(t,d),a[r]?a[r]+=d:a[++r]=d),(o=o[0])===(l=l[0])?a[r]?a[r]+=l:a[++r]=l:(a[++r]=null,s.push({i:r,x:fO(o,l)})),t=hO.lastIndex;return t<n.length&&(d=n.slice(t),a[r]?a[r]+=d:a[++r]=d),2>a.length?s[0]?Yi(s[0].x):Hi(n):(n=s.length,function(e){for(var t=0,r;t<n;++t)a[(r=s[t]).i]=r.x(e);return a.join("")})},_O=function(e,n){var r=typeof n,t;return null==n||"boolean"==r?lO(n):("number"==r?fO:"string"==r?(t=yi(n))?(n=t,dO):bO:n instanceof yi?dO:n instanceof Date?mO:Array.isArray(n)?uO:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?yO:fO)(e,n)},xO=function(e,n){return e=+e,n-=e,function(r){return f(e+n*r)}},vO=180/l,SO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},TO=function(t,n,o,i,s,l){var d,c,p;return(d=u(t*t+n*n))&&(t/=d,n/=d),(p=t*o+n*i)&&(o-=t*p,i-=n*p),(c=u(o*o+i*i))&&(o/=c,i/=c,p/=c),t*i<n*o&&(t=-t,n=-n,p=-p,d=-d),{translateX:s,translateY:l,rotate:wh(n,t)*vO,skewX:r(p)*vO,scaleX:d,scaleY:c}},kO=Gi(function(e){return"none"===e?SO:(re||(re=document.createElement("DIV"),HO=document.documentElement,YO=document.defaultView),re.style.transform=e,e=YO.getComputedStyle(HO.appendChild(re),null).getPropertyValue("transform"),HO.removeChild(re),e=e.slice(7,-1).split(","),TO(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),OO=Gi(function(e){return null==e?SO:(GO||(GO=document.createElementNS("http://www.w3.org/2000/svg","g")),GO.setAttribute("transform",e),!(e=GO.transform.baseVal.consolidate()))?SO:(e=e.matrix,TO(e.a,e.b,e.c,e.d,e.e,e.f))},", ",")",")"),EO=Ah,CO=2,wO=4,LO=Qi(Bi),AO=Qi(qi),NO=Ji(Bi),PO=Ji(qi),RO=es(Bi),DO=es(qi),IO=Object.freeze({interpolate:_O,interpolateArray:uO,interpolateBasis:iO,interpolateBasisClosed:sO,interpolateDate:mO,interpolateNumber:fO,interpolateObject:yO,interpolateRound:xO,interpolateString:bO,interpolateTransformCss:kO,interpolateTransformSvg:OO,interpolateZoom:function(e,t){var n=e[0],r=e[1],a=e[2],s=t[0],l=t[1],d=t[2],c=s-n,p=l-r,f=c*c+p*p,y,i;if(f<1e-12)i=m(d/a)/EO,y=function(e){return[n+e*c,r+e*p,a*o(EO*e*i)]};else{var g=u(f),h=(d*d-a*a+wO*f)/(2*a*CO*g),b=(d*d-a*a-wO*f)/(2*d*CO*g),_=m(u(h*h+1)-h),x=m(u(b*b+1)-b);i=(x-_)/EO,y=function(e){var t=e*i,o=Zi(_),s=a/(CO*g)*(o*Ki(EO*t+_)-Xi(_));return[n+s*c,r+s*p,a*o/Zi(EO*t+_)]}}return y.duration=1e3*i,y},interpolateRgb:dO,interpolateRgbBasis:cO,interpolateRgbBasisClosed:pO,interpolateHsl:LO,interpolateHslLong:AO,interpolateLab:function(e,t){var n=qi((e=Ci(e)).l,(t=Ci(t)).l),r=qi(e.a,t.a),a=qi(e.b,t.b),o=qi(e.opacity,t.opacity);return function(i){return e.l=n(i),e.a=r(i),e.b=a(i),e.opacity=o(i),e+""}},interpolateHcl:NO,interpolateHclLong:PO,interpolateCubehelix:RO,interpolateCubehelixLong:DO,quantize:function(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}}),MO=function(e){return function(){return e}},FO=function(e){return+e},jO=[0,1],zO=function(e,t){if(0>(r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,r),r;return[1<n.length?n[0]+n.slice(2):n,+e.slice(r+1)]},UO=function(e){return e=zO(p(e)),e?e[1]:NaN},$O=function(e,n){return function(r,a){for(var o=r.length,i=[],t=0,s=e[0],l=0;0<o&&0<s&&(l+s+1>a&&(s=S(1,a-l)),i.push(r.substring(o-=s,o+s)),!((l+=s+1)>a));)s=e[t=(t+1)%e.length];return i.reverse().join(n)}},BO=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},WO=function(e,t){var n=zO(e,t);if(!n)return e+"";var r=n[0],a=n[1];return 0>a?"0."+Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+Array(a-r.length+2).join("0")},qO={"":function(e,t){e=e.toPrecision(t);out:for(var r=e.length,n=1,a=-1,o;n<r;++n)switch(e[n]){case".":a=o=n;break;case"0":0===a&&(a=n),o=n;break;case"e":break out;default:0<a&&(a=0);}return 0<a?e.slice(0,a)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return f(e).toString(2)},c:function(e){return e+""},d:function(e){return f(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return f(e).toString(8)},p:function(e,t){return WO(100*e,t)},r:WO,s:function(e,t){var r=zO(e,t);if(!r)return e+"";var a=r[0],o=r[1],s=o-(ZO=3*S(-8,N(8,g(o/3))))+1,i=a.length;return s===i?a:s>i?a+Array(s-i+1).join("0"):0<s?a.slice(0,s)+"."+a.slice(s):"0."+Array(1-s).join("0")+zO(e,S(0,t+s-1))[0]},X:function(e){return f(e).toString(16).toUpperCase()},x:function(e){return f(e).toString(16)}},VO=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,re,HO,YO,GO,ZO;ds.prototype=cs.prototype,cs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":S(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+S(0,0|this.precision))+this.type};var XO=function(e){return e},KO=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],QO=function(e){function t(e){function t(e){var t=h,v=b,S,i,n;if("c"===g)v=_(e)+v,e="";else{e=+e;var c=0>e;if(e=_(p(e),y),c&&0==+e&&(c=!1),t=(c?"("===d?d:"-":"-"===d||"("===d?"":d)+t,v=v+("s"===g?KO[8+ZO/3]:"")+(c&&"("===d?")":""),x)for(S=-1,i=e.length;++S<i;)if(n=e.charCodeAt(S),48>n||57<n){v=(46===n?a+e.slice(S+1):e.slice(S))+v,e=e.slice(0,S);break}}f&&!u&&(e=r(e,Infinity));var T=t.length+e.length+v.length,k=T<m?Array(m-T+1).join(s):"";switch(f&&u&&(e=r(k+e,k.length?m-v.length:Infinity),k=""),l){case"<":e=t+e+v+k;break;case"=":e=t+k+e+v;break;case"^":e=k.slice(0,T=k.length>>1)+t+e+v+k.slice(T);break;default:e=k+t+e+v;}return o(e)}e=ds(e);var s=e.fill,l=e.align,d=e.sign,c=e.symbol,u=e.zero,m=e.width,f=e.comma,y=e.precision,g=e.type,h="$"===c?n[0]:"#"===c&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===c?n[1]:/[%p]/.test(g)?i:"",_=qO[g],x=!g||/[defgprs%]/.test(g);return y=null==y?g?6:12:/[gprs]/.test(g)?S(1,N(21,y)):S(0,N(20,y)),t.toString=function(){return e+""},t}var r=e.grouping&&e.thousands?$O(e.grouping,e.thousands):XO,n=e.currency,a=e.decimal,o=e.numerals?BO(e.numerals):XO,i=e.percent||"%";return{format:t,formatPrefix:function(n,r){var a=t((n=ds(n),n.type="f",n)),o=3*S(-8,N(8,g(UO(r)/3))),i=O(10,-o),s=KO[8+o/3];return function(e){return a(i*e)+s}}}},JO,eE,tE;ps({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var nE=function(e){return S(0,-UO(p(e)))},rE=function(e,t){return S(0,3*S(-8,N(8,g(UO(t)/3)))-UO(p(e)))},aE=function(e,t){return e=p(e),t=p(t)-e,S(0,UO(t)-UO(e))+1},oE=function(e,t,n){var r=e[0],a=e[e.length-1],o=dn(r,a,null==t?10:t),i;switch(n=ds(null==n?",f":n),n.type){case"s":{var s=S(p(r),p(a));return null!=n.precision||isNaN(i=rE(o,s))||(n.precision=i),tE(n,s)}case"":case"e":case"g":case"p":case"r":{null!=n.precision||isNaN(i=aE(o,S(p(r),p(a))))||(n.precision=i-("e"===n.type));break}case"f":case"%":{null!=n.precision||isNaN(i=nE(o))||(n.precision=i-2*("%"===n.type));break}}return eE(n)},iE=function(e,n){e=e.slice();var r=0,a=e.length-1,o=e[r],i=e[a],s;return i<o&&(s=r,r=a,a=s,s=o,o=i,i=s),e[r]=n.floor(o),e[a]=n.ceil(i),e},sE=1e3,lE=60*sE,dE=60*lE,cE=24*dE,pE=7*cE,uE=30*cE,mE=365*cE,fE=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},yE=fE("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gE=fE("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),hE=fE("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),bE=fE("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");DO(Fi(300,0.5,0),Fi(-240,0.5,1));var _E=DO(Fi(-100,0.75,0.35),Fi(80,1.5,0.8)),xE=DO(Fi(260,0.75,0.35),Fi(80,1.5,0.8)),vE=Fi(),SE=As(fE("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),TE=As(fE("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),kE=As(fE("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),OE=As(fE("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),EE=Array.prototype.map,CE=Array.prototype.slice,wE={identity:fs,linear:ms,log:vs,ordinal:ui,pow:Ts,sqrt:function(){return Ts().exponent(0.5)},quantile:ks,quantize:Os,threshold:Es,time:function(){return Ls(x_,__,u_,p_,c_,d_,l_,n_,j_).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Ls(P_,N_,k_,T_,S_,v_,l_,n_,U_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Ns,point:function(){return Ps(Ns().paddingInner(1))},sequential:Ms,"bin-linear":Ds,"bin-ordinal":Is};for(var LE in wE)js(LE,wE[LE]);var AE=zs("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),NE=zs("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),PE=[,,,].concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(zs),RE=function(e){for(var t=0|e.length/6,n=Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n},DE=RE("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),IE=RE("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ME=RE("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),FE=RE("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),jE=RE("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zE=RE("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),UE=RE("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),$E=RE("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),BE=function(e){return cO(e[e.length-1])},WE=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(RE),qE=BE(WE),VE=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(RE),HE=BE(VE),YE=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(RE),GE=BE(YE),ZE=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(RE),XE=BE(ZE),KE=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(RE),QE=BE(KE),JE=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(RE),eC=BE(JE),tC=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(RE),nC=BE(tC),rC=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(RE),aC=BE(rC),oC=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(RE),iC=BE(oC),sC=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(RE),lC=BE(sC),dC=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(RE),cC=BE(dC),pC=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(RE),uC=BE(pC),mC=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(RE),fC=BE(mC),yC=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(RE),gC=BE(yC),hC=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(RE),bC=BE(hC),_C=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(RE),xC=BE(_C),vC=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(RE),SC=BE(vC),TC=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(RE),kC=BE(TC),OC=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(RE),EC=BE(OC),CC=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(RE),wC=BE(CC),LC=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(RE),AC=BE(LC),NC=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(RE),PC=BE(NC),RC=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(RE),DC=BE(RC),IC=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(RE),MC=BE(IC),FC=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(RE),jC=BE(FC),zC=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(RE),UC=BE(zC),$C=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(RE),BC=BE($C),WC=Object.freeze({schemeAccent:DE,schemeDark2:IE,schemePaired:ME,schemePastel1:FE,schemePastel2:jE,schemeSet1:zE,schemeSet2:UE,schemeSet3:$E,interpolateBrBG:qE,schemeBrBG:WE,interpolatePRGn:HE,schemePRGn:VE,interpolatePiYG:GE,schemePiYG:YE,interpolatePuOr:XE,schemePuOr:ZE,interpolateRdBu:QE,schemeRdBu:KE,interpolateRdGy:eC,schemeRdGy:JE,interpolateRdYlBu:nC,schemeRdYlBu:tC,interpolateRdYlGn:aC,schemeRdYlGn:rC,interpolateSpectral:iC,schemeSpectral:oC,interpolateBuGn:lC,schemeBuGn:sC,interpolateBuPu:cC,schemeBuPu:dC,interpolateGnBu:uC,schemeGnBu:pC,interpolateOrRd:fC,schemeOrRd:mC,interpolatePuBuGn:gC,schemePuBuGn:yC,interpolatePuBu:bC,schemePuBu:hC,interpolatePuRd:xC,schemePuRd:_C,interpolateRdPu:SC,schemeRdPu:vC,interpolateYlGnBu:kC,schemeYlGnBu:TC,interpolateYlGn:EC,schemeYlGn:OC,interpolateYlOrBr:wC,schemeYlOrBr:CC,interpolateYlOrRd:AC,schemeYlOrRd:LC,interpolateBlues:PC,schemeBlues:NC,interpolateGreens:DC,schemeGreens:RC,interpolateGreys:MC,schemeGreys:IC,interpolatePurples:jC,schemePurples:FC,interpolateReds:UC,schemeReds:zC,interpolateOranges:BC,schemeOranges:$C}),_={blueorange:PE},qC={category10:yE,category20:bE,category20b:gE,category20c:hE,accent:DE,dark2:IE,paired:ME,pastel1:FE,pastel2:jE,set1:zE,set2:UE,set3:$E,tableau10:AE,tableau20:NE,viridis:SE,magma:TE,inferno:kE,plasma:OE,blueorange:cO(yb(PE))};Us("blues","Blues"),Us("greens","Greens"),Us("greys","Greys"),Us("purples","Purples"),Us("reds","Reds"),Us("oranges","Oranges"),Us("brownbluegreen","BrBG"),Us("purplegreen","PRGn"),Us("pinkyellowgreen","PiYG"),Us("purpleorange","PuOr"),Us("redblue","RdBu"),Us("redgrey","RdGy"),Us("redyellowblue","RdYlBu"),Us("redyellowgreen","RdYlGn"),Us("spectral","Spectral"),Us("bluegreen","BuGn"),Us("bluepurple","BuPu"),Us("greenblue","GnBu"),Us("orangered","OrRd"),Us("purplebluegreen","PuBuGn"),Us("purpleblue","PuBu"),Us("purplered","PuRd"),Us("redpurple","RdPu"),Us("yellowgreenblue","YlGnBu"),Us("yellowgreen","YlGn"),Us("yelloworangebrown","YlOrBr"),Us("yelloworangered","YlOrRd");var VC=function(e,t){if(1<arguments.length)return qC[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&_.hasOwnProperty(e)?_[e][n-1]:!n&&qC.hasOwnProperty(e)?qC[e]:void 0},HC={millisecond:n_,second:l_,minute:d_,hour:c_,day:p_,week:u_,month:__,year:x_},YC={millisecond:n_,second:l_,minute:v_,hour:S_,day:T_,week:k_,month:N_,year:P_},GC=ib(nl,Gt);GC.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,o=e.values?e.values.length:Gs(a,e.count),i=e.format||Ks(a,o,e.formatSpecifier),s=e.values?Zs(a,e.values):Xs(a,o);return r&&(n.rem=r),r=s.map(function(e){return F({value:e,label:i(e)})}),e.extra&&r.push(F({extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};var ZC=ib(rl,Gt);ZC.transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.item||al,o=e.key||I,i=this.value;return Ih(r.encode)&&(r.encode=null),i||(t=t.addAll(),this.value=i=ob().test(ol),i.lookup=function(e){return i.get(o(e))}),(e.modified("key")||t.modified(o))&&Rh("DataJoin does not support modified key function or fields."),t.visit(t.ADD,function(e){var t=o(e),n=i.get(t);n?n.exit?(i.empty--,r.add.push(n)):r.mod.push(n):(i.set(t,n=a(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=o(e),n=i.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=o(e),n=i.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++i.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&i.empty>n.cleanThreshold&&n.runAfter(i.clean),r};var XC=ib(il,Gt);XC.transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,a=t.encode;if(Ih(a))if(n.changed()||a.every(function(t){return r[t]}))a=a[0];else return t.StopPropagation;var o="enter"===a,i=r.update||qh,s=r.enter||qh,l=r.exit||qh,d=(a&&!o?r[a]:i)||qh;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(n){s(n,e),i(n,e),d!==qh&&d!==i&&d(n,e)}),n.modifies(s.output),n.modifies(i.output),d!==qh&&d!==i&&n.modifies(d.output)),t.changed(t.REM)&&l!==qh&&(t.visit(t.REM,function(n){l(n,e)}),n.modifies(l.output)),o||d!==qh){var c=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(c,function(r){var t=s(r,e);(d(r,e)||t)&&n.mod.push(r)}),n.mod.length&&n.modifies(s.output)):t.visit(c,function(r){d(r,e)&&n.mod.push(r)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation};var KC={};KC[Ck]=function(e){var t=[-Infinity].concat(e.quantiles());return t.max=+Infinity,t},KC[wk]=function(e){var t=e.domain(),r=t[0],a=yb(t),o=e.range().length,n=Array(o),s=0;for(n[0]=-Infinity;++s<o;)n[s]=(s*a-(s-o)*r)/o;return n.max=+Infinity,n},KC[Lk]=function(e){var t=[-Infinity].concat(e.domain());return t.max=+Infinity,t},KC["bin-linear"]=ll,KC[Ak]=ll;var QC=ib(ml,Gt);QC.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=0,a=this.value,o="gradient"===e.type,i=e.scale,s=null==e.count?5:Gs(i,e.count),l=e.format||Ks(i,s,e.formatSpecifier),d=e.values||sl(i,s,o);if(l=dl(i,l),a&&(n.rem=a),o)var c=e.values?i.domain():d,p=Bs(i,c[0],yb(c));else{var u=e.size,m;Qh(u)?(!e.values&&0===i(d[0])&&(d=d.slice(1)),m=d.reduce(function(t,n){return S(t,u(n,e))},0)):u=eb(m=u||8)}return a=d.map(function(n,a){var i=F({index:a,label:l(n,a,d),value:n});return o?i.perc=p(n):(i.offset=m,i.size=u(n,e),i.total=f(r),r+=i.size),i}),n.source=a,n.add=a,this.value=a,n};var JC=ob({line:_l,"line-radial":function(e,t,n,r){return _l(t*c(e),t*s(e),r*c(n),r*s(n))},arc:xl,"arc-radial":function(e,t,n,r){return xl(t*c(e),t*s(e),r*c(n),r*s(n))},curve:vl,"curve-radial":function(e,t,n,r){return vl(t*c(e),t*s(e),r*c(n),r*s(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var a=c(e),o=s(e),i=c(n),d=s(n),u=p(n-e)>l?n<=e:n>e;return"M"+t*a+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*i+","+t*d+"L"+r*i+","+r*d},"diagonal-horizontal":function(e,t,n,r){var a=(e+n)/2;return"M"+e+","+t+"C"+a+","+t+" "+a+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var a=(t+r)/2;return"M"+e+","+t+"C"+e+","+a+" "+n+","+a+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var a=c(e),o=s(e),i=c(n),l=s(n),d=(t+r)/2;return"M"+t*a+","+t*o+"C"+d*a+","+d*o+" "+d*i+","+d*l+" "+r*i+","+r*l}});bl.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var ew=ib(bl,Gt);ew.transform=function(e,t){var n=e.sourceX||fl,r=e.sourceY||yl,a=e.targetX||gl,o=e.targetY||hl,i=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",d=JC.get(l+"-"+s)||JC.get(l);return d||Rh("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[i]=d(n(e),r(e),a(e),o(e))}),t.reflow(e.modified()).modifies(i)},Sl.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var tw=ib(Sl,Gt);tw.transform=function(e,r){var o=e.as||["startAngle","endAngle"],s=o[0],d=o[1],c=e.field||Bh,p=e.startAngle||0,u=null==e.endAngle?2*l:e.endAngle,m=r.source,f=m.map(c),y=f.length,n=p,a=(u-p)/Rx(f),g=Tx(y),h,i,t;for(e.sort&&g.sort(function(e,t){return f[e]-f[t]}),h=0;h<y;++h)t=f[g[h]],i=m[g[h]],i[s]=n,i[d]=n+=t*a;return this.value=f,r.reflow(e.modified()).modifies(o)};var nw=5,rw=xb([Ok,"pow","sqrt"]),aw=xb(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),ow=ib(Tl,Gt);ow.transform=function(e,t){var n=t.dataflow,r=this.value,a;for(a in(!r||e.modified("type"))&&(this.value=r=js((e.type||Ok).toLowerCase())()),e)aw[a]||(Qh(r[a])?r[a](e[a]):n.warn("Unsupported scale property: "+a));return El(r,e,kl(r,e,n)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var iw=ib(Pl,Gt);iw.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};Rl.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var sw=ib(Rl,Gt);sw.transform=function(e,t){var r=e.as||["y0","y1"],a=r[0],o=r[1],s=e.field||Bh,l=e.offset==="center"?Dl:e.offset==="normalize"?Il:Ml,d,c,i,n;for(d=Fl(t.source,e.groupby,e.sort,s),c=0,i=d.length,n=d.max;c<i;++c)l(d[c],n,s,a,o);return t.reflow(e.modified()).modifies(r)};var lw=Object.freeze({axisticks:nl,datajoin:rl,encode:il,legendentries:ml,linkpath:bl,pie:Sl,scale:Tl,sortitems:Pl,stack:Rl}),dw=Array.prototype,pw=dw.slice,uw=function(e,t){return e-t},mw=function(e){for(var t=0,r=e.length,n=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n},fw=function(e){return function(){return e}},yw=function(e,t){for(var r=-1,a=t.length,n;++r<a;)if(n=jl(e,t[r]))return n;return 0},gw=function(){},hw=[[],[[[1,1.5],[0.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[0.5,1]]],[[[1,0.5],[1.5,1]]],[[[1,0.5],[0.5,1]],[[1,1.5],[1.5,1]]],[[[1,0.5],[1,1.5]]],[[[1,0.5],[0.5,1]]],[[[0.5,1],[1,0.5]]],[[[1,1.5],[1,0.5]]],[[[0.5,1],[1,1.5]],[[1.5,1],[1,0.5]]],[[[1.5,1],[1,0.5]]],[[[0.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[0.5,1],[1,1.5]]],[]],bw=function(){function e(e){var n=i(e);if(!Array.isArray(n)){var r=Sx(e),a=r[0],o=r[1];n=dn(a,o,n),n=Tx(g(a/n)*n,g(o/n)*n,n)}else n=n.slice().sort(uw);var l=n.map(function(n){var r=[],a=[];return t(e,n,function(t){s(t,e,n),0<mw(t)?r.push([t]):a.push(t)}),a.forEach(function(e){for(var t=0,a=r.length,n;t<a;++t)if(-1!==yw((n=r[t])[0],e))return void n.push(e)}),r});return l.map(function(e,t){return{type:"MultiPolygon",value:n[t],coordinates:e}})}function t(e,t,r){function i(e){var t=[e[0][0]+d,e[0][1]+c],a=[e[1][0]+d,e[1][1]+c],o=n(t),i=n(a),p,u;(p=l[o])?(u=s[i])?(delete l[p.end],delete s[u.start],p==u?(p.ring.push(a),r(p.ring)):s[p.start]=l[u.end]={start:p.start,end:u.end,ring:p.ring.concat(u.ring)}):(delete l[p.end],p.ring.push(a),l[p.end=i]=p):(p=s[i])?(u=l[o])?(delete s[p.start],delete l[u.end],p===u?(p.ring.push(a),r(p.ring)):s[u.start]=l[p.end]={start:u.start,end:p.end,ring:u.ring.concat(p.ring)}):(delete s[p.start],p.ring.unshift(t),s[p.start=o]=p):s[o]=l[i]={start:o,end:i,ring:[t,a]}}var s=[],l=[],d,c,p,u,m,f;for(d=c=-1,u=e[0]>=t,hw[u<<1].forEach(i);++d<a-1;)p=u,u=e[d+1]>=t,hw[p|u<<1].forEach(i);for(hw[u<<0].forEach(i);++c<o-1;){for(d=-1,u=e[c*a+a]>=t,m=e[c*a]>=t,hw[u<<1|m<<2].forEach(i);++d<a-1;)p=u,u=e[c*a+a+d+1]>=t,f=m,m=e[c*a+d+1]>=t,hw[p|u<<1|m<<2|f<<3].forEach(i);hw[u|m<<3].forEach(i)}for(d=-1,m=e[c*a]>=t,hw[m<<2].forEach(i);++d<a-1;)f=m,m=e[c*a+d+1]>=t,hw[m<<2|f<<3].forEach(i);hw[m<<3].forEach(i)}function n(e){return 2*e[0]+4*(e[1]*(a+1))}function r(e,t,n){e.forEach(function(e){var r=e[0],i=e[1],s=0|r,l=0|i,d=t[l*a+s],c;0<r&&r<a&&s===r&&(c=t[l*a+s-1],e[0]=r+(n-c)/(d-c)-0.5),0<i&&i<o&&l===i&&(c=t[(l-1)*a+s],e[1]=i+(n-c)/(d-c)-0.5)})}var a=1,o=1,i=wx,s=r;return e.size=function(t){if(!arguments.length)return[a,o];var n=T(t[0]),r=T(t[1]);if(!(0<n)||!(0<r))throw new Error("invalid size");return a=n,o=r,e},e.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?fw(pw.call(t)):fw(t),e):i},e.smooth=function(t){return arguments.length?(s=t?r:gw,e):s===r},e},_w=function(){function e(e){var a=new Float32Array(o*x),i=new Float32Array(o*x);e.forEach(function(e,t,n){var i=c(e,t,n)+_>>r,s=p(e,t,n)+_>>r;0<=i&&i<o&&0<=s&&s<x&&++a[i+s*o]}),Bl({width:o,height:x,data:a},{width:o,height:x,data:i},b>>r),Wl({width:o,height:x,data:i},{width:o,height:x,data:a},b>>r),Bl({width:o,height:x,data:a},{width:o,height:x,data:i},b>>r),Wl({width:o,height:x,data:i},{width:o,height:x,data:a},b>>r),Bl({width:o,height:x,data:a},{width:o,height:x,data:i},b>>r),Wl({width:o,height:x,data:i},{width:o,height:x,data:a},b>>r);var s=v(a);if(!Array.isArray(s)){var l=Ax(a);s=dn(0,l,s),s=Tx(0,g(l/s)*s,s),s.shift()}return bw().thresholds(s).size([o,x])(a).map(t)}function t(e){return e.value*=O(2,-2*r),e.coordinates.forEach(a),e}function a(e){e.forEach(i)}function i(e){e.forEach(s)}function s(e){e[0]=e[0]*O(2,r)-_,e[1]=e[1]*O(2,r)-_}function l(){return _=3*b,o=y+2*_>>r,x=h+2*_>>r,e}var c=ql,p=Vl,y=960,h=500,b=20,r=2,_=3*b,o=y+2*_>>r,x=h+2*_>>r,v=fw(20);return e.x=function(t){return arguments.length?(c="function"==typeof t?t:fw(+t),e):c},e.y=function(t){return arguments.length?(p="function"==typeof t?t:fw(+t),e):p},e.size=function(e){if(!arguments.length)return[y,h];var t=T(e[0]),n=T(e[1]);if(!(0<=t)&&!(0<=t))throw new Error("invalid size");return y=t,h=n,l()},e.cellSize=function(e){if(!arguments.length)return 1<<r;if(!(1<=(e=+e)))throw new Error("invalid cell size");return r=g(m(e)/d),l()},e.thresholds=function(t){return arguments.length?(v="function"==typeof t?t:Array.isArray(t)?fw(pw.call(t)):fw(t),e):v},e.bandwidth=function(e){if(!arguments.length)return u(b*(b+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return b=f((u(4*e*e+1)-1)/2),l()},e},xw=["values","size"],vw=["x","y","size","cellSize","bandwidth"];Hl.Definition={type:"Contour",metadata:{generates:!0,source:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"number",default:!1},{name:"thresholds",type:"number",array:!0}]};var Sw=ib(Hl,Gt);Sw.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.count||10,a,o,i;return e.values?(a=bw(),o=xw,i=e.values):(a=_w(),o=vw,i=t.materialize(t.SOURCE).source),a.thresholds(e.thresholds||(e.nice?r:Yl(r))),o.forEach(function(t){null!=e[t]&&a[t](e[t])}),this.value&&(n.rem=this.value),this.value=n.source=n.add=a(i).map(F),n};var Tw="FeatureCollection";Gl.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var kw=ib(Gl,Gt);kw.transform=function(e,t){var n=this._features,r=this._points,a=e.fields,o=a&&a[0],i=a&&a[1],s=e.geojson,l=t.ADD,d;d=e.modified()||t.changed(t.REM)||t.modified(w(s))||o&&t.modified(w(o))||i&&t.modified(w(i)),(!this.value||d)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(l,function(e){n.push(s(e))}),o&&i&&(t.visit(l,function(e){var t=o(e),n=i(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&r.push([t,n])}),n=n.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:r}})),this.value={type:Tw,features:n}};var Ow=function(){return new Zl};Zl.prototype={constructor:Zl,reset:function(){this.s=this.t=0},add:function(e){Xl(Ew,e,this.t),Xl(this,Ew.s,this.s),this.s?this.t+=Ew.t:this.s=Ew.t},valueOf:function(){return this.s}};var Ew=new Zl,Cw=1e-6,ww=l,Lw=ww/2,Aw=ww/4,Nw=2*ww,Pw=180/ww,Rw=ww/180,Dw=p,Iw=r,Mw=wh,Fw=c,jw=T,zw=o,Uw=m,$w=O,Bw=s,Ww=Oh||function(e){return 0<e?1:0>e?-1:0},qw=u,Vw=a,Hw={Feature:function(e,t){ed(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,o=r.length;++a<o;)ed(r[a].geometry,t)}},Yw={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){td(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)td(r[a],t,0)},Polygon:function(e,t){nd(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)nd(r[a],t)},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,o=r.length;++a<o;)ed(r[a],t)}},Gw=function(e,t){e&&Hw.hasOwnProperty(e.type)?Hw[e.type](e,t):ed(e,t)},Zw=Ow(),Xw=Ow(),Kw=Ow(),Qw=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n};pd.invert=pd;var Jw=function(e){function t(t){return t=e(t[0]*Rw,t[1]*Rw),t[0]*=Pw,t[1]*=Pw,t}return e=ud(e[0]*Rw,e[1]*Rw,2<e.length?e[2]*Rw:0),t.invert=function(t){return t=e.invert(t[0]*Rw,t[1]*Rw),t[0]*=Pw,t[1]*=Pw,t},t},eL=function(){var e=[],t;return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Jl,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},tL=function(e,t,n,a,o,i){var s=e[0],l=e[1],d=t[0],c=t[1],p=0,u=1,m=d-s,f=c-l,y;if(y=n-s,m||!(0<y)){if(y/=m,0>m){if(y<p)return;y<u&&(u=y)}else if(0<m){if(y>u)return;y>p&&(p=y)}if(y=o-s,m||!(0>y)){if(y/=m,0>m){if(y>u)return;y>p&&(p=y)}else if(0<m){if(y<p)return;y<u&&(u=y)}if(y=a-l,f||!(0<y)){if(y/=f,0>f){if(y<p)return;y<u&&(u=y)}else if(0<f){if(y>u)return;y>p&&(p=y)}if(y=i-l,f||!(0>y)){if(y/=f,0>f){if(y>u)return;y>p&&(p=y)}else if(0<f){if(y<p)return;y<u&&(u=y)}return 0<p&&(e[0]=s+p*m,e[1]=l+p*f),1>u&&(t[0]=s+u*m,t[1]=l+u*f),!0}}}}},nL=function(e,t){return Dw(e[0]-t[0])<Cw&&Dw(e[1]-t[1])<Cw},rL=function(e,t,r,a,o){var s=[],l=[],d,i;if(e.forEach(function(e){if(!(0>=(a=e.length-1))){var t=e[0],r=e[a],a,n;if(nL(t,r)){for(o.lineStart(),d=0;d<a;++d)o.point((t=e[d])[0],t[1]);return void o.lineEnd()}s.push(n=new bd(t,e,null,!0)),l.push(n.o=new bd(t,null,n,!1)),s.push(n=new bd(r,e,null,!1)),l.push(n.o=new bd(r,null,n,!0))}}),!!s.length){for(l.sort(t),_d(s),_d(l),(d=0,i=l.length);d<i;++d)l[d].e=r=!r;for(var n=s[0],c,p;;){for(var u=n,m=!0;u.v;)if((u=u.n)===n)return;c=u.z,o.lineStart();do{if(u.v=u.o.v=!0,u.e){if(m)for(d=0,i=c.length;d<i;++d)o.point((p=c[d])[0],p[1]);else a(u.x,u.n.x,1,o);u=u.n}else{if(m)for(c=u.p.z,d=c.length-1;0<=d;--d)o.point((p=c[d])[0],p[1]);else a(u.x,u.p.x,-1,o);u=u.p}u=u.o,c=u.z,m=!m}while(!u.v);o.lineEnd()}}},aL=1e9,oL=-aL,iL=Ow(),sL=function(e,t){var r=t[0],a=t[1],o=[Bw(r),-Fw(r),0],s=0,l=0;iL.reset();for(var d=0,i=e.length;d<i;++d)if(h=(g=e[d]).length)for(var n=g[h-1],c=n[0],p=n[1]/2+Aw,u=Bw(p),f=Fw(p),y=0,g,h;y<h;++y,c=b,u=x,f=v,n=m){var m=g[y],b=m[0],_=m[1]/2+Aw,x=Bw(_),v=Fw(_),S=b-c,T=0<=S?1:-1,O=T*S,E=O>ww,C=u*x;if(iL.add(Mw(C*T*Bw(O),f*v+C*Fw(O))),s+=E?S+T*Nw:S,E^c>=r^b>=r){var k=sd(ad(n),ad(m));cd(k);var w=sd(o,k);cd(w);var A=(E^0<=S?-1:1)*Ql(w[2]);(a>A||a===A&&(k[0]||k[1]))&&(l+=E^0<=S?1:-1)}}return(s<-Cw||s<Cw&&iL<-Cw)^1&l},lL=Ow(),dL={sphere:Jl,point:Jl,lineStart:function(){dL.point=Sd,dL.lineEnd=vd},lineEnd:Jl,polygonStart:Jl,polygonEnd:Jl},cL=function(e){return lL.reset(),Gw(e,dL),+lL},pL=[null,null],uL={type:"LineString",coordinates:pL},mL=function(e,t){return pL[0]=e,pL[1]=t,cL(uL)},fL={Sphere:function(){return!0},Point:function(e,t){return Od(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)if(Od(r[a],t))return!0;return!1},LineString:function(e,t){return Ed(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)if(Ed(r[a],t))return!0;return!1},Polygon:function(e,t){return Cd(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,o=r.length;++a<o;)if(Cd(r[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,o=r.length;++a<o;)if(kd(r[a],t))return!0;return!1}},yL=function(e){return e},gL=Ow(),hL=Ow(),bL={point:Jl,lineStart:Jl,lineEnd:Jl,polygonStart:function(){bL.lineStart=Rd,bL.lineEnd=Md},polygonEnd:function(){bL.lineStart=bL.lineEnd=bL.point=Jl,gL.add(Dw(hL)),hL.reset()},result:function(){return gL.reset(),gL/2}},_L=Infinity,xL=_L,vL=-_L,SL=vL,TL={point:function(e,t){e<_L&&(_L=e),e>vL&&(vL=e),t<xL&&(xL=t),t>SL&&(SL=t)},lineStart:Jl,lineEnd:Jl,polygonStart:Jl,polygonEnd:Jl,result:function(){var e=[[_L,xL],[vL,SL]];return vL=SL=-(xL=_L=Infinity),e}},kL=0,OL=0,EL=0,CL=0,wL=0,LL=0,AL=0,NL=0,PL=0,RL={point:Fd,lineStart:jd,lineEnd:$d,polygonStart:function(){RL.lineStart=Bd,RL.lineEnd=Wd},polygonEnd:function(){RL.point=Fd,RL.lineStart=jd,RL.lineEnd=$d},result:function(){var e=PL?[AL/PL,NL/PL]:LL?[CL/LL,wL/LL]:EL?[kL/EL,OL/EL]:[NaN,NaN];return kL=OL=EL=CL=wL=LL=AL=NL=PL=0,e}},DL,IL,ML,FL,jL,zL,UL,$L,BL,WL,qL;Hd.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Nw);break}}},result:Jl};var VL=Ow(),HL={point:Jl,lineStart:function(){HL.point=Yd},lineEnd:function(){YL&&Gd(GL,ZL),HL.point=Jl},polygonStart:function(){YL=!0},polygonEnd:function(){YL=null},result:function(){return VL.reset(),+VL}},YL,GL,ZL,XL,KL;Zd.prototype={_radius:4.5,_circle:Xd(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{null==this._circle&&(this._circle=Xd(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var QL=function(e,t){function n(e){return e&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),Gw(e,a(o))),o.result()}var r=4.5,a,o;return n.area=function(e){return Gw(e,a(bL)),bL.result()},n.measure=function(e){return Gw(e,a(HL)),HL.result()},n.bounds=function(e){return Gw(e,a(TL)),TL.result()},n.centroid=function(e){return Gw(e,a(RL)),RL.result()},n.projection=function(t){return arguments.length?(a=null==t?(e=null,yL):(e=t).stream,n):e},n.context=function(e){return arguments.length?(o=null==e?(t=null,new Zd):new Hd(t=e),"function"!=typeof r&&o.pointRadius(r),n):t},n.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(o.pointRadius(+e),+e),n):r},n.projection(e).context(t)},JL=function(e,t,n,r){return function(a,o){function i(t,n){var r=a(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=a(e,t);m.point(n[0],n[1])}function l(){b.point=s,m.lineStart()}function d(){b.point=i,m.lineEnd()}function c(e,t){v.push([e,t]);var n=a(e,t);g.point(n[0],n[1])}function p(){g.lineStart(),v=[]}function u(){c(v[0][0],v[0][1]),g.lineEnd();var e=g.clean(),t=y.result(),r=t.length,a,i,s,l;if(v.pop(),_.push(v),v=null,!!r){if(1&e){if(s=t[0],0<(i=s.length-1)){for(h||(o.polygonStart(),h=!0),o.lineStart(),a=0;a<i;++a)o.point((l=s[a])[0],l[1]);o.lineEnd()}return}1<r&&2&e&&t.push(t.pop().concat(t.shift())),x.push(t.filter(Kd))}}var m=t(o),f=a.invert(r[0],r[1]),y=eL(),g=t(y),h=!1,b={point:i,lineStart:l,lineEnd:d,polygonStart:function(){b.point=c,b.lineStart=p,b.lineEnd=u,x=[],_=[]},polygonEnd:function(){b.point=i,b.lineStart=l,b.lineEnd=d,x=Nx(x);var e=sL(_,f);x.length?(!h&&(o.polygonStart(),h=!0),rL(x,Qd,e,n,o)):e&&(!h&&(o.polygonStart(),h=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),x=_=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_,x,v;return b}},eA=JL(function(){return!0},function(e){var t=NaN,n=NaN,r=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(o,i){var s=0<o?ww:-ww,l=Dw(o-t);Dw(l-ww)<Cw?(e.point(t,n=0<(n+i)/2?Lw:-Lw),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),a=0):r!==s&&l>=ww&&(Dw(t-r)<Cw&&(t-=r*Cw),Dw(o-s)<Cw&&(o-=s*Cw),n=Jd(t,n,o,i),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),a=0),e.point(t=o,n=i),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-a}}},function(e,t,n,r){var a;if(null==e)a=n*Lw,r.point(-ww,a),r.point(0,a),r.point(ww,a),r.point(ww,0),r.point(ww,-a),r.point(0,-a),r.point(-ww,-a),r.point(-ww,0),r.point(-ww,a);else if(Dw(e[0]-t[0])>Cw){var o=e[0]<t[0]?ww:-ww;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(t[0],t[1])},[-ww,-Lw]),tA=function(e,t){function n(e,t){return Fw(e)*Fw(t)>o}function r(e,n,r){var a=ad(e),i=ad(n),s=[1,0,0],l=sd(a,i),d=od(l,l),c=l[0],p=d-c*c;if(!p)return!r&&e;var m=sd(s,l),f=dd(s,o*d/p),y=dd(l,-o*c/p);ld(f,y);var g=m,u=od(f,g),h=od(g,g),b=u*u-h*(od(f,f)-1);if(!(0>b)){var _=qw(b),t=dd(g,(-u-_)/h);if(ld(t,f),t=rd(t),!r)return t;var x=e[0],v=n[0],S=e[1],T=n[1],k;v<x&&(k=x,x=v,v=k);var O=v-x,E=Dw(O-ww)<Cw;if(!E&&T<S&&(k=S,S=T,T=k),E||O<Cw?E?0<S+T^t[1]<(Dw(t[0]-x)<Cw?S:T):S<=t[1]&&t[1]<=T:O>ww^(x<=t[0]&&t[0]<=v)){var C=dd(g,(-u+_)/h);return ld(C,f),[t,rd(C)]}}}function a(t,n){var a=i?e:ww-e,o=0;return t<-a?o|=1:t>a&&(o|=2),n<-a?o|=4:n>a&&(o|=8),o}var o=Fw(e),i=0<o,s=Dw(o)>Cw;return JL(n,function(e){var o,l,d,p,u;return{lineStart:function(){p=d=!1,u=1},point:function(m,f){var y=[m,f],g=n(m,f),h=i?g?0:a(m,f):g?a(m+(0>m?ww:-ww),f):0,c;if(!o&&(p=d=g)&&e.lineStart(),g!==d&&(c=r(o,y),(!c||nL(o,c)||nL(y,c))&&(y[0]+=Cw,y[1]+=Cw,g=n(y[0],y[1]))),g!==d)u=0,g?(e.lineStart(),c=r(y,o),e.point(c[0],c[1])):(c=r(o,y),e.point(c[0],c[1]),e.lineEnd()),o=c;else if(s&&o&&i^g){var b;!(h&l)&&(b=r(y,o,!0))&&(u=0,i?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1])))}!g||o&&nL(o,y)||e.point(y[0],y[1]),o=y,d=g,l=h},lineEnd:function(){d&&e.lineEnd(),o=null},clean:function(){return u|(p&&d)<<1}}},function(n,r,a,o){gd(o,e,t,a,n,r)},i?[0,-e]:[-ww,e-ww])};tc.prototype={constructor:tc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nA=16,rA=Fw(30*Rw),aA=function(e,t){return+t?oc(e,t):ac(e)},oA=ec({point:function(e,t){this.stream.point(e*Rw,t*Rw)}}),iA=function(){return lc(cc).scale(155.424).center([0,33.6442])},sA=function(){return iA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])},lA=uc(function(e){return qw(2/(1+e))});lA.invert=mc(function(e){return 2*Ql(e/2)});var dA=uc(function(e){return(e=Kl(e))&&e/Bw(e)});dA.invert=mc(function(e){return e});fc.invert=function(e,t){return[e,2*Iw(zw(t))-Lw]};bc.invert=bc;xc.invert=mc(Iw);vc.invert=mc(Ql);Sc.invert=mc(function(e){return 2*Iw(e)});Tc.invert=function(e,t){return[-t,2*Iw(zw(e))-Lw]};var cA=QL(),pA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],uA={albers:sA,albersusa:function(){function e(e){var t=e[0],n=e[1];return p=null,(l.point(t,n),p)||(d.point(t,n),p)||(c.point(t,n),p)}function t(){return i=s=null,e}var n=sA(),r=iA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=iA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(e,t){p=[e,t]}},i,s,l,d,c,p;return e.invert=function(e){var o=n.scale(),i=n.translate(),t=(e[0]-i[0])/o,s=(e[1]-i[1])/o;return(0.12<=s&&0.234>s&&-0.425<=t&&-0.214>t?r:0.166<=s&&0.234>s&&-0.214<=t&&-0.115>t?a:n).invert(e)},e.stream=function(e){return i&&s===e?i:i=pc([n.stream(s=e),r.stream(e),a.stream(e)])},e.precision=function(e){return arguments.length?(n.precision(e),r.precision(e),a.precision(e),t()):n.precision()},e.scale=function(t){return arguments.length?(n.scale(t),r.scale(0.35*t),a.scale(t),e.translate(n.translate())):n.scale()},e.translate=function(e){if(!arguments.length)return n.translate();var i=n.scale(),s=+e[0],p=+e[1];return l=n.translate(e).clipExtent([[s-0.455*i,p-0.238*i],[s+0.455*i,p+0.238*i]]).stream(o),d=r.translate([s-0.307*i,p+0.201*i]).clipExtent([[s-0.425*i+Cw,p+0.12*i+Cw],[s-0.214*i-Cw,p+0.234*i-Cw]]).stream(o),c=a.translate([s-0.205*i,p+0.212*i]).clipExtent([[s-0.214*i+Cw,p+0.166*i+Cw],[s-0.115*i-Cw,p+0.234*i-Cw]]).stream(o),t()},e.fitExtent=function(t,n){return nc(e,t,n)},e.fitSize=function(t,n){return rc(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return ic(lA).scale(124.75).clipAngle(180-1e-3)},azimuthalequidistant:function(){return ic(dA).scale(79.4188).clipAngle(180-1e-3)},conicconformal:function(){return lc(hc).scale(109.5).parallels([30,30])},conicequalarea:iA,conicequidistant:function(){return lc(_c).scale(131.154).center([0,13.9389])},equirectangular:function(){return ic(bc).scale(152.63)},gnomonic:function(){return ic(xc).scale(144.049).clipAngle(60)},mercator:function(){return yc(fc).scale(961/Nw)},orthographic:function(){return ic(vc).scale(249.5).clipAngle(90+Cw)},stereographic:function(){return ic(Sc).scale(250).clipAngle(142)},transversemercator:function(){var e=yc(Tc),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}};for(var mA in uA)Oc(mA,uA[mA]);Cc.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"as",type:"string",default:"path"}]};var fA=ib(Cc,Gt);fA.transform=function(e,t){function n(e){e[i]=a(o(e))}var r=t.fork(t.ALL),a=this.value,o=e.field||id,i=e.as||"path",s;return!a||e.modified()?(this.value=a=Ec(e.projection).context(null),r.materialize().reflow().visit(r.SOURCE,n)):(a.context(null),s=o===id||t.modified(o.fields),r.visit(s?r.ADD_MOD:r.ADD,n)),r.modifies(i)},wc.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var yA=ib(wc,Gt);yA.transform=function(e,t){function n(e){var t=r([a(e),o(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}var r=e.projection,a=e.fields[0],o=e.fields[1],i=e.as||["x","y"],s=i[0],l=i[1],d;return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(d=t.modified(a.fields)||t.modified(o.fields),t.visit(d?t.ADD_MOD:t.ADD,n)),t.modifies(i)},Lc.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"as",type:"string",default:"shape"}]};var gA=ib(Lc,Gt);gA.transform=function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.field||jh("datum"),o=e.as||"shape",i=n.ADD_MOD;return(!r||e.modified())&&(this.value=r=Ac(Ec(e.projection),a),n.materialize().reflow(),i=n.SOURCE),n.visit(i,function(e){e[o]=r}),n.modifies(o)},Nc.Definition={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var hA=ib(Nc,Gt);hA.transform=function(e,n){var r=n.fork(),a=this.value,o=this.generator,i;if(!a.length||e.modified())for(var t in e)Qh(o[t])&&o[t](e[t]);return i=o(),a.length?r.mod.push(U(a[0],i)):r.add.push(F(i)),a[0]=i,r.source=a,r};var bA=ib(Pc,Gt);bA.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=Dc(e.type),pA.forEach(function(t){null!=e[t]&&Ic(n,t,e[t])})):pA.forEach(function(t){e.modified(t)&&Ic(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&Rc(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var _A=Object.freeze({contour:Hl,geojson:Gl,geopath:Cc,geopoint:wc,geoshape:Lc,graticule:Nc,projection:Pc}),xA=function(e){return function(){return e}},vA=function(){return 1e-6*(Math.random()-0.5)},SA=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a},TA=Uc.prototype=$c.prototype;TA.copy=function(){var e=new $c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Bc(t),e;for(n=[{source:t,target:e._root=[,,,,]}];t=n.pop();)for(var a=0;4>a;++a)(r=t.source[a])&&(r.length?n.push({source:r,target:t.target[a]=[,,,,]}):t.target[a]=Bc(r));return e},TA.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Fc(this.cover(t,n),t,n,e)},TA.addAll=function(e){var t=e.length,n=Array(t),r=Array(t),a=Infinity,o=Infinity,s=-Infinity,l=-Infinity,c,d,i,p;for(d=0;d<t;++d)isNaN(i=+this._x.call(null,c=e[d]))||isNaN(p=+this._y.call(null,c))||(n[d]=i,r[d]=p,i<a&&(a=i),i>s&&(s=i),p<o&&(o=p),p>l&&(l=p));for(s<a&&(a=this._x0,s=this._x1),l<o&&(o=this._y0,l=this._y1),this.cover(a,o).cover(s,l),d=0;d<t;++d)Fc(this,n[d],r[d],e[d]);return this},TA.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=g(e))+1,o=(r=g(t))+1;else if(n>e||e>a||r>t||t>o){var s=a-n,l=this._root,d,c;switch(c=(t<(r+o)/2)<<1|e<(n+a)/2){case 0:{do d=[,,,,],d[c]=l,l=d;while((s*=2,a=n+s,o=r+s,e>a||t>o));break}case 1:{do d=[,,,,],d[c]=l,l=d;while((s*=2,n=a-s,o=r+s,n>e||t>o));break}case 2:{do d=[,,,,],d[c]=l,l=d;while((s*=2,a=n+s,r=o-s,e>a||r>t));break}case 3:{do d=[,,,,],d[c]=l,l=d;while((s*=2,n=a-s,r=o-s,n>e||r>t));break}}this._root&&this._root.length&&(this._root=l)}else return this;return this._x0=n,this._y0=r,this._x1=a,this._y1=o,this},TA.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},TA.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},TA.find=function(e,t,n){var r=this._x0,a=this._y0,o=this._x1,s=this._y1,l=[],c=this._root,p,m,f,y,g,h,b;for(c&&l.push(new SA(c,r,a,o,s)),null==n?n=Infinity:(r=e-n,a=t-n,o=e+n,s=t+n,n*=n);h=l.pop();)if(!(!(c=h.node)||(m=h.x0)>o||(f=h.y0)>s||(y=h.x1)<r||(g=h.y1)<a))if(c.length){var i=(m+y)/2,_=(f+g)/2;l.push(new SA(c[3],i,_,y,g),new SA(c[2],m,_,i,g),new SA(c[1],i,f,y,_),new SA(c[0],m,f,i,_)),(b=(t>=_)<<1|e>=i)&&(h=l[l.length-1],l[l.length-1]=l[l.length-1-b],l[l.length-1-b]=h)}else{var x=e-+this._x.call(null,c.data),v=t-+this._y.call(null,c.data),S=x*x+v*v;if(S<n){var T=u(n=S);r=e-T,a=t-T,o=e+T,s=t+T,p=c.data}}return p},TA.remove=function(e){if(isNaN(p=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e)))return this;var t=this._root,n=this._x0,r=this._y0,a=this._x1,o=this._y1,s,l,d,c,p,u,m,f,y,g,h,i;if(!t)return this;if(t.length)for(;;){if((y=p>=(m=(n+a)/2))?n=m:a=m,(g=u>=(f=(r+o)/2))?r=f:o=f,(s=t,!(t=t[h=g<<1|y])))return this;if(!t.length)break;(s[3&h+1]||s[3&h+2]||s[3&h+3])&&(l=s,i=h)}for(;t.data!==e;)if(d=t,!(t=t.next))return this;return((c=t.next)&&delete t.next,d)?(c?d.next=c:delete d.next,this):s?(c?s[h]=c:delete s[h],(t=s[0]||s[1]||s[2]||s[3])&&t===(s[3]||s[2]||s[1]||s[0])&&!t.length&&(l?l[i]=t:this._root=t),this):(this._root=c,this)},TA.removeAll=function(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this},TA.root=function(){return this._root},TA.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},TA.visit=function(e){var t=[],n=this._root,r,a,o,i,s,l;for(n&&t.push(new SA(n,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(n=r.node,o=r.x0,i=r.y0,s=r.x1,l=r.y1)&&n.length){var d=(o+s)/2,c=(i+l)/2;(a=n[3])&&t.push(new SA(a,d,c,s,l)),(a=n[2])&&t.push(new SA(a,o,c,d,l)),(a=n[1])&&t.push(new SA(a,d,i,s,c)),(a=n[0])&&t.push(new SA(a,o,i,d,c))}return this},TA.visitAfter=function(e){var t=[],n=[],r;for(this._root&&t.push(new SA(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var a=r.node;if(a.length){var o=r.x0,i=r.y0,s=r.x1,l=r.y1,d=(o+s)/2,c=(i+l)/2,p;(p=a[0])&&t.push(new SA(p,o,i,d,c)),(p=a[1])&&t.push(new SA(p,d,i,s,c)),(p=a[2])&&t.push(new SA(p,o,c,d,l)),(p=a[3])&&t.push(new SA(p,d,c,s,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this},TA.x=function(e){return arguments.length?(this._x=e,this):this._x},TA.y=function(e){return arguments.length?(this._y=e,this):this._y};var kA=0,OA=0,EA=0,CA=1e3,wA=0,LA=0,AA=0,NA="object"==typeof performance&&performance.now?performance:Date,PA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},RA,DA;Zc.prototype=Xc.prototype={constructor:Zc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Yc():+n)+(null==t?0:+t),this._next||DA===this||(DA?DA._next=this:RA=this,DA=this),this._call=e,this._time=n,tp()},stop:function(){this._call&&(this._call=null,this._time=Infinity,tp())}};var IA=function(e){function t(){n(),g.call("tick",h),o<i&&(y.stop(),g.call("end",h))}function n(){var t=e.length,n,r;for(o+=(p-o)*d,f.each(function(e){e(o)}),n=0;n<t;++n)r=e[n],null==r.fx?r.x+=r.vx*=m:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=m:(r.y=r.fy,r.vy=0)}function r(){for(var t=0,r=e.length,n;t<r;++t){if(n=e[t],n.index=t,isNaN(n.x)||isNaN(n.y)){var a=10*u(t),o=t*(l*(3-2.23606797749979));n.x=a*c(o),n.y=a*s(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function a(t){return t.initialize&&t.initialize(e),t}var o=1,i=1e-3,d=1-O(i,1/300),p=0,m=0.6,f=X(),y=Xc(t),g=ne("tick","end"),h;return null==e&&(e=[]),r(),h={tick:n,restart:function(){return y.restart(t),h},stop:function(){return y.stop(),h},nodes:function(t){return arguments.length?(e=t,r(),f.each(a),h):e},alpha:function(e){return arguments.length?(o=+e,h):o},alphaMin:function(e){return arguments.length?(i=+e,h):i},alphaDecay:function(e){return arguments.length?(d=+e,h):+d},alphaTarget:function(e){return arguments.length?(p=+e,h):p},velocityDecay:function(e){return arguments.length?(m=1-e,h):1-m},force:function(e,t){return 1<arguments.length?(null==t?f.remove(e):f.set(e,a(t)),h):f.get(e)},find:function(t,r,a){var o=0,i=e.length,n,s,l,d,c;for(null==a?a=Infinity:a*=a,o=0;o<i;++o)d=e[o],n=t-d.x,s=r-d.y,l=n*n+s*s,l<a&&(c=d,a=l);return c},on:function(e,t){return 1<arguments.length?(g.on(e,t),h):g.on(e)}}},MA={center:function(e,t){function n(){var a=r.length,n=0,o=0,s,i;for(s=0;s<a;++s)i=r[s],n+=i.x,o+=i.y;for(n=n/a-e,o=o/a-t,s=0;s<a;++s)i=r[s],i.x-=n,i.y-=o}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,o,i){var s=e.data,d=e.r,h=f+d;if(s){if(s.index>c.index){var r=p-s.x-s.vx,b=m-s.y-s.vy,y=r*r+b*b;y<h*h&&(0==r&&(r=vA(),y+=r*r),0==b&&(b=vA(),y+=b*b),y=(h-(y=u(y)))/y*a,c.vx+=(r*=y)*(h=(d*=d)/(g+d)),c.vy+=(b*=y)*h,s.vx-=r*(h=1-h),s.vy-=b*h)}return}return t>p+h||o<p-h||n>m+h||i<m-h}for(var t=s.length,n=0,d,i,c,p,m,f,g;n<o;++n)for(i=Uc(s,Wc,qc).visitAfter(r),d=0;d<t;++d)c=s[d],f=l[c.index],g=f*f,p=c.x+c.vx,m=c.y+c.vy,i.visit(e)}function r(e){if(e.data)return e.r=l[e.data.index];for(var t=e.r=0;4>t;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(s){var t=s.length,n,r;for(l=Array(t),n=0;n<t;++n)r=s[n],l[r.index]=+e(r,n,s)}}var a=1,o=1,s,l;return"function"!=typeof e&&(e=xA(null==e?1:+e)),t.initialize=function(e){s=e,n()},t.iterations=function(e){return arguments.length?(o=+e,t):o},t.strength=function(e){return arguments.length?(a=+e,t):a},t.radius=function(r){return arguments.length?(e="function"==typeof r?r:xA(+r),n(),t):e},t},nbody:function(){function e(e){var t=l.length,n=Uc(l,np,rp).visitAfter(r),o;for(c=e,o=0;o<t;++o)d=l[o],n.visit(a)}function t(){if(l){var e=l.length,t,n;for(p=Array(e),t=0;t<e;++t)n=l[t],p[n.index]=+o(n,t,l)}}function r(e){var t=0,n,r,a,o,s;if(e.length){for(a=o=s=0;4>s;++s)(n=e[s])&&(r=n.value)&&(t+=r,a+=r*n.x,o+=r*n.y);e.x=a/t,e.y=o/t}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=p[n.data.index];while(n=n.next)}e.value=t}function a(e,t,r,a){if(!e.value)return!0;var o=e.x-d.x,m=e.y-d.y,f=a-t,y=o*o+m*m;if(f*f/s<y)return y<i&&(0==o&&(o=vA(),y+=o*o),0==m&&(m=vA(),y+=m*m),y<n&&(y=u(n*y)),d.vx+=o*e.value*c/y,d.vy+=m*e.value*c/y),!0;if(!(e.length||y>=i)){(e.data!==d||e.next)&&(0===o&&(o=vA(),y+=o*o),0===m&&(m=vA(),y+=m*m),y<n&&(y=u(n*y)));do e.data!==d&&(f=p[e.data.index]*c/y,d.vx+=o*f,d.vy+=m*f);while(e=e.next)}}var o=xA(-30),n=1,i=Infinity,s=0.81,l,d,c,p;return e.initialize=function(e){l=e,t()},e.strength=function(n){return arguments.length?(o="function"==typeof n?n:xA(+n),t(),e):o},e.distanceMin=function(t){return arguments.length?(n=t*t,e):u(n)},e.distanceMax=function(t){return arguments.length?(i=t*t,e):u(i)},e.theta=function(t){return arguments.length?(s=t*t,e):u(s)},e},link:function(e){function t(t){for(var r=0,a=e.length;r<d;++r)for(var n=0,o,i,s,m,f,y,l;n<a;++n)o=e[n],i=o.source,s=o.target,m=s.x+s.vx-i.x-i.vx||vA(),f=s.y+s.vy-i.y-i.vy||vA(),y=u(m*m+f*f),y=(y-p[n])/y*t*c[n],m*=y,f*=y,s.vx-=m*(l=g[n]),s.vy-=f*l,i.vx+=m*(l=1-l),i.vy+=f*l}function n(){if(f){var t=f.length,n=e.length,s=X(f,o),l,i;for(l=0,y=Array(t);l<n;++l)i=e[l],i.index=l,"object"!=typeof i.source&&(i.source=Hc(s,i.source)),"object"!=typeof i.target&&(i.target=Hc(s,i.target)),y[i.source.index]=(y[i.source.index]||0)+1,y[i.target.index]=(y[i.target.index]||0)+1;for(l=0,g=Array(n);l<n;++l)i=e[l],g[l]=y[i.source.index]/(y[i.source.index]+y[i.target.index]);c=Array(n),r(),p=Array(n),a()}}function r(){if(f)for(var t=0,r=e.length;t<r;++t)c[t]=+s(e[t],t,e)}function a(){if(f)for(var t=0,r=e.length;t<r;++t)p[t]=+l(e[t],t,e)}var o=Vc,s=function(e){return 1/N(y[e.source.index],y[e.target.index])},l=xA(30),d=1,c,p,f,y,g;return null==e&&(e=[]),t.initialize=function(e){f=e,n()},t.links=function(r){return arguments.length?(e=r,n(),t):e},t.id=function(e){return arguments.length?(o=e,t):o},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:xA(+e),r(),t):s},t.distance=function(e){return arguments.length?(l="function"==typeof e?e:xA(+e),a(),t):l},t},x:function(e){function t(e){for(var t=0,r=a.length,n;t<r;++t)n=a[t],n.vx+=(s[t]-n.x)*o[t]*e}function n(){if(a){var t=a.length,n;for(o=Array(t),s=Array(t),n=0;n<t;++n)o[n]=isNaN(s[n]=+e(a[n],n,a))?0:+r(a[n],n,a)}}var r=xA(0.1),a,o,s;return"function"!=typeof e&&(e=xA(null==e?0:+e)),t.initialize=function(e){a=e,n()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:xA(+e),n(),t):r},t.x=function(r){return arguments.length?(e="function"==typeof r?r:xA(+r),n(),t):e},t},y:function(e){function t(e){for(var t=0,r=a.length,n;t<r;++t)n=a[t],n.vy+=(s[t]-n.y)*o[t]*e}function n(){if(a){var t=a.length,n;for(o=Array(t),s=Array(t),n=0;n<t;++n)o[n]=isNaN(s[n]=+e(a[n],n,a))?0:+r(a[n],n,a)}}var r=xA(0.1),a,o,s;return"function"!=typeof e&&(e=xA(null==e?0:+e)),t.initialize=function(e){a=e,n()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:xA(+e),n(),t):r},t.y=function(r){return arguments.length?(e="function"==typeof r?r:xA(+r),n(),t):e},t}},FA="forces",jA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],zA=["static","iterations"],UA=["x","y","vx","vy"];ap.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:0.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:0.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:0.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:0.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:0.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:0.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:UA}]};var $A=ib(ap,Gt);$A.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),a=e.modified(jA),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(a||t.changed(t.MOD))&&sp(n,e,0,t)):(this.value=n=ip(t.source,e),n.on("tick",op(t.dataflow,this)),!e.static&&(r=!0,n.tick()),t.modifies("index")),a||r||e.modified(zA)||t.changed()&&e.restart)if(n.alpha(S(n.alpha(),e.alpha||1)).alphaDecay(1-O(n.alphaMin(),1/o)),e.static)for(n.stop();0<=--o;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},$A.finish=function(e,t){for(var r=t.dataflow,a=this._argops,o=0,s=a.length,l;o<s;++o)if(l=a[o],l.name===FA&&"link"===l.op._argval.force)for(var d=l.op._argops,c=0,i=d.length,n;c<i;++c)if("links"===d[c].name&&(n=d[c].op.source)){r.pulse(n,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(UA)};var BA=Object.freeze({force:ap});kp.prototype=xp.prototype={constructor:kp,count:function(){return this.eachAfter(bp)},each:function(e){var t=this,r=[t],a,o,s,i;do for(a=r.reverse(),r=[];t=a.pop();)if(e(t),o=t.children,o)for(s=0,i=o.length;s<i;++s)r.push(o[s]);while(r.length);return this},eachAfter:function(e){for(var t=this,r=[t],a=[],o,s,i;t=r.pop();)if(a.push(t),o=t.children,o)for(s=0,i=o.length;s<i;++s)r.push(o[s]);for(;t=a.pop();)e(t);return this},eachBefore:function(e){for(var t=this,n=[t],r,a;t=n.pop();)if(e(t),r=t.children,r)for(a=r.length-1;0<=a;--a)n.push(r[a]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;0<=--a;)n+=r[a].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=_p(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return xp(this).eachBefore(Sp)}};var WA=Array.prototype.slice,qA=function(t){for(var r=0,a=(t=Op(WA.call(t))).length,n=[],o,i;r<a;)o=t[r],i&&wp(i,o)?++r:(i=Ap(n=Ep(n,o)),r=0);return i},VA=function(e){return function(){return e}},HA=function(e){e.x0=f(e.x0),e.y0=f(e.y0),e.x1=f(e.x1),e.y1=f(e.y1)},YA=function(e,t,r,a,o){for(var s=e.children,l=-1,i=s.length,n=e.value&&(a-t)/e.value,d;++l<i;)d=s[l],d.y0=r,d.y1=o,d.x0=t,d.x1=t+=d.value*n},GA="$",ZA={depth:-1},XA={},KA=function(){function e(e){var a=e.length,n=Array(a),o={},s,l,i,d,c,p,u;for(l=0;l<a;++l)s=e[l],c=n[l]=new kp(s),null!=(p=t(s,l,e))&&(p+="")&&(u=GA+(c.id=p),o[u]=u in o?XA:c);for(l=0;l<a;++l)if(c=n[l],p=r(e[l],l,e),null==p||!(p+="")){if(i)throw new Error("multiple roots");i=c}else{if(d=o[GA+p],!d)throw new Error("missing: "+p);if(d===XA)throw new Error("ambiguous: "+p);d.children?d.children.push(c):d.children=[c],c.parent=d}if(!i)throw new Error("no root");if(i.parent=ZA,i.eachBefore(function(e){e.depth=e.parent.depth+1,--a}).eachBefore(Tp),i.parent=null,0<a)throw new Error("cycle");return i}var t=Hp,r=Yp;return e.id=function(n){return arguments.length?(t=Up(n),e):t},e.parentId=function(t){return arguments.length?(r=Up(t),e):r},e};eu.prototype=Object.create(kp.prototype);var QA=function(e,t,r,a,o){for(var s=e.children,l=-1,i=s.length,n=e.value&&(o-r)/e.value,d;++l<i;)d=s[l],d.x0=t,d.x1=a,d.y0=r,d.y1=r+=d.value*n},JA=(1+2.23606797749979)/2,eN=function e(t){function n(e,n,r,a,o){nu(t,e,n,r,a,o)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(JA),tN=function(){function e(e){return e.x0=e.y0=0,e.x1=a,e.y1=o,e.eachBefore(t),i=[0],r&&e.eachBefore(HA),e}function t(e){var t=i[e.depth],r=e.x0+t,a=e.y0+t,o=e.x1-t,p=e.y1-t;o<r&&(r=o=(r+o)/2),p<a&&(a=p=(a+p)/2),e.x0=r,e.y0=a,e.x1=o,e.y1=p,e.children&&(t=i[e.depth+1]=s(e)/2,r+=u(e)-t,a+=l(e)-t,o-=d(e)-t,p-=c(e)-t,o<r&&(r=o=(r+o)/2),p<a&&(a=p=(a+p)/2),n(e,r,a,o,p))}var n=eN,r=!1,a=1,o=1,i=[0],s=$p,l=$p,d=$p,c=$p,u=$p;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(a=+t[0],o=+t[1],e):[a,o]},e.tile=function(t){return arguments.length?(n=Up(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:VA(+t),e):s},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:VA(+t),e):l},e.paddingRight=function(t){return arguments.length?(d="function"==typeof t?t:VA(+t),e):d},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:VA(+t),e):c},e.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:VA(+t),e):u},e},nN=function e(t){function n(e,r,a,o,s){if((p=e._squarify)&&p.ratio===t)for(var l=-1,d=p.length,c=e.value,p,u,m,f,i;++l<d;){for(u=p[l],m=u.children,(f=u.value=0,i=m.length);f<i;++f)u.value+=m[f].value;u.dice?YA(u,r,a,o,a+=(s-a)*u.value/c):QA(u,r,a,r+=(o-r)*u.value/c,s),c-=u.value}else e._squarify=p=nu(t,e,r,a,o,s),p.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(JA);ru.Definition={type:"Nest",metadata:{treesource:!0,source:!0,generates:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"},{name:"generate",type:"boolean"}]};var rN=ib(ru,Gt);rN.transform=function(e,t){t.source||Rh("Nest transform requires an upstream data source.");var n=e.key||I,r=e.generate,a=e.modified(),o=r||a?t.fork(t.ALL):t,i,s,l;return(!this.value||a||t.changed())&&(r&&this.value&&(o.materialize(o.REM),this.value.each(function(e){e.children&&o.rem.push(e)})),i=Kh(e.keys).reduce(function(e,t){return e.key(t),e},Rb()).entries(t.source),this.value=s=xp({values:i},au),r&&(o.materialize(o.ADD),o.source=o.source.slice(),s.each(function(e){e.children&&(e=F(e.data),o.add.push(e),o.source.push(e))})),l=s.lookup={},s.each(function(e){null!=I(e.data)&&(l[n(e.data)]=e)})),o.source.root=this.value,o};var aN=ib(ou,Gt);aN.transform=function(e,t){t.source&&t.source.root||Rh(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,a=t.source.root,o=e.as||r;e.field&&a.sum(e.field),e.sort&&a.sort(e.sort),iu(n,this.params,e);try{this.value=n(a)}catch(e){Rh(e)}return a.each(function(e){su(e,r,o)}),t.reflow(e.modified()).modifies(o).modifies("leaf")};var oN=["x","y","r","depth","children"];lu.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:oN}]};var iN=ib(lu,ou);iN.layout=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(Wp(t)).eachAfter(qp(a,0.5)).eachBefore(Vp(1)):e.eachBefore(Wp(Bp)).eachAfter(qp($p,1)).eachAfter(qp(a,e.r/N(n,r))).eachBefore(Vp(N(n,r)/(2*e.r))),e}var t=null,n=1,r=1,a=$p;return e.radius=function(n){return arguments.length?(t=zp(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(a="function"==typeof t?t:VA(+t),e):a},e},iN.params=["size","padding"],iN.fields=oN;var sN=["x0","y0","x1","y1","depth","children"];du.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:sN}]};var lN=ib(du,ou);lN.layout=function(){function e(e){var s=e.height+1;return e.x0=e.y0=o,e.x1=r,e.y1=a/s,e.eachBefore(t(a,s)),i&&e.eachBefore(HA),e}function t(e,t){return function(n){n.children&&YA(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,i=n.x1-o,s=n.y1-o;i<r&&(r=i=(r+i)/2),s<a&&(a=s=(a+s)/2),n.x0=r,n.y0=a,n.x1=i,n.y1=s}}var r=1,a=1,o=0,i=!1;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(t){return arguments.length?(r=+t[0],a=+t[1],e):[r,a]},e.padding=function(t){return arguments.length?(o=+t,e):o},e},lN.params=["size","round","padding"],lN.fields=sN,cu.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var dN=ib(cu,Gt);dN.transform=function(e,t){t.source||Rh("Stratify transform requires an upstream data source.");var n=e.modified(),r=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields),a,o;return r&&(a=KA().id(e.key).parentId(e.parentKey)(t.source),o=a.lookup={},a.each(function(t){o[e.key(t.data)]=t}),this.value=a),t.source.root=this.value,n?t.fork(t.ALL):t};var cN={tidy:function(){function e(e){var c=tu(e);if(c.eachAfter(n),c.parent.m=-c.z,c.eachBefore(r),d)e.eachBefore(a);else{var t=e,p=e,u=e;e.eachBefore(function(e){e.x<t.x&&(t=e),e.x>p.x&&(p=e),e.depth>u.depth&&(u=e)});var m=t===p?1:o(t,p)/2,s=m-t.x,f=i/(p.x+m+s),y=l/(u.depth||1);e.eachBefore(function(e){e.x=(e.x+s)*f,e.y=e.depth*y})}return e}function n(e){var n=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(n){Qp(e);var i=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+o(e._,a._),e.m=e.z-i):e.z=i}else a&&(e.z=a.z+o(e._,a._));e.parent.A=t(e,a,e.parent.A||r[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function t(e,t,n){if(t){for(var r=e,a=e,i=t,s=r.parent.children[0],l=r.m,d=a.m,c=i.m,p=s.m,u;i=Xp(i),r=Zp(r),i&&r;)s=Zp(s),a=Xp(a),a.a=e,u=i.z+c-r.z-l+o(i._,r._),0<u&&(Kp(Jp(i,e,n),e,u),l+=u,d+=u),c+=i.m,l+=r.m,p+=s.m,d+=a.m;i&&!Xp(a)&&(a.t=i,a.m+=c-d),r&&!Zp(s)&&(s.t=r,s.m+=l-p,n=e)}return n}function a(e){e.x*=i,e.y=e.depth*l}var o=Gp,i=1,l=1,d=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(d=!1,i=+t[0],l=+t[1],e):d?null:[i,l]},e.nodeSize=function(t){return arguments.length?(d=!0,i=+t[0],l=+t[1],e):d?[i,l]:null},e},cluster:function(){function e(e){var o=0,i;e.eachAfter(function(e){var n=e.children;n?(e.x=up(n),e.y=fp(n)):(e.x=i?o+=t(e,i):0,e.y=0,i=e)});var s=gp(e),l=hp(e),d=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return e.eachAfter(a?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-d)/(c-d)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=pp,n=1,r=1,a=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(a=!1,n=+t[0],r=+t[1],e):a?null:[n,r]},e.nodeSize=function(t){return arguments.length?(a=!0,n=+t[0],r=+t[1],e):a?[n,r]:null},e}},pN=["x","y","depth","children"];pu.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:pN}]};var uN=ib(pu,ou);uN.layout=function(e){var t=e||"tidy";return cN.hasOwnProperty(t)?cN[t]():void Rh("Unrecognized Tree layout method: "+t)},uN.params=["size","nodeSize","separation"],uN.fields=pN,uu.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]};var mN=ib(uu,Gt);mN.transform=function(e,t){function r(e){var t=o[e];t&&(l[e]=1,i.mod.push(t))}t.source&&t.source.root||Rh("TreeLinks transform requires a backing tree data source.");var n=t.source.root,a=n.lookup,o=this.value,s=e.key||I,l={},i=t.fork();return t.visit(t.REM,function(e){var t=s(e),n=o[t];n&&(delete o[t],i.rem.push(n))}),t.visit(t.ADD,function(e){var n=s(e),r;(r=mu(a[n]))&&(i.add.push(o[n]=F({source:r,target:e})),l[n]=1)}),t.visit(t.MOD,function(e){var t=s(e),o=a[t],d=o.children;if(r(t),d)for(var c=0,i=d.length;c<i;++c)l[t=s(d[c].data)]||r(t)}),i};var fN={binary:function(e,t,r,a,o){function s(e,t,r,a,o,i,d){if(e>=t-1){var c=l[e];return c.x0=a,c.y0=o,c.x1=i,void(c.y1=d)}for(var p=n[e],u=r/2+p,m=e+1,f=t-1;m<f;){var y=m+f>>>1;n[y]<u?m=y+1:f=y}u-n[m-1]<n[m]-u&&e+1<m&&--m;var g=n[m]-p,h=r-g;if(i-a>d-o){var b=(a*h+i*g)/r;s(e,m,g,a,o,b,d),s(m,t,h,b,o,i,d)}else{var _=(o*h+d*g)/r;s(e,m,g,a,o,i,_),s(m,t,h,a,_,i,d)}}var l=e.children,d=l.length,n=Array(d+1),c,i;for(n[0]=i=c=0;c<d;++c)n[c+1]=i+=l[c].value;s(0,d,e.value,t,r,a,o)},dice:YA,slice:QA,slicedice:function(e,t,n,r,a){(1&e.depth?QA:YA)(e,t,n,r,a)},squarify:eN,resquarify:nN},yN=["x0","y0","x1","y1","depth","children"];fu.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:yN}]};var gN=ib(fu,ou);gN.layout=function(){var e=tN();return e.ratio=function(n){var r=e.tile();r.ratio&&e.tile(r.ratio(n))},e.method=function(t){fN.hasOwnProperty(t)?e.tile(fN[t]):Rh("Unrecognized Treemap layout method: "+t)},e},gN.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],gN.fields=yN;var hN=Object.freeze({nest:ru,pack:lu,partition:du,stratify:cu,tree:pu,treelinks:uu,treemap:fu}),bN=function(e){return function(){return e}};hu.prototype={constructor:hu,insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=vu(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(a=r.R,a&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(_u(this,n),e=n,n=e.U),n.C=!1,r.C=!0,xu(this,r))):(a=r.L,a&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(xu(this,n),e=n,n=e.U),n.C=!1,r.C=!0,_u(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n=e.L,r=e.R,a,o,i;if(o=n?r?vu(r):n:r,t?t.L===e?t.L=o:t.R=o:this._=o,n&&r?(i=o.C,o.C=e.C,o.L=n,n.U=o,o===r?(o.U=t,t=o,e=o.R):(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=r,r.U=o)):(i=e.C,e=o),e&&(e.U=t),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===t.L){if(a=t.R,a.C&&(a.C=!1,t.C=!0,_u(this,t),a=t.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,xu(this,a),a=t.R),a.C=t.C,t.C=a.R.C=!1,_u(this,t),e=this._;break}}else if(a=t.L,a.C&&(a.C=!1,t.C=!0,xu(this,t),a=t.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,_u(this,a),a=t.L),a.C=t.C,t.C=a.L.C=!1,xu(this,t),e=this._;break}a.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};var _N=[],xN=[],vN=1e-6,SN=1e-12,TN,kN,ON,EN,CN;Hu.prototype={constructor:Hu,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Au(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(d=(l=n.halfedges).length)for(var a=n.site,o=-1,i=t[l[d-1]],s=i.left===a?i.right:i.left,l,d,c;++o<d;)c=s,i=t[l[o]],s=i.left===a?i.right:i.left,c&&s&&r<c.index&&r<s.index&&0>qu(a,c,s)&&e.push([a.data,c.data,s.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var a=this,o=a._found||0,i=a.cells.length,n,s;!(s=a.cells[o]);)if(++o>=i)return null;var l=e-s.site[0],d=t-s.site[1],c=l*l+d*d;do s=a.cells[n=o],o=null,s.halfedges.forEach(function(n){var r=a.edges[n],i=r.left;if(i!==s.site&&i||(i=r.right)){var l=e-i[0],d=t-i[1],p=l*l+d*d;p<c&&(c=p,o=i.index)}});while(null!==o);return a._found=n,null==r||c<=r*r?s.site:null}};var wN=function(){function e(e){return new Hu(e.map(function(r,a){var o=[f(t(r,a,e)/vN)*vN,f(n(r,a,e)/vN)*vN];return o.index=a,o.data=r,o}),r)}var t=yu,n=gu,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:bN(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:bN(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e};Yu.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-100000,-100000],[100000,100000]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var LN=ib(Yu,Gt),AN=[[-100000,-100000],[100000,100000]];LN.transform=function(e,t){var r=e.as||"path",a=t.source,o,s,l,i;for(o=wN().x(e.x).y(e.y),e.size?o.size(e.size):o.extent(e.extent||AN),this.value=o=o(a),s=o.polygons(),(l=0,i=a.length);l<i;++l)a[l][r]=s[l]?"M"+s[l].join("L")+"Z":null;return t.reflow(e.modified()).modifies(r)};var NN=Object.freeze({voronoi:Yu}),PN=l/180,RN=64,cw=2048,ch=function(){function e(e){e.width=e.height=1;var t=u(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(RN<<5)/t,e.height=cw/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,a,l){for(var d=a.x,c=a.y,m=u(r[0]*r[0]+r[1]*r[1]),f=n(r),s=.5>o()?1:-1,y=-s,t,g,b;(t=f(y+=s))&&(g=~~t[0],b=~~t[1],!(N(p(g),p(b))>=m));)if(a.x=d+g,a.y=c+b,!(0>a.x+a.x0||0>a.y+a.y0||a.x+a.x1>r[0]||a.y+a.y1>r[1])&&(!l||!Zu(a,e,r[0]))&&(!l||Ku(a,l))){for(var _=a.sprite,v=a.width>>5,S=r[0]>>5,T=a.x-(v<<4),k=127&T,O=a.y1-a.y0,h=(a.y+a.y0)*S+(T>>5),x=0,E;x<O;x++){E=0;for(var C=0;C<=v;C++)e[h+C]|=E<<32-k|(C<v?(E=_[x*v+C])>>>k:0);h+=S}return a.sprite=null,!0}return!1}var r=[256,256],n=Qu,a=[],o=Math.random,i={},s,l,c,m,f,y,g;return i.layout=function(){for(var p=e(em()),u=Ju((r[0]>>5)*r[1]),h=null,b=a.length,n=-1,i=[],_=a.map(function(e){return{text:s(e),font:l(e),style:m(e),weight:f(e),rotate:y(e),size:~~c(e),padding:g(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size}),x;++n<b;)x=_[n],x.x=r[0]*(o()+.5)>>1,x.y=r[1]*(o()+.5)>>1,Gu(p,x,_,n),x.hasText&&t(u,x,h)&&(i.push(x),h?Xu(h,x):h=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=r[0]>>1,x.y-=r[1]>>1);return i},i.words=function(e){return arguments.length?(a=e,i):a},i.size=function(e){return arguments.length?(r=[+e[0],+e[1]],i):r},i.font=function(e){return arguments.length?(l=tm(e),i):l},i.fontStyle=function(e){return arguments.length?(m=tm(e),i):m},i.fontWeight=function(e){return arguments.length?(f=tm(e),i):f},i.rotate=function(e){return arguments.length?(y=tm(e),i):y},i.text=function(e){return arguments.length?(s=tm(e),i):s},i.spiral=function(e){return arguments.length?(n=DN[e]||e,i):n},i.fontSize=function(e){return arguments.length?(c=tm(e),i):c},i.padding=function(e){return arguments.length?(g=tm(e),i):g},i.random=function(e){return arguments.length?(o=e,i):o},i},DN={archimedean:Qu,rectangular:function(e){var n=4,r=n*e[0]/e[1],a=0,o=0;return function(e){var t=0>e?-1:1;switch(3&u(1+4*t*e)-t){case 0:a+=r;break;case 1:o+=n;break;case 2:a-=r;break;default:o-=n;}return[a,o]}}},IN=["x","y","font","fontSize","fontStyle","fontWeight","angle"],MN=["text","font","rotate","fontSize","fontStyle","fontWeight"];nm.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:IN}]};var FN=ib(nm,Gt);FN.transform=function(e,r){var a=e.modified();if(a||r.changed(r.ADD_REM)||MN.some(function(t){var n=e[t];return Qh(n)&&r.modified(n.fields)})){var o=r.materialize(r.SOURCE).source,s=this.value,l=e.as||IN,d=e.fontSize||14,c;if(Qh(d)?c=e.fontSizeRange:d=eb(d),c){var p=d,u=js("sqrt")().domain(rm(p,o)).range(c);d=function(e){return u(p(e))}}o.forEach(function(e){e[l[0]]=NaN,e[l[1]]=NaN,e[l[3]]=0});for(var m=s.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).layout(),f=s.size(),y=f[0]>>1,g=f[1]>>1,h=0,i=m.length,n,b;h<i;++h)n=m[h],b=n.datum,b[l[0]]=n.x+y,b[l[1]]=n.y+g,b[l[2]]=n.font,b[l[3]]=n.size,b[l[4]]=n.style,b[l[5]]=n.weight,b[l[6]]=n.rotate;return r.reflow(a).modifies(l)}};var jN=Object.freeze({wordcloud:nm}),zN=function(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n=this,a=n.bisect(n.range,e.value),o=e.index,s=a[0],l=a[1],d=o.length,c;for(c=0;c<s;++c)t[o[c]]|=r;for(c=l;c<d;++c)t[o[c]]|=r;return n}}};mm.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var UN=ib(mm,Gt);UN.transform=function(e,t){if(!this._dims)return this.init(e,t);var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)},UN.init=function(e,t){for(var n=e.fields,r=e.query,a=this._indices={},o=this._dims=[],s=r.length,l=0,i,d;l<s;++l)i=n[l].fname,d=a[i]||(a[i]=cm()),o.push(zN(d,l,r[l]));return this.eval(e,t)},UN.reinit=function(e,t){var r=t.materialize().fork(),a=e.fields,o=e.query,s=this._indices,l=this._dims,d=this.value,c=d.curr(),p=d.prev(),u=d.all(),y=r.rem=r.add,g=r.mod,h=o.length,m={},b,_,x,v,S,T,k,i,n;if(p.set(c),t.rem.length&&(S=this.remove(e,t,r)),t.add.length&&d.add(t.add),t.mod.length)for(T={},v=t.mod,k=0,i=v.length;k<i;++k)T[v[k]._index]=1;for(k=0;k<h;++k)n=a[k],(!l[k]||e.modified("fields",k)||t.modified(n.fields))&&(x=n.fname,!(b=m[x])&&(s[x]=_=cm(),m[x]=b=_.insert(n,t.source,0)),l[k]=zN(_,k,o[k]).onAdd(b,c));for(k=0,i=d.data().length;k<i;++k)if(S[k])continue;else p[k]===c[k]?T[k]&&c[k]!==u&&g.push(k):y.push(k);return d.mask=(1<<h)-1,r},UN.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,a=0;return t.rem.length&&(this.remove(e,t,n),a|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(a|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),a|=(1<<r)-1),t.mod.length&&(this.modify(t,n),a|=(1<<r)-1),this.value.mask=a,n},UN.insert=function(e,t,r){var a=t.add,o=this.value,i=this._dims,s=this._indices,l=e.fields,d={},c=r.add,p=o.size(),u=p+a.length,n=i.length,m,f,y;o.resize(u,n),o.add(a);var g=o.curr(),h=o.prev(),b=o.all();for(m=0;m<n;++m)f=l[m].fname,y=d[f]||(d[f]=s[f].insert(l[m],a,p)),i[m].onAdd(y,g);for(;p<u;++p)h[p]=b,g[p]!==b&&c.push(p)},UN.modify=function(e,t){var r=t.mod,a=this.value,o=a.curr(),s=a.all(),l=e.mod,d,i,n;for(d=0,i=l.length;d<i;++d)n=l[d]._index,o[n]!==s&&r.push(n)},UN.remove=function(e,t,r){var a=this._indices,o=this.value,s=o.curr(),l=o.prev(),d=o.all(),c={},p=r.rem,u=t.rem,m,i,n,y;for(m=0,i=u.length;m<i;++m)n=u[m]._index,c[n]=1,l[n]=y=s[n],s[n]=d,y!==d&&p.push(n);for(n in a)a[n].remove(i,c);return this.reindex(t,i,c),c},UN.reindex=function(e,t,n){var r=this._indices,a=this.value;e.runAfter(function(){var e=a.remove(t,n);for(var o in r)r[o].reindex(e)})},UN.update=function(e,t,n){var r=this._dims,a=e.query,o=t.stamp,s=r.length,l=0,d,i;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(d=i,++l);if(1==l)l=r[d].one,this.incrementOne(r[d],a[d],n.add,n.rem);else for(i=0,l=0;i<s;++i)e.modified("query",i)&&(l|=r[i].one,this.incrementAll(r[i],a[i],o,n.add),n.rem=n.add);return l},UN.incrementAll=function(e,t,n,r){var a=this.value,o=a.seen(),s=a.curr(),l=a.prev(),d=e.index(),c=e.bisect(e.range),p=e.bisect(t),u=p[0],m=p[1],f=c[0],y=c[1],g=e.one,h,i,b;if(u<f)for(h=u,i=N(f,m);h<i;++h)b=d[h],o[b]!==n&&(l[b]=s[b],o[b]=n,r.push(b)),s[b]^=g;else if(u>f)for(h=f,i=N(u,y);h<i;++h)b=d[h],o[b]!==n&&(l[b]=s[b],o[b]=n,r.push(b)),s[b]^=g;if(m>y)for(h=S(u,y),i=m;h<i;++h)b=d[h],o[b]!==n&&(l[b]=s[b],o[b]=n,r.push(b)),s[b]^=g;else if(m<y)for(h=S(f,m),i=y;h<i;++h)b=d[h],o[b]!==n&&(l[b]=s[b],o[b]=n,r.push(b)),s[b]^=g;e.range=t.slice()},UN.incrementOne=function(e,t,n,r){var a=this.value,o=a.curr(),s=e.index(),l=e.bisect(e.range),d=e.bisect(t),c=d[0],p=d[1],u=l[0],m=l[1],f=e.one,y,i,g;if(c<u)for(y=c,i=N(u,p);y<i;++y)g=s[y],o[g]^=f,n.push(g);else if(c>u)for(y=u,i=N(c,m);y<i;++y)g=s[y],o[g]^=f,r.push(g);if(p>m)for(y=S(c,m),i=p;y<i;++y)g=s[y],o[g]^=f,n.push(g);else if(p<m)for(y=S(u,p),i=m;y<i;++y)g=s[y],o[g]^=f,r.push(g);e.range=t.slice()},fm.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var $N=ib(fm,Gt);$N.transform=function(e,t){var n=~(e.ignore||0),r=e.filter,a=r.mask;if(0==(a&n))return t.StopPropagation;var o=t.fork(t.ALL),i=r.data(),s=r.curr(),l=r.prev(),d=function(e){return s[e]&n?null:i[e]};return o.filter(o.MOD,d),a&a-1?(o.filter(o.ADD,function(e){var t=s[e]&n,r=!t&&t^l[e]&n;return r?i[e]:null}),o.filter(o.REM,function(e){var t=s[e]&n,r=t&&!(t^(t^l[e]&n));return r?i[e]:null})):(o.filter(o.ADD,d),o.filter(o.REM,function(e){return(s[e]&n)===a?i[e]:null})),o.filter(o.SOURCE,function(e){return d(e._index)})};var BN=Object.freeze({crossfilter:mm,resolvefilter:fm}),xf="default",WN=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:xf,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,a=r?Fh(r)?r:r.user:xf,o=n.item&&n.item.cursor||null;return r&&a===r.user&&o==r.item?r:{user:a,item:o}}),e.add(null,function(e){var t=e.cursor,n=this.value;return Fh(t)||(n=t.item,t=t.user),ym(t&&t!==xf?t:n||t),n},{cursor:t})},qN=function(t,n,r){var a=t._renderer.scene(),o,i,e;return a&&(e=xm(t),i=n.changedTouches?n.changedTouches[0]:n,o=pT(i,a),o[0]-=e[0],o[1]-=e[1]),n.dataflow=t,n.vega=Sm(t,r,o),n.item=r,n},VN="view",HN=function(e,t,n){var r=document.createElement(e);for(var a in t)r.setAttribute(a,t[a]);return null!=n&&(r.textContent=n),r},YN="vega-bind",GN="vega-bind-name",ZN="vega-bind-radio",XN="vega-option-",KN=function(e,t,n){if(t){var r=n.param,a=n.state;return a||(a=n.state={elements:null,active:!1,set:null,update:function(t){a.source=!0,e.signal(r.signal,t).run()}},r.debounce&&(a.update=tb(r.debounce,a.update))),Fh(t)&&(t=document.querySelector(t)),wm(a,t,r,e.signal(r.signal)),a.active||(e.on(e._signals[r.signal],null,function(){a.source?a.source=!1:a.set(e.signal(r.signal))}),a.active=!0),a}},QN=function(e,t,n,r){return t=t||new r(e.loader()),t.initialize(n,bm(e),_m(e),xm(e)).background(e._background)},JN=function(e,t,n,r){var a=new r().scene(e.scenegraph().root).initialize(n,xm(e),e);return t&&(a.handleTooltip=t.handleTooltip,t.handlers().forEach(function(e){a.on(e.type,e.handler)})),a},eP=function(e,t){var n=Ao(t);return n&&n.headless?e.runAsync().then(function(){return QN(e,null,null,n.headless).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)},tP=function(e,t){return e=e||t.autosize,Mh(e)?e:(e=e||"pad",{type:e})},nP=function(e,t){return e=e||t.padding,Mh(e)?e:(e=+e||0,{top:e,bottom:e,left:e,right:e})},rP=["value","update","react","bind"],aP=function(e,t){var n=e.name;if(e.push==="outer")t.signals[n]||Fm("No prior signal definition",n),rP.forEach(function(t){void 0!==e[t]&&Fm("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}};jm.prototype.visit=function(e){var t=this,r,a,o;if(e(t))return 1;for(r=zm(t),a=0,o=r.length;a<o;++a)if(r[a].visit(e))return 1};var oP=1,iP=2,sP=3,lP=4,dP=5,cP=6,pP=7,uP=8,mP="ArrayExpression",fP="BinaryExpression",yP="CallExpression",gP="ConditionalExpression",hP="Identifier",bP="Literal",_P="LogicalExpression",xP="MemberExpression",vP="ObjectExpression",SP="Property",TP="UnaryExpression",kP="Unexpected token %0",OP="Unexpected number",EP="Unexpected string",CP="Unexpected identifier",wP="Unexpected reserved word",LP="Unexpected end of input",AP="Invalid regular expression",NP="Invalid regular expression: missing /",PP="Octal literals are not allowed in strict mode.",RP="Duplicate data property in object literal not allowed in strict mode",DP="ILLEGAL",IP="Disabled.",MP=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,FP=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,jP={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},zP={if:1,this:1},UP=function(e){cR=e,pR=0,uR=cR.length,mR=null,mf();var t=Hf();if(mR.type!==iP)throw new Error("Unexpect token after expression.");return t},$P={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},BP=function(e){function t(t,n,r,a){var o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(0>a?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(a){return t(e,a,n,r)}}var r="new Date",a="String",o="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){3>t.length&&Rh("Missing arguments to clamp function."),3<t.length&&Rh("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",a,0),lower:n("toLowerCase",a,0),substring:n("substring",a),replace:n("replace",a),regexp:o,test:n("test",o),if:function(t){3>t.length&&Rh("Missing arguments to if function."),3<t.length&&Rh("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}},WP={},qP=new Date(2e3,0,1),VP="undefined"!=typeof window&&window||null,HP="Literal",YP="Identifier",GP="@",ZP="%",XP=":",KP=oy("area"),QP=oy("bounds"),JP=oy("centroid"),eR={},tR=function(e,n,r,a){var o=n[0],i=n[n.length-1],s;return o>i&&(s=o,o=i,i=s),r=void 0===r||r,a=void 0===a||a,(r?o<=e:o<e)&&(a?e<=i:e<i)},nR="bin_",rR="intersect",aR="union",oR="index:unit",iR={isArray:Ih,isBoolean:sb,isDate:lb,isNumber:db,isObject:Mh,isRegExp:cb,isString:Fh,isTuple:R,toBoolean:gb,toDate:hb,toNumber:bb,toString:_b,pad:fb,peek:yb,truncate:vb,rgb:_i,lab:Ci,hcl:Di,hsl:Ti,sequence:Tx,format:function(e,t){return Yf("format",eE,t)(e)},utcFormat:function(e,t){return Yf("utcFormat",U_,t)(e)},utcParse:function(e,t){return Yf("utcParse",$_,t)(e)},timeFormat:Gf,timeParse:function(e,t){return Yf("timeParse",z_,t)(e)},monthFormat:function(e){return Zf(e,1,"%B")},monthAbbrevFormat:function(e){return Zf(e,1,"%b")},dayFormat:function(e){return Zf(0,2+e,"%A")},dayAbbrevFormat:function(e){return Zf(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return Xf(this.context.dataflow,"warn",arguments)},info:function(){return Xf(this.context.dataflow,"info",arguments)},debug:function(){return Xf(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r=e[0],a=e[1],o;return a<r&&(o=a,a=r,r=o),o=a-r,o>=n-t?[t,n]:[N(S(r,t),n-o),N(S(a,o),n)]},pinchDistance:function(e){var n=e.touches,t=n[0].clientX-n[1].clientX,r=n[0].clientY-n[1].clientY;return u(t*t+r*r)},pinchAngle:function(e){var n=e.touches;return wh(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function(){return VP?VP.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return VP?[VP.innerWidth,VP.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},bandspace:function(e,t,n){return Dk(e||0,t||0,n||0)},inrange:tR,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e],a=r.input;return n.pulse(a,n.changeset().remove(Wh).insert(t)),1},panLinear:function(e,t){return ry(e,t,bb,id)},panLog:function(e,t){var n=Oh(e[0]);return ry(e,t,ty(n),ey(n))},panPow:function(e,t,n){return ry(e,t,ny(n),ny(1/n))},zoomLinear:function(e,t,n){return ay(e,t,n,bb,id)},zoomLog:function(e,t,n){var r=Oh(e[0]);return ay(e,t,n,ty(r),ey(r))},zoomPow:function(e,t,n,r){return ay(e,t,n,ny(r),ny(1/r))},encode:function(e,t,n){if(e){var r=this.context.dataflow,a=e.mark.source;r.pulse(a,r.changeset().encode(e,t))}return n===void 0?e:n},modify:function(e,t,n,r,a,o){var i=this.context.dataflow,s=this.context.data[e],l=s.input,d=s.changes,c=i.stamp(),p,u;if(!1===i._trigger||!(l.value.length||t||r))return 0;if((!d||d.stamp<c)&&(s.changes=d=i.changeset(),d.stamp=c,i.runAfter(function(){s.modified=!0,i.pulse(l,d).run()},!0)),n&&(p=!0===n?Wh:Ih(n)||R(n)?n:uy(n),d.remove(p)),t&&d.insert(t),r&&(p=uy(r),l.value.some(p)?d.remove(p):d.insert(r)),a)for(u in o)d.modify(a,u,o[u]);return 1}},sR=["view","item","group","xy","x","y"],lR="this.",dR={},cR,pR,uR,mR;/**
 * Span-preserving range clamp. If the span of the input range is less
 * than (max - min) and an endpoint exceeds either the min or max value,
 * the range is translated such that the span is preserved and one
 * endpoint touches the boundary of the min/max range.
 * If the span exceeds (max - min), the range [min, max] is returned.
 */Ty("bandwidth",function(e,t){var n=Kf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Jf),Ty("copy",function(e,t){var n=Kf(e,(t||this).context);return n?n.copy():void 0},Jf),Ty("domain",function(e,t){var n=Kf(e,(t||this).context);return n?n.domain():[]},Jf),Ty("range",function(e,t){var n=Kf(e,(t||this).context);return n&&n.range?n.range():[]},Jf),Ty("invert",function(e,t,n){var r=Kf(e,(n||this).context);return r?Ih(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},Jf),Ty("scale",function(e,t,n){var r=Kf(e,(n||this).context);return r?r(t):void 0},Jf),Ty("gradient",function(e,t,r,a){var o=Ov(t,r),s=e.domain(),l=s[0],d=s[s.length-1],c=Bs(e,l,d);e.ticks&&(s=e.ticks(+a||15),l!==s[0]&&s.unshift(l),d!==s[s.length-1]&&s.push(d));for(var p=0,i=s.length;p<i;++p)o.stop(c(s[p]),e(s[p]));return o},Jf),Ty("geoArea",KP,Jf),Ty("geoBounds",QP,Jf),Ty("geoCentroid",JP,Jf),Ty("indata",function(e,t,n){var r=this.context.data[e]["index:"+t],a=r?r.value.get(n):void 0;return a?a.count:a},function(e,t,n,r){t[0].type!==HP&&Rh("First argument to indata must be a string literal."),t[1].type!==HP&&Rh("Second argument to indata must be a string literal.");var a=t[0].value,o=t[1].value,i=GP+o;r.hasOwnProperty(i)||(r[i]=n.getData(a).indataRef(n,o))}),Ty("data",iy,sy),Ty("vlSingle",gy,sy),Ty("vlSingleDomain",by,sy),Ty("vlMulti",gy,hy),Ty("vlMultiDomain",by,hy),Ty("vlInterval",function(e,t,n){return yy.call(this,e,t,n,fy)},sy),Ty("vlIntervalDomain",function(e,t,r,a){var o=this.context.data[e],s=o?o.values.value:[],l=s[0],d=0,i,n,c,p,u;if(l){for(i=l.intervals.length;d<i;++d)if(n=l.intervals[d],t&&n.encoding===t||r&&n.field===r){if(!n.extent)return;c=d,u=2<n.extent.length;break}return p=s.reduce(function(e,t){var n=t.intervals[c].extent,r=u?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return u?e.push.apply(e,r):e.push(r),e},[]),u?_y(p,a):xy(p,a)}},sy),Ty("treePath",function(e,n,r){var a=dy(e,this),o=a[n],i=a[r];return o&&i?o.path(i).map(ly):void 0},sy),Ty("treeAncestors",function(e,t){var r=dy(e,this)[t];return r?r.ancestors().map(ly):void 0},sy);var fR={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+P("$"+e)+"]"},functions:function(e){var t=BP(e);for(var n in sR.forEach(function(e){t[e]="event.vega."+e}),iR)t[n]=lR+n;return t},constants:$P,visitors:dR},yR=function(e){function t(e){if(Fh(e))return e;var t=m[e.type];return null==t&&Rh("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(d),fields:Object.keys(c)};return d={},c={},n}e=e||{};var r=e.whitelist?xb(e.whitelist):{},a=e.blacklist?xb(e.blacklist):{},o=e.constants||$P,i=(e.functions||BP)(t),s=e.globalvar,l=e.fieldvar,d={},c={},u=0,p=Qh(s)?s:function(e){return s+"[\""+e+"\"]"},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<u?t:a.hasOwnProperty(t)?Rh("Illegal identifier: "+t):o.hasOwnProperty(t)?o[t]:r.hasOwnProperty(t)?t:(d[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(u+=1);var a=t(e.property);return r===l&&(c[a]=1),n&&(u-=1),r+(n?"."+a:"["+a+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Rh("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,a=i.hasOwnProperty(n)&&i[n];return a||Rh("Unrecognized function: "+n),Qh(a)?a(r):a+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){u+=1;var n=t(e.key);return u-=1,n+":"+t(e.value)}};return n.functions=i,n.constants=o,n}(fR),gR=function(e,t,n){var r={},a,o;try{a=UP(e)}catch(t){Rh("Expression parse error: "+P(e))}return a.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,a=fR.visitors[n];a&&a(n,e.arguments,t,r)}}),o=yR(a),o.globals.forEach(function(e){var n="$"+e;!r.hasOwnProperty(n)&&t.getSignal(e)&&(r[n]=t.signalRef(e))}),{$expr:n?n+"return("+o.code+");":o.code,$fields:o.fields,$params:r}},hR="view",bR="scope",_R=function(e,t){return e.signal?t.getSignal(e.signal).id:e.scale?t.getScale(e.scale).id:Oy(e,t)},xR=function(e,t,n){return oI=t||"view",iI=n||LR,Ry(e.trim()).map(Dy)},vR="[",SR="]",TR="{",kR="}",OR=":",ER=",",CR="@",wR=">",GT=/[[\]{}]/,LR={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},AR="var datum=event.item&&event.item.datum;",NR=function(e,t,n){var r=e.events,a=e.update,o=e.encode,i=[],s="",l;r||Rh("Signal update missing events specification."),Fh(r)&&(r=xR(r)),r=Kh(r).filter(function(e){return e.signal||e.scale?(i.push(e),0):1}),r.length&&i.push(1<r.length?{merge:r}:r[0]),null!=o&&(a&&Rh("Signal encode and update are mutually exclusive."),a="encode(item(),"+P(o)+")"),s=Fh(a)?gR(a,t,AR):null==a.expr?null==a.value?null==a.signal?Rh("Invalid signal update specification."):{$expr:"_.value",$params:{value:t.signalRef(a.signal)}}:a.value:gR(a.expr,t,AR),l={target:n,update:s},e.force&&(l.options={force:!0}),i.forEach(function(e){e={source:_R(e,t)},t.addUpdate(nb(e,l))})},PR=function(e,t){var n=t.getSignal(e.name);if(e.update){var r=gR(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){NR(e,t,n.id)})},RR={$tupleid:1,toString:function(){return":_tupleid_:"}},DR=By("key"),IR="descending",MR=Zy("aggregate"),FR=Zy("axisticks"),jR=Zy("bound"),zR=Zy("collect"),UR=Zy("compare"),$R=Zy("datajoin"),BR=Zy("encode"),WR=Zy("facet"),qR=Zy("field"),VR=Zy("key"),HR=Zy("legendentries"),YR=Zy("mark"),GR=Zy("multiextent"),ZR=Zy("multivalues"),XR=Zy("overlap"),KR=Zy("params"),QR=Zy("prefacet"),JR=Zy("projection"),eD=Zy("proxy"),tD=Zy("relay"),nD=Zy("render"),rD=Zy("scale"),aD=Zy("sieve"),oD=Zy("sortitems"),iD=Zy("viewlayout"),sD=Zy("values"),lD=0,dD=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],cD=xb(dD),pD=xb(dD.slice(1,6)),uD=function(e,t){var n={};for(var r in e)"name"!=r&&(n[r]=yg(e[r],t));t.addProjection(e.name,n)},mD="top",fD="left",yD="bottom",gD="index",hD="label",bD="offset",_D="perc",xD="size",vD="total",SD="value",TD="guide-label",kD="guide-title",OD="group-title",ED=["shape","size","fill","stroke","strokeDash","opacity"],CD={name:1,interactive:1},wD=xb(["rule"]),LD=xb(["group","image","rect"]),AD=function(e,t){var n="";return wD[t]?n:(e.x2&&(e.x?(LD[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(LD[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},ND=function(e,t,n,r){function a(e,o,i,s){var l=FD(null,o,t,n,r),a=FD(null,i,t,n,r),d=FD(null,s,t,n,r);return"this."+e+"("+[l,a,d].join(",")+").toString()"}return e.c?a("hcl",e.h,e.c,e.l):e.h||e.s?a("hsl",e.h,e.s,e.l):e.l||e.a?a("lab",e.l,e.a,e.b):e.r||e.g||e.b?a("rgb",e.r,e.g,e.b):null},PD=function(e,t,n,r){var a=gR(e,t);return a.$fields.forEach(function(e){r[e]=1}),nb(n,a.$params),a.$expr},RD=function(e,t,n,r){return gg(Mh(e)?e:{datum:e},t,n,r)},DD=function(e,t,n,r,a){var o=bg(e.scale,n,r,a),i,s,l;return null==e.range?(void 0!==t&&(t=o+"("+t+")"),e.band&&(l=hg(e.scale,n))&&(s=o+".bandwidth",i=+e.band,i=s+"()"+(1===i?"":"*"+i),0>l&&(i="("+s+"?"+i+":0)"),t=(t?t+"+":"")+i,e.extra&&(t="(datum.extra?"+o+"(datum.extra.value):"+t+")")),null==t&&(t="0")):(i=+e.range,s=o+".range()",t=0===i?s+"[0]":"($="+s+","+(1===i?"$[$.length-1]":"$[0]+"+i+"*($[$.length-1]-$[0])")+")"),t},ID=function(e,t,n,r){return"this.gradient("+bg(e.gradient,t,n,r)+","+P(e.start)+","+P(e.stop)+","+P(e.count)+")"},MD=function(e,t,n,r){return Mh(e)?"("+FD(null,e,t,n,r)+")":e},FD=function(e,t,n,r,a){if(null!=t.gradient)return ID(t,n,r,a);var o=t.signal?PD(t.signal,n,r,a):t.color?ND(t.color,n,r,a):null==t.field?void 0===t.value?void 0:P(t.value):RD(t.field,n,r,a);return null!=t.scale&&(o=DD(t,o,n,r,a)),void 0===o&&(o=null),null!=t.exponent&&(o="Math.pow("+o+","+MD(t.exponent,n,r,a)+")"),null!=t.mult&&(o+="*"+MD(t.mult,n,r,a)),null!=t.offset&&(o+="+"+MD(t.offset,n,r,a)),t.round&&(o="Math.round("+o+")"),o},jD=function(e,t,n){return e+"["+P(t)+"]="+n+";"},zD=function(e,t,n,r,a){var o="";return t.forEach(function(t){var i=FD(e,t,n,r,a);o+=t.test?PD(t.test,n,r,a)+"?"+i+":":i}),jD("o",e,o)},UD="mark",$D="frame",BD="scope",WD="legend-label",qD="title",VD=function(e,t,n,r,a,o,i){return{type:e,name:i?i.name:void 0,role:t,style:i&&i.style||n,key:r,from:a,interactive:!!(i&&i.interactive),encode:Sg(o,i,CD)}},HD="group",YD="rule",GD="text",ZD=function(e,t,n,r){var a={value:0},o={},i,s;return o.enter=i={opacity:a,x:a,y:a},vg(i,"width",n.gradientWidth),vg(i,"height",n.gradientHeight),vg(i,"stroke",n.gradientStrokeColor),vg(i,"strokeWidth",n.gradientStrokeWidth),o.exit={opacity:a},o.update=s={x:a,y:a,fill:{gradient:t},opacity:{value:1}},vg(s,"width",n.gradientWidth),vg(s,"height",n.gradientHeight),VD("rect","legend-gradient",null,void 0,void 0,o,r)},XD=function(e,t,n,r){var a={value:0},o={},i,s;return o.enter=i={opacity:a,text:{field:hD}},vg(i,"fill",t.labelColor),vg(i,"font",t.labelFont),vg(i,"fontSize",t.labelFontSize),vg(i,"baseline",t.gradientLabelBaseline),vg(i,"limit",t.gradientLabelLimit),o.exit={opacity:a},o.update=s={opacity:{value:1}},i.x=s.x={field:_D,mult:t.gradientWidth},i.y=s.y={value:t.gradientHeight,offset:t.gradientLabelOffset},i.align=s.align={signal:"datum."+_D+"<=0?\"left\":datum."+_D+">=1?\"right\":\"center\""},VD(GD,WD,TD,_D,r,o,n)},KD=function(e,t,n,r){var a={value:0},o={},i,s;return o.enter=i={opacity:a},vg(i,"align",t.labelAlign),vg(i,"baseline",t.labelBaseline),vg(i,"fill",t.labelColor),vg(i,"font",t.labelFont),vg(i,"fontSize",t.labelFontSize),vg(i,"limit",t.labelLimit),o.exit={opacity:a},o.update=s={opacity:{value:1},text:{field:hD}},i.x=s.x={field:bD,offset:t.labelOffset},i.y=s.y={field:xD,mult:0.5,offset:{field:vD,offset:{field:{group:"entryPadding"},mult:{field:gD}}}},VD(GD,WD,TD,SD,r,o,n)},QD=function(e,t,n,r){var a={value:0},o={},i,s;return o.enter=i={opacity:a},vg(i,"shape",t.symbolType),vg(i,"size",t.symbolSize),vg(i,"strokeWidth",t.symbolStrokeWidth),e.fill||(vg(i,"fill",t.symbolFillColor),vg(i,"stroke",t.symbolStrokeColor)),o.exit={opacity:a},o.update=s={opacity:{value:1}},i.x=s.x={field:bD,mult:0.5},i.y=s.y={field:xD,mult:0.5,offset:{field:vD,offset:{field:{group:"entryPadding"},mult:{field:gD}}}},ED.forEach(function(t){e[t]&&(s[t]=i[t]={scale:e[t],field:SD})}),VD("symbol","legend-symbol",null,SD,r,o,n)},JD=function(e,t,n,r){var a={value:0},o=e.title,i={},s;return i.enter=s={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},vg(s,"align",t.titleAlign),vg(s,"baseline",t.titleBaseline),vg(s,"fill",t.titleColor),vg(s,"font",t.titleFont),vg(s,"fontSize",t.titleFontSize),vg(s,"fontWeight",t.titleFontWeight),vg(s,"limit",t.titleLimit),i.exit={opacity:a},i.update={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},VD(GD,"legend-title",kD,null,r,i,n)},eI=function(e,t,n,r,a,o,i){return{type:HD,name:n,role:e,style:t,from:r,interactive:a,encode:o,marks:i}},tI=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===HD?BD:t||UD:t},nI=function(e){return{clip:e.clip||!1,interactive:!1!==e.interactive,marktype:e.type,name:e.name||void 0,role:e.role||tI(e),zindex:+e.zindex||void 0}},rI=function(e,n){var r=Zt(e.type);r||Rh("Unrecognized transform type: "+P(e.type));var a=zy(r.type.toLowerCase(),null,Eg(r,e,n));return e.signal&&n.addSignal(e.signal,n.proxy(a)),a.metadata=r.metadata||{},a},aI=function(e,t,n){var r,a,o,i,s;return e?(r=e.facet)&&(!t&&Rh("Only group marks can be faceted."),null==r.field?(a=n.keyRef(r.groupby),e.data?s=$y(n.getData(e.data).aggregate):(o=rI(nb({type:"aggregate",groupby:Kh(r.groupby)},r.aggregate)),o.params.key=a,o.params.pulse=$y(n.getData(r.data).output),i=s=$y(n.add(o)))):i=s=$y(n.getData(r.data).output)):i=$y(n.add(zR(null,[{}]))),i||(i=e.$ref?e:$y(n.getData(e.data).output)),{key:a,pulse:i,parent:s}},oI,iI;jg.fromEntries=function(e,t){var r=t.length,n=1,a=t[0],o=t[r-1],i=t[r-2],s=null;for(e.add(t[0]);n<r;++n)t[n].params.pulse=$y(t[n-1]),e.add(t[n]),"aggregate"===t[n].type&&(s=t[n]);return new jg(e,a,i,o,s)};var sI=jg.prototype;sI.countsRef=function(e,t,n){var r=this,o=r.counts||(r.counts={}),i=zg(t),s,l,d;return null!=i&&(e=r.scope,s=o[i]),s?n&&n.field&&Ug(e,s.agg.params,n):(d={groupby:e.fieldRef(t,"key"),pulse:$y(r.output)},n&&n.field&&Ug(e,d,n),l=e.add(MR(d)),s=e.add(zR({pulse:$y(l)})),s={agg:l,ref:$y(s)},null!=i&&(o[i]=s)),s.ref},sI.tuplesRef=function(){return $y(this.values)},sI.extentRef=function(e,t){return $g(e,this,"extent","extent",t,!1)},sI.domainRef=function(e,t){return $g(e,this,"domain","values",t,!1)},sI.valuesRef=function(e,t,n){return $g(e,this,"vals","values",t,n||!0)},sI.lookupRef=function(e,t){return $g(e,this,"lookup","tupleindex",t,!1)},sI.indataRef=function(e,t){return $g(e,this,"indata","tupleindex",t,!0,!0)};var lI=function(e,t,n){var r=e.from.facet,a=r.name,o=$y(t.getData(r.data).output),i,s,l,d;r.name||Rh("Facet must have a name: "+P(r)),r.data||Rh("Facet must reference a data set: "+P(r)),r.field?d=t.add(QR({field:t.fieldRef(r.field),pulse:o})):r.groupby?d=t.add(WR({key:t.keyRef(r.groupby),group:$y(t.proxy(n.parent)),pulse:o})):Rh("Facet must specify groupby or field: "+P(r)),i=t.fork(),s=i.add(zR()),l=i.add(aD({pulse:$y(s)})),i.addData(a,new jg(i,s,s,l)),i.addSignal("parent",null),d.params.subflow={$subflow:vI(e,i).toRuntime()}},dI=function(e,t,n){var r=t.add(QR({pulse:n.pulse})),a=t.fork();a.add(aD()),a.addSignal("parent",null),r.params.subflow={$subflow:vI(e,a).toRuntime()}},cI=function(e,t,n){var r=e.remove,a=e.insert,o=e.toggle,i=e.modify,s=e.values,l=t.add(Uy()),d,c;d="if("+e.trigger+",modify(\""+n+"\","+[a,r,o,i,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",c=gR(d,t),l.update=c.$expr,l.params=c.$params},pI=function(e,t){var n=tI(e),r=e.type===HD,a=e.from&&e.from.facet,o=e.layout||n===BD||n===$D,i=n===UD||o||a,s,l,d,c,p,u,m,f,y,g,h,b,_;d=aI(e.from,r,t),l=t.add($R({key:d.key||(e.key?By(e.key):void 0),pulse:d.pulse,clean:!r})),y=$y(l),l=c=t.add(zR({pulse:y})),l=t.add(YR({markdef:nI(e),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$y(l)})),g=$y(l),l=t.add(BR(Tg(e.encode,e.type,n,e.style,t,{pulse:g}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=rI(e,t);(n.metadata.generates||n.metadata.changes)&&Rh("Mark transforms should not generate new data."),n.params.pulse=$y(l),t.add(l=n)}),e.sort&&(l=t.add(oD({sort:t.compareRef(e.sort),pulse:$y(l)}))),h=$y(l),(a||o)&&(o=t.add(iD({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:g,pulse:h})),b=$y(o)),p=t.add(jR({mark:g,pulse:b||h})),_=$y(p),r&&(i&&(s=t.operators,s.pop(),o&&s.pop()),t.pushState(h,b||_,y),a?lI(e,t,d):i?dI(e,t,d):vI(e,t),t.popState(),i&&(o&&s.push(o),s.push(p))),e.overlap&&(_=$y(t.add(XR({method:!0===e.overlap?"parity":e.overlap,pulse:_})))),u=t.add(nD({pulse:_})),m=t.add(aD({pulse:$y(u)},void 0,t.parent())),null!=e.name&&(f=e.name,t.addData(f,new jg(t,c,u,m)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&Rh("Marks only support modify triggers."),cI(e,t,f)}))},uI=function(e,t){var n=e.type||"symbol",r=t.config.legend,a=e.encode||{},o=a.legend||{},i=o.name||void 0,s=!!o.interactive,l=o.style,d=e.size||e.shape||e.fill||e.stroke||e.strokeDash||e.opacity,c,p,u,m,f,y,g,h;return d||Rh("Missing valid scale for legend."),c={orient:Gy(e.orient,r.orient),title:null!=e.title},p=$y(t.add(zR(null,[c]))),o=Sg({enter:Wg(r),update:{offset:xg(Gy(e.offset,r.offset)),padding:xg(Gy(e.padding,r.padding)),titlePadding:xg(Gy(e.titlePadding,r.titlePadding))}},o,CD),y={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:xg(Gy(e.entryPadding,r.entryPadding))}},"gradient"===n?(u=$y(t.add(HR({type:"gradient",scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),h=[ZD(e,d,r,a.gradient),XD(e,r,a.labels,u)]):(u=$y(t.add(HR(g={scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),h=[QD(e,r,a.symbols,u),KD(e,r,a.labels,u)],g.size=Bg(e,t,h)),h=[eI("legend-entry",null,null,p,s,y,h)],c.title&&(f=JD(e,r,a.title,p),y.update.y.offset={field:{group:"titlePadding"},offset:qg(t,f.encode,"fontSize",kD)},h.push(f)),m=eI("legend",l,i,p,s,o,h),e.zindex&&(m.zindex=e.zindex),pI(m,t)},mI=function(e,t){e=Fh(e)?{text:e}:e;var n=t.config.title,r=nb({},e.encode),a,o,i;return a={orient:null==e.orient?n.orient:e.orient},o=$y(t.add(zR(null,[a]))),r.name=e.name,r.interactive=e.interactive,i=Vg(e,n,r,o),e.zindex&&(i.zindex=e.zindex),pI(i,t)},fI=function(e,t){var n=t.config,r=e.orient,a=r===mD||r===yD?n.axisX:n.axisY,o=n["axis"+r[0].toUpperCase()+r.slice(1)],i="band"===t.scaleType(e.scale)&&n.axisBand;return a||o||i?nb({},n.axis,a,o,i):n.axis},yI=function(e,t,n,r){var a=e.orient,o={value:0},i={},s,l,d,c,p;return i.enter=s={opacity:o},vg(s,"stroke",t.domainColor),vg(s,"strokeWidth",t.domainWidth),i.exit={opacity:o},i.update=l={opacity:{value:1}},a===mD||a===yD?(d="x",p="y"):(d="y",p="x"),c=d+"2",s[p]=o,l[d]=s[d]=Zg(e,0),l[c]=s[c]=Zg(e,1),VD(YD,"axis-domain",null,null,r,i,n)},gI=function(e,t,n,r){var a=e.orient,o=e.gridScale,i=a===fD||a===mD?1:-1,l=i*e.offset||0,d={value:0},c={},p,m,f,y,g,u,h,b;return c.enter=p={opacity:d},vg(p,"stroke",t.gridColor),vg(p,"strokeWidth",t.gridWidth),vg(p,"strokeDash",t.gridDash),c.exit=m={opacity:d},c.update=f={},vg(f,"opacity",t.gridOpacity),y={scale:e.scale,field:SD,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},a===mD||a===yD?(g="x",u="y",b="height"):(g="y",u="x",b="width"),h=u+"2",f[g]=p[g]=m[g]=y,o?(p[u]={scale:o,range:0,mult:i,offset:l},f[h]=p[h]={scale:o,range:1,mult:i,offset:l}):(p[u]={value:l},f[h]=p[h]={signal:b,mult:i,offset:l}),VD(YD,"axis-grid",null,SD,r,c,n)},hI=function(e,t,n,r,a){var o=e.orient,i=o===fD||o===mD?-1:1,s={value:0},l={},d,c,p,u,m;return l.enter=d={opacity:s},vg(d,"stroke",t.tickColor),vg(d,"strokeWidth",t.tickWidth),l.exit=c={opacity:s},l.update=p={opacity:{value:1}},u=xg(a),u.mult=i,m={scale:e.scale,field:SD,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},o===mD||o===yD?(p.y=d.y=s,p.y2=d.y2=u,p.x=d.x=c.x=m):(p.x=d.x=s,p.x2=d.x2=u,p.y=d.y=c.y=m),VD(YD,"axis-tick",null,SD,r,l,n)},bI=function(e,t,n,r,a){var o=e.orient,i=e.labelOverlap,s=o===fD||o===mD?-1:1,l=null==e.labelPadding?t.labelPadding:e.labelPadding,d={value:0},c={},p,u,m,f,y;return c.enter=p={opacity:d},vg(p,"angle",t.labelAngle),vg(p,"fill",t.labelColor),vg(p,"font",t.labelFont),vg(p,"fontSize",t.labelFontSize),vg(p,"limit",t.labelLimit),c.exit=u={opacity:d},c.update=m={opacity:{value:1},text:{field:hD}},f=xg(a),f.mult=s,f.offset=xg(l),f.offset.mult=s,y={scale:e.scale,field:SD,band:0.5,offset:t.tickOffset},o===mD||o===yD?(m.y=p.y=f,m.x=p.x=u.x=y,vg(m,"align","center"),vg(m,"baseline",o===mD?"bottom":"top")):(m.x=p.x=f,m.y=p.y=u.y=y,vg(m,"align",o==="right"?"left":"right"),vg(m,"baseline","middle")),e=VD(GD,"axis-label",TD,SD,r,c,n),e.overlap=i||t.labelOverlap,e},_I=function(e,t,n,r){var a=e.orient,o=e.title,i=a===fD||a===mD?-1:1,s=a===mD||a===yD,l={},d,c,p;return l.enter=d={opacity:{value:0}},vg(d,"align",t.titleAlign),vg(d,"fill",t.titleColor),vg(d,"font",t.titleFont),vg(d,"fontSize",t.titleFontSize),vg(d,"fontWeight",t.titleFontWeight),vg(d,"limit",t.titleLimit),l.exit={opacity:{value:0}},l.update=c={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},p={scale:e.scale,range:0.5},s?(c.x=p,c.angle={value:0},c.baseline={value:a===mD?"bottom":"top"}):(c.y=p,c.angle={value:90*i},c.baseline={value:"bottom"}),vg(c,"angle",t.titleAngle),vg(c,"baseline",t.titleBaseline),vg(c,"x",t.titleX)||!s||Og("x",n)||(l.enter.auto={value:!0}),vg(c,"y",t.titleY)||s||Og("y",n)||(l.enter.auto={value:!0}),VD(GD,"axis-title",kD,null,r,l,n)},xI=function(e,t){var n=fI(e,t),r=e.encode||{},a=r.axis||{},o=a.name||void 0,i=!!a.interactive,s=a.style,l,d,c,p,u,m;return l={orient:e.orient,ticks:!!Gy(e.ticks,n.ticks),labels:!!Gy(e.labels,n.labels),grid:!!Gy(e.grid,n.grid),domain:!!Gy(e.domain,n.domain),title:!!Gy(e.title,!1)},d=$y(t.add(zR({},[l]))),a=Sg({update:{range:{signal:"abs(span(range(\""+e.scale+"\")))"},offset:xg(Gy(e.offset,0)),position:xg(Gy(e.position,0)),titlePadding:xg(Gy(e.titlePadding,n.titlePadding)),minExtent:xg(Gy(e.minExtent,n.minExtent)),maxExtent:xg(Gy(e.maxExtent,n.maxExtent))}},r.axis,CD),c=$y(t.add(FR({scale:t.scaleRef(e.scale),extra:n.tickExtra,count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),m=[],l.grid&&m.push(gI(e,n,r.grid,c)),l.ticks&&(p=Gy(e.tickSize,n.tickSize),m.push(hI(e,n,r.ticks,c,p))),l.labels&&(p=l.ticks?p:0,m.push(bI(e,n,r.labels,c,p))),l.domain&&m.push(yI(e,n,r.domain,d)),l.title&&m.push(_I(e,n,r.title,d)),u=eI("axis",s,o,d,i,a,m),e.zindex&&(u.zindex=e.zindex),pI(u,t)},vI=function(e,t,n){var r=Kh(e.signals),a=Kh(e.scales);return n||r.forEach(function(e){aP(e,t)}),Kh(e.projections).forEach(function(e){uD(e,t)}),a.forEach(function(e){Qy(e,t)}),Kh(e.data).forEach(function(e){Hg(e,t)}),a.forEach(function(e){Jy(e,t)}),r.forEach(function(e){PR(e,t)}),Kh(e.axes).forEach(function(e){xI(e,t)}),Kh(e.marks).forEach(function(e){pI(e,t)}),Kh(e.legends).forEach(function(e){uI(e,t)}),e.title&&mI(e.title,t),t.parseLambdas(),t},SI=xb(["width","height","padding","autosize"]),TI=Kg.prototype=Qg.prototype;TI.fork=function(){return new Qg(this)},TI.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},TI.id=function(){return(this._subid?this._subid+":":0)+this._id++},TI.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},TI.proxy=function(e){var t=e instanceof jy?$y(e):e;return this.add(eD({value:t}))},TI.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},TI.addUpdate=function(e){return this.updates.push(e),e},TI.finish=function(){function e(e,t,n){var r,a;e&&(r=e.data||(e.data={}),a=r[t]||(r[t]=[]),a.push(n))}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},TI.pushState=function(e,t,n){this._encode.push($y(this.add(aD({pulse:e})))),this._parent.push(t),this._lookup.push(n?$y(this.proxy(n)):null),this._markpath.push(-1)},TI.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},TI.parent=function(){return yb(this._parent)},TI.encode=function(){return yb(this._encode)},TI.lookup=function(){return yb(this._lookup)},TI.markpath=function(){var e=this._markpath;return++e[e.length-1]},TI.fieldRef=function(e,t){if(Fh(e))return By(e,t);e.signal||Rh("Unsupported field reference: "+P(e));var n=e.signal,r=this.field[n],a;return r||(a={name:this.signalRef(n)},t&&(a.as=t),this.field[n]=r=$y(this.add(qR(a)))),r},TI.compareRef=function(e){function t(e){return Yy(e)?(r=!0,$y(n[e.signal])):e}var n=this.signals,r=!1,a=Kh(e.field).map(t),o=Kh(e.order).map(t);return r?$y(this.add(UR({fields:a,orders:o}))):Wy(a,o)},TI.keyRef=function(e){var t=this.signals,n=!1;return e=Kh(e).map(function(e){return Yy(e)?(n=!0,$y(t[e.signal])):e}),n?$y(this.add(VR({fields:e}))):qy(e)},TI.sortRef=function(e){if(!e)return e;var t=[Hy(e.op,e.field),RR],n=e.order||"ascending";return n.signal?$y(this.add(UR({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Wy(t,[n,n])},TI.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},TI.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&Rh("Duplicate signal name: "+P(e));var n=t instanceof jy?t:this.add(Uy(t));return this.signals[e]=n},TI.getSignal=function(e){return this.signals[e]||Rh("Unrecognized signal name: "+P(e)),this.signals[e]},TI.signalRef=function(e){return this.signals[e]?$y(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Uy(null))),$y(this.lambdas[e]))},TI.parseLambdas=function(){for(var t=Object.keys(this.lambdas),r=0,a=t.length;r<a;++r){var n=t[r],o=gR(n,this),e=this.lambdas[n];e.params=o.$params,e.update=o.$expr}},TI.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},TI.objectProperty=function(e){return e&&Mh(e)?this.signalRef(e.signal||Jg(e)):e},TI.addBinding=function(e,t){this.bindings||Rh("Nested signals do not support binding: "+P(e)),this.bindings.push(nb({signal:e},t))},TI.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&Rh("Duplicate scale or projection name: "+P(e)),this.scales[e]=this.add(t)},TI.addScale=function(e,t){this.addScaleProj(e,rD(t))},TI.addProjection=function(e,t){this.addScaleProj(e,JR(t))},TI.getScale=function(e){return this.scales[e]||Rh("Unrecognized scale name: "+P(e)),this.scales[e]},TI.projectionRef=TI.scaleRef=function(e){return $y(this.getScale(e))},TI.projectionType=TI.scaleType=function(e){return this.getScale(e).params.type},TI.addData=function(e,t){return this.data.hasOwnProperty(e)&&Rh("Duplicate data set name: "+P(e)),this.data[e]=t},TI.getData=function(e){return this.data[e]||Rh("Undefined data set name: "+P(e)),this.data[e]},TI.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&Rh("Duplicate data set name: "+P(e)),this.addData(e,jg.fromEntries(this,t))};var kI=function(e){var t=nh();return(e||[]).forEach(function(e){if(e)for(var n in e)t[n]=Mh(t[n])?nb(t[n],e[n]):t[n]=e[n]}),t},OI="sans-serif",EI=30,CI=2,wI="#4c78a8",LI="#000",AI="#888",NI="#ddd",PI=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Rh("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key;return t.fn[n]||(t.fn[n]=pb(e.$key))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=Ph(oh(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=jh(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n=e.$encode,r={},a,o;for(a in n)o=n[a],r[a]=Ph(lh(o.$expr,t),o.$fields),r[a].output=o.$output;return r}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Kh(e.$compare).map(function(e){return e&&e.$tupleid?I:e});return t.fn[n]||(t.fn[n]=Jh(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,a){var o=MI(n,t.fork()),i=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(a),i}}},{key:"$tupleid",parse:function(){return I}}],RI=function(e,t){mh(e.type)||!e.type?t.operator(e,e.update?ah(e.update,t):null):t.transform(e,e.type)},DI=function(e,t){var n=null==e.filter?void 0:ih(e.filter,t),r=null==e.stream?void 0:t.get(e.stream),a;e.source?r=t.events(e.source,e.type,n):e.merge&&(a=e.merge.map(t.get.bind(t)),r=a[0].merge.apply(a[0],a.slice(1))),e.between&&(a=e.between.map(t.get.bind(t)),r=r.between(a[0],a[1])),e.filter&&(r=r.filter(n)),null!=e.throttle&&(r=r.throttle(+e.throttle)),null!=e.debounce&&(r=r.debounce(+e.debounce)),null==r&&Rh("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)},II=function(e,t){var n=t.get(e.source),r=null,a=e.update,o;n||Rh("Source not defined: "+e.source),r=e.target&&e.target.$expr?ih(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=dh(a.$params,t)),a=sh(a.$expr,t)),t.update(e,n,r,a,o)},MI=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){RI(e,t)}),n.forEach(function(e){yh(e,t)}),(e.streams||[]).forEach(function(e){DI(e,t)}),(e.updates||[]).forEach(function(e){II(e,t)}),t.resolve()},FI={skip:!0},jI=function(e,t,n){return new gh(e,t,n)};gh.prototype=hh.prototype={fork:function(){var e=new hh(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,r=n.dataflow,a;if(n.set(e.id,t),fh(e.type)&&(a=e.value)&&(a.$ingest?r.ingest(t,a.$ingest,a.$format):a.$request?r.request(t,a.$request,a.$format):r.pulse(t,r.changeset().insert(a))),e.root&&(n.root=t),e.parent){var o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(function(){o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(var i in e.data)a=n.data[i]||(n.data[i]={}),e.data[i].forEach(function(e){a[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[uh(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,a){this.dataflow.on(t,n,r,a,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var a=t.signals[n];e.signals(n,a)&&(r[n]=a.value)})}if(e.data){var a=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(a[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,a=e.signals;Object.keys(a||{}).forEach(function(e){n.update(t.signals[e],a[e],FI)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(Wh).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}};var zI=function(e,t,n){return MI(t,jI(e,cx,n||iR))},UI="padding",$I=ib(Th,Ht);$I.run=function(e){if(Ht.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},$I.render=function(){return this._renderer&&(this._resize&&(this._resize=0,vm(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},$I.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},$I.container=function(){return this._el},$I.scenegraph=function(){return this._scenegraph},$I.signal=function(e,t,n){var r=kh(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},$I.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},$I.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},$I.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},$I.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},$I.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},$I.renderer=function(e){return arguments.length?(Ao(e)||Rh("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},$I.loader=function(e){return arguments.length?(e!==this._loader&&(Ht.prototype.loader.call(this,e),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},$I.resize=function(){return this._autosize=1,this},$I._resizeView=function(e,t,n,r,a,o){this.runAfter(function(i){var s=0;i._autosize=0,i.width()!==n&&(s=1,i.width(n),i._resizeWidth.skip(!0)),i.height()!==r&&(s=1,i.height(r),i._resizeHeight.skip(!0)),i._viewWidth!==e&&(i._resize=1,i._viewWidth=e),i._viewHeight!==t&&(i._resize=1,i._viewHeight=t),(i._origin[0]!==a[0]||i._origin[1]!==a[1])&&(i._resize=1,i._origin=a),s&&i.run("enter"),o&&i.runAfter(function(){i.resize()})})},$I.addEventListener=function(e,t){return this._handler.on(e,t),this},$I.removeEventListener=function(e,t){return this._handler.off(e,t),this},$I.addSignalListener=function(e,t){var n=kh(this,e),r=function(){t(e,n.value)};return r.handler=t,this.on(n,null,r),this},$I.removeSignalListener=function(e,n){var r=kh(this,e),a=r._targets||[],t=a.filter(function(e){var t=e._update;return t&&t.handler===n});return t.length&&a.remove(t[0]),this},$I.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},$I.tooltipHandler=function(e){var t=this._handler;return arguments.length?(t.handleTooltip=e||oo.prototype.handleTooltip,this):t.handleTooltip},$I.events=function(t,r,e){var a=this,o=new Y(e),s=function(n,e){t===VN&&km(a,r)&&n.preventDefault();try{o.receive(qN(a,n,e))}catch(e){a.error(e)}finally{a.run()}},l;if(t===VN)return a.addEventListener(r,s),o;if(t==="window"?"undefined"!=typeof window&&(l=[window]):"undefined"!=typeof document&&(l=document.querySelectorAll(t)),!l)return a.warn("Can not resolve event source: "+t),o;for(var d=0,i=l.length;d<i;++d)l[d].addEventListener(r,s);return a._eventListeners.push({type:r,sources:l,handler:s}),o},$I.finalize=function(){for(var t=this._eventListeners,r=t.length,n,a;0<=--r;)for(a=t[r],n=a.sources.length;0<=--n;)a.sources[n].removeEventListener(a.type,a.handler)},$I.hover=function(e,t){return e=[e||"hover"],t=[t||"update",e],this.on(this.events("view","mouseover",Om),Em,Cm(e)),this.on(this.events("view","mouseout",Om),Em,Cm(t)),this},$I.data=function(e){return gm(this,e).values.value},$I.change=hm,$I.insert=function(e,t){return hm.call(this,e,W().insert(t))},$I.remove=function(e,t){return hm.call(this,e,W().remove(t))},$I.initialize=function(e,t){var n=this,r=n._renderType,a=Ao(r),o,i;return e=n._el=e?Im(n,e):null,a||n.error("Unrecognized renderer type: "+r),o=a.handler||so,i=e?a.renderer:a.headless,n._renderer=i?QN(n,n._renderer,e,i):null,n._handler=JN(n,n._handler,e,o),n._redraw=!0,e&&(t=t?Im(n,t):e.appendChild(HN("div",{class:"vega-bindings"})),n._bind.forEach(function(e){e.param.element&&Im(n,e.param.element)}),n._bind.forEach(function(e){KN(n,e.param.element||t,e)})),n},$I.toImageURL=function(e){return e!==IT.Canvas&&e!==IT.SVG&&e!==IT.PNG?Promise.reject("Unrecognized image type: "+e):eP(this,e).then(function(t){return e===IT.SVG?Mm(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})},$I.toCanvas=function(){return eP(this,IT.Canvas).then(function(e){return e.canvas()})},$I.toSVG=function(){return eP(this,IT.SVG).then(function(e){return e.svg()})},$I.getState=function(e){return this._runtime.getState(e||{data:vh,signals:Sh,recurse:!0})},$I.setState=function(e){var t=this;return t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0}),this},nb(cx,Tv,vk,lw,_A,BA,hN,NN,jN,BN),t.version="3.0.2",t.Dataflow=Ht,t.EventStream=Y,t.Parameters=q,t.Pulse=jt,t.MultiPulse=Bt,t.Operator=V,t.Transform=Gt,t.changeset=W,t.ingest=F,t.isTuple=R,t.definition=Zt,t.transform=Xt,t.transforms=cx,t.tupleid=I,t.scale=js,t.scheme=VC,t.interpolate=qs,t.interpolateRange=$s,t.timeInterval=Hs,t.utcInterval=Ys,t.projection=Oc,t.View=Th,t.parse=function(e,t){return Mh(e)||Rh("Input Vega specification must be an object."),Xg(e,new Kg(kI([t,e.config]))).toRuntime()},t.expressionFunction=Ty,t.formatLocale=ps,t.timeFormatLocale=Rt,t.runtime=MI,t.runtimeContext=jI,t.bin=mx,t.bootstrapCI=Dx,t.randomInteger=function(e,t){null==t&&(t=e,e=0);var n={},r,a,o;return n.min=function(e){return arguments.length?(r=e||0,o=a-r,n):r},n.max=function(e){return arguments.length?(a=e||0,o=a-r,n):a},n.sample=function(){return r+g(o*Math.random())},n.pdf=function(e){return e===g(e)&&e>=r&&e<a?1/o:0},n.cdf=function(e){var t=g(e);return t<r?0:t>=a?1:(t-r+1)/o},n.icdf=function(e){return 0<=e&&1>=e?r-1+g(e*o):NaN},n.min(e).max(t)},t.randomKDE=Fx,t.randomMixture=jx,t.randomNormal=Ix,t.randomUniform=zx,t.quartiles=Mx,t.accessor=Ph,t.accessorName=b,t.accessorFields=w,t.id=Uh,t.identity=id,t.zero=$h,t.one=Bh,t.truthy=Wh,t.falsy=qh,t.logger=Xh,t.None=Vh,t.Error=Hh,t.Warn=Yh,t.Info=Gh,t.Debug=Zh,t.array=Kh,t.compare=Jh,t.constant=eb,t.debounce=tb,t.error=Rh,t.extend=nb,t.extentIndex=rb,t.fastmap=ob,t.field=jh,t.inherits=ib,t.isArray=Ih,t.isBoolean=sb,t.isDate=lb,t.isFunction=Qh,t.isNumber=db,t.isObject=Mh,t.isRegExp=cb,t.isString=Fh,t.key=pb,t.merge=ub,t.pad=fb,t.peek=yb,t.repeat=mb,t.splitAccessPath=Dh,t.stringValue=P,t.toBoolean=gb,t.toDate=hb,t.toNumber=bb,t.toString=_b,t.toSet=xb,t.truncate=vb,t.visitArray=Sb,t.loader=Wb,t.read=V_,t.inferType=xe,t.inferTypes=ve,t.typeParsers=qb,t.formats=Jb,t.Bounds=mr,t.Gradient=Ov,t.GroupItem=yr,t.ResourceLoader=vr,t.Item=fr,t.Scenegraph=ro,t.Handler=oo,t.Renderer=io,t.CanvasHandler=so,t.CanvasRenderer=po,t.SVGHandler=fo,t.SVGRenderer=bo,t.SVGStringRenderer=Eo,t.RenderType=IT,t.renderModule=Ao,t.Marks=rT,t.boundContext=Ta,t.boundStroke=kS,t.boundItem=aT,t.boundMark=iT,t.pathCurves=la,t.pathSymbols=ma,t.pathRectangle=fS,t.pathTrail=gS,t.pathParse=oS,t.pathRender=cS,t.point=pT,t.canvas=Cv,t.domCreate=gr,t.domFind=hr,t.domChild=br,t.domClear=_r,t.openTag=go,t.closeTag=ho,t.font=Ka,t.textMetrics=XS,t.resetSVGClipId=function(){US=1},t.sceneEqual=No,t.pathEqual=Po,t.sceneToJSON=eo,t.sceneFromJSON=to,t.sceneZOrder=Ca,t.sceneVisit=wa,t.scenePickVisit=La,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,e("buffer").Buffer)},{buffer:2,canvas:2,fs:2}],807:[function(e,t,n){function r(){}var a=e("indexof"),o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},i=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},s=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(e,t,n){e[t]=n}}}(),l=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];r.prototype={};var d=n.Script=function(e){return this instanceof d?void(this.code=e):new d(e)};d.prototype.runInContext=function(e){if(!(e instanceof r))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,d=n.eval,c=n.execScript;!d&&c&&(c.call(n,"null"),d=n.eval),i(o(e),function(t){n[t]=e[t]}),i(l,function(t){e[t]&&(n[t]=e[t])});var p=o(n),u=d.call(n,this.code);return i(o(n),function(t){(t in e||-1===a(p,t))&&(e[t]=n[t])}),i(l,function(t){t in e||s(e,t,n[t])}),document.body.removeChild(t),u},d.prototype.runInThisContext=function(){return eval(this.code)},d.prototype.runInNewContext=function(e){var t=d.createContext(e),n=this.runInContext(t);return i(o(t),function(n){e[n]=t[n]}),n},i(o(d.prototype),function(e){n[e]=d[e]=function(t){var n=d(t);return n[e].apply(n,[].slice.call(arguments,1))}}),n.createScript=function(e){return n.Script(e)},n.createContext=d.createContext=function(e){var t=new r;return"object"==typeof e&&i(o(e),function(n){t[n]=e[n]}),t}},{indexof:23}],808:[function(e,t){var n,r,a;a=e("./Utils"),r=e("./Inline"),n=function(){function e(){}return e.indentation=4,e.prototype.dump=function(e,t,n,o,s){var l,i,d,c,p,u,m;if(null==t&&(t=0),null==n&&(n=0),null==o&&(o=!1),null==s&&(s=null),c="",p=n?a.strRepeat(" ",n):"",0>=t||"object"!=typeof e||e instanceof Date||a.isEmpty(e))c+=p+r.dump(e,o,s);else if(e instanceof Array)for(l=0,d=e.length;l<d;l++)u=e[l],m=0>=t-1||"object"!=typeof u||a.isEmpty(u),c+=p+"-"+(m?" ":"\n")+this.dump(u,t-1,m?0:n+this.indentation,o,s)+(m?"\n":"");else for(i in e)u=e[i],m=0>=t-1||"object"!=typeof u||a.isEmpty(u),c+=p+r.dump(i,o,s)+":"+(m?" ":"\n")+this.dump(u,t-1,m?0:n+this.indentation,o,s)+(m?"\n":"");return c},e}(),t.exports=n},{"./Inline":813,"./Utils":817}],809:[function(e,t){var n,r;r=e("./Pattern"),n=function(){function e(){}var t;return e.LIST_ESCAPEES=["\\","\\\\","\\\"","\"","\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\x0B","\f","\r","\x0E","\x0F","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1A","\x1B","\x1C","\x1D","\x1E","\x1F",(t=String.fromCharCode)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\","\\\"","\\\"","\\\"","\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,n,r,a;for(r={},t=n=0,a=e.LIST_ESCAPEES.length;0<=a?n<a:n>a;t=0<=a?++n:--n)r[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return r}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new r("[\\x00-\\x1f]|\xC2\x85|\xC2\xA0|\xE2\x80\xA8|\xE2\x80\xA9"),e.PATTERN_MAPPING_ESCAPEES=new r(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new r("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},e.escapeWithDoubleQuotes=function(e){var t;return t=this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(t){return e.MAPPING_ESCAPEES_TO_ESCAPED[t]}}(this)),"\""+t+"\""},e.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},e.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},e}(),t.exports=n},{"./Pattern":815}],810:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty,a;a=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},t}(Error),t.exports=a},{}],811:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty,a;a=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},t}(Error),t.exports=a},{}],812:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty,a;a=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message},t}(Error),t.exports=a},{}],813:[function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r,a,o,s,l,d,c,p;d=e("./Pattern"),c=e("./Unescaper"),a=e("./Escaper"),p=e("./Utils"),s=e("./Exception/ParseException"),l=e("./Exception/ParseMore"),r=e("./Exception/DumpException"),o=function(){function e(){}return e.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",e.PATTERN_TRAILING_COMMENTS=new d("^\\s*#.*$"),e.PATTERN_QUOTED_SCALAR=new d("^"+e.REGEX_QUOTED_STRING),e.PATTERN_THOUSAND_NUMERIC_SCALAR=new d("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),e.PATTERN_SCALAR_BY_DELIMITERS={},e.settings={},e.configure=function(e,t){null==e&&(e=null),null==t&&(t=null),this.settings.exceptionOnInvalidType=e,this.settings.objectDecoder=t},e.parse=function(e,t,n){var r,a;if(null==t&&(t=!1),null==n&&(n=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=n,null==e)return"";if(e=p.trim(e),0===e.length)return"";switch(r={exceptionOnInvalidType:t,objectDecoder:n,i:0},e.charAt(0)){case"[":a=this.parseSequence(e,r),++r.i;break;case"{":a=this.parseMapping(e,r),++r.i;break;default:a=this.parseScalar(e,null,["\"","'"],r);}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(e.slice(r.i),""))throw new s("Unexpected characters near \""+e.slice(r.i)+"\".");return a},e.dump=function(e,t,n){var r,o,i;return(null==t&&(t=!1),null==n&&(n=null),null==e)?"null":(i=typeof e,"object"===i)?e instanceof Date?e.toISOString():null!=n&&(o=n(e),"string"==typeof o||null!=o)?o:this.dumpObject(e):"boolean"===i?e?"true":"false":p.isDigits(e)?"string"===i?"'"+e+"'":parseInt(e)+"":p.isNumeric(e)?"string"===i?"'"+e+"'":parseFloat(e)+"":"number"===i?2e308===e?".Inf":-2e308===e?"-.Inf":isNaN(e)?".NaN":e:a.requiresDoubleQuoting(e)?a.escapeWithDoubleQuotes(e):a.requiresSingleQuoting(e)?a.escapeWithSingleQuotes(e):""===e?"\"\"":p.PATTERN_DATE.test(e)?"'"+e+"'":"null"===(r=e.toLowerCase())||"~"===r||"true"===r||"false"===r?"'"+e+"'":e},e.dumpObject=function(e,t,n){var r,a,o,i,s;if(null==n&&(n=null),e instanceof Array){for(i=[],r=0,o=e.length;r<o;r++)s=e[r],i.push(this.dump(s));return"["+i.join(", ")+"]"}for(a in i=[],e)s=e[a],i.push(this.dump(a)+": "+this.dump(s));return"{"+i.join(", ")+"}"},e.parseScalar=function(e,t,r,a,o){var l,i,c,u,m,f,y,g,h;if(null==t&&(t=null),null==r&&(r=["\"","'"]),null==a&&(a=null),null==o&&(o=!0),null==a&&(a={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),l=a.i,(f=e.charAt(l),!(0<=n.call(r,f)))){if(!t)u=e.slice(l),l+=u.length,g=u.indexOf(" #"),-1!==g&&(u=p.rtrim(u.slice(0,g)));else if(i=t.join("|"),m=this.PATTERN_SCALAR_BY_DELIMITERS[i],null==m&&(m=new d("^(.+?)("+i+")"),this.PATTERN_SCALAR_BY_DELIMITERS[i]=m),c=m.exec(e.slice(l)))u=c[1],l+=u.length;else throw new s("Malformed inline YAML string ("+e+").");o&&(u=this.evaluateScalar(u,a))}else if(u=this.parseQuotedScalar(e,a),l=a.i,null!=t&&(h=p.ltrim(e.slice(l)," "),y=h.charAt(0),!(0<=n.call(t,y))))throw new s("Unexpected characters ("+e.slice(l)+").");return a.i=l,u},e.parseQuotedScalar=function(e,t){var n,r,a;if(n=t.i,!(r=this.PATTERN_QUOTED_SCALAR.exec(e.slice(n))))throw new l("Malformed inline YAML string ("+e.slice(n)+").");return a=r[0].substr(1,r[0].length-2),a="\""===e.charAt(n)?c.unescapeDoubleQuotedString(a):c.unescapeSingleQuotedString(a),n+=r[0].length,t.i=n,a},e.parseSequence=function(e,t){var n,r,a,o,i,s;for(o=[],a=e.length,n=t.i,n+=1;n<a;){switch(t.i=n,e.charAt(n)){case"[":o.push(this.parseSequence(e,t)),n=t.i;break;case"{":o.push(this.parseMapping(e,t)),n=t.i;break;case"]":return o;case",":case" ":case"\n":break;default:if(r="\""===(i=e.charAt(n))||"'"===i,s=this.parseScalar(e,[",","]"],["\"","'"],t),n=t.i,!r&&"string"==typeof s&&(-1!==s.indexOf(": ")||-1!==s.indexOf(":\n")))try{s=this.parseMapping("{"+s+"}")}catch(e){}o.push(s),--n;}++n}throw new l("Malformed inline YAML string "+e)},e.parseMapping=function(e,t){var n,r,a,o,i,s,d;for(i={},o=e.length,r=t.i,r+=1,s=!1;r<o;){switch(t.i=r,e.charAt(r)){case" ":case",":case"\n":++r,t.i=r,s=!0;break;case"}":return i;}if(s){s=!1;continue}for(a=this.parseScalar(e,[":"," ","\n"],["\"","'"],t,!1),r=t.i,n=!1;r<o;){switch(t.i=r,e.charAt(r)){case"[":d=this.parseSequence(e,t),r=t.i,void 0===i[a]&&(i[a]=d),n=!0;break;case"{":d=this.parseMapping(e,t),r=t.i,void 0===i[a]&&(i[a]=d),n=!0;break;case":":case" ":case"\n":break;default:d=this.parseScalar(e,[",","}"],["\"","'"],t),r=t.i,void 0===i[a]&&(i[a]=d),n=!0,--r;}if(++r,n)break}}throw new l("Malformed inline YAML string "+e)},e.evaluateScalar=function(e,t){var n,r,a,o,i,l,d,c,u,m,f;switch(e=p.trim(e),u=e.toLowerCase(),u){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 2e308;case".nan":return 0/0;case"-.inf":return 2e308;default:switch(o=u.charAt(0),o){case"!":switch(i=e.indexOf(" "),l=-1===i?u:u.slice(0,i),l){case"!":return-1===i?null:parseInt(this.parseScalar(e.slice(2)));case"!str":return p.ltrim(e.slice(4));case"!!str":return p.ltrim(e.slice(5));case"!!int":return parseInt(this.parseScalar(e.slice(5)));case"!!bool":return p.parseBoolean(this.parseScalar(e.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(e.slice(7)));case"!!timestamp":return p.stringToDate(p.ltrim(e.slice(11)));default:if(null==t&&(t={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),d=t.objectDecoder,a=t.exceptionOnInvalidType,d)return f=p.rtrim(e),i=f.indexOf(" "),-1===i?d(f,null):(m=p.ltrim(f.slice(i+1)),0<m.length||(m=null),d(f.slice(0,i),m));if(a)throw new s("Custom object support when parsing a YAML file has been disabled.");return null;}break;case"0":return"0x"===e.slice(0,2)?p.hexDec(e):p.isDigits(e)?p.octDec(e):p.isNumeric(e)?parseFloat(e):e;break;case"+":return p.isDigits(e)?(c=e,n=parseInt(c),c===n+""?n:c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;case"-":return p.isDigits(e.slice(1))?"0"===e.charAt(1)?-p.octDec(e.slice(1)):(c=e.slice(1),n=parseInt(c),c===n+""?-n:-c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;default:return(r=p.stringToDate(e))?r:p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;}}},e}(),t.exports=o},{"./Escaper":809,"./Exception/DumpException":810,"./Exception/ParseException":811,"./Exception/ParseMore":812,"./Pattern":815,"./Unescaper":816,"./Utils":817}],814:[function(e,t){var n,r,a,o,i,s;n=e("./Inline"),i=e("./Pattern"),s=e("./Utils"),r=e("./Exception/ParseException"),a=e("./Exception/ParseMore"),o=function(){function t(e){this.offset=null==e?0:e,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return t.prototype.PATTERN_FOLDED_SCALAR_ALL=new i("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_FOLDED_SCALAR_END=new i("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_SEQUENCE_ITEM=new i("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),t.prototype.PATTERN_ANCHOR_VALUE=new i("^&(?<ref>[^ ]+) *(?<value>.*)"),t.prototype.PATTERN_COMPACT_NOTATION=new i("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_MAPPING_ITEM=new i("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_DECIMAL=new i("\\d+"),t.prototype.PATTERN_INDENT_SPACES=new i("^ +"),t.prototype.PATTERN_TRAILING_LINES=new i("(\n*)$"),t.prototype.PATTERN_YAML_HEADER=new i("^\\%YAML[: ][\\d\\.]+.*\n","m"),t.prototype.PATTERN_LEADING_COMMENTS=new i("^(\\#.*?\n)+","m"),t.prototype.PATTERN_DOCUMENT_MARKER_START=new i("^\\-\\-\\-.*?\n","m"),t.prototype.PATTERN_DOCUMENT_MARKER_END=new i("^\\.\\.\\.\\s*$","m"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},t.prototype.CONTEXT_NONE=0,t.prototype.CONTEXT_SEQUENCE=1,t.prototype.CONTEXT_MAPPING=2,t.prototype.parse=function(a,o,d){var p,u,f,y,c,g,h,e,b,i,_,x,v,S,T,l,k,O,E,C,w,A,m,N,P,R,D,I,M,F,j,z,U,$,B,W;for(null==o&&(o=!1),null==d&&(d=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(a).split("\n"),g=null,c=this.CONTEXT_NONE,u=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new r("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(_=N=!1,W=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===c)throw new r("You cannot define a sequence item when in a mapping");c=this.CONTEXT_SEQUENCE,null==g&&(g=[]),null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(_=m.ref,W.value=m.value),null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?(null==(F=W.leadspaces)?void 0:F.length)&&(m=this.PATTERN_COMPACT_NOTATION.exec(W.value))?(y=this.getRealCurrentLineNb(),M=new t(y),M.refs=this.refs,f=W.value,i=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(f+="\n"+this.getNextEmbedBlock(i+W.leadspaces.length+1,!0)),g.push(M.parse(f,o,d))):g.push(this.parseValue(W.value,o,d)):this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(y=this.getRealCurrentLineNb()+1,M=new t(y),M.refs=this.refs,g.push(M.parse(this.getNextEmbedBlock(null,!0),o,d))):g.push(null)}else if((W=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))&&-1===W.key.indexOf(" #")){if(this.CONTEXT_SEQUENCE===c)throw new r("You cannot define a mapping item when in a sequence");c=this.CONTEXT_MAPPING,null==g&&(g={}),n.configure(o,d);try{S=n.parseScalar(W.key)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}if("<<"!==S)null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(_=m.ref,W.value=m.value);else if(N=!0,u=!0,0===(null==(j=W.value)?void 0:j.indexOf("*"))){if(U=W.value.slice(1),null==this.refs[U])throw new r("Reference \""+U+"\" does not exist.",this.getRealCurrentLineNb()+1,this.currentLine);if($=this.refs[U],"object"!=typeof $)throw new r("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if($ instanceof Array)for(b=x=0,k=$.length;x<k;b=++x)a=$[b],null==g[R=b+""]&&(g[R]=a);else for(S in $)a=$[S],null==g[S]&&(g[S]=a)}else{if(a=null!=W.value&&""!==W.value?W.value:this.getNextEmbedBlock(),y=this.getRealCurrentLineNb()+1,M=new t(y),M.refs=this.refs,D=M.parse(a,o),"object"!=typeof D)throw new r("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(D instanceof Array)for(T=0,O=D.length;T<O;T++){if(I=D[T],"object"!=typeof I)throw new r("Merge items must be objects.",this.getRealCurrentLineNb()+1,I);if(I instanceof Array)for(b=A=0,E=I.length;A<E;b=++A)a=I[b],v=b+"",g.hasOwnProperty(v)||(g[v]=a);else for(S in I)a=I[S],g.hasOwnProperty(S)||(g[S]=a)}else for(S in D)a=D[S],g.hasOwnProperty(S)||(g[S]=a)}N||(null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?(B=this.parseValue(W.value,o,d),(u||void 0===g[S])&&(g[S]=B)):this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(y=this.getRealCurrentLineNb()+1,M=new t(y),M.refs=this.refs,B=M.parse(this.getNextEmbedBlock(),o,d),(u||void 0===g[S])&&(g[S]=B)):(u||void 0===g[S])&&(g[S]=null))}else{if(w=this.lines.length,1===w||2===w&&s.isEmpty(this.lines[1])){try{a=n.parse(this.lines[0],o,d)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}if("object"==typeof a){if(a instanceof Array)e=a[0];else for(S in a){e=a[S];break}if("string"==typeof e&&0===e.indexOf("*")){for(g=[],P=0,C=a.length;P<C;P++)p=a[P],g.push(this.refs[p.slice(1)]);a=g}}return a}if("["===(z=s.ltrim(a).charAt(0))||"{"===z)try{return n.parse(a,o,d)}catch(e){throw h=e,h.parsedLine=this.getRealCurrentLineNb()+1,h.snippet=this.currentLine,h}throw new r("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(_)if(g instanceof Array)this.refs[_]=g[g.length-1];else{for(S in l=null,g)l=S;this.refs[_]=g[l]}}return s.isEmpty(g)?null:g},t.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},t.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-s.ltrim(this.currentLine," ").length},t.prototype.getNextEmbedBlock=function(e,t){var n,a,o,i,l,d,c;if(null==e&&(e=null),null==t&&(t=!1),this.moveToNextLine(),null!=e)i=e;else if(i=this.getCurrentLineIndentation(),c=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===i&&!c)throw new r("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine);for(n=[this.currentLine.slice(i)],t||(o=this.isStringUnIndentedCollectionItem(this.currentLine)),d=this.PATTERN_FOLDED_SCALAR_END,l=!d.test(this.currentLine);this.moveToNextLine();)if(a=this.getCurrentLineIndentation(),a===i&&(l=!d.test(this.currentLine)),!(l&&this.isCurrentLineComment())){if(this.isCurrentLineBlank()){n.push(this.currentLine.slice(i));continue}if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&a===i){this.moveToPreviousLine();break}if(a>=i)n.push(this.currentLine.slice(i));else if("#"===s.ltrim(this.currentLine).charAt(0));else if(0===a){this.moveToPreviousLine();break}else throw new r("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}return n.join("\n")},t.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},t.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},t.prototype.parseValue=function(t,o,i){var l,e,d,c,p,u,m,f;if(0===t.indexOf("*")){if(p=t.indexOf("#"),t=-1===p?t.slice(1):t.substr(1,p-2),void 0===this.refs[t])throw new r("Reference \""+t+"\" does not exist.",this.currentLine);return this.refs[t]}if(d=this.PATTERN_FOLDED_SCALAR_ALL.exec(t))return c=null==(u=d.modifiers)?"":u,e=Math.abs(parseInt(c)),isNaN(e)&&(e=0),f=this.parseFoldedScalar(d.separator,this.PATTERN_DECIMAL.replace(c,""),e),null==d.type?f:(n.configure(o,i),n.parseScalar(d.type+" "+f));if("["===(m=t.charAt(0))||"{"===m||"\""===m||"'"===m)for(;;)try{return n.parse(t,o,i)}catch(e){if(l=e,l instanceof a&&this.moveToNextLine())t+="\n"+s.trim(this.currentLine," ");else throw l.parsedLine=this.getRealCurrentLineNb()+1,l.snippet=this.currentLine,l}else return this.isNextLineIndented()&&(t+="\n"+this.getNextEmbedBlock()),n.parse(t,o,i)},t.prototype.parseFoldedScalar=function(e,n,r){var a,o,l,d,c,p,u,m,f,y;if(null==n&&(n=""),null==r&&(r=0),u=this.moveToNextLine(),!u)return"";for(a=this.isCurrentLineBlank(),y="";u&&a;)(u=this.moveToNextLine())&&(y+="\n",a=this.isCurrentLineBlank());if(0===r&&(c=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(r=c[0].length),0<r)for(m=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[r],null==m&&(m=new i("^ {"+r+"}(.*)$"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[r]=m);u&&(a||(c=m.exec(this.currentLine)));)y+=a?this.currentLine.slice(r):c[1],(u=this.moveToNextLine())&&(y+="\n",a=this.isCurrentLineBlank());else u&&(y+="\n");if(u&&this.moveToPreviousLine(),">"===e){for(p="",f=y.split("\n"),(o=0,l=f.length);o<l;o++)d=f[o],0===d.length||" "===d.charAt(0)?p=s.rtrim(p," ")+d+"\n":p+=d+" ";y=p}return"+"!==n&&(y=s.rtrim(y)),""===n?y=this.PATTERN_TRAILING_LINES.replace(y,"\n"):"-"===n&&(y=this.PATTERN_TRAILING_LINES.replace(y,"")),y},t.prototype.isNextLineIndented=function(e){var t,n,r;if(null==e&&(e=!0),n=this.getCurrentLineIndentation(),t=!this.moveToNextLine(),e)for(;!t&&this.isCurrentLineEmpty();)t=!this.moveToNextLine();else for(;!t&&this.isCurrentLineBlank();)t=!this.moveToNextLine();return!t&&(r=!1,this.getCurrentLineIndentation()>n&&(r=!0),this.moveToPreviousLine(),r)},t.prototype.isCurrentLineEmpty=function(){var e;return e=s.trim(this.currentLine," "),0===e.length||"#"===e.charAt(0)},t.prototype.isCurrentLineBlank=function(){return""===s.trim(this.currentLine," ")},t.prototype.isCurrentLineComment=function(){var e;return e=s.ltrim(this.currentLine," "),"#"===e.charAt(0)},t.prototype.cleanup=function(e){var t,n,r,a,o,i,l,d,c,p,u,m,f,y;for(-1!==e.indexOf("\r")&&(e=e.split("\r\n").join("\n").split("\r").join("\n")),t=0,p=this.PATTERN_YAML_HEADER.replaceAll(e,""),e=p[0],t=p[1],this.offset+=t,u=this.PATTERN_LEADING_COMMENTS.replaceAll(e,"",1),y=u[0],t=u[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(y,"\n"),e=y),m=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(e,"",1),y=m[0],t=m[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(y,"\n"),e=y,e=this.PATTERN_DOCUMENT_MARKER_END.replace(e,"")),c=e.split("\n"),f=-1,(a=0,i=c.length);a<i;a++)(d=c[a],0!==s.trim(d," ").length)&&(r=d.length-s.ltrim(d).length,(-1===f||r<f)&&(f=r));if(0<f){for(n=o=0,l=c.length;o<l;n=++o)d=c[n],c[n]=d.slice(f);e=c.join("\n")}return e},t.prototype.isNextLineUnIndentedCollection=function(e){var t,n;for(null==e&&(e=null),null==e&&(e=this.getCurrentLineIndentation()),t=this.moveToNextLine();t&&this.isCurrentLineEmpty();)t=this.moveToNextLine();return!1!==t&&(n=!1,this.getCurrentLineIndentation()===e&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n)},t.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},t}(),t.exports=o},{"./Exception/ParseException":811,"./Exception/ParseMore":812,"./Inline":813,"./Pattern":815,"./Utils":817}],815:[function(e,t){var n;n=function(){function e(e,t){var n,r,a,o,i,s,l,d,c;for(null==t&&(t=""),a="",i=e.length,s=null,r=0,o=0;o<i;){if(n=e.charAt(o),"\\"===n)a+=e.slice(o,+(o+1)+1||9e9),o++;else if("("!==n)a+=n;else if(!(o<i-2))a+=n;else if(d=e.slice(o,+(o+2)+1||9e9),"(?:"===d)o+=2,a+=d;else if("(?<"===d)for(r++,o+=2,l="";o+1<i;){if(c=e.charAt(o+1),">"===c){a+="(",o++,0<l.length&&(null==s&&(s={}),s[l]=r);break}else l+=c;o++}else a+=n,r++;o++}this.rawRegex=e,this.cleanedRegex=a,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=s}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,n,r,a;if(this.regex.lastIndex=0,n=this.regex.exec(e),null==n)return null;if(null!=this.mapping)for(r in a=this.mapping,a)t=a[r],n[r]=n[t];return n},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,n){var r;for(null==n&&(n=0),this.regex.lastIndex=0,r=0;this.regex.test(e)&&(0===n||r<n);)this.regex.lastIndex=0,e=e.replace(this.regex,t),r++;return[e,r]},e}(),t.exports=n},{}],816:[function(e,t){var n,r,a;a=e("./Utils"),n=e("./Pattern"),r=function(){function e(){}return e.PATTERN_ESCAPED_CHARACTER=new n("\\\\([0abt\tnvfre \"\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})"),e.unescapeSingleQuotedString=function(e){return e.replace(/\'\'/g,"'")},e.unescapeDoubleQuotedString=function(e){return null==this._unescapeCallback&&(this._unescapeCallback=function(e){return function(t){return e.unescapeCharacter(t)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(e,this._unescapeCallback)},e.unescapeCharacter=function(e){var t;switch(t=String.fromCharCode,e.charAt(1)){case"0":return t(0);case"a":return t(7);case"b":return t(8);case"t":return"\t";case"\t":return"\t";case"n":return"\n";case"v":return t(11);case"f":return t(12);case"r":return t(13);case"e":return t(27);case" ":return" ";case"\"":return"\"";case"/":return"/";case"\\":return"\\";case"N":return t(133);case"_":return t(160);case"L":return t(8232);case"P":return t(8233);case"x":return a.utf8chr(a.hexDec(e.substr(2,2)));case"u":return a.utf8chr(a.hexDec(e.substr(2,4)));case"U":return a.utf8chr(a.hexDec(e.substr(2,8)));default:return"";}},e}(),t.exports=r},{"./Pattern":815,"./Utils":817}],817:[function(e,t){var n={}.hasOwnProperty,r,a;r=e("./Pattern"),a=function(){function t(){}return t.REGEX_LEFT_TRIM_BY_CHAR={},t.REGEX_RIGHT_TRIM_BY_CHAR={},t.REGEX_SPACES=/\s+/g,t.REGEX_DIGITS=/^\d+$/,t.REGEX_OCTAL=/[^0-7]/gi,t.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,t.PATTERN_DATE=new r("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),t.LOCAL_TIMEZONE_OFFSET=1e3*(60*new Date().getTimezoneOffset()),t.trim=function(e,t){var n,r;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,r=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==r&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=r=new RegExp(t+""+t+"*$")),r.lastIndex=0,e.replace(n,"").replace(r,"")},t.ltrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,e.replace(n,"")},t.rtrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=n=new RegExp(t+""+t+"*$")),n.lastIndex=0,e.replace(n,"")},t.isEmpty=function(e){return!e||""===e||"0"===e||e instanceof Array&&0===e.length||this.isEmptyObject(e)},t.isEmptyObject=function(e){var t;return e instanceof Object&&0===function(){var r;for(t in r=[],e)n.call(e,t)&&r.push(t);return r}().length},t.subStrCount=function(e,t,n,r){var a,o,i,s,l,d;for(a=0,e=""+e,t=""+t,null!=n&&(e=e.slice(n)),null!=r&&(e=e.slice(0,r)),s=e.length,d=t.length,(o=i=0,l=s);0<=l?i<l:i>l;o=0<=l?++i:--i)t===e.slice(o,d)&&(a++,o+=d-1);return a},t.isDigits=function(e){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(e)},t.octDec=function(e){return this.REGEX_OCTAL.lastIndex=0,parseInt((e+"").replace(this.REGEX_OCTAL,""),8)},t.hexDec=function(e){return this.REGEX_HEXADECIMAL.lastIndex=0,e=this.trim(e),"0x"===(e+"").slice(0,2)&&(e=(e+"").slice(2)),parseInt((e+"").replace(this.REGEX_HEXADECIMAL,""),16)},t.utf8chr=function(e){var t;return t=String.fromCharCode,128>(e%=2097152)?t(e):2048>e?t(192|e>>6)+t(128|63&e):65536>e?t(224|e>>12)+t(128|63&e>>6)+t(128|63&e):t(240|e>>18)+t(128|63&e>>12)+t(128|63&e>>6)+t(128|63&e)},t.parseBoolean=function(e,t){var n;return null==t&&(t=!0),"string"==typeof e?(n=e.toLowerCase(),(t||"no"!==n)&&"0"!==n&&"false"!==n&&""!==n):!!e},t.isNumeric=function(e){return this.REGEX_SPACES.lastIndex=0,"number"==typeof e||"string"==typeof e&&!isNaN(e)&&""!==e.replace(this.REGEX_SPACES,"")},t.stringToDate=function(e){var t,n,r,a,o,i,s,l,d,c,p,u;if(null==e||!e.length)return null;if(o=this.PATTERN_DATE.exec(e),!o)return null;if(u=parseInt(o.year,10),s=parseInt(o.month,10)-1,n=parseInt(o.day,10),null==o.hour)return t=new Date(Date.UTC(u,s,n)),t;if(a=parseInt(o.hour,10),i=parseInt(o.minute,10),l=parseInt(o.second,10),null!=o.fraction){for(r=o.fraction.slice(0,3);3>r.length;)r+="0";r=parseInt(r,10)}else r=0;return null!=o.tz&&(d=parseInt(o.tz_hour,10),c=null==o.tz_minute?0:parseInt(o.tz_minute,10),p=6e4*(60*d+c),"-"===o.tz_sign&&(p*=-1)),t=new Date(Date.UTC(u,s,n,a,i,l,r)),p&&t.setTime(t.getTime()-p),t},t.strRepeat=function(e,t){var n,r;for(r="",n=0;n<t;)r+=e,n++;return r},t.getStringFromFile=function(t,n){var r,a,o,i,s,l,d,c;if(null==n&&(n=null),c=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)c=new XMLHttpRequest;else if(window.ActiveXObject)for(l=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],o=0,i=l.length;o<i;o++){s=l[o];try{c=new ActiveXObject(s)}catch(e){}}return null==c?(d=e,a=d("fs"),null==n?(r=a.readFileSync(t),null==r?null:r+""):a.readFile(t,function(e,t){return e?n(null):n(t+"")})):null==n?(c.open("GET",t,!1),c.send(null),200===c.status||0===c.status?c.responseText:null):(c.onreadystatechange=function(){if(4===c.readyState)return 200===c.status||0===c.status?n(c.responseText):n(null)},c.open("GET",t,!0),c.send(null))},t}(),t.exports=a},{"./Pattern":815}],818:[function(e,t){var n,r,a,o;r=e("./Parser"),n=e("./Dumper"),a=e("./Utils"),o=function(){function e(){}return e.parse=function(e,t,n){return null==t&&(t=!1),null==n&&(n=null),new r().parse(e,t,n)},e.parseFile=function(e,t,n,r){var o;return null==t&&(t=null),null==n&&(n=!1),null==r&&(r=null),null==t?(o=a.getStringFromFile(e),null==o?null:this.parse(o,n,r)):a.getStringFromFile(e,function(e){return function(a){var o;o=null,null!=a&&(o=e.parse(a,n,r)),t(o)}}(this))},e.dump=function(e,t,r,a,o){var i;return null==t&&(t=2),null==r&&(r=4),null==a&&(a=!1),null==o&&(o=null),i=new n,i.indentation=r,i.dump(e,t,0,a,o)},e.stringify=function(e,t,n,r,a){return this.dump(e,t,n,r,a)},e.load=function(e,t,n,r){return this.parseFile(e,t,n,r)},e}(),"undefined"!=typeof window&&null!==window&&(window.YAML=o),("undefined"==typeof window||null===window)&&(this.YAML=o),t.exports=o},{"./Dumper":808,"./Parser":814,"./Utils":817}],819:[function(e){"use strict";var t=e("./util/create-vega-views"),n=function(e){return e&&e.__esModule?e:{default:e}}(t);window.addEventListener("DOMContentLoaded",()=>{const e={urls:["./specs/world.vg.json","./specs/spec4a.json"],cssClass:"view",container:document.getElementById("container")};(0,n.default)(e).then((e)=>console.log(e))})},{"./util/create-vega-views":820}],820:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("ramda"),o=r(a),i=e("leaflet"),s=r(i),l=e("vega"),d=e("vega-tooltip"),c=e("./fetch-helpers"),p=e("./leaflet-vega"),u=r(p);const m=e("rxjs/Rx");(0,u.default)();const f=async(e,t,n)=>{const r=t.signals||[],a=o.default.find(o.default.propEq("name","zoom"))(r),i=o.default.find(o.default.propEq("name","latitude"))(r),l=o.default.find(o.default.propEq("name","longitude"))(r);if(o.default.isNil(a)||o.default.isNil(i)||o.default.isNil(l))return void console.error("incomplete map spec");const d=s.default.map(e,{zoomAnimation:!1}).setView([i.value,l.value],a.value);s.default.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"<a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors",maxZoom:18}).addTo(d),s.default.vega(n,{renderer:t.runtime.renderer||"canvas",delayRepaint:!0}).addTo(d)},y=async(e)=>{let t=0;const n={};return await Promise.all(e.map(async(e)=>{const r=await(0,c.fetchJSON)(e),a=`spec_${t}`,o=new l.View((0,l.parse)(r));r.runtime&&r.runtime.tooltipOptions&&(0,d.vega)(o,r.runtime.tooltipOptions),n[a]={id:a,spec:r,view:o},t+=1})),n},g=(e)=>{const{spec:t,view:n}=e,r={};return o.default.isNil(t.runtime)||o.default.isNil(t.runtime.publish)?r:(o.default.forEach((e)=>{try{const t=new m.Subject;n.addSignalListener(e.signal,(e,n)=>{t.next(n)}),r[e.as]=t}catch(t){console.error(t.message)}},t.runtime.publish),r)},h=(e,t)=>{const{spec:n,view:r}=e;o.default.isNil(n.runtime)||o.default.isNil(n.runtime.subscribe)||o.default.forEach((e)=>{const a=t[e.signal];return o.default.isNil(a)?void console.error(`no stream for signal "${e.signal}"`):o.default.isNil(o.default.find(o.default.propEq("name",e.as))(n.signals))?void console.error(`no signal "${e.as}" found in spec`):void a.subscribe((t)=>{r.signal(e.as,t).run()})},n.runtime.subscribe)},b=(e,t)=>{e.forEach((e,n)=>{const{id:r,spec:a,view:o}=e,i=t[n];!0===a.runtime.leaflet?f(i,a,o):o.renderer(a.runtime.renderer||"canvas").initialize(`#${r}`)})},_=(e,t,n)=>{const r=[];return e.forEach((e)=>{const a=document.createElement("div"),{id:o,spec:i}=e;a.id=o,a.className=n,a.style.width=`${i.width}px`,a.style.height=`${i.height}px`,t.appendChild(a),r.push(a)}),r};n.default=(e)=>{const{container:t,cssClass:n,urls:r}=e;return new Promise((e)=>{y(r).then((r)=>{let a={};o.default.forEach((e)=>{a=Object.assign({},a,g(e))},o.default.values(r)),o.default.forEach((e)=>{h(e,a)},o.default.values(r));const i=o.default.map((e)=>r[e],o.default.keys(r)),s=_(i,t,n);setTimeout(()=>{b(i,s),e("done")},0)})})}},{"./fetch-helpers":821,"./leaflet-vega":822,leaflet:28,ramda:31,"rxjs/Rx":348,vega:806,"vega-tooltip":800}],821:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return 200<=e.status&&300>e.status?Promise.resolve(e):Promise.reject(new Error(e.statusText))}function o(e){return e.json()}function i(e){return e.text().then((e)=>Promise.resolve(c.default.parse(e)))}function s(e){return e.text().then((e)=>Promise.resolve(u.default.parse(e)))}function l(e){return e.arrayBuffer()}Object.defineProperty(n,"__esModule",{value:!0}),n.status=a,n.json=o,n.cson=i,n.yaml=s,n.arrayBuffer=l,n.fetchJSON=function(e){return new Promise((t,n)=>{fetch(e).then(a).then(o).then((e)=>{t(e)}).catch((t)=>{n(t)})})},n.fetchCSON=function(e){return new Promise((t,n)=>{fetch(e).then(a).then(i).then((e)=>{t(e)}).catch((t)=>{n(t)})})},n.fetchYAML=function(e){return new Promise((t,n)=>{fetch(e).then(a).then(s).then((e)=>{t(e)}).catch((t)=>{n(t)})})},n.fetchJSONFiles=function(e){return new Promise((t,n)=>{const r=[],i=[];e.forEach((e)=>{r.push(fetch(e).then(a).then(o).then((e)=>e).catch(()=>{return i.push(e),null}))}),Promise.all(r).then((e)=>{const n=e.filter((e)=>null!==e);t({jsonFiles:n,errors:i})},(e)=>{n({error:e})})})},n.fetchJSONFiles2=function(e,t){return new Promise((n,r)=>{const i=[],s=[],l=[];Object.entries(e).forEach(([e,n])=>{l.push(e),i.push(fetch(t+n).then(a).then(o).then((e)=>e).catch(()=>{return s.push(n),null}))}),Promise.all(i).then((e)=>{const t={};e.forEach((e,n)=>{null!==e&&(t[l[n]]=e)}),n({jsonFiles:t,errors:s})},(e)=>{r({error:e})})})},n.fetchArraybuffer=function(e){return new Promise((t,n)=>{fetch(e).then(a).then(l).then((e)=>{t(e)}).catch((t)=>{n(t)})})};var d=e("cson-parser"),c=r(d),p=e("yamljs"),u=r(p)},{"cson-parser":15,yamljs:818}],822:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("leaflet"),a=function(e){return e&&e.__esModule?e:{default:e}}(r);n.default=()=>{return a.default.VegaLayer?void console.info("VegaLayer has already been initialized:",a.default.VegaLayer):void(a.default.VegaLayer=(a.default.Layer?a.default.Layer:a.default.Class).extend({options:{delayRepaint:!0},initialize:function(e,t){a.default.Util.setOptions(this,t),this.view=e},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){this.map=e,this.vegaContainer=a.default.DomUtil.create("div","leaflet-vega-container"),e._panes.overlayPane.appendChild(this.vegaContainer),this.view.initialize(this.vegaContainer);const t=(e,t)=>this.onSignalChange(e,t);return this.view.addSignalListener("latitude",t).addSignalListener("longitude",t).addSignalListener("zoom",t),e.on(this.options.delayRepaint?"moveend":"move",()=>this.update()),e.on("zoomend",()=>this.update()),this.update(!0)},onRemove:function(){this.view&&(this.view.finalize(),this.view=null);for(const e=this.vegaContainer;e.firstChild;)e.removeChild(e.firstChild)},onSignalChange:function(e,t){const n=this.map.getCenter();let r=this.map.getZoom();switch(e){case"latitude":n.lat=t;break;case"longitude":n.lng=t;break;case"zoom":r=t;break;default:return;}this.map.setView(n,r),this.update()},update:function(e){const t=this.map.containerPointToLayerPoint([0,0]);a.default.DomUtil.setPosition(this.vegaContainer,t);const n=this.map.getSize(),r=this.map.getCenter(),o=this.map.getZoom(),i=(e,t)=>{return this.view.signal(e)===t?0:(this.view.signal(e,t),1)};let s=0;return s|=i("width",n.x),s|=i("height",n.y),s|=i("latitude",r.lat),s|=i("longitude",r.lng),s|=i("zoom",o),s||e?this.view.runAsync():0}}),a.default.vega=(e,t)=>new a.default.VegaLayer(e,t))}},{leaflet:28}]},{},[819]);